import{c as gy,g as yy}from"./_commonjsHelpers-Cpj98o6Y.js";var my={4729:(a,n,t)=>{var e,r,o;/*!
* Backbone.Undo.js v0.2
* 
* Copyright (c)2013 Oliver Sartun
* Released under the MIT License
*
* Documentation and full license available at
* https://github.com/osartun/Backbone.Undo.js
*/(function(s){r=[t(5706),t(4193)],e=s,o=typeof e=="function"?e.apply(n,r):e,o!==void 0&&(a.exports=o)})(function(s,u){var c=Array.prototype.slice;function f(q,nt,H){return H.length<=4?q.call(nt,H[0],H[1],H[2],H[3]):q.apply(nt,H)}function h(q,nt){return c.call(q,nt)}function g(q,nt){return q==null?!1:(s.isArray(nt)||(nt=h(arguments,1)),s.all(nt,function(H){return H in q}))}var y=function(){var q=!1,nt=-1;function H(){nt++,q=!0,s.defer(function(){q=!1})}return function(){return q||H(),nt}}();function _(){this.registeredObjects=[],this.cidIndexes=[]}_.prototype={isRegistered:function(q){return q&&q.cid?this.registeredObjects[q.cid]:s.contains(this.registeredObjects,q)},register:function(q){return this.isRegistered(q)?!1:(q&&q.cid?(this.registeredObjects[q.cid]=q,this.cidIndexes.push(q.cid)):this.registeredObjects.push(q),!0)},unregister:function(q){if(this.isRegistered(q)){if(q&&q.cid)delete this.registeredObjects[q.cid],this.cidIndexes.splice(s.indexOf(this.cidIndexes,q.cid),1);else{var nt=s.indexOf(this.registeredObjects,q);this.registeredObjects.splice(nt,1)}return!0}return!1},get:function(){return s.map(this.cidIndexes,function(q){return this.registeredObjects[q]},this).concat(this.registeredObjects)}};function b(q,nt,H,V){for(var U=0,B=nt.length,tt;U<B;U++)if(tt=nt[U],!!tt){if(q==="on"){if(!V.objectRegistry.register(tt))continue}else if(!V.objectRegistry.unregister(tt))continue;s.isFunction(tt[q])&&tt[q]("all",H,V)}}function x(q,nt){var H=nt.type,V=nt.undoTypes,U=!V[H]||V[H][q];s.isFunction(U)&&U(nt.object,nt.before,nt.after,nt.options)}function T(q,nt,H,V,U){if(!(H.isCurrentlyUndoRedoing||q==="undo"&&H.pointer===-1||q==="redo"&&H.pointer===H.length-1)){H.isCurrentlyUndoRedoing=!0;var B,tt,A=q==="undo";for(U?tt=A&&H.pointer===H.length-1||!A&&H.pointer===-1?s.clone(H.models):c.apply(H.models,A?[0,H.pointer]:[H.pointer,H.length-1]):(B=H.at(A?H.pointer:H.pointer+1),tt=V?H.where({magicFusionIndex:B.get("magicFusionIndex")}):[B]),H.pointer+=(A?-1:1)*tt.length;B=A?tt.pop():tt.shift();)B[q]();H.isCurrentlyUndoRedoing=!1,nt.trigger(q,nt)}}function I(q,nt){var H=q.condition,V=typeof H;return V==="function"?!!f(H,q,nt):V==="boolean"?H:!0}function z(q,nt,H,V){if(q.track&&!q.isCurrentlyUndoRedoing&&nt in V&&I(V[nt],H)){var U=f(V[nt].on,V[nt],H),B;if(g(U,"object","before","after")){if(U.type=nt,U.magicFusionIndex=y(),U.undoTypes=V,q.pointer<q.length-1)for(var B=q.length-q.pointer-1;B--;)q.pop();q.pointer=q.length,q.add(U),q.length>q.maximumStackLength&&(q.shift(),q.pointer--)}}}var F={add:{undo:function(q,nt,H,V){q.remove(H,V)},redo:function(q,nt,H,V){V.index&&(V.at=V.index),q.add(H,V)},on:function(q,nt,H){return{object:nt,before:void 0,after:q,options:s.clone(H)}}},remove:{undo:function(q,nt,H,V){"index"in V&&(V.at=V.index),q.add(nt,V)},redo:function(q,nt,H,V){q.remove(nt,V)},on:function(q,nt,H){return{object:nt,before:q,after:void 0,options:s.clone(H)}}},change:{undo:function(q,nt,H,V){s.isEmpty(nt)?s.each(s.keys(H),q.unset,q):(q.set(nt),V&&V.unsetData&&V.unsetData.before&&V.unsetData.before.length&&s.each(V.unsetData.before,q.unset,q))},redo:function(q,nt,H,V){s.isEmpty(H)?s.each(s.keys(nt),q.unset,q):(q.set(H),V&&V.unsetData&&V.unsetData.after&&V.unsetData.after.length&&s.each(V.unsetData.after,q.unset,q))},on:function(q,nt){var H=q.changedAttributes(),V=s.keys(H),U=s.pick(q.previousAttributes(),V),B=s.keys(U),tt=(nt||(nt={})).unsetData={after:[],before:[]};return V.length!=B.length&&(V.length>B.length?s.each(V,function(A){A in U||tt.before.push(A)},this):s.each(B,function(A){A in H||tt.after.push(A)})),{object:q,before:U,after:H,options:s.clone(nt)}}},reset:{undo:function(q,nt,H){q.reset(nt)},redo:function(q,nt,H){q.reset(H)},on:function(q,nt){return{object:q,before:nt.previousModels,after:s.clone(q.models)}}}};function W(){}W.prototype=F;function ct(q,nt,H,V){if(typeof nt=="object")return s.each(nt,function(U,B){q===2?ct(q,U,H,V):ct(q,B,U,H)});switch(q){case 0:g(H,"undo","redo","on")&&s.all(s.pick(H,"undo","redo","on"),s.isFunction)&&(V[nt]=H);break;case 1:V[nt]&&s.isObject(H)&&(V[nt]=s.extend({},V[nt],H));break;case 2:delete V[nt];break}return this}var _t=u.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(q){x("undo",this.attributes)},redo:function(q){x("redo",this.attributes)}}),xt=u.Collection.extend({model:_t,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(q){this.maximumStackLength=q}}),ut=u.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(q){this.stack=new xt,this.objectRegistry=new _,this.undoTypes=new W,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(nt,H){this.stack.setMaxLength(H)},this),q&&q.track&&this.startTracking(),q&&q.register&&(s.isArray(q.register)||s.isArguments(q.register)?f(this.register,this,q.register):this.register(q.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(q){z(this.stack,q,h(arguments,1),this.undoTypes)},register:function(){b("on",arguments,this._addToStack,this)},unregister:function(){b("off",arguments,this._addToStack,this)},unregisterAll:function(){f(this.unregister,this,this.objectRegistry.get())},undo:function(q){T("undo",this,this.stack,q)},undoAll:function(){T("undo",this,this.stack,!1,!0)},redo:function(q){T("redo",this,this.stack,q)},redoAll:function(){T("redo",this,this.stack,!1,!0)},isAvailable:function(q){var nt=this.stack,H=nt.length;switch(q){case"undo":return H>0&&nt.pointer>-1;case"redo":return H>0&&nt.pointer<H-1;default:return!1}},merge:function(q){for(var nt=s.isArray(q)?q:h(arguments),H;H=nt.pop();)H instanceof ut&&H.stack instanceof xt&&(H.stack=this.stack)},addUndoType:function(q,nt){ct(0,q,nt,this.undoTypes)},changeUndoType:function(q,nt){ct(1,q,nt,this.undoTypes)},removeUndoType:function(q){ct(2,q,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return s.extend(ut,{defaults:function(q){s.extend(ut.prototype.defaults,q)},addUndoType:function(q,nt){ct(0,q,nt,F)},changeUndoType:function(q,nt){ct(1,q,nt,F)},removeUndoType:function(q){ct(2,q,void 0,F)}}),u.UndoManager=ut})},4193:(a,n,t)=>{var e,r;(function(o){var s=typeof self=="object"&&self.self===self&&self||typeof t.g=="object"&&t.g.global===t.g&&t.g;e=[t(5706),t(6411),n],r=(function(u,c,f){s.Backbone=o(s,f,u,c)}).apply(n,e),r!==void 0&&(a.exports=r)})(function(o,s,u,c){var f=o.Backbone,h=Array.prototype.slice;s.VERSION="1.4.1",s.$=c,s.noConflict=function(){return o.Backbone=f,this},s.emulateHTTP=!1,s.emulateJSON=!1;var g=s.Events={},y=/\s+/,_,b=function(P,N,$,at,mt){var K=0,dt;if($&&typeof $=="object")for(at!==void 0&&("context"in mt)&&mt.context===void 0&&(mt.context=at),dt=u.keys($);K<dt.length;K++)N=b(P,N,dt[K],$[dt[K]],mt);else if($&&y.test($))for(dt=$.split(y);K<dt.length;K++)N=P(N,dt[K],at,mt);else N=P(N,$,at,mt);return N};g.on=function(P,N,$){if(this._events=b(x,this._events||{},P,N,{context:$,ctx:this,listening:_}),_){var at=this._listeners||(this._listeners={});at[_.id]=_,_.interop=!1}return this},g.listenTo=function(P,N,$){if(!P)return this;var at=P._listenId||(P._listenId=u.uniqueId("l")),mt=this._listeningTo||(this._listeningTo={}),K=_=mt[at];K||(this._listenId||(this._listenId=u.uniqueId("l")),K=_=mt[at]=new ct(this,P));var dt=T(P,N,$,this);if(_=void 0,dt)throw dt;return K.interop&&K.on(N,$),this};var x=function(P,N,$,at){if($){var mt=P[N]||(P[N]=[]),K=at.context,dt=at.ctx,it=at.listening;it&&it.count++,mt.push({callback:$,context:K,ctx:K||dt,listening:it})}return P},T=function(P,N,$,at){try{P.on(N,$,at)}catch(mt){return mt}};g.off=function(P,N,$){return this._events?(this._events=b(I,this._events,P,N,{context:$,listeners:this._listeners}),this):this},g.stopListening=function(P,N,$){var at=this._listeningTo;if(!at)return this;for(var mt=P?[P._listenId]:u.keys(at),K=0;K<mt.length;K++){var dt=at[mt[K]];if(!dt)break;dt.obj.off(N,$,this),dt.interop&&dt.off(N,$)}return u.isEmpty(at)&&(this._listeningTo=void 0),this};var I=function(P,N,$,at){if(P){var mt=at.context,K=at.listeners,dt=0,it;if(!N&&!mt&&!$){for(it=u.keys(K);dt<it.length;dt++)K[it[dt]].cleanup();return}for(it=N?[N]:u.keys(P);dt<it.length;dt++){N=it[dt];var ne=P[N];if(!ne)break;for(var we=[],ge=0;ge<ne.length;ge++){var R=ne[ge];if($&&$!==R.callback&&$!==R.callback._callback||mt&&mt!==R.context)we.push(R);else{var et=R.listening;et&&et.off(N,$)}}we.length?P[N]=we:delete P[N]}return P}};g.once=function(P,N,$){var at=b(z,{},P,N,this.off.bind(this));return typeof P=="string"&&$==null&&(N=void 0),this.on(at,N,$)},g.listenToOnce=function(P,N,$){var at=b(z,{},N,$,this.stopListening.bind(this,P));return this.listenTo(P,at)};var z=function(P,N,$,at){if($){var mt=P[N]=u.once(function(){at(N,mt),$.apply(this,arguments)});mt._callback=$}return P};g.trigger=function(P){if(!this._events)return this;for(var N=Math.max(0,arguments.length-1),$=Array(N),at=0;at<N;at++)$[at]=arguments[at+1];return b(F,this._events,P,void 0,$),this};var F=function(P,N,$,at){if(P){var mt=P[N],K=P.all;mt&&K&&(K=K.slice()),mt&&W(mt,at),K&&W(K,[N].concat(at))}return P},W=function(P,N){var $,at=-1,mt=P.length,K=N[0],dt=N[1],it=N[2];switch(N.length){case 0:for(;++at<mt;)($=P[at]).callback.call($.ctx);return;case 1:for(;++at<mt;)($=P[at]).callback.call($.ctx,K);return;case 2:for(;++at<mt;)($=P[at]).callback.call($.ctx,K,dt);return;case 3:for(;++at<mt;)($=P[at]).callback.call($.ctx,K,dt,it);return;default:for(;++at<mt;)($=P[at]).callback.apply($.ctx,N);return}},ct=function(P,N){this.id=P._listenId,this.listener=P,this.obj=N,this.interop=!0,this.count=0,this._events=void 0};ct.prototype.on=g.on,ct.prototype.off=function(P,N){var $;this.interop?(this._events=b(I,this._events,P,N,{context:void 0,listeners:void 0}),$=!this._events):(this.count--,$=this.count===0),$&&this.cleanup()},ct.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},g.bind=g.on,g.unbind=g.off,u.extend(s,g);var _t=s.Model=function(P,N){var $=P||{};N||(N={}),this.preinitialize.apply(this,arguments),this.cid=u.uniqueId(this.cidPrefix),this.attributes={},N.collection&&(this.collection=N.collection),N.parse&&($=this.parse($,N)||{});var at=u.result(this,"defaults");$=u.defaults(u.extend({},at,$),at),this.set($,N),this.changed={},this.initialize.apply(this,arguments)};u.extend(_t.prototype,g,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(P){return u.clone(this.attributes)},sync:function(){return s.sync.apply(this,arguments)},get:function(P){return this.attributes[P]},escape:function(P){return u.escape(this.get(P))},has:function(P){return this.get(P)!=null},matches:function(P){return!!u.iteratee(P,this)(this.attributes)},set:function(P,N,$){if(P==null)return this;var at;if(typeof P=="object"?(at=P,$=N):(at={})[P]=N,$||($={}),!this._validate(at,$))return!1;var mt=$.unset,K=$.silent,dt=[],it=this._changing;this._changing=!0,it||(this._previousAttributes=u.clone(this.attributes),this.changed={});var ne=this.attributes,we=this.changed,ge=this._previousAttributes;for(var R in at)N=at[R],u.isEqual(ne[R],N)||dt.push(R),u.isEqual(ge[R],N)?delete we[R]:we[R]=N,mt?delete ne[R]:ne[R]=N;if(this.idAttribute in at){var et=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,et,$)}if(!K){dt.length&&(this._pending=$);for(var D=0;D<dt.length;D++)this.trigger("change:"+dt[D],this,ne[dt[D]],$)}if(it)return this;if(!K)for(;this._pending;)$=this._pending,this._pending=!1,this.trigger("change",this,$);return this._pending=!1,this._changing=!1,this},unset:function(P,N){return this.set(P,void 0,u.extend({},N,{unset:!0}))},clear:function(P){var N={};for(var $ in this.attributes)N[$]=void 0;return this.set(N,u.extend({},P,{unset:!0}))},hasChanged:function(P){return P==null?!u.isEmpty(this.changed):u.has(this.changed,P)},changedAttributes:function(P){if(!P)return this.hasChanged()?u.clone(this.changed):!1;var N=this._changing?this._previousAttributes:this.attributes,$={},at;for(var mt in P){var K=P[mt];u.isEqual(N[mt],K)||($[mt]=K,at=!0)}return at?$:!1},previous:function(P){return P==null||!this._previousAttributes?null:this._previousAttributes[P]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(P){P=u.extend({parse:!0},P);var N=this,$=P.success;return P.success=function(at){var mt=P.parse?N.parse(at,P):at;if(!N.set(mt,P))return!1;$&&$.call(P.context,N,at,P),N.trigger("sync",N,at,P)},ie(this,P),this.sync("read",this,P)},save:function(P,N,$){var at;P==null||typeof P=="object"?(at=P,$=N):(at={})[P]=N,$=u.extend({validate:!0,parse:!0},$);var mt=$.wait;if(at&&!mt){if(!this.set(at,$))return!1}else if(!this._validate(at,$))return!1;var K=this,dt=$.success,it=this.attributes;$.success=function(ge){K.attributes=it;var R=$.parse?K.parse(ge,$):ge;if(mt&&(R=u.extend({},at,R)),R&&!K.set(R,$))return!1;dt&&dt.call($.context,K,ge,$),K.trigger("sync",K,ge,$)},ie(this,$),at&&mt&&(this.attributes=u.extend({},it,at));var ne=this.isNew()?"create":$.patch?"patch":"update";ne==="patch"&&!$.attrs&&($.attrs=at);var we=this.sync(ne,this,$);return this.attributes=it,we},destroy:function(P){P=P?u.clone(P):{};var N=this,$=P.success,at=P.wait,mt=function(){N.stopListening(),N.trigger("destroy",N,N.collection,P)};P.success=function(dt){at&&mt(),$&&$.call(P.context,N,dt,P),N.isNew()||N.trigger("sync",N,dt,P)};var K=!1;return this.isNew()?u.defer(P.success):(ie(this,P),K=this.sync("delete",this,P)),at||mt(),K},url:function(){var P=u.result(this,"urlRoot")||u.result(this.collection,"url")||he();if(this.isNew())return P;var N=this.get(this.idAttribute);return P.replace(/[^\/]$/,"$&/")+encodeURIComponent(N)},parse:function(P,N){return P},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(P){return this._validate({},u.extend({},P,{validate:!0}))},_validate:function(P,N){if(!N.validate||!this.validate)return!0;P=u.extend({},this.attributes,P);var $=this.validationError=this.validate(P,N)||null;return $?(this.trigger("invalid",this,$,u.extend(N,{validationError:$})),!1):!0}});var xt=s.Collection=function(P,N){N||(N={}),this.preinitialize.apply(this,arguments),N.model&&(this.model=N.model),N.comparator!==void 0&&(this.comparator=N.comparator),this._reset(),this.initialize.apply(this,arguments),P&&this.reset(P,u.extend({silent:!0},N))},ut={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1},nt=function(P,N,$){$=Math.min(Math.max($,0),P.length);var at=Array(P.length-$),mt=N.length,K;for(K=0;K<at.length;K++)at[K]=P[K+$];for(K=0;K<mt;K++)P[K+$]=N[K];for(K=0;K<at.length;K++)P[K+mt+$]=at[K]};u.extend(xt.prototype,g,{model:_t,preinitialize:function(){},initialize:function(){},toJSON:function(P){return this.map(function(N){return N.toJSON(P)})},sync:function(){return s.sync.apply(this,arguments)},add:function(P,N){return this.set(P,u.extend({merge:!1},N,q))},remove:function(P,N){N=u.extend({},N);var $=!u.isArray(P);P=$?[P]:P.slice();var at=this._removeModels(P,N);return!N.silent&&at.length&&(N.changes={added:[],merged:[],removed:at},this.trigger("update",this,N)),$?at[0]:at},set:function(P,N){if(P!=null){N=u.extend({},ut,N),N.parse&&!this._isModel(P)&&(P=this.parse(P,N)||[]);var $=!u.isArray(P);P=$?[P]:P.slice();var at=N.at;at!=null&&(at=+at),at>this.length&&(at=this.length),at<0&&(at+=this.length+1);var mt=[],K=[],dt=[],it=[],ne={},we=N.add,ge=N.merge,R=N.remove,et=!1,D=this.comparator&&at==null&&N.sort!==!1,St=u.isString(this.comparator)?this.comparator:null,vt,Lt;for(Lt=0;Lt<P.length;Lt++){vt=P[Lt];var Xt=this.get(vt);if(Xt){if(ge&&vt!==Xt){var Yt=this._isModel(vt)?vt.attributes:vt;N.parse&&(Yt=Xt.parse(Yt,N)),Xt.set(Yt,N),dt.push(Xt),D&&!et&&(et=Xt.hasChanged(St))}ne[Xt.cid]||(ne[Xt.cid]=!0,mt.push(Xt)),P[Lt]=Xt}else we&&(vt=P[Lt]=this._prepareModel(vt,N),vt&&(K.push(vt),this._addReference(vt,N),ne[vt.cid]=!0,mt.push(vt)))}if(R){for(Lt=0;Lt<this.length;Lt++)vt=this.models[Lt],ne[vt.cid]||it.push(vt);it.length&&this._removeModels(it,N)}var Ut=!1,ae=!D&&we&&R;if(mt.length&&ae?(Ut=this.length!==mt.length||u.some(this.models,function(Se,Ae){return Se!==mt[Ae]}),this.models.length=0,nt(this.models,mt,0),this.length=this.models.length):K.length&&(D&&(et=!0),nt(this.models,K,at??this.length),this.length=this.models.length),et&&this.sort({silent:!0}),!N.silent){for(Lt=0;Lt<K.length;Lt++)at!=null&&(N.index=at+Lt),vt=K[Lt],vt.trigger("add",vt,this,N);(et||Ut)&&this.trigger("sort",this,N),(K.length||it.length||dt.length)&&(N.changes={added:K,removed:it,merged:dt},this.trigger("update",this,N))}return $?P[0]:P}},reset:function(P,N){N=N?u.clone(N):{};for(var $=0;$<this.models.length;$++)this._removeReference(this.models[$],N);return N.previousModels=this.models,this._reset(),P=this.add(P,u.extend({silent:!0},N)),N.silent||this.trigger("reset",this,N),P},push:function(P,N){return this.add(P,u.extend({at:this.length},N))},pop:function(P){var N=this.at(this.length-1);return this.remove(N,P)},unshift:function(P,N){return this.add(P,u.extend({at:0},N))},shift:function(P){var N=this.at(0);return this.remove(N,P)},slice:function(){return h.apply(this.models,arguments)},get:function(P){if(P!=null)return this._byId[P]||this._byId[this.modelId(this._isModel(P)?P.attributes:P,P.idAttribute)]||P.cid&&this._byId[P.cid]},has:function(P){return this.get(P)!=null},at:function(P){return P<0&&(P+=this.length),this.models[P]},where:function(P,N){return this[N?"find":"filter"](P)},findWhere:function(P){return this.where(P,!0)},sort:function(P){var N=this.comparator;if(!N)throw new Error("Cannot sort a set without a comparator");P||(P={});var $=N.length;return u.isFunction(N)&&(N=N.bind(this)),$===1||u.isString(N)?this.models=this.sortBy(N):this.models.sort(N),P.silent||this.trigger("sort",this,P),this},pluck:function(P){return this.map(P+"")},fetch:function(P){P=u.extend({parse:!0},P);var N=P.success,$=this;return P.success=function(at){var mt=P.reset?"reset":"set";$[mt](at,P),N&&N.call(P.context,$,at,P),$.trigger("sync",$,at,P)},ie(this,P),this.sync("read",this,P)},create:function(P,N){N=N?u.clone(N):{};var $=N.wait;if(P=this._prepareModel(P,N),!P)return!1;$||this.add(P,N);var at=this,mt=N.success;return N.success=function(K,dt,it){$&&at.add(K,it),mt&&mt.call(it.context,K,dt,it)},P.save(null,N),P},parse:function(P,N){return P},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(P,N){return P[N||this.model.prototype.idAttribute||"id"]},values:function(){return new V(this,U)},keys:function(){return new V(this,B)},entries:function(){return new V(this,tt)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(P,N){if(this._isModel(P))return P.collection||(P.collection=this),P;N=N?u.clone(N):{},N.collection=this;var $;return this.model.prototype?$=new this.model(P,N):$=this.model(P,N),$.validationError?(this.trigger("invalid",this,$.validationError,N),!1):$},_removeModels:function(P,N){for(var $=[],at=0;at<P.length;at++){var mt=this.get(P[at]);if(mt){var K=this.indexOf(mt);this.models.splice(K,1),this.length--,delete this._byId[mt.cid];var dt=this.modelId(mt.attributes,mt.idAttribute);dt!=null&&delete this._byId[dt],N.silent||(N.index=K,mt.trigger("remove",mt,this,N)),$.push(mt),this._removeReference(mt,N)}}return $},_isModel:function(P){return P instanceof _t},_addReference:function(P,N){this._byId[P.cid]=P;var $=this.modelId(P.attributes,P.idAttribute);$!=null&&(this._byId[$]=P),P.on("all",this._onModelEvent,this)},_removeReference:function(P,N){delete this._byId[P.cid];var $=this.modelId(P.attributes,P.idAttribute);$!=null&&delete this._byId[$],this===P.collection&&delete P.collection,P.off("all",this._onModelEvent,this)},_onModelEvent:function(P,N,$,at){if(N){if((P==="add"||P==="remove")&&$!==this)return;if(P==="destroy"&&this.remove(N,at),P==="changeId"){var mt=this.modelId(N.previousAttributes(),N.idAttribute),K=this.modelId(N.attributes,N.idAttribute);mt!=null&&delete this._byId[mt],K!=null&&(this._byId[K]=N)}}this.trigger.apply(this,arguments)}});var H=typeof Symbol=="function"&&Symbol.iterator;H&&(xt.prototype[H]=xt.prototype.values);var V=function(P,N){this._collection=P,this._kind=N,this._index=0},U=1,B=2,tt=3;H&&(V.prototype[H]=function(){return this}),V.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var P=this._collection.at(this._index);this._index++;var N;if(this._kind===U)N=P;else{var $=this._collection.modelId(P.attributes,P.idAttribute);this._kind===B?N=$:N=[$,P]}return{value:N,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var A=s.View=function(P){this.cid=u.uniqueId("view"),this.preinitialize.apply(this,arguments),u.extend(this,u.pick(P,gt)),this._ensureElement(),this.initialize.apply(this,arguments)},yt=/^(\S+)\s*(.*)$/,gt=["model","collection","el","id","attributes","className","tagName","events"];u.extend(A.prototype,g,{tagName:"div",$:function(P){return this.$el.find(P)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(P){return this.undelegateEvents(),this._setElement(P),this.delegateEvents(),this},_setElement:function(P){this.$el=P instanceof s.$?P:s.$(P),this.el=this.$el[0]},delegateEvents:function(P){if(P||(P=u.result(this,"events")),!P)return this;this.undelegateEvents();for(var N in P){var $=P[N];if(u.isFunction($)||($=this[$]),!!$){var at=N.match(yt);this.delegate(at[1],at[2],$.bind(this))}}return this},delegate:function(P,N,$){return this.$el.on(P+".delegateEvents"+this.cid,N,$),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(P,N,$){return this.$el.off(P+".delegateEvents"+this.cid,N,$),this},_createElement:function(P){return document.createElement(P)},_ensureElement:function(){if(this.el)this.setElement(u.result(this,"el"));else{var P=u.extend({},u.result(this,"attributes"));this.id&&(P.id=u.result(this,"id")),this.className&&(P.class=u.result(this,"className")),this.setElement(this._createElement(u.result(this,"tagName"))),this._setAttributes(P)}},_setAttributes:function(P){this.$el.attr(P)}});var Mt=function(P,N,$,at){switch(N){case 1:return function(){return P[$](this[at])};case 2:return function(mt){return P[$](this[at],mt)};case 3:return function(mt,K){return P[$](this[at],ft(mt,this),K)};case 4:return function(mt,K,dt){return P[$](this[at],ft(mt,this),K,dt)};default:return function(){var mt=h.call(arguments);return mt.unshift(this[at]),P[$].apply(P,mt)}}},qt=function(P,N,$,at){u.each($,function(mt,K){N[K]&&(P.prototype[K]=Mt(N,mt,K,at))})},ft=function(P,N){return u.isFunction(P)?P:u.isObject(P)&&!N._isModel(P)?At(P):u.isString(P)?function($){return $.get(P)}:P},At=function(P){var N=u.matches(P);return function($){return N($.attributes)}},Ht={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},Et={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};u.each([[xt,Ht,"models"],[_t,Et,"attributes"]],function(P){var N=P[0],$=P[1],at=P[2];N.mixin=function(mt){var K=u.reduce(u.functions(mt),function(dt,it){return dt[it]=0,dt},{});qt(N,mt,K,at)},qt(N,u,$,at)}),s.sync=function(P,N,$){var at=Qt[P];u.defaults($||($={}),{emulateHTTP:s.emulateHTTP,emulateJSON:s.emulateJSON});var mt={type:at,dataType:"json"};if($.url||(mt.url=u.result(N,"url")||he()),$.data==null&&N&&(P==="create"||P==="update"||P==="patch")&&(mt.contentType="application/json",mt.data=JSON.stringify($.attrs||N.toJSON($))),$.emulateJSON&&(mt.contentType="application/x-www-form-urlencoded",mt.data=mt.data?{model:mt.data}:{}),$.emulateHTTP&&(at==="PUT"||at==="DELETE"||at==="PATCH")){mt.type="POST",$.emulateJSON&&(mt.data._method=at);var K=$.beforeSend;$.beforeSend=function(ne){if(ne.setRequestHeader("X-HTTP-Method-Override",at),K)return K.apply(this,arguments)}}mt.type!=="GET"&&!$.emulateJSON&&(mt.processData=!1);var dt=$.error;$.error=function(ne,we,ge){$.textStatus=we,$.errorThrown=ge,dt&&dt.call($.context,ne,we,ge)};var it=$.xhr=s.ajax(u.extend(mt,$));return N.trigger("request",N,it,$),it};var Qt={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};s.ajax=function(){return s.$.ajax.apply(s.$,arguments)};var re=s.Router=function(P){P||(P={}),this.preinitialize.apply(this,arguments),P.routes&&(this.routes=P.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},$t=/\((.*?)\)/g,zt=/(\(\?)?:\w+/g,se=/\*\w+/g,me=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(re.prototype,g,{preinitialize:function(){},initialize:function(){},route:function(P,N,$){u.isRegExp(P)||(P=this._routeToRegExp(P)),u.isFunction(N)&&($=N,N=""),$||($=this[N]);var at=this;return s.history.route(P,function(mt){var K=at._extractParameters(P,mt);at.execute($,K,N)!==!1&&(at.trigger.apply(at,["route:"+N].concat(K)),at.trigger("route",N,K),s.history.trigger("route",at,N,K))}),this},execute:function(P,N,$){P&&P.apply(this,N)},navigate:function(P,N){return s.history.navigate(P,N),this},_bindRoutes:function(){if(this.routes){this.routes=u.result(this,"routes");for(var P,N=u.keys(this.routes);(P=N.pop())!=null;)this.route(P,this.routes[P])}},_routeToRegExp:function(P){return P=P.replace(me,"\\$&").replace($t,"(?:$1)?").replace(zt,function(N,$){return $?N:"([^/?]+)"}).replace(se,"([^?]*?)"),new RegExp("^"+P+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(P,N){var $=P.exec(N).slice(1);return u.map($,function(at,mt){return mt===$.length-1?at||null:at?decodeURIComponent(at):null})}});var rt=s.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},bt=/^[#\/]|\s+$/g,Zt=/^\/+|\/+$/g,Rt=/#.*$/;rt.started=!1,u.extend(rt.prototype,g,{interval:50,atRoot:function(){var P=this.location.pathname.replace(/[^\/]$/,"$&/");return P===this.root&&!this.getSearch()},matchRoot:function(){var P=this.decodeFragment(this.location.pathname),N=P.slice(0,this.root.length-1)+"/";return N===this.root},decodeFragment:function(P){return decodeURI(P.replace(/%25/g,"%2525"))},getSearch:function(){var P=this.location.href.replace(/#.*/,"").match(/\?.+/);return P?P[0]:""},getHash:function(P){var N=(P||this).location.href.match(/#(.*)$/);return N?N[1]:""},getPath:function(){var P=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return P.charAt(0)==="/"?P.slice(1):P},getFragment:function(P){return P==null&&(this._usePushState||!this._wantsHashChange?P=this.getPath():P=this.getHash()),P.replace(bt,"")},start:function(P){if(rt.started)throw new Error("Backbone.history has already been started");if(rt.started=!0,this.options=u.extend({root:"/"},this.options,P),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Zt,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var N=this.root.slice(0,-1)||"/";return this.location.replace(N+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var $=document.body,at=$.insertBefore(this.iframe,$.firstChild).contentWindow;at.document.open(),at.document.close(),at.location.hash="#"+this.fragment}var mt=window.addEventListener||function(K,dt){return attachEvent("on"+K,dt)};if(this._usePushState?mt("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?mt("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var P=window.removeEventListener||function(N,$){return detachEvent("on"+N,$)};this._usePushState?P("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&P("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),rt.started=!1},route:function(P,N){this.handlers.unshift({route:P,callback:N})},checkUrl:function(P){var N=this.getFragment();if(N===this.fragment&&this.iframe&&(N=this.getHash(this.iframe.contentWindow)),N===this.fragment)return!1;this.iframe&&this.navigate(N),this.loadUrl()},loadUrl:function(P){return this.matchRoot()?(P=this.fragment=this.getFragment(P),u.some(this.handlers,function(N){if(N.route.test(P))return N.callback(P),!0})):!1},navigate:function(P,N){if(!rt.started)return!1;(!N||N===!0)&&(N={trigger:!!N}),P=this.getFragment(P||"");var $=this.root;(P===""||P.charAt(0)==="?")&&($=$.slice(0,-1)||"/");var at=$+P;P=P.replace(Rt,"");var mt=this.decodeFragment(P);if(this.fragment!==mt){if(this.fragment=mt,this._usePushState)this.history[N.replace?"replaceState":"pushState"]({},document.title,at);else if(this._wantsHashChange){if(this._updateHash(this.location,P,N.replace),this.iframe&&P!==this.getHash(this.iframe.contentWindow)){var K=this.iframe.contentWindow;N.replace||(K.document.open(),K.document.close()),this._updateHash(K.location,P,N.replace)}}else return this.location.assign(at);if(N.trigger)return this.loadUrl(P)}},_updateHash:function(P,N,$){if($){var at=P.href.replace(/(javascript:|#).*$/,"");P.replace(at+"#"+N)}else P.hash="#"+N}}),s.history=new rt;var oe=function(P,N){var $=this,at;return P&&u.has(P,"constructor")?at=P.constructor:at=function(){return $.apply(this,arguments)},u.extend(at,$,N),at.prototype=u.create($.prototype,P),at.prototype.constructor=at,at.__super__=$.prototype,at};_t.extend=xt.extend=re.extend=A.extend=rt.extend=oe;var he=function(){throw new Error('A "url" property or function must be specified')},ie=function(P,N){var $=N.error;N.error=function(at){$&&$.call(N.context,P,at,N),P.trigger("error",P,at,N)}};return s})},3640:(a,n,t)=>{(function(e){e(t(4408))})(function(e){e.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(o,s){return/^[;{}]$/.test(s)}}),e.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(o,s,u,c){return this.jsonMode?/^[\[,{]$/.test(s)||/^}/.test(u):s==";"&&c.lexical&&c.lexical.type==")"?!1:/^[;{}]$/.test(s)&&!/^;/.test(u)}});var r=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;e.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(o,s,u,c){var f=!1;return this.configuration=="html"&&(f=c.context?r.test(c.context.tagName):!1),!f&&(o=="tag"&&/>$/.test(s)&&c.context||/^</.test(u))}}),e.defineExtension("commentRange",function(o,s,u){var c=this,f=e.innerMode(c.getMode(),c.getTokenAt(s).state).mode;c.operation(function(){if(o)c.replaceRange(f.commentEnd,u),c.replaceRange(f.commentStart,s),s.line==u.line&&s.ch==u.ch&&c.setCursor(s.line,s.ch+f.commentStart.length);else{var h=c.getRange(s,u),g=h.indexOf(f.commentStart),y=h.lastIndexOf(f.commentEnd);g>-1&&y>-1&&y>g&&(h=h.substr(0,g)+h.substring(g+f.commentStart.length,y)+h.substr(y+f.commentEnd.length)),c.replaceRange(h,s,u)}})}),e.defineExtension("autoIndentRange",function(o,s){var u=this;this.operation(function(){for(var c=o.line;c<=s.line;c++)u.indentLine(c,"smart")})}),e.defineExtension("autoFormatRange",function(o,s){var u=this,c=u.getMode(),f=u.getRange(o,s).split(`
`),h=e.copyState(c,u.getTokenAt(o).state),g=u.getOption("tabSize"),y="",_=0,b=o.ch===0;function x(){y+=`
`,b=!0,++_}for(var T=0;T<f.length;++T){for(var I=new e.StringStream(f[T],g);!I.eol();){var z=e.innerMode(c,h),F=c.token(I,h),W=I.current();I.start=I.pos,(!b||/\S/.test(W))&&(y+=W,b=!1),!b&&z.mode.newlineAfterToken&&z.mode.newlineAfterToken(F,W,I.string.slice(I.pos)||f[T+1]||"",z.state)&&x()}!I.pos&&c.blankLine&&c.blankLine(h),!b&&T<f.length-1&&x()}u.operation(function(){u.replaceRange(y,o,s);for(var ct=o.line+1,_t=o.line+_;ct<=_t;++ct)u.indentLine(ct,"smart");u.setSelection(o,u.getCursor(!1))})})})},4408:function(a){(function(n,t){a.exports=t()})(this,function(){var n=navigator.userAgent,t=navigator.platform,e=/gecko\/\d/i.test(n),r=/MSIE \d/.test(n),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(n),s=/Edge\/(\d+)/.exec(n),u=r||o||s,c=u&&(r?document.documentMode||6:+(s||o)[1]),f=!s&&/WebKit\//.test(n),h=f&&/Qt\/\d+\.\d+/.test(n),g=!s&&/Chrome\//.test(n),y=/Opera\//.test(n),_=/Apple Computer/.test(navigator.vendor),b=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(n),x=/PhantomJS/.test(n),T=_&&(/Mobile\/\w+/.test(n)||navigator.maxTouchPoints>2),I=/Android/.test(n),z=T||I||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(n),F=T||/Mac/.test(t),W=/\bCrOS\b/.test(n),ct=/win/i.test(t),_t=y&&n.match(/Version\/(\d*\.\d*)/);_t&&(_t=Number(_t[1])),_t&&_t>=15&&(y=!1,f=!0);var xt=F&&(h||y&&(_t==null||_t<12.11)),ut=e||u&&c>=9;function q(i){return new RegExp("(^|\\s)"+i+"(?:$|\\s)\\s*")}var nt=function(i,l){var p=i.className,d=q(l).exec(p);if(d){var v=p.slice(d.index+d[0].length);i.className=p.slice(0,d.index)+(v?d[1]+v:"")}};function H(i){for(var l=i.childNodes.length;l>0;--l)i.removeChild(i.firstChild);return i}function V(i,l){return H(i).appendChild(l)}function U(i,l,p,d){var v=document.createElement(i);if(p&&(v.className=p),d&&(v.style.cssText=d),typeof l=="string")v.appendChild(document.createTextNode(l));else if(l)for(var m=0;m<l.length;++m)v.appendChild(l[m]);return v}function B(i,l,p,d){var v=U(i,l,p,d);return v.setAttribute("role","presentation"),v}var tt;document.createRange?tt=function(i,l,p,d){var v=document.createRange();return v.setEnd(d||i,p),v.setStart(i,l),v}:tt=function(i,l,p){var d=document.body.createTextRange();try{d.moveToElementText(i.parentNode)}catch{return d}return d.collapse(!0),d.moveEnd("character",p),d.moveStart("character",l),d};function A(i,l){if(l.nodeType==3&&(l=l.parentNode),i.contains)return i.contains(l);do if(l.nodeType==11&&(l=l.host),l==i)return!0;while(l=l.parentNode)}function yt(){var i;try{i=document.activeElement}catch{i=document.body||null}for(;i&&i.shadowRoot&&i.shadowRoot.activeElement;)i=i.shadowRoot.activeElement;return i}function gt(i,l){var p=i.className;q(l).test(p)||(i.className+=(p?" ":"")+l)}function Mt(i,l){for(var p=i.split(" "),d=0;d<p.length;d++)p[d]&&!q(p[d]).test(l)&&(l+=" "+p[d]);return l}var qt=function(i){i.select()};T?qt=function(i){i.selectionStart=0,i.selectionEnd=i.value.length}:u&&(qt=function(i){try{i.select()}catch{}});function ft(i){var l=Array.prototype.slice.call(arguments,1);return function(){return i.apply(null,l)}}function At(i,l,p){l||(l={});for(var d in i)i.hasOwnProperty(d)&&(p!==!1||!l.hasOwnProperty(d))&&(l[d]=i[d]);return l}function Ht(i,l,p,d,v){l==null&&(l=i.search(/[^\s\u00a0]/),l==-1&&(l=i.length));for(var m=d||0,w=v||0;;){var C=i.indexOf("	",m);if(C<0||C>=l)return w+(l-m);w+=C-m,w+=p-w%p,m=C+1}}var Et=function(){this.id=null,this.f=null,this.time=0,this.handler=ft(this.onTimeout,this)};Et.prototype.onTimeout=function(i){i.id=0,i.time<=+new Date?i.f():setTimeout(i.handler,i.time-+new Date)},Et.prototype.set=function(i,l){this.f=l;var p=+new Date+i;(!this.id||p<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,i),this.time=p)};function Qt(i,l){for(var p=0;p<i.length;++p)if(i[p]==l)return p;return-1}var re=50,$t={toString:function(){return"CodeMirror.Pass"}},zt={scroll:!1},se={origin:"*mouse"},me={origin:"+move"};function rt(i,l,p){for(var d=0,v=0;;){var m=i.indexOf("	",d);m==-1&&(m=i.length);var w=m-d;if(m==i.length||v+w>=l)return d+Math.min(w,l-v);if(v+=m-d,v+=p-v%p,d=m+1,v>=l)return d}}var bt=[""];function Zt(i){for(;bt.length<=i;)bt.push(Rt(bt)+" ");return bt[i]}function Rt(i){return i[i.length-1]}function oe(i,l){for(var p=[],d=0;d<i.length;d++)p[d]=l(i[d],d);return p}function he(i,l,p){for(var d=0,v=p(l);d<i.length&&p(i[d])<=v;)d++;i.splice(d,0,l)}function ie(){}function P(i,l){var p;return Object.create?p=Object.create(i):(ie.prototype=i,p=new ie),l&&At(l,p),p}var N=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function $(i){return/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||N.test(i))}function at(i,l){return l?l.source.indexOf("\\w")>-1&&$(i)?!0:l.test(i):$(i)}function mt(i){for(var l in i)if(i.hasOwnProperty(l)&&i[l])return!1;return!0}var K=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function dt(i){return i.charCodeAt(0)>=768&&K.test(i)}function it(i,l,p){for(;(p<0?l>0:l<i.length)&&dt(i.charAt(l));)l+=p;return l}function ne(i,l,p){for(var d=l>p?-1:1;;){if(l==p)return l;var v=(l+p)/2,m=d<0?Math.ceil(v):Math.floor(v);if(m==l)return i(m)?l:p;i(m)?p=m:l=m+d}}function we(i,l,p,d){if(!i)return d(l,p,"ltr",0);for(var v=!1,m=0;m<i.length;++m){var w=i[m];(w.from<p&&w.to>l||l==p&&w.to==l)&&(d(Math.max(w.from,l),Math.min(w.to,p),w.level==1?"rtl":"ltr",m),v=!0)}v||d(l,p,"ltr")}var ge=null;function R(i,l,p){var d;ge=null;for(var v=0;v<i.length;++v){var m=i[v];if(m.from<l&&m.to>l)return v;m.to==l&&(m.from!=m.to&&p=="before"?d=v:ge=v),m.from==l&&(m.from!=m.to&&p!="before"?d=v:ge=v)}return d??ge}var et=function(){var i="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",l="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function p(E){return E<=247?i.charAt(E):1424<=E&&E<=1524?"R":1536<=E&&E<=1785?l.charAt(E-1536):1774<=E&&E<=2220?"r":8192<=E&&E<=8203?"w":E==8204?"b":"L"}var d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,v=/[stwN]/,m=/[LRr]/,w=/[Lb1n]/,C=/[1n]/;function S(E,G,Z){this.level=E,this.from=G,this.to=Z}return function(E,G){var Z=G=="ltr"?"L":"R";if(E.length==0||G=="ltr"&&!d.test(E))return!1;for(var pt=E.length,ot=[],wt=0;wt<pt;++wt)ot.push(p(E.charCodeAt(wt)));for(var kt=0,It=Z;kt<pt;++kt){var Kt=ot[kt];Kt=="m"?ot[kt]=It:It=Kt}for(var Jt=0,Gt=Z;Jt<pt;++Jt){var ee=ot[Jt];ee=="1"&&Gt=="r"?ot[Jt]="n":m.test(ee)&&(Gt=ee,ee=="r"&&(ot[Jt]="R"))}for(var pe=1,fe=ot[0];pe<pt-1;++pe){var Oe=ot[pe];Oe=="+"&&fe=="1"&&ot[pe+1]=="1"?ot[pe]="1":Oe==","&&fe==ot[pe+1]&&(fe=="1"||fe=="n")&&(ot[pe]=fe),fe=Oe}for(var Fe=0;Fe<pt;++Fe){var br=ot[Fe];if(br==",")ot[Fe]="N";else if(br=="%"){var Xe=void 0;for(Xe=Fe+1;Xe<pt&&ot[Xe]=="%";++Xe);for(var an=Fe&&ot[Fe-1]=="!"||Xe<pt&&ot[Xe]=="1"?"1":"N",zr=Fe;zr<Xe;++zr)ot[zr]=an;Fe=Xe-1}}for(var lr=0,Kr=Z;lr<pt;++lr){var Or=ot[lr];Kr=="L"&&Or=="1"?ot[lr]="L":m.test(Or)&&(Kr=Or)}for(var vr=0;vr<pt;++vr)if(v.test(ot[vr])){var ur=void 0;for(ur=vr+1;ur<pt&&v.test(ot[ur]);++ur);for(var Je=(vr?ot[vr-1]:Z)=="L",Gr=(ur<pt?ot[ur]:Z)=="L",Ii=Je==Gr?Je?"L":"R":Z,Ro=vr;Ro<ur;++Ro)ot[Ro]=Ii;vr=ur-1}for(var Mr=[],qn,Cr=0;Cr<pt;)if(w.test(ot[Cr])){var Yu=Cr;for(++Cr;Cr<pt&&w.test(ot[Cr]);++Cr);Mr.push(new S(0,Yu,Cr))}else{var uo=Cr,ri=Mr.length,ni=G=="rtl"?1:0;for(++Cr;Cr<pt&&ot[Cr]!="L";++Cr);for(var Nr=uo;Nr<Cr;)if(C.test(ot[Nr])){uo<Nr&&(Mr.splice(ri,0,new S(1,uo,Nr)),ri+=ni);var Ni=Nr;for(++Nr;Nr<Cr&&C.test(ot[Nr]);++Nr);Mr.splice(ri,0,new S(2,Ni,Nr)),ri+=ni,uo=Nr}else++Nr;uo<Cr&&Mr.splice(ri,0,new S(1,uo,Cr))}return G=="ltr"&&(Mr[0].level==1&&(qn=E.match(/^\s+/))&&(Mr[0].from=qn[0].length,Mr.unshift(new S(0,0,qn[0].length))),Rt(Mr).level==1&&(qn=E.match(/\s+$/))&&(Rt(Mr).to-=qn[0].length,Mr.push(new S(0,pt-qn[0].length,pt)))),G=="rtl"?Mr.reverse():Mr}}();function D(i,l){var p=i.order;return p==null&&(p=i.order=et(i.text,l)),p}var St=[],vt=function(i,l,p){if(i.addEventListener)i.addEventListener(l,p,!1);else if(i.attachEvent)i.attachEvent("on"+l,p);else{var d=i._handlers||(i._handlers={});d[l]=(d[l]||St).concat(p)}};function Lt(i,l){return i._handlers&&i._handlers[l]||St}function Xt(i,l,p){if(i.removeEventListener)i.removeEventListener(l,p,!1);else if(i.detachEvent)i.detachEvent("on"+l,p);else{var d=i._handlers,v=d&&d[l];if(v){var m=Qt(v,p);m>-1&&(d[l]=v.slice(0,m).concat(v.slice(m+1)))}}}function Yt(i,l){var p=Lt(i,l);if(p.length)for(var d=Array.prototype.slice.call(arguments,2),v=0;v<p.length;++v)p[v].apply(null,d)}function Ut(i,l,p){return typeof l=="string"&&(l={type:l,preventDefault:function(){this.defaultPrevented=!0}}),Yt(i,p||l.type,i,l),fr(l)||l.codemirrorIgnore}function ae(i){var l=i._handlers&&i._handlers.cursorActivity;if(l)for(var p=i.curOp.cursorActivityHandlers||(i.curOp.cursorActivityHandlers=[]),d=0;d<l.length;++d)Qt(p,l[d])==-1&&p.push(l[d])}function Se(i,l){return Lt(i,l).length>0}function Ae(i){i.prototype.on=function(l,p){vt(this,l,p)},i.prototype.off=function(l,p){Xt(this,l,p)}}function Te(i){i.preventDefault?i.preventDefault():i.returnValue=!1}function Ye(i){i.stopPropagation?i.stopPropagation():i.cancelBubble=!0}function fr(i){return i.defaultPrevented!=null?i.defaultPrevented:i.returnValue==!1}function j(i){Te(i),Ye(i)}function J(i){return i.target||i.srcElement}function st(i){var l=i.which;return l==null&&(i.button&1?l=1:i.button&2?l=3:i.button&4&&(l=2)),F&&i.ctrlKey&&l==1&&(l=3),l}var Tt=function(){if(u&&c<9)return!1;var i=U("div");return"draggable"in i||"dragDrop"in i}(),Bt;function ce(i){if(Bt==null){var l=U("span","​");V(i,U("span",[l,document.createTextNode("x")])),i.firstChild.offsetHeight!=0&&(Bt=l.offsetWidth<=1&&l.offsetHeight>2&&!(u&&c<8))}var p=Bt?U("span","​"):U("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return p.setAttribute("cm-text",""),p}var _e;function Be(i){if(_e!=null)return _e;var l=V(i,document.createTextNode("AخA")),p=tt(l,0,1).getBoundingClientRect(),d=tt(l,1,2).getBoundingClientRect();return H(i),!p||p.left==p.right?!1:_e=d.right-p.right<3}var tr=`

b`.split(/\n/).length!=3?function(i){for(var l=0,p=[],d=i.length;l<=d;){var v=i.indexOf(`
`,l);v==-1&&(v=i.length);var m=i.slice(l,i.charAt(v-1)=="\r"?v-1:v),w=m.indexOf("\r");w!=-1?(p.push(m.slice(0,w)),l+=w+1):(p.push(m),l=v+1)}return p}:function(i){return i.split(/\r\n?|\n/)},Ue=window.getSelection?function(i){try{return i.selectionStart!=i.selectionEnd}catch{return!1}}:function(i){var l;try{l=i.ownerDocument.selection.createRange()}catch{}return!l||l.parentElement()!=i?!1:l.compareEndPoints("StartToEnd",l)!=0},pn=function(){var i=U("div");return"oncopy"in i?!0:(i.setAttribute("oncopy","return;"),typeof i.oncopy=="function")}(),We=null;function Dr(i){if(We!=null)return We;var l=V(i,U("span","x")),p=l.getBoundingClientRect(),d=tt(l,0,1).getBoundingClientRect();return We=Math.abs(p.left-d.left)>1}var Jr={},Le={};function er(i,l){arguments.length>2&&(l.dependencies=Array.prototype.slice.call(arguments,2)),Jr[i]=l}function ke(i,l){Le[i]=l}function Er(i){if(typeof i=="string"&&Le.hasOwnProperty(i))i=Le[i];else if(i&&typeof i.name=="string"&&Le.hasOwnProperty(i.name)){var l=Le[i.name];typeof l=="string"&&(l={name:l}),i=P(l,i),i.name=l.name}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(i))return Er("application/xml");if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(i))return Er("application/json")}return typeof i=="string"?{name:i}:i||{name:"null"}}function ve(i,l){l=Er(l);var p=Jr[l.name];if(!p)return ve(i,"text/plain");var d=p(i,l);if(Qr.hasOwnProperty(l.name)){var v=Qr[l.name];for(var m in v)v.hasOwnProperty(m)&&(d.hasOwnProperty(m)&&(d["_"+m]=d[m]),d[m]=v[m])}if(d.name=l.name,l.helperType&&(d.helperType=l.helperType),l.modeProps)for(var w in l.modeProps)d[w]=l.modeProps[w];return d}var Qr={};function Fr(i,l){var p=Qr.hasOwnProperty(i)?Qr[i]:Qr[i]={};At(l,p)}function or(i,l){if(l===!0)return l;if(i.copyState)return i.copyState(l);var p={};for(var d in l){var v=l[d];v instanceof Array&&(v=v.concat([])),p[d]=v}return p}function ir(i,l){for(var p;i.innerMode&&(p=i.innerMode(l),!(!p||p.mode==i));)l=p.state,i=p.mode;return p||{mode:i,state:l}}function Lr(i,l,p){return i.startState?i.startState(l,p):!0}var je=function(i,l,p){this.pos=this.start=0,this.string=i,this.tabSize=l||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=p};je.prototype.eol=function(){return this.pos>=this.string.length},je.prototype.sol=function(){return this.pos==this.lineStart},je.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},je.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},je.prototype.eat=function(i){var l=this.string.charAt(this.pos),p;if(typeof i=="string"?p=l==i:p=l&&(i.test?i.test(l):i(l)),p)return++this.pos,l},je.prototype.eatWhile=function(i){for(var l=this.pos;this.eat(i););return this.pos>l},je.prototype.eatSpace=function(){for(var i=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>i},je.prototype.skipToEnd=function(){this.pos=this.string.length},je.prototype.skipTo=function(i){var l=this.string.indexOf(i,this.pos);if(l>-1)return this.pos=l,!0},je.prototype.backUp=function(i){this.pos-=i},je.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ht(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ht(this.string,this.lineStart,this.tabSize):0)},je.prototype.indentation=function(){return Ht(this.string,null,this.tabSize)-(this.lineStart?Ht(this.string,this.lineStart,this.tabSize):0)},je.prototype.match=function(i,l,p){if(typeof i=="string"){var d=function(w){return p?w.toLowerCase():w},v=this.string.substr(this.pos,i.length);if(d(v)==d(i))return l!==!1&&(this.pos+=i.length),!0}else{var m=this.string.slice(this.pos).match(i);return m&&m.index>0?null:(m&&l!==!1&&(this.pos+=m[0].length),m)}},je.prototype.current=function(){return this.string.slice(this.start,this.pos)},je.prototype.hideFirstChars=function(i,l){this.lineStart+=i;try{return l()}finally{this.lineStart-=i}},je.prototype.lookAhead=function(i){var l=this.lineOracle;return l&&l.lookAhead(i)},je.prototype.baseToken=function(){var i=this.lineOracle;return i&&i.baseToken(this.pos)};function te(i,l){if(l-=i.first,l<0||l>=i.size)throw new Error("There is no line "+(l+i.first)+" in the document.");for(var p=i;!p.lines;)for(var d=0;;++d){var v=p.children[d],m=v.chunkSize();if(l<m){p=v;break}l-=m}return p.lines[l]}function gr(i,l,p){var d=[],v=l.line;return i.iter(l.line,p.line+1,function(m){var w=m.text;v==p.line&&(w=w.slice(0,p.ch)),v==l.line&&(w=w.slice(l.ch)),d.push(w),++v}),d}function Ke(i,l,p){var d=[];return i.iter(l,p,function(v){d.push(v.text)}),d}function yr(i,l){var p=l-i.height;if(p)for(var d=i;d;d=d.parent)d.height+=p}function Ee(i){if(i.parent==null)return null;for(var l=i.parent,p=Qt(l.lines,i),d=l.parent;d;l=d,d=d.parent)for(var v=0;d.children[v]!=l;++v)p+=d.children[v].chunkSize();return p+l.first}function Re(i,l){var p=i.first;t:do{for(var d=0;d<i.children.length;++d){var v=i.children[d],m=v.height;if(l<m){i=v;continue t}l-=m,p+=v.chunkSize()}return p}while(!i.lines);for(var w=0;w<i.lines.length;++w){var C=i.lines[w],S=C.height;if(l<S)break;l-=S}return p+w}function tn(i,l){return l>=i.first&&l<i.first+i.size}function hn(i,l){return String(i.lineNumberFormatter(l+i.firstLineNumber))}function Dt(i,l,p){if(p===void 0&&(p=null),!(this instanceof Dt))return new Dt(i,l,p);this.line=i,this.ch=l,this.sticky=p}function de(i,l){return i.line-l.line||i.ch-l.ch}function vn(i,l){return i.sticky==l.sticky&&de(i,l)==0}function M(i){return Dt(i.line,i.ch)}function Y(i,l){return de(i,l)<0?l:i}function Ct(i,l){return de(i,l)<0?i:l}function jt(i,l){return Math.max(i.first,Math.min(l,i.first+i.size-1))}function Vt(i,l){if(l.line<i.first)return Dt(i.first,0);var p=i.first+i.size-1;return l.line>p?Dt(p,te(i,p).text.length):xe(l,te(i,l.line).text.length)}function xe(i,l){var p=i.ch;return p==null||p>l?Dt(i.line,l):p<0?Dt(i.line,0):i}function Pe(i,l){for(var p=[],d=0;d<l.length;d++)p[d]=Vt(i,l[d]);return p}var ze=function(i,l){this.state=i,this.lookAhead=l},Ve=function(i,l,p,d){this.state=l,this.doc=i,this.line=p,this.maxLookAhead=d||0,this.baseTokens=null,this.baseTokenPos=1};Ve.prototype.lookAhead=function(i){var l=this.doc.getLine(this.line+i);return l!=null&&i>this.maxLookAhead&&(this.maxLookAhead=i),l},Ve.prototype.baseToken=function(i){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=i;)this.baseTokenPos+=2;var l=this.baseTokens[this.baseTokenPos+1];return{type:l&&l.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-i}},Ve.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ve.fromSaved=function(i,l,p){return l instanceof ze?new Ve(i,or(i.mode,l.state),p,l.lookAhead):new Ve(i,or(i.mode,l),p)},Ve.prototype.save=function(i){var l=i!==!1?or(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ze(l,this.maxLookAhead):l};function en(i,l,p,d){var v=[i.state.modeGen],m={};Gn(i,l.text,i.doc.mode,p,function(E,G){return v.push(E,G)},m,d);for(var w=p.state,C=function(E){p.baseTokens=v;var G=i.state.overlays[E],Z=1,pt=0;p.state=!0,Gn(i,l.text,G.mode,p,function(ot,wt){for(var kt=Z;pt<ot;){var It=v[Z];It>ot&&v.splice(Z,1,ot,v[Z+1],It),Z+=2,pt=Math.min(ot,It)}if(wt)if(G.opaque)v.splice(kt,Z-kt,ot,"overlay "+wt),Z=kt+2;else for(;kt<Z;kt+=2){var Kt=v[kt+1];v[kt+1]=(Kt?Kt+" ":"")+"overlay "+wt}},m),p.state=w,p.baseTokens=null,p.baseTokenPos=1},S=0;S<i.state.overlays.length;++S)C(S);return{styles:v,classes:m.bgClass||m.textClass?m:null}}function mo(i,l,p){if(!l.styles||l.styles[0]!=i.state.modeGen){var d=Jn(i,Ee(l)),v=l.text.length>i.options.maxHighlightLength&&or(i.doc.mode,d.state),m=en(i,l,d);v&&(d.state=v),l.stateAfter=d.save(!v),l.styles=m.styles,m.classes?l.styleClasses=m.classes:l.styleClasses&&(l.styleClasses=null),p===i.doc.highlightFrontier&&(i.doc.modeFrontier=Math.max(i.doc.modeFrontier,++i.doc.highlightFrontier))}return l.styles}function Jn(i,l,p){var d=i.doc,v=i.display;if(!d.mode.startState)return new Ve(d,!0,l);var m=Vn(i,l,p),w=m>d.first&&te(d,m-1).stateAfter,C=w?Ve.fromSaved(d,w,m):new Ve(d,Lr(d.mode),m);return d.iter(m,l,function(S){Qn(i,S.text,C);var E=C.line;S.stateAfter=E==l-1||E%5==0||E>=v.viewFrom&&E<v.viewTo?C.save():null,C.nextLine()}),p&&(d.modeFrontier=C.line),C}function Qn(i,l,p,d){var v=i.doc.mode,m=new je(l,i.options.tabSize,p);for(m.start=m.pos=d||0,l==""&&to(v,p.state);!m.eol();)Ko(v,m,p.state),m.start=m.pos}function to(i,l){if(i.blankLine)return i.blankLine(l);if(i.innerMode){var p=ir(i,l);if(p.mode.blankLine)return p.mode.blankLine(p.state)}}function Ko(i,l,p,d){for(var v=0;v<10;v++){d&&(d[0]=ir(i,p).mode);var m=i.token(l,p);if(l.pos>l.start)return m}throw new Error("Mode "+i.name+" failed to advance stream.")}var _o=function(i,l,p){this.start=i.start,this.end=i.pos,this.string=i.current(),this.type=l||null,this.state=p};function wo(i,l,p,d){var v=i.doc,m=v.mode,w;l=Vt(v,l);var C=te(v,l.line),S=Jn(i,l.line,p),E=new je(C.text,i.options.tabSize,S),G;for(d&&(G=[]);(d||E.pos<l.ch)&&!E.eol();)E.start=E.pos,w=Ko(m,E,S.state),d&&G.push(new _o(E,w,or(v.mode,S.state)));return d?G:new _o(E,w,S.state)}function eo(i,l){if(i)for(;;){var p=i.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!p)break;i=i.slice(0,p.index)+i.slice(p.index+p[0].length);var d=p[1]?"bgClass":"textClass";l[d]==null?l[d]=p[2]:new RegExp("(?:^|\\s)"+p[2]+"(?:$|\\s)").test(l[d])||(l[d]+=" "+p[2])}return i}function Gn(i,l,p,d,v,m,w){var C=p.flattenSpans;C==null&&(C=i.options.flattenSpans);var S=0,E=null,G=new je(l,i.options.tabSize,d),Z,pt=i.options.addModeClass&&[null];for(l==""&&eo(to(p,d.state),m);!G.eol();){if(G.pos>i.options.maxHighlightLength?(C=!1,w&&Qn(i,l,d,G.pos),G.pos=l.length,Z=null):Z=eo(Ko(p,G,d.state,pt),m),pt){var ot=pt[0].name;ot&&(Z="m-"+(Z?ot+" "+Z:ot))}if(!C||E!=Z){for(;S<G.start;)S=Math.min(G.start,S+5e3),v(S,E);E=Z}G.start=G.pos}for(;S<G.pos;){var wt=Math.min(G.pos,S+5e3);v(wt,E),S=wt}}function Vn(i,l,p){for(var d,v,m=i.doc,w=p?-1:l-(i.doc.mode.innerMode?1e3:100),C=l;C>w;--C){if(C<=m.first)return m.first;var S=te(m,C-1),E=S.stateAfter;if(E&&(!p||C+(E instanceof ze?E.lookAhead:0)<=m.modeFrontier))return C;var G=Ht(S.text,null,i.options.tabSize);(v==null||d>G)&&(v=C-1,d=G)}return v}function bo(i,l){if(i.modeFrontier=Math.min(i.modeFrontier,l),!(i.highlightFrontier<l-10)){for(var p=i.first,d=l-1;d>p;d--){var v=te(i,d).stateAfter;if(v&&(!(v instanceof ze)||d+v.lookAhead<l)){p=d+1;break}}i.highlightFrontier=Math.min(i.highlightFrontier,p)}}var ar=!1,dr=!1;function Go(){ar=!0}function gn(){dr=!0}function In(i,l,p){this.marker=i,this.from=l,this.to=p}function jr(i,l){if(i)for(var p=0;p<i.length;++p){var d=i[p];if(d.marker==l)return d}}function pr(i,l){for(var p,d=0;d<i.length;++d)i[d]!=l&&(p||(p=[])).push(i[d]);return p}function gi(i,l,p){var d=p&&window.WeakSet&&(p.markedSpans||(p.markedSpans=new WeakSet));d&&d.has(i.markedSpans)?i.markedSpans.push(l):(i.markedSpans=i.markedSpans?i.markedSpans.concat([l]):[l],d&&d.add(i.markedSpans)),l.marker.attachLine(i)}function Nn(i,l,p){var d;if(i)for(var v=0;v<i.length;++v){var m=i[v],w=m.marker,C=m.from==null||(w.inclusiveLeft?m.from<=l:m.from<l);if(C||m.from==l&&w.type=="bookmark"&&(!p||!m.marker.insertLeft)){var S=m.to==null||(w.inclusiveRight?m.to>=l:m.to>l);(d||(d=[])).push(new In(w,m.from,S?null:m.to))}}return d}function yn(i,l,p){var d;if(i)for(var v=0;v<i.length;++v){var m=i[v],w=m.marker,C=m.to==null||(w.inclusiveRight?m.to>=l:m.to>l);if(C||m.from==l&&w.type=="bookmark"&&(!p||m.marker.insertLeft)){var S=m.from==null||(w.inclusiveLeft?m.from<=l:m.from<l);(d||(d=[])).push(new In(w,S?null:m.from-l,m.to==null?null:m.to-l))}}return d}function ro(i,l){if(l.full)return null;var p=tn(i,l.from.line)&&te(i,l.from.line).markedSpans,d=tn(i,l.to.line)&&te(i,l.to.line).markedSpans;if(!p&&!d)return null;var v=l.from.ch,m=l.to.ch,w=de(l.from,l.to)==0,C=Nn(p,v,w),S=yn(d,m,w),E=l.text.length==1,G=Rt(l.text).length+(E?v:0);if(C)for(var Z=0;Z<C.length;++Z){var pt=C[Z];if(pt.to==null){var ot=jr(S,pt.marker);ot?E&&(pt.to=ot.to==null?null:ot.to+G):pt.to=v}}if(S)for(var wt=0;wt<S.length;++wt){var kt=S[wt];if(kt.to!=null&&(kt.to+=G),kt.from==null){var It=jr(C,kt.marker);It||(kt.from=G,E&&(C||(C=[])).push(kt))}else kt.from+=G,E&&(C||(C=[])).push(kt)}C&&(C=mn(C)),S&&S!=C&&(S=mn(S));var Kt=[C];if(!E){var Jt=l.text.length-2,Gt;if(Jt>0&&C)for(var ee=0;ee<C.length;++ee)C[ee].to==null&&(Gt||(Gt=[])).push(new In(C[ee].marker,null,null));for(var pe=0;pe<Jt;++pe)Kt.push(Gt);Kt.push(S)}return Kt}function mn(i){for(var l=0;l<i.length;++l){var p=i[l];p.from!=null&&p.from==p.to&&p.marker.clearWhenEmpty!==!1&&i.splice(l--,1)}return i.length?i:null}function _n(i,l,p){var d=null;if(i.iter(l.line,p.line+1,function(ot){if(ot.markedSpans)for(var wt=0;wt<ot.markedSpans.length;++wt){var kt=ot.markedSpans[wt].marker;kt.readOnly&&(!d||Qt(d,kt)==-1)&&(d||(d=[])).push(kt)}}),!d)return null;for(var v=[{from:l,to:p}],m=0;m<d.length;++m)for(var w=d[m],C=w.find(0),S=0;S<v.length;++S){var E=v[S];if(!(de(E.to,C.from)<0||de(E.from,C.to)>0)){var G=[S,1],Z=de(E.from,C.from),pt=de(E.to,C.to);(Z<0||!w.inclusiveLeft&&!Z)&&G.push({from:E.from,to:C.from}),(pt>0||!w.inclusiveRight&&!pt)&&G.push({from:C.to,to:E.to}),v.splice.apply(v,G),S+=G.length-3}}return v}function $o(i){var l=i.markedSpans;if(l){for(var p=0;p<l.length;++p)l[p].marker.detachLine(i);i.markedSpans=null}}function Co(i,l){if(l){for(var p=0;p<l.length;++p)l[p].marker.attachLine(i);i.markedSpans=l}}function no(i){return i.inclusiveLeft?-1:0}function Pn(i){return i.inclusiveRight?1:0}function oo(i,l){var p=i.lines.length-l.lines.length;if(p!=0)return p;var d=i.find(),v=l.find(),m=de(d.from,v.from)||no(i)-no(l);if(m)return-m;var w=de(d.to,v.to)||Pn(i)-Pn(l);return w||l.id-i.id}function Rn(i,l){var p=dr&&i.markedSpans,d;if(p)for(var v=void 0,m=0;m<p.length;++m)v=p[m],v.marker.collapsed&&(l?v.from:v.to)==null&&(!d||oo(d,v.marker)<0)&&(d=v.marker);return d}function ue(i){return Rn(i,!0)}function le(i){return Rn(i,!1)}function Me(i,l){var p=dr&&i.markedSpans,d;if(p)for(var v=0;v<p.length;++v){var m=p[v];m.marker.collapsed&&(m.from==null||m.from<l)&&(m.to==null||m.to>l)&&(!d||oo(d,m.marker)<0)&&(d=m.marker)}return d}function ye(i,l,p,d,v){var m=te(i,l),w=dr&&m.markedSpans;if(w)for(var C=0;C<w.length;++C){var S=w[C];if(S.marker.collapsed){var E=S.marker.find(0),G=de(E.from,p)||no(S.marker)-no(v),Z=de(E.to,d)||Pn(S.marker)-Pn(v);if(!(G>=0&&Z<=0||G<=0&&Z>=0)&&(G<=0&&(S.marker.inclusiveRight&&v.inclusiveLeft?de(E.to,p)>=0:de(E.to,p)>0)||G>=0&&(S.marker.inclusiveRight&&v.inclusiveLeft?de(E.from,d)<=0:de(E.from,d)<0)))return!0}}}function Ge(i){for(var l;l=ue(i);)i=l.find(-1,!0).line;return i}function sr(i){for(var l;l=le(i);)i=l.find(1,!0).line;return i}function Vr(i){for(var l,p;l=le(i);)i=l.find(1,!0).line,(p||(p=[])).push(i);return p}function En(i,l){var p=te(i,l),d=Ge(p);return p==d?l:Ee(d)}function Hr(i,l){if(l>i.lastLine())return l;var p=te(i,l),d;if(!Br(i,p))return l;for(;d=le(p);)p=d.find(1,!0).line;return Ee(p)+1}function Br(i,l){var p=dr&&l.markedSpans;if(p){for(var d=void 0,v=0;v<p.length;++v)if(d=p[v],!!d.marker.collapsed){if(d.from==null)return!0;if(!d.marker.widgetNode&&d.from==0&&d.marker.inclusiveLeft&&rn(i,l,d))return!0}}}function rn(i,l,p){if(p.to==null){var d=p.marker.find(1,!0);return rn(i,d.line,jr(d.line.markedSpans,p.marker))}if(p.marker.inclusiveRight&&p.to==l.text.length)return!0;for(var v=void 0,m=0;m<l.markedSpans.length;++m)if(v=l.markedSpans[m],v.marker.collapsed&&!v.marker.widgetNode&&v.from==p.to&&(v.to==null||v.to!=p.from)&&(v.marker.inclusiveLeft||p.marker.inclusiveRight)&&rn(i,l,v))return!0}function An(i){i=Ge(i);for(var l=0,p=i.parent,d=0;d<p.lines.length;++d){var v=p.lines[d];if(v==i)break;l+=v.height}for(var m=p.parent;m;p=m,m=p.parent)for(var w=0;w<m.children.length;++w){var C=m.children[w];if(C==p)break;l+=C.height}return l}function io(i){if(i.height==0)return 0;for(var l=i.text.length,p,d=i;p=ue(d);){var v=p.find(0,!0);d=v.from.line,l+=v.from.ch-v.to.ch}for(d=i;p=le(d);){var m=p.find(0,!0);l-=d.text.length-m.from.ch,d=m.to.line,l+=d.text.length-m.to.ch}return l}function xo(i){var l=i.display,p=i.doc;l.maxLine=te(p,p.first),l.maxLineLength=io(l.maxLine),l.maxLineChanged=!0,p.iter(function(d){var v=io(d);v>l.maxLineLength&&(l.maxLineLength=v,l.maxLine=d)})}var mr=function(i,l,p){this.text=i,Co(this,l),this.height=p?p(this):1};mr.prototype.lineNo=function(){return Ee(this)},Ae(mr);function hs(i,l,p,d){i.text=l,i.stateAfter&&(i.stateAfter=null),i.styles&&(i.styles=null),i.order!=null&&(i.order=null),$o(i),Co(i,p);var v=d?d(i):1;v!=i.height&&yr(i,v)}function yi(i){i.parent=null,$o(i)}var vs={},la={};function ua(i,l){if(!i||/^\s*$/.test(i))return null;var p=l.addModeClass?la:vs;return p[i]||(p[i]=i.replace(/\S+/g,"cm-$&"))}function mi(i,l){var p=B("span",null,null,f?"padding-right: .1px":null),d={pre:B("pre",[p],"CodeMirror-line"),content:p,col:0,pos:0,cm:i,trailingSpace:!1,splitSpaces:i.getOption("lineWrapping")};l.measure={};for(var v=0;v<=(l.rest?l.rest.length:0);v++){var m=v?l.rest[v-1]:l.line,w=void 0;d.pos=0,d.addToken=ys,Be(i.display.measure)&&(w=D(m,i.doc.direction))&&(d.addToken=ms(d.addToken,w)),d.map=[];var C=l!=i.display.externalMeasured&&Ee(m);_s(m,d,mo(i,m,C)),m.styleClasses&&(m.styleClasses.bgClass&&(d.bgClass=Mt(m.styleClasses.bgClass,d.bgClass||"")),m.styleClasses.textClass&&(d.textClass=Mt(m.styleClasses.textClass,d.textClass||""))),d.map.length==0&&d.map.push(0,0,d.content.appendChild(ce(i.display.measure))),v==0?(l.measure.map=d.map,l.measure.cache={}):((l.measure.maps||(l.measure.maps=[])).push(d.map),(l.measure.caches||(l.measure.caches=[])).push({}))}if(f){var S=d.content.lastChild;(/\bcm-tab\b/.test(S.className)||S.querySelector&&S.querySelector(".cm-tab"))&&(d.content.className="cm-tab-wrap-hack")}return Yt(i,"renderLine",i,l.line,d.pre),d.pre.className&&(d.textClass=Mt(d.pre.className,d.textClass||"")),d}function gs(i){var l=U("span","•","cm-invalidchar");return l.title="\\u"+i.charCodeAt(0).toString(16),l.setAttribute("aria-label",l.title),l}function ys(i,l,p,d,v,m,w){if(l){var C=i.splitSpaces?_i(l,i.trailingSpace):l,S=i.cm.state.specialChars,E=!1,G;if(!S.test(l))i.col+=l.length,G=document.createTextNode(C),i.map.push(i.pos,i.pos+l.length,G),u&&c<9&&(E=!0),i.pos+=l.length;else{G=document.createDocumentFragment();for(var Z=0;;){S.lastIndex=Z;var pt=S.exec(l),ot=pt?pt.index-Z:l.length-Z;if(ot){var wt=document.createTextNode(C.slice(Z,Z+ot));u&&c<9?G.appendChild(U("span",[wt])):G.appendChild(wt),i.map.push(i.pos,i.pos+ot,wt),i.col+=ot,i.pos+=ot}if(!pt)break;Z+=ot+1;var kt=void 0;if(pt[0]=="	"){var It=i.cm.options.tabSize,Kt=It-i.col%It;kt=G.appendChild(U("span",Zt(Kt),"cm-tab")),kt.setAttribute("role","presentation"),kt.setAttribute("cm-text","	"),i.col+=Kt}else pt[0]=="\r"||pt[0]==`
`?(kt=G.appendChild(U("span",pt[0]=="\r"?"␍":"␤","cm-invalidchar")),kt.setAttribute("cm-text",pt[0]),i.col+=1):(kt=i.cm.options.specialCharPlaceholder(pt[0]),kt.setAttribute("cm-text",pt[0]),u&&c<9?G.appendChild(U("span",[kt])):G.appendChild(kt),i.col+=1);i.map.push(i.pos,i.pos+1,kt),i.pos++}}if(i.trailingSpace=C.charCodeAt(l.length-1)==32,p||d||v||E||m||w){var Jt=p||"";d&&(Jt+=d),v&&(Jt+=v);var Gt=U("span",[G],Jt,m);if(w)for(var ee in w)w.hasOwnProperty(ee)&&ee!="style"&&ee!="class"&&Gt.setAttribute(ee,w[ee]);return i.content.appendChild(Gt)}i.content.appendChild(G)}}function _i(i,l){if(i.length>1&&!/  /.test(i))return i;for(var p=l,d="",v=0;v<i.length;v++){var m=i.charAt(v);m==" "&&p&&(v==i.length-1||i.charCodeAt(v+1)==32)&&(m=" "),d+=m,p=m==" "}return d}function ms(i,l){return function(p,d,v,m,w,C,S){v=v?v+" cm-force-border":"cm-force-border";for(var E=p.pos,G=E+d.length;;){for(var Z=void 0,pt=0;pt<l.length&&(Z=l[pt],!(Z.to>E&&Z.from<=E));pt++);if(Z.to>=G)return i(p,d,v,m,w,C,S);i(p,d.slice(0,Z.to-E),v,m,null,C,S),m=null,d=d.slice(Z.to-E),E=Z.to}}}function ca(i,l,p,d){var v=!d&&p.widgetNode;v&&i.map.push(i.pos,i.pos+l,v),!d&&i.cm.display.input.needsContentAttribute&&(v||(v=i.content.appendChild(document.createElement("span"))),v.setAttribute("cm-marker",p.id)),v&&(i.cm.display.input.setUneditable(v),i.content.appendChild(v)),i.pos+=l,i.trailingSpace=!1}function _s(i,l,p){var d=i.markedSpans,v=i.text,m=0;if(!d){for(var w=1;w<p.length;w+=2)l.addToken(l,v.slice(m,m=p[w]),ua(p[w+1],l.cm.options));return}for(var C=v.length,S=0,E=1,G="",Z,pt,ot=0,wt,kt,It,Kt,Jt;;){if(ot==S){wt=kt=It=pt="",Jt=null,Kt=null,ot=1/0;for(var Gt=[],ee=void 0,pe=0;pe<d.length;++pe){var fe=d[pe],Oe=fe.marker;if(Oe.type=="bookmark"&&fe.from==S&&Oe.widgetNode)Gt.push(Oe);else if(fe.from<=S&&(fe.to==null||fe.to>S||Oe.collapsed&&fe.to==S&&fe.from==S)){if(fe.to!=null&&fe.to!=S&&ot>fe.to&&(ot=fe.to,kt=""),Oe.className&&(wt+=" "+Oe.className),Oe.css&&(pt=(pt?pt+";":"")+Oe.css),Oe.startStyle&&fe.from==S&&(It+=" "+Oe.startStyle),Oe.endStyle&&fe.to==ot&&(ee||(ee=[])).push(Oe.endStyle,fe.to),Oe.title&&((Jt||(Jt={})).title=Oe.title),Oe.attributes)for(var Fe in Oe.attributes)(Jt||(Jt={}))[Fe]=Oe.attributes[Fe];Oe.collapsed&&(!Kt||oo(Kt.marker,Oe)<0)&&(Kt=fe)}else fe.from>S&&ot>fe.from&&(ot=fe.from)}if(ee)for(var br=0;br<ee.length;br+=2)ee[br+1]==ot&&(kt+=" "+ee[br]);if(!Kt||Kt.from==S)for(var Xe=0;Xe<Gt.length;++Xe)ca(l,0,Gt[Xe]);if(Kt&&(Kt.from||0)==S){if(ca(l,(Kt.to==null?C+1:Kt.to)-S,Kt.marker,Kt.from==null),Kt.to==null)return;Kt.to==S&&(Kt=!1)}}if(S>=C)break;for(var an=Math.min(C,ot);;){if(G){var zr=S+G.length;if(!Kt){var lr=zr>an?G.slice(0,an-S):G;l.addToken(l,lr,Z?Z+wt:wt,It,S+lr.length==ot?kt:"",pt,Jt)}if(zr>=an){G=G.slice(an-S),S=an;break}S=zr,It=""}G=v.slice(m,m=p[E++]),Z=ua(p[E++],l.cm.options)}}}function fa(i,l,p){this.line=l,this.rest=Vr(l),this.size=this.rest?Ee(Rt(this.rest))-p+1:1,this.node=this.text=null,this.hidden=Br(i,l)}function wi(i,l,p){for(var d=[],v,m=l;m<p;m=v){var w=new fa(i.doc,te(i.doc,m),m);v=m+w.size,d.push(w)}return d}var ao=null;function ws(i){ao?ao.ops.push(i):i.ownsGroup=ao={ops:[i],delayedCallbacks:[]}}function gu(i){var l=i.delayedCallbacks,p=0;do{for(;p<l.length;p++)l[p].call(null);for(var d=0;d<i.ops.length;d++){var v=i.ops[d];if(v.cursorActivityHandlers)for(;v.cursorActivityCalled<v.cursorActivityHandlers.length;)v.cursorActivityHandlers[v.cursorActivityCalled++].call(null,v.cm)}}while(p<l.length)}function da(i,l){var p=i.ownsGroup;if(p)try{gu(p)}finally{ao=null,l(p)}}var So=null;function Ze(i,l){var p=Lt(i,l);if(p.length){var d=Array.prototype.slice.call(arguments,2),v;ao?v=ao.delayedCallbacks:So?v=So:(v=So=[],setTimeout(Oo,0));for(var m=function(C){v.push(function(){return p[C].apply(null,d)})},w=0;w<p.length;++w)m(w)}}function Oo(){var i=So;So=null;for(var l=0;l<i.length;++l)i[l]()}function $n(i,l,p,d){for(var v=0;v<l.changes.length;v++){var m=l.changes[v];m=="text"?ha(i,l):m=="gutter"?Po(i,l,p,d):m=="class"?bi(i,l):m=="widget"&&Cs(i,l,d)}l.changes=null}function To(i){return i.node==i.text&&(i.node=U("div",null,null,"position: relative"),i.text.parentNode&&i.text.parentNode.replaceChild(i.node,i.text),i.node.appendChild(i.text),u&&c<8&&(i.node.style.zIndex=2)),i.node}function bs(i,l){var p=l.bgClass?l.bgClass+" "+(l.line.bgClass||""):l.line.bgClass;if(p&&(p+=" CodeMirror-linebackground"),l.background)p?l.background.className=p:(l.background.parentNode.removeChild(l.background),l.background=null);else if(p){var d=To(l);l.background=d.insertBefore(U("div",null,p),d.firstChild),i.display.input.setUneditable(l.background)}}function pa(i,l){var p=i.display.externalMeasured;return p&&p.line==l.line?(i.display.externalMeasured=null,l.measure=p.measure,p.built):mi(i,l)}function ha(i,l){var p=l.text.className,d=pa(i,l);l.text==l.node&&(l.node=d.pre),l.text.parentNode.replaceChild(d.pre,l.text),l.text=d.pre,d.bgClass!=l.bgClass||d.textClass!=l.textClass?(l.bgClass=d.bgClass,l.textClass=d.textClass,bi(i,l)):p&&(l.text.className=p)}function bi(i,l){bs(i,l),l.line.wrapClass?To(l).className=l.line.wrapClass:l.node!=l.text&&(l.node.className="");var p=l.textClass?l.textClass+" "+(l.line.textClass||""):l.line.textClass;l.text.className=p||""}function Po(i,l,p,d){if(l.gutter&&(l.node.removeChild(l.gutter),l.gutter=null),l.gutterBackground&&(l.node.removeChild(l.gutterBackground),l.gutterBackground=null),l.line.gutterClass){var v=To(l);l.gutterBackground=U("div",null,"CodeMirror-gutter-background "+l.line.gutterClass,"left: "+(i.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px"),i.display.input.setUneditable(l.gutterBackground),v.insertBefore(l.gutterBackground,l.text)}var m=l.line.gutterMarkers;if(i.options.lineNumbers||m){var w=To(l),C=l.gutter=U("div",null,"CodeMirror-gutter-wrapper","left: "+(i.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px");if(C.setAttribute("aria-hidden","true"),i.display.input.setUneditable(C),w.insertBefore(C,l.text),l.line.gutterClass&&(C.className+=" "+l.line.gutterClass),i.options.lineNumbers&&(!m||!m["CodeMirror-linenumbers"])&&(l.lineNumber=C.appendChild(U("div",hn(i.options,p),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+i.display.lineNumInnerWidth+"px"))),m)for(var S=0;S<i.display.gutterSpecs.length;++S){var E=i.display.gutterSpecs[S].className,G=m.hasOwnProperty(E)&&m[E];G&&C.appendChild(U("div",[G],"CodeMirror-gutter-elt","left: "+d.gutterLeft[E]+"px; width: "+d.gutterWidth[E]+"px"))}}}function Cs(i,l,p){l.alignable&&(l.alignable=null);for(var d=q("CodeMirror-linewidget"),v=l.node.firstChild,m=void 0;v;v=m)m=v.nextSibling,d.test(v.className)&&l.node.removeChild(v);Eo(i,l,p)}function xs(i,l,p,d){var v=pa(i,l);return l.text=l.node=v.pre,v.bgClass&&(l.bgClass=v.bgClass),v.textClass&&(l.textClass=v.textClass),bi(i,l),Po(i,l,p,d),Eo(i,l,d),l.node}function Eo(i,l,p){if(va(i,l.line,l,p,!0),l.rest)for(var d=0;d<l.rest.length;d++)va(i,l.rest[d],l,p,!1)}function va(i,l,p,d,v){if(l.widgets)for(var m=To(p),w=0,C=l.widgets;w<C.length;++w){var S=C[w],E=U("div",[S.node],"CodeMirror-linewidget"+(S.className?" "+S.className:""));S.handleMouseEvents||E.setAttribute("cm-ignore-events","true"),Ss(S,E,p,d),i.display.input.setUneditable(E),v&&S.above?m.insertBefore(E,p.gutter||p.text):m.appendChild(E),Ze(S,"redraw")}}function Ss(i,l,p,d){if(i.noHScroll){(p.alignable||(p.alignable=[])).push(l);var v=d.wrapperWidth;l.style.left=d.fixedPos+"px",i.coverGutter||(v-=d.gutterTotalWidth,l.style.paddingLeft=d.gutterTotalWidth+"px"),l.style.width=v+"px"}i.coverGutter&&(l.style.zIndex=5,l.style.position="relative",i.noHScroll||(l.style.marginLeft=-d.gutterTotalWidth+"px"))}function Ao(i){if(i.height!=null)return i.height;var l=i.doc.cm;if(!l)return 0;if(!A(document.body,i.node)){var p="position: relative;";i.coverGutter&&(p+="margin-left: -"+l.display.gutters.offsetWidth+"px;"),i.noHScroll&&(p+="width: "+l.display.wrapper.clientWidth+"px;"),V(l.display.measure,U("div",[i.node],null,p))}return i.height=i.node.parentNode.offsetHeight}function kn(i,l){for(var p=J(l);p!=i.wrapper;p=p.parentNode)if(!p||p.nodeType==1&&p.getAttribute("cm-ignore-events")=="true"||p.parentNode==i.sizer&&p!=i.mover)return!0}function ko(i){return i.lineSpace.offsetTop}function qo(i){return i.mover.offsetHeight-i.lineSpace.offsetHeight}function Os(i){if(i.cachedPaddingH)return i.cachedPaddingH;var l=V(i.measure,U("pre","x","CodeMirror-line-like")),p=window.getComputedStyle?window.getComputedStyle(l):l.currentStyle,d={left:parseInt(p.paddingLeft),right:parseInt(p.paddingRight)};return!isNaN(d.left)&&!isNaN(d.right)&&(i.cachedPaddingH=d),d}function nn(i){return re-i.display.nativeBarWidth}function so(i){return i.display.scroller.clientWidth-nn(i)-i.display.barWidth}function O(i){return i.display.scroller.clientHeight-nn(i)-i.display.barHeight}function L(i,l,p){var d=i.options.lineWrapping,v=d&&so(i);if(!l.measure.heights||d&&l.measure.width!=v){var m=l.measure.heights=[];if(d){l.measure.width=v;for(var w=l.text.firstChild.getClientRects(),C=0;C<w.length-1;C++){var S=w[C],E=w[C+1];Math.abs(S.bottom-E.bottom)>2&&m.push((S.bottom+E.top)/2-p.top)}}m.push(p.bottom-p.top)}}function X(i,l,p){if(i.line==l)return{map:i.measure.map,cache:i.measure.cache};for(var d=0;d<i.rest.length;d++)if(i.rest[d]==l)return{map:i.measure.maps[d],cache:i.measure.caches[d]};for(var v=0;v<i.rest.length;v++)if(Ee(i.rest[v])>p)return{map:i.measure.maps[v],cache:i.measure.caches[v],before:!0}}function Q(i,l){l=Ge(l);var p=Ee(l),d=i.display.externalMeasured=new fa(i.doc,l,p);d.lineN=p;var v=d.built=mi(i,d);return d.text=v.pre,V(i.display.lineMeasure,v.pre),d}function ht(i,l,p,d){return Ft(i,Ot(i,l),p,d)}function lt(i,l){if(l>=i.display.viewFrom&&l<i.display.viewTo)return i.display.view[Zo(i,l)];var p=i.display.externalMeasured;if(p&&l>=p.lineN&&l<p.lineN+p.size)return p}function Ot(i,l){var p=Ee(l),d=lt(i,p);d&&!d.text?d=null:d&&d.changes&&($n(i,d,p,bu(i)),i.curOp.forceUpdate=!0),d||(d=Q(i,l));var v=X(d,l,p);return{line:l,view:d,rect:null,map:v.map,cache:v.cache,before:v.before,hasHeights:!1}}function Ft(i,l,p,d,v){l.before&&(p=-1);var m=p+(d||""),w;return l.cache.hasOwnProperty(m)?w=l.cache[m]:(l.rect||(l.rect=l.view.text.getBoundingClientRect()),l.hasHeights||(L(i,l.view,l.rect),l.hasHeights=!0),w=Ar(i,l,p,d),w.bogus||(l.cache[m]=w)),{left:w.left,right:w.right,top:v?w.rtop:w.top,bottom:v?w.rbottom:w.bottom}}var Ce={left:0,right:0,top:0,bottom:0};function be(i,l,p){for(var d,v,m,w,C,S,E=0;E<i.length;E+=3)if(C=i[E],S=i[E+1],l<C?(v=0,m=1,w="left"):l<S?(v=l-C,m=v+1):(E==i.length-3||l==S&&i[E+3]>l)&&(m=S-C,v=m-1,l>=S&&(w="right")),v!=null){if(d=i[E+2],C==S&&p==(d.insertLeft?"left":"right")&&(w=p),p=="left"&&v==0)for(;E&&i[E-2]==i[E-3]&&i[E-1].insertLeft;)d=i[(E-=3)+2],w="left";if(p=="right"&&v==S-C)for(;E<i.length-3&&i[E+3]==i[E+4]&&!i[E+5].insertLeft;)d=i[(E+=3)+2],w="right";break}return{node:d,start:v,end:m,collapse:w,coverStart:C,coverEnd:S}}function hr(i,l){var p=Ce;if(l=="left")for(var d=0;d<i.length&&(p=i[d]).left==p.right;d++);else for(var v=i.length-1;v>=0&&(p=i[v]).left==p.right;v--);return p}function Ar(i,l,p,d){var v=be(l.map,p,d),m=v.node,w=v.start,C=v.end,S=v.collapse,E;if(m.nodeType==3){for(var G=0;G<4;G++){for(;w&&dt(l.line.text.charAt(v.coverStart+w));)--w;for(;v.coverStart+C<v.coverEnd&&dt(l.line.text.charAt(v.coverStart+C));)++C;if(u&&c<9&&w==0&&C==v.coverEnd-v.coverStart?E=m.parentNode.getBoundingClientRect():E=hr(tt(m,w,C).getClientRects(),d),E.left||E.right||w==0)break;C=w,w=w-1,S="right"}u&&c<11&&(E=Ts(i.display.measure,E))}else{w>0&&(S=d="right");var Z;i.options.lineWrapping&&(Z=m.getClientRects()).length>1?E=Z[d=="right"?Z.length-1:0]:E=m.getBoundingClientRect()}if(u&&c<9&&!w&&(!E||!E.left&&!E.right)){var pt=m.parentNode.getClientRects()[0];pt?E={left:pt.left,right:pt.left+xi(i.display),top:pt.top,bottom:pt.bottom}:E=Ce}for(var ot=E.top-l.rect.top,wt=E.bottom-l.rect.top,kt=(ot+wt)/2,It=l.view.measure.heights,Kt=0;Kt<It.length-1&&!(kt<It[Kt]);Kt++);var Jt=Kt?It[Kt-1]:0,Gt=It[Kt],ee={left:(S=="right"?E.right:E.left)-l.rect.left,right:(S=="left"?E.left:E.right)-l.rect.left,top:Jt,bottom:Gt};return!E.left&&!E.right&&(ee.bogus=!0),i.options.singleCursorHeightPerLine||(ee.rtop=ot,ee.rbottom=wt),ee}function Ts(i,l){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Dr(i))return l;var p=screen.logicalXDPI/screen.deviceXDPI,d=screen.logicalYDPI/screen.deviceYDPI;return{left:l.left*p,right:l.right*p,top:l.top*d,bottom:l.bottom*d}}function ga(i){if(i.measure&&(i.measure.cache={},i.measure.heights=null,i.rest))for(var l=0;l<i.rest.length;l++)i.measure.caches[l]={}}function bf(i){i.display.externalMeasure=null,H(i.display.lineMeasure);for(var l=0;l<i.display.view.length;l++)ga(i.display.view[l])}function ya(i){bf(i),i.display.cachedCharWidth=i.display.cachedTextHeight=i.display.cachedPaddingH=null,i.options.lineWrapping||(i.display.maxLineChanged=!0),i.display.lineNumChars=null}function Cf(){return g&&I?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function xf(){return g&&I?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function yu(i){var l=0;if(i.widgets)for(var p=0;p<i.widgets.length;++p)i.widgets[p].above&&(l+=Ao(i.widgets[p]));return l}function Ps(i,l,p,d,v){if(!v){var m=yu(l);p.top+=m,p.bottom+=m}if(d=="line")return p;d||(d="local");var w=An(l);if(d=="local"?w+=ko(i.display):w-=i.display.viewOffset,d=="page"||d=="window"){var C=i.display.lineSpace.getBoundingClientRect();w+=C.top+(d=="window"?0:xf());var S=C.left+(d=="window"?0:Cf());p.left+=S,p.right+=S}return p.top+=w,p.bottom+=w,p}function Sf(i,l,p){if(p=="div")return l;var d=l.left,v=l.top;if(p=="page")d-=Cf(),v-=xf();else if(p=="local"||!p){var m=i.display.sizer.getBoundingClientRect();d+=m.left,v+=m.top}var w=i.display.lineSpace.getBoundingClientRect();return{left:d-w.left,top:v-w.top}}function Es(i,l,p,d,v){return d||(d=te(i.doc,l.line)),Ps(i,d,ht(i,d,l.ch,v),p)}function Fn(i,l,p,d,v,m){d=d||te(i.doc,l.line),v||(v=Ot(i,d));function w(wt,kt){var It=Ft(i,v,wt,kt?"right":"left",m);return kt?It.left=It.right:It.right=It.left,Ps(i,d,It,p)}var C=D(d,i.doc.direction),S=l.ch,E=l.sticky;if(S>=d.text.length?(S=d.text.length,E="before"):S<=0&&(S=0,E="after"),!C)return w(E=="before"?S-1:S,E=="before");function G(wt,kt,It){var Kt=C[kt],Jt=Kt.level==1;return w(It?wt-1:wt,Jt!=It)}var Z=R(C,S,E),pt=ge,ot=G(S,Z,E=="before");return pt!=null&&(ot.other=G(S,pt,E!="before")),ot}function Of(i,l){var p=0;l=Vt(i.doc,l),i.options.lineWrapping||(p=xi(i.display)*l.ch);var d=te(i.doc,l.line),v=An(d)+ko(i.display);return{left:p,right:p,top:v,bottom:v+d.height}}function mu(i,l,p,d,v){var m=Dt(i,l,p);return m.xRel=v,d&&(m.outside=d),m}function _u(i,l,p){var d=i.doc;if(p+=i.display.viewOffset,p<0)return mu(d.first,0,null,-1,-1);var v=Re(d,p),m=d.first+d.size-1;if(v>m)return mu(d.first+d.size-1,te(d,m).text.length,null,1,1);l<0&&(l=0);for(var w=te(d,v);;){var C=Qv(i,w,v,l,p),S=Me(w,C.ch+(C.xRel>0||C.outside>0?1:0));if(!S)return C;var E=S.find(1);if(E.line==v)return E;w=te(d,v=E.line)}}function Tf(i,l,p,d){d-=yu(l);var v=l.text.length,m=ne(function(w){return Ft(i,p,w-1).bottom<=d},v,0);return v=ne(function(w){return Ft(i,p,w).top>d},m,v),{begin:m,end:v}}function Pf(i,l,p,d){p||(p=Ot(i,l));var v=Ps(i,l,Ft(i,p,d),"line").top;return Tf(i,l,p,v)}function wu(i,l,p,d){return i.bottom<=p?!1:i.top>p?!0:(d?i.left:i.right)>l}function Qv(i,l,p,d,v){v-=An(l);var m=Ot(i,l),w=yu(l),C=0,S=l.text.length,E=!0,G=D(l,i.doc.direction);if(G){var Z=(i.options.lineWrapping?eg:tg)(i,l,p,m,G,d,v);E=Z.level!=1,C=E?Z.from:Z.to-1,S=E?Z.to:Z.from-1}var pt=null,ot=null,wt=ne(function(pe){var fe=Ft(i,m,pe);return fe.top+=w,fe.bottom+=w,wu(fe,d,v,!1)?(fe.top<=v&&fe.left<=d&&(pt=pe,ot=fe),!0):!1},C,S),kt,It,Kt=!1;if(ot){var Jt=d-ot.left<ot.right-d,Gt=Jt==E;wt=pt+(Gt?0:1),It=Gt?"after":"before",kt=Jt?ot.left:ot.right}else{!E&&(wt==S||wt==C)&&wt++,It=wt==0?"after":wt==l.text.length?"before":Ft(i,m,wt-(E?1:0)).bottom+w<=v==E?"after":"before";var ee=Fn(i,Dt(p,wt,It),"line",l,m);kt=ee.left,Kt=v<ee.top?-1:v>=ee.bottom?1:0}return wt=it(l.text,wt,1),mu(p,wt,It,Kt,d-kt)}function tg(i,l,p,d,v,m,w){var C=ne(function(Z){var pt=v[Z],ot=pt.level!=1;return wu(Fn(i,Dt(p,ot?pt.to:pt.from,ot?"before":"after"),"line",l,d),m,w,!0)},0,v.length-1),S=v[C];if(C>0){var E=S.level!=1,G=Fn(i,Dt(p,E?S.from:S.to,E?"after":"before"),"line",l,d);wu(G,m,w,!0)&&G.top>w&&(S=v[C-1])}return S}function eg(i,l,p,d,v,m,w){var C=Tf(i,l,d,w),S=C.begin,E=C.end;/\s/.test(l.text.charAt(E-1))&&E--;for(var G=null,Z=null,pt=0;pt<v.length;pt++){var ot=v[pt];if(!(ot.from>=E||ot.to<=S)){var wt=ot.level!=1,kt=Ft(i,d,wt?Math.min(E,ot.to)-1:Math.max(S,ot.from)).right,It=kt<m?m-kt+1e9:kt-m;(!G||Z>It)&&(G=ot,Z=It)}}return G||(G=v[v.length-1]),G.from<S&&(G={from:S,to:G.to,level:G.level}),G.to>E&&(G={from:G.from,to:E,level:G.level}),G}var Yo;function Ci(i){if(i.cachedTextHeight!=null)return i.cachedTextHeight;if(Yo==null){Yo=U("pre",null,"CodeMirror-line-like");for(var l=0;l<49;++l)Yo.appendChild(document.createTextNode("x")),Yo.appendChild(U("br"));Yo.appendChild(document.createTextNode("x"))}V(i.measure,Yo);var p=Yo.offsetHeight/50;return p>3&&(i.cachedTextHeight=p),H(i.measure),p||1}function xi(i){if(i.cachedCharWidth!=null)return i.cachedCharWidth;var l=U("span","xxxxxxxxxx"),p=U("pre",[l],"CodeMirror-line-like");V(i.measure,p);var d=l.getBoundingClientRect(),v=(d.right-d.left)/10;return v>2&&(i.cachedCharWidth=v),v||10}function bu(i){for(var l=i.display,p={},d={},v=l.gutters.clientLeft,m=l.gutters.firstChild,w=0;m;m=m.nextSibling,++w){var C=i.display.gutterSpecs[w].className;p[C]=m.offsetLeft+m.clientLeft+v,d[C]=m.clientWidth}return{fixedPos:Cu(l),gutterTotalWidth:l.gutters.offsetWidth,gutterLeft:p,gutterWidth:d,wrapperWidth:l.wrapper.clientWidth}}function Cu(i){return i.scroller.getBoundingClientRect().left-i.sizer.getBoundingClientRect().left}function Ef(i){var l=Ci(i.display),p=i.options.lineWrapping,d=p&&Math.max(5,i.display.scroller.clientWidth/xi(i.display)-3);return function(v){if(Br(i.doc,v))return 0;var m=0;if(v.widgets)for(var w=0;w<v.widgets.length;w++)v.widgets[w].height&&(m+=v.widgets[w].height);return p?m+(Math.ceil(v.text.length/d)||1)*l:m+l}}function xu(i){var l=i.doc,p=Ef(i);l.iter(function(d){var v=p(d);v!=d.height&&yr(d,v)})}function Xo(i,l,p,d){var v=i.display;if(!p&&J(l).getAttribute("cm-not-content")=="true")return null;var m,w,C=v.lineSpace.getBoundingClientRect();try{m=l.clientX-C.left,w=l.clientY-C.top}catch{return null}var S=_u(i,m,w),E;if(d&&S.xRel>0&&(E=te(i.doc,S.line).text).length==S.ch){var G=Ht(E,E.length,i.options.tabSize)-E.length;S=Dt(S.line,Math.max(0,Math.round((m-Os(i.display).left)/xi(i.display))-G))}return S}function Zo(i,l){if(l>=i.display.viewTo||(l-=i.display.viewFrom,l<0))return null;for(var p=i.display.view,d=0;d<p.length;d++)if(l-=p[d].size,l<0)return d}function Ur(i,l,p,d){l==null&&(l=i.doc.first),p==null&&(p=i.doc.first+i.doc.size),d||(d=0);var v=i.display;if(d&&p<v.viewTo&&(v.updateLineNumbers==null||v.updateLineNumbers>l)&&(v.updateLineNumbers=l),i.curOp.viewChanged=!0,l>=v.viewTo)dr&&En(i.doc,l)<v.viewTo&&Do(i);else if(p<=v.viewFrom)dr&&Hr(i.doc,p+d)>v.viewFrom?Do(i):(v.viewFrom+=d,v.viewTo+=d);else if(l<=v.viewFrom&&p>=v.viewTo)Do(i);else if(l<=v.viewFrom){var m=As(i,p,p+d,1);m?(v.view=v.view.slice(m.index),v.viewFrom=m.lineN,v.viewTo+=d):Do(i)}else if(p>=v.viewTo){var w=As(i,l,l,-1);w?(v.view=v.view.slice(0,w.index),v.viewTo=w.lineN):Do(i)}else{var C=As(i,l,l,-1),S=As(i,p,p+d,1);C&&S?(v.view=v.view.slice(0,C.index).concat(wi(i,C.lineN,S.lineN)).concat(v.view.slice(S.index)),v.viewTo+=d):Do(i)}var E=v.externalMeasured;E&&(p<E.lineN?E.lineN+=d:l<E.lineN+E.size&&(v.externalMeasured=null))}function Mo(i,l,p){i.curOp.viewChanged=!0;var d=i.display,v=i.display.externalMeasured;if(v&&l>=v.lineN&&l<v.lineN+v.size&&(d.externalMeasured=null),!(l<d.viewFrom||l>=d.viewTo)){var m=d.view[Zo(i,l)];if(m.node!=null){var w=m.changes||(m.changes=[]);Qt(w,p)==-1&&w.push(p)}}}function Do(i){i.display.viewFrom=i.display.viewTo=i.doc.first,i.display.view=[],i.display.viewOffset=0}function As(i,l,p,d){var v=Zo(i,l),m,w=i.display.view;if(!dr||p==i.doc.first+i.doc.size)return{index:v,lineN:p};for(var C=i.display.viewFrom,S=0;S<v;S++)C+=w[S].size;if(C!=l){if(d>0){if(v==w.length-1)return null;m=C+w[v].size-l,v++}else m=C-l;l+=m,p+=m}for(;En(i.doc,p)!=p;){if(v==(d<0?0:w.length-1))return null;p+=d*w[v-(d<0?1:0)].size,v+=d}return{index:v,lineN:p}}function rg(i,l,p){var d=i.display,v=d.view;v.length==0||l>=d.viewTo||p<=d.viewFrom?(d.view=wi(i,l,p),d.viewFrom=l):(d.viewFrom>l?d.view=wi(i,l,d.viewFrom).concat(d.view):d.viewFrom<l&&(d.view=d.view.slice(Zo(i,l))),d.viewFrom=l,d.viewTo<p?d.view=d.view.concat(wi(i,d.viewTo,p)):d.viewTo>p&&(d.view=d.view.slice(0,Zo(i,p)))),d.viewTo=p}function Af(i){for(var l=i.display.view,p=0,d=0;d<l.length;d++){var v=l[d];!v.hidden&&(!v.node||v.changes)&&++p}return p}function ma(i){i.display.input.showSelection(i.display.input.prepareSelection())}function kf(i,l){l===void 0&&(l=!0);for(var p=i.doc,d={},v=d.cursors=document.createDocumentFragment(),m=d.selection=document.createDocumentFragment(),w=0;w<p.sel.ranges.length;w++)if(!(!l&&w==p.sel.primIndex)){var C=p.sel.ranges[w];if(!(C.from().line>=i.display.viewTo||C.to().line<i.display.viewFrom)){var S=C.empty();(S||i.options.showCursorWhenSelecting)&&Mf(i,C.head,v),S||ng(i,C,m)}}return d}function Mf(i,l,p){var d=Fn(i,l,"div",null,null,!i.options.singleCursorHeightPerLine),v=p.appendChild(U("div"," ","CodeMirror-cursor"));if(v.style.left=d.left+"px",v.style.top=d.top+"px",v.style.height=Math.max(0,d.bottom-d.top)*i.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(i.getWrapperElement().className)){var m=Es(i,l,"div",null,null);m.right-m.left>0&&(v.style.width=m.right-m.left+"px")}if(d.other){var w=p.appendChild(U("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));w.style.display="",w.style.left=d.other.left+"px",w.style.top=d.other.top+"px",w.style.height=(d.other.bottom-d.other.top)*.85+"px"}}function ks(i,l){return i.top-l.top||i.left-l.left}function ng(i,l,p){var d=i.display,v=i.doc,m=document.createDocumentFragment(),w=Os(i.display),C=w.left,S=Math.max(d.sizerWidth,so(i)-d.sizer.offsetLeft)-w.right,E=v.direction=="ltr";function G(Gt,ee,pe,fe){ee<0&&(ee=0),ee=Math.round(ee),fe=Math.round(fe),m.appendChild(U("div",null,"CodeMirror-selected","position: absolute; left: "+Gt+`px;
                             top: `+ee+"px; width: "+(pe??S-Gt)+`px;
                             height: `+(fe-ee)+"px"))}function Z(Gt,ee,pe){var fe=te(v,Gt),Oe=fe.text.length,Fe,br;function Xe(lr,Kr){return Es(i,Dt(Gt,lr),"div",fe,Kr)}function an(lr,Kr,Or){var vr=Pf(i,fe,null,lr),ur=Kr=="ltr"==(Or=="after")?"left":"right",Je=Or=="after"?vr.begin:vr.end-(/\s/.test(fe.text.charAt(vr.end-1))?2:1);return Xe(Je,ur)[ur]}var zr=D(fe,v.direction);return we(zr,ee||0,pe??Oe,function(lr,Kr,Or,vr){var ur=Or=="ltr",Je=Xe(lr,ur?"left":"right"),Gr=Xe(Kr-1,ur?"right":"left"),Ii=ee==null&&lr==0,Ro=pe==null&&Kr==Oe,Mr=vr==0,qn=!zr||vr==zr.length-1;if(Gr.top-Je.top<=3){var Cr=(E?Ii:Ro)&&Mr,Yu=(E?Ro:Ii)&&qn,uo=Cr?C:(ur?Je:Gr).left,ri=Yu?S:(ur?Gr:Je).right;G(uo,Je.top,ri-uo,Je.bottom)}else{var ni,Nr,Ni,Xu;ur?(ni=E&&Ii&&Mr?C:Je.left,Nr=E?S:an(lr,Or,"before"),Ni=E?C:an(Kr,Or,"after"),Xu=E&&Ro&&qn?S:Gr.right):(ni=E?an(lr,Or,"before"):C,Nr=!E&&Ii&&Mr?S:Je.right,Ni=!E&&Ro&&qn?C:Gr.left,Xu=E?an(Kr,Or,"after"):S),G(ni,Je.top,Nr-ni,Je.bottom),Je.bottom<Gr.top&&G(C,Je.bottom,null,Gr.top),G(Ni,Gr.top,Xu-Ni,Gr.bottom)}(!Fe||ks(Je,Fe)<0)&&(Fe=Je),ks(Gr,Fe)<0&&(Fe=Gr),(!br||ks(Je,br)<0)&&(br=Je),ks(Gr,br)<0&&(br=Gr)}),{start:Fe,end:br}}var pt=l.from(),ot=l.to();if(pt.line==ot.line)Z(pt.line,pt.ch,ot.ch);else{var wt=te(v,pt.line),kt=te(v,ot.line),It=Ge(wt)==Ge(kt),Kt=Z(pt.line,pt.ch,It?wt.text.length+1:null).end,Jt=Z(ot.line,It?0:null,ot.ch).start;It&&(Kt.top<Jt.top-2?(G(Kt.right,Kt.top,null,Kt.bottom),G(C,Jt.top,Jt.left,Jt.bottom)):G(Kt.right,Kt.top,Jt.left-Kt.right,Kt.bottom)),Kt.bottom<Jt.top&&G(C,Kt.bottom,null,Jt.top)}p.appendChild(m)}function Su(i){if(i.state.focused){var l=i.display;clearInterval(l.blinker);var p=!0;l.cursorDiv.style.visibility="",i.options.cursorBlinkRate>0?l.blinker=setInterval(function(){i.hasFocus()||Si(i),l.cursorDiv.style.visibility=(p=!p)?"":"hidden"},i.options.cursorBlinkRate):i.options.cursorBlinkRate<0&&(l.cursorDiv.style.visibility="hidden")}}function Df(i){i.hasFocus()||(i.display.input.focus(),i.state.focused||Tu(i))}function Ou(i){i.state.delayingBlurEvent=!0,setTimeout(function(){i.state.delayingBlurEvent&&(i.state.delayingBlurEvent=!1,i.state.focused&&Si(i))},100)}function Tu(i,l){i.state.delayingBlurEvent&&!i.state.draggingText&&(i.state.delayingBlurEvent=!1),i.options.readOnly!="nocursor"&&(i.state.focused||(Yt(i,"focus",i,l),i.state.focused=!0,gt(i.display.wrapper,"CodeMirror-focused"),!i.curOp&&i.display.selForContextMenu!=i.doc.sel&&(i.display.input.reset(),f&&setTimeout(function(){return i.display.input.reset(!0)},20)),i.display.input.receivedFocus()),Su(i))}function Si(i,l){i.state.delayingBlurEvent||(i.state.focused&&(Yt(i,"blur",i,l),i.state.focused=!1,nt(i.display.wrapper,"CodeMirror-focused")),clearInterval(i.display.blinker),setTimeout(function(){i.state.focused||(i.display.shift=!1)},150))}function Ms(i){for(var l=i.display,p=l.lineDiv.offsetTop,d=Math.max(0,l.scroller.getBoundingClientRect().top),v=l.lineDiv.getBoundingClientRect().top,m=0,w=0;w<l.view.length;w++){var C=l.view[w],S=i.options.lineWrapping,E=void 0,G=0;if(!C.hidden){if(v+=C.line.height,u&&c<8){var Z=C.node.offsetTop+C.node.offsetHeight;E=Z-p,p=Z}else{var pt=C.node.getBoundingClientRect();E=pt.bottom-pt.top,!S&&C.text.firstChild&&(G=C.text.firstChild.getBoundingClientRect().right-pt.left-1)}var ot=C.line.height-E;if((ot>.005||ot<-.005)&&(v<d&&(m-=ot),yr(C.line,E),Lf(C.line),C.rest))for(var wt=0;wt<C.rest.length;wt++)Lf(C.rest[wt]);if(G>i.display.sizerWidth){var kt=Math.ceil(G/xi(i.display));kt>i.display.maxLineLength&&(i.display.maxLineLength=kt,i.display.maxLine=C.line,i.display.maxLineChanged=!0)}}}Math.abs(m)>2&&(l.scroller.scrollTop+=m)}function Lf(i){if(i.widgets)for(var l=0;l<i.widgets.length;++l){var p=i.widgets[l],d=p.node.parentNode;d&&(p.height=d.offsetHeight)}}function Ds(i,l,p){var d=p&&p.top!=null?Math.max(0,p.top):i.scroller.scrollTop;d=Math.floor(d-ko(i));var v=p&&p.bottom!=null?p.bottom:d+i.wrapper.clientHeight,m=Re(l,d),w=Re(l,v);if(p&&p.ensure){var C=p.ensure.from.line,S=p.ensure.to.line;C<m?(m=C,w=Re(l,An(te(l,C))+i.wrapper.clientHeight)):Math.min(S,l.lastLine())>=w&&(m=Re(l,An(te(l,S))-i.wrapper.clientHeight),w=S)}return{from:m,to:Math.max(w,m+1)}}function og(i,l){if(!Ut(i,"scrollCursorIntoView")){var p=i.display,d=p.sizer.getBoundingClientRect(),v=null;if(l.top+d.top<0?v=!0:l.bottom+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(v=!1),v!=null&&!x){var m=U("div","​",null,`position: absolute;
                         top: `+(l.top-p.viewOffset-ko(i.display))+`px;
                         height: `+(l.bottom-l.top+nn(i)+p.barHeight)+`px;
                         left: `+l.left+"px; width: "+Math.max(2,l.right-l.left)+"px;");i.display.lineSpace.appendChild(m),m.scrollIntoView(v),i.display.lineSpace.removeChild(m)}}}function ig(i,l,p,d){d==null&&(d=0);var v;!i.options.lineWrapping&&l==p&&(p=l.sticky=="before"?Dt(l.line,l.ch+1,"before"):l,l=l.ch?Dt(l.line,l.sticky=="before"?l.ch-1:l.ch,"after"):l);for(var m=0;m<5;m++){var w=!1,C=Fn(i,l),S=!p||p==l?C:Fn(i,p);v={left:Math.min(C.left,S.left),top:Math.min(C.top,S.top)-d,right:Math.max(C.left,S.left),bottom:Math.max(C.bottom,S.bottom)+d};var E=Pu(i,v),G=i.doc.scrollTop,Z=i.doc.scrollLeft;if(E.scrollTop!=null&&(wa(i,E.scrollTop),Math.abs(i.doc.scrollTop-G)>1&&(w=!0)),E.scrollLeft!=null&&(Jo(i,E.scrollLeft),Math.abs(i.doc.scrollLeft-Z)>1&&(w=!0)),!w)break}return v}function ag(i,l){var p=Pu(i,l);p.scrollTop!=null&&wa(i,p.scrollTop),p.scrollLeft!=null&&Jo(i,p.scrollLeft)}function Pu(i,l){var p=i.display,d=Ci(i.display);l.top<0&&(l.top=0);var v=i.curOp&&i.curOp.scrollTop!=null?i.curOp.scrollTop:p.scroller.scrollTop,m=O(i),w={};l.bottom-l.top>m&&(l.bottom=l.top+m);var C=i.doc.height+qo(p),S=l.top<d,E=l.bottom>C-d;if(l.top<v)w.scrollTop=S?0:l.top;else if(l.bottom>v+m){var G=Math.min(l.top,(E?C:l.bottom)-m);G!=v&&(w.scrollTop=G)}var Z=i.options.fixedGutter?0:p.gutters.offsetWidth,pt=i.curOp&&i.curOp.scrollLeft!=null?i.curOp.scrollLeft:p.scroller.scrollLeft-Z,ot=so(i)-p.gutters.offsetWidth,wt=l.right-l.left>ot;return wt&&(l.right=l.left+ot),l.left<10?w.scrollLeft=0:l.left<pt?w.scrollLeft=Math.max(0,l.left+Z-(wt?0:10)):l.right>ot+pt-3&&(w.scrollLeft=l.right+(wt?0:10)-ot),w}function Eu(i,l){l!=null&&(Ls(i),i.curOp.scrollTop=(i.curOp.scrollTop==null?i.doc.scrollTop:i.curOp.scrollTop)+l)}function Oi(i){Ls(i);var l=i.getCursor();i.curOp.scrollToPos={from:l,to:l,margin:i.options.cursorScrollMargin}}function _a(i,l,p){(l!=null||p!=null)&&Ls(i),l!=null&&(i.curOp.scrollLeft=l),p!=null&&(i.curOp.scrollTop=p)}function sg(i,l){Ls(i),i.curOp.scrollToPos=l}function Ls(i){var l=i.curOp.scrollToPos;if(l){i.curOp.scrollToPos=null;var p=Of(i,l.from),d=Of(i,l.to);jf(i,p,d,l.margin)}}function jf(i,l,p,d){var v=Pu(i,{left:Math.min(l.left,p.left),top:Math.min(l.top,p.top)-d,right:Math.max(l.right,p.right),bottom:Math.max(l.bottom,p.bottom)+d});_a(i,v.scrollLeft,v.scrollTop)}function wa(i,l){Math.abs(i.doc.scrollTop-l)<2||(e||ku(i,{top:l}),Vf(i,l,!0),e&&ku(i),xa(i,100))}function Vf(i,l,p){l=Math.max(0,Math.min(i.display.scroller.scrollHeight-i.display.scroller.clientHeight,l)),!(i.display.scroller.scrollTop==l&&!p)&&(i.doc.scrollTop=l,i.display.scrollbars.setScrollTop(l),i.display.scroller.scrollTop!=l&&(i.display.scroller.scrollTop=l))}function Jo(i,l,p,d){l=Math.max(0,Math.min(l,i.display.scroller.scrollWidth-i.display.scroller.clientWidth)),!((p?l==i.doc.scrollLeft:Math.abs(i.doc.scrollLeft-l)<2)&&!d)&&(i.doc.scrollLeft=l,Hf(i),i.display.scroller.scrollLeft!=l&&(i.display.scroller.scrollLeft=l),i.display.scrollbars.setScrollLeft(l))}function ba(i){var l=i.display,p=l.gutters.offsetWidth,d=Math.round(i.doc.height+qo(i.display));return{clientHeight:l.scroller.clientHeight,viewHeight:l.wrapper.clientHeight,scrollWidth:l.scroller.scrollWidth,clientWidth:l.scroller.clientWidth,viewWidth:l.wrapper.clientWidth,barLeft:i.options.fixedGutter?p:0,docHeight:d,scrollHeight:d+nn(i)+l.barHeight,nativeBarWidth:l.nativeBarWidth,gutterWidth:p}}var Qo=function(i,l,p){this.cm=p;var d=this.vert=U("div",[U("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),v=this.horiz=U("div",[U("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");d.tabIndex=v.tabIndex=-1,i(d),i(v),vt(d,"scroll",function(){d.clientHeight&&l(d.scrollTop,"vertical")}),vt(v,"scroll",function(){v.clientWidth&&l(v.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,u&&c<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Qo.prototype.update=function(i){var l=i.scrollWidth>i.clientWidth+1,p=i.scrollHeight>i.clientHeight+1,d=i.nativeBarWidth;if(p){this.vert.style.display="block",this.vert.style.bottom=l?d+"px":"0";var v=i.viewHeight-(l?d:0);this.vert.firstChild.style.height=Math.max(0,i.scrollHeight-i.clientHeight+v)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(l){this.horiz.style.display="block",this.horiz.style.right=p?d+"px":"0",this.horiz.style.left=i.barLeft+"px";var m=i.viewWidth-i.barLeft-(p?d:0);this.horiz.firstChild.style.width=Math.max(0,i.scrollWidth-i.clientWidth+m)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&i.clientHeight>0&&(d==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:p?d:0,bottom:l?d:0}},Qo.prototype.setScrollLeft=function(i){this.horiz.scrollLeft!=i&&(this.horiz.scrollLeft=i),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Qo.prototype.setScrollTop=function(i){this.vert.scrollTop!=i&&(this.vert.scrollTop=i),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Qo.prototype.zeroWidthHack=function(){var i=F&&!b?"12px":"18px";this.horiz.style.height=this.vert.style.width=i,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Et,this.disableVert=new Et},Qo.prototype.enableZeroWidthBar=function(i,l,p){i.style.pointerEvents="auto";function d(){var v=i.getBoundingClientRect(),m=p=="vert"?document.elementFromPoint(v.right-1,(v.top+v.bottom)/2):document.elementFromPoint((v.right+v.left)/2,v.bottom-1);m!=i?i.style.pointerEvents="none":l.set(1e3,d)}l.set(1e3,d)},Qo.prototype.clear=function(){var i=this.horiz.parentNode;i.removeChild(this.horiz),i.removeChild(this.vert)};var Ca=function(){};Ca.prototype.update=function(){return{bottom:0,right:0}},Ca.prototype.setScrollLeft=function(){},Ca.prototype.setScrollTop=function(){},Ca.prototype.clear=function(){};function Ti(i,l){l||(l=ba(i));var p=i.display.barWidth,d=i.display.barHeight;If(i,l);for(var v=0;v<4&&p!=i.display.barWidth||d!=i.display.barHeight;v++)p!=i.display.barWidth&&i.options.lineWrapping&&Ms(i),If(i,ba(i)),p=i.display.barWidth,d=i.display.barHeight}function If(i,l){var p=i.display,d=p.scrollbars.update(l);p.sizer.style.paddingRight=(p.barWidth=d.right)+"px",p.sizer.style.paddingBottom=(p.barHeight=d.bottom)+"px",p.heightForcer.style.borderBottom=d.bottom+"px solid transparent",d.right&&d.bottom?(p.scrollbarFiller.style.display="block",p.scrollbarFiller.style.height=d.bottom+"px",p.scrollbarFiller.style.width=d.right+"px"):p.scrollbarFiller.style.display="",d.bottom&&i.options.coverGutterNextToScrollbar&&i.options.fixedGutter?(p.gutterFiller.style.display="block",p.gutterFiller.style.height=d.bottom+"px",p.gutterFiller.style.width=l.gutterWidth+"px"):p.gutterFiller.style.display=""}var Nf={native:Qo,null:Ca};function Rf(i){i.display.scrollbars&&(i.display.scrollbars.clear(),i.display.scrollbars.addClass&&nt(i.display.wrapper,i.display.scrollbars.addClass)),i.display.scrollbars=new Nf[i.options.scrollbarStyle](function(l){i.display.wrapper.insertBefore(l,i.display.scrollbarFiller),vt(l,"mousedown",function(){i.state.focused&&setTimeout(function(){return i.display.input.focus()},0)}),l.setAttribute("cm-not-content","true")},function(l,p){p=="horizontal"?Jo(i,l):wa(i,l)},i),i.display.scrollbars.addClass&&gt(i.display.wrapper,i.display.scrollbars.addClass)}var lg=0;function ti(i){i.curOp={cm:i,viewChanged:!1,startHeight:i.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++lg,markArrays:null},ws(i.curOp)}function ei(i){var l=i.curOp;l&&da(l,function(p){for(var d=0;d<p.ops.length;d++)p.ops[d].cm.curOp=null;ug(p)})}function ug(i){for(var l=i.ops,p=0;p<l.length;p++)cg(l[p]);for(var d=0;d<l.length;d++)fg(l[d]);for(var v=0;v<l.length;v++)dg(l[v]);for(var m=0;m<l.length;m++)pg(l[m]);for(var w=0;w<l.length;w++)hg(l[w])}function cg(i){var l=i.cm,p=l.display;gg(l),i.updateMaxLine&&xo(l),i.mustUpdate=i.viewChanged||i.forceUpdate||i.scrollTop!=null||i.scrollToPos&&(i.scrollToPos.from.line<p.viewFrom||i.scrollToPos.to.line>=p.viewTo)||p.maxLineChanged&&l.options.lineWrapping,i.update=i.mustUpdate&&new js(l,i.mustUpdate&&{top:i.scrollTop,ensure:i.scrollToPos},i.forceUpdate)}function fg(i){i.updatedDisplay=i.mustUpdate&&Au(i.cm,i.update)}function dg(i){var l=i.cm,p=l.display;i.updatedDisplay&&Ms(l),i.barMeasure=ba(l),p.maxLineChanged&&!l.options.lineWrapping&&(i.adjustWidthTo=ht(l,p.maxLine,p.maxLine.text.length).left+3,l.display.sizerWidth=i.adjustWidthTo,i.barMeasure.scrollWidth=Math.max(p.scroller.clientWidth,p.sizer.offsetLeft+i.adjustWidthTo+nn(l)+l.display.barWidth),i.maxScrollLeft=Math.max(0,p.sizer.offsetLeft+i.adjustWidthTo-so(l))),(i.updatedDisplay||i.selectionChanged)&&(i.preparedSelection=p.input.prepareSelection())}function pg(i){var l=i.cm;i.adjustWidthTo!=null&&(l.display.sizer.style.minWidth=i.adjustWidthTo+"px",i.maxScrollLeft<l.doc.scrollLeft&&Jo(l,Math.min(l.display.scroller.scrollLeft,i.maxScrollLeft),!0),l.display.maxLineChanged=!1);var p=i.focus&&i.focus==yt();i.preparedSelection&&l.display.input.showSelection(i.preparedSelection,p),(i.updatedDisplay||i.startHeight!=l.doc.height)&&Ti(l,i.barMeasure),i.updatedDisplay&&Du(l,i.barMeasure),i.selectionChanged&&Su(l),l.state.focused&&i.updateInput&&l.display.input.reset(i.typing),p&&Df(i.cm)}function hg(i){var l=i.cm,p=l.display,d=l.doc;if(i.updatedDisplay&&Ff(l,i.update),p.wheelStartX!=null&&(i.scrollTop!=null||i.scrollLeft!=null||i.scrollToPos)&&(p.wheelStartX=p.wheelStartY=null),i.scrollTop!=null&&Vf(l,i.scrollTop,i.forceScroll),i.scrollLeft!=null&&Jo(l,i.scrollLeft,!0,!0),i.scrollToPos){var v=ig(l,Vt(d,i.scrollToPos.from),Vt(d,i.scrollToPos.to),i.scrollToPos.margin);og(l,v)}var m=i.maybeHiddenMarkers,w=i.maybeUnhiddenMarkers;if(m)for(var C=0;C<m.length;++C)m[C].lines.length||Yt(m[C],"hide");if(w)for(var S=0;S<w.length;++S)w[S].lines.length&&Yt(w[S],"unhide");p.wrapper.offsetHeight&&(d.scrollTop=l.display.scroller.scrollTop),i.changeObjs&&Yt(l,"changes",l,i.changeObjs),i.update&&i.update.finish()}function on(i,l){if(i.curOp)return l();ti(i);try{return l()}finally{ei(i)}}function _r(i,l){return function(){if(i.curOp)return l.apply(i,arguments);ti(i);try{return l.apply(i,arguments)}finally{ei(i)}}}function Ir(i){return function(){if(this.curOp)return i.apply(this,arguments);ti(this);try{return i.apply(this,arguments)}finally{ei(this)}}}function wr(i){return function(){var l=this.cm;if(!l||l.curOp)return i.apply(this,arguments);ti(l);try{return i.apply(this,arguments)}finally{ei(l)}}}function xa(i,l){i.doc.highlightFrontier<i.display.viewTo&&i.state.highlight.set(l,ft(vg,i))}function vg(i){var l=i.doc;if(!(l.highlightFrontier>=i.display.viewTo)){var p=+new Date+i.options.workTime,d=Jn(i,l.highlightFrontier),v=[];l.iter(d.line,Math.min(l.first+l.size,i.display.viewTo+500),function(m){if(d.line>=i.display.viewFrom){var w=m.styles,C=m.text.length>i.options.maxHighlightLength?or(l.mode,d.state):null,S=en(i,m,d,!0);C&&(d.state=C),m.styles=S.styles;var E=m.styleClasses,G=S.classes;G?m.styleClasses=G:E&&(m.styleClasses=null);for(var Z=!w||w.length!=m.styles.length||E!=G&&(!E||!G||E.bgClass!=G.bgClass||E.textClass!=G.textClass),pt=0;!Z&&pt<w.length;++pt)Z=w[pt]!=m.styles[pt];Z&&v.push(d.line),m.stateAfter=d.save(),d.nextLine()}else m.text.length<=i.options.maxHighlightLength&&Qn(i,m.text,d),m.stateAfter=d.line%5==0?d.save():null,d.nextLine();if(+new Date>p)return xa(i,i.options.workDelay),!0}),l.highlightFrontier=d.line,l.modeFrontier=Math.max(l.modeFrontier,d.line),v.length&&on(i,function(){for(var m=0;m<v.length;m++)Mo(i,v[m],"text")})}}var js=function(i,l,p){var d=i.display;this.viewport=l,this.visible=Ds(d,i.doc,l),this.editorIsHidden=!d.wrapper.offsetWidth,this.wrapperHeight=d.wrapper.clientHeight,this.wrapperWidth=d.wrapper.clientWidth,this.oldDisplayWidth=so(i),this.force=p,this.dims=bu(i),this.events=[]};js.prototype.signal=function(i,l){Se(i,l)&&this.events.push(arguments)},js.prototype.finish=function(){for(var i=0;i<this.events.length;i++)Yt.apply(null,this.events[i])};function gg(i){var l=i.display;!l.scrollbarsClipped&&l.scroller.offsetWidth&&(l.nativeBarWidth=l.scroller.offsetWidth-l.scroller.clientWidth,l.heightForcer.style.height=nn(i)+"px",l.sizer.style.marginBottom=-l.nativeBarWidth+"px",l.sizer.style.borderRightWidth=nn(i)+"px",l.scrollbarsClipped=!0)}function yg(i){if(i.hasFocus())return null;var l=yt();if(!l||!A(i.display.lineDiv,l))return null;var p={activeElt:l};if(window.getSelection){var d=window.getSelection();d.anchorNode&&d.extend&&A(i.display.lineDiv,d.anchorNode)&&(p.anchorNode=d.anchorNode,p.anchorOffset=d.anchorOffset,p.focusNode=d.focusNode,p.focusOffset=d.focusOffset)}return p}function mg(i){if(!(!i||!i.activeElt||i.activeElt==yt())&&(i.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(i.activeElt.nodeName)&&i.anchorNode&&A(document.body,i.anchorNode)&&A(document.body,i.focusNode))){var l=window.getSelection(),p=document.createRange();p.setEnd(i.anchorNode,i.anchorOffset),p.collapse(!1),l.removeAllRanges(),l.addRange(p),l.extend(i.focusNode,i.focusOffset)}}function Au(i,l){var p=i.display,d=i.doc;if(l.editorIsHidden)return Do(i),!1;if(!l.force&&l.visible.from>=p.viewFrom&&l.visible.to<=p.viewTo&&(p.updateLineNumbers==null||p.updateLineNumbers>=p.viewTo)&&p.renderedView==p.view&&Af(i)==0)return!1;Bf(i)&&(Do(i),l.dims=bu(i));var v=d.first+d.size,m=Math.max(l.visible.from-i.options.viewportMargin,d.first),w=Math.min(v,l.visible.to+i.options.viewportMargin);p.viewFrom<m&&m-p.viewFrom<20&&(m=Math.max(d.first,p.viewFrom)),p.viewTo>w&&p.viewTo-w<20&&(w=Math.min(v,p.viewTo)),dr&&(m=En(i.doc,m),w=Hr(i.doc,w));var C=m!=p.viewFrom||w!=p.viewTo||p.lastWrapHeight!=l.wrapperHeight||p.lastWrapWidth!=l.wrapperWidth;rg(i,m,w),p.viewOffset=An(te(i.doc,p.viewFrom)),i.display.mover.style.top=p.viewOffset+"px";var S=Af(i);if(!C&&S==0&&!l.force&&p.renderedView==p.view&&(p.updateLineNumbers==null||p.updateLineNumbers>=p.viewTo))return!1;var E=yg(i);return S>4&&(p.lineDiv.style.display="none"),_g(i,p.updateLineNumbers,l.dims),S>4&&(p.lineDiv.style.display=""),p.renderedView=p.view,mg(E),H(p.cursorDiv),H(p.selectionDiv),p.gutters.style.height=p.sizer.style.minHeight=0,C&&(p.lastWrapHeight=l.wrapperHeight,p.lastWrapWidth=l.wrapperWidth,xa(i,400)),p.updateLineNumbers=null,!0}function Ff(i,l){for(var p=l.viewport,d=!0;;d=!1){if(!d||!i.options.lineWrapping||l.oldDisplayWidth==so(i)){if(p&&p.top!=null&&(p={top:Math.min(i.doc.height+qo(i.display)-O(i),p.top)}),l.visible=Ds(i.display,i.doc,p),l.visible.from>=i.display.viewFrom&&l.visible.to<=i.display.viewTo)break}else d&&(l.visible=Ds(i.display,i.doc,p));if(!Au(i,l))break;Ms(i);var v=ba(i);ma(i),Ti(i,v),Du(i,v),l.force=!1}l.signal(i,"update",i),(i.display.viewFrom!=i.display.reportedViewFrom||i.display.viewTo!=i.display.reportedViewTo)&&(l.signal(i,"viewportChange",i,i.display.viewFrom,i.display.viewTo),i.display.reportedViewFrom=i.display.viewFrom,i.display.reportedViewTo=i.display.viewTo)}function ku(i,l){var p=new js(i,l);if(Au(i,p)){Ms(i),Ff(i,p);var d=ba(i);ma(i),Ti(i,d),Du(i,d),p.finish()}}function _g(i,l,p){var d=i.display,v=i.options.lineNumbers,m=d.lineDiv,w=m.firstChild;function C(wt){var kt=wt.nextSibling;return f&&F&&i.display.currentWheelTarget==wt?wt.style.display="none":wt.parentNode.removeChild(wt),kt}for(var S=d.view,E=d.viewFrom,G=0;G<S.length;G++){var Z=S[G];if(!Z.hidden)if(!Z.node||Z.node.parentNode!=m){var pt=xs(i,Z,E,p);m.insertBefore(pt,w)}else{for(;w!=Z.node;)w=C(w);var ot=v&&l!=null&&l<=E&&Z.lineNumber;Z.changes&&(Qt(Z.changes,"gutter")>-1&&(ot=!1),$n(i,Z,E,p)),ot&&(H(Z.lineNumber),Z.lineNumber.appendChild(document.createTextNode(hn(i.options,E)))),w=Z.node.nextSibling}E+=Z.size}for(;w;)w=C(w)}function Mu(i){var l=i.gutters.offsetWidth;i.sizer.style.marginLeft=l+"px",Ze(i,"gutterChanged",i)}function Du(i,l){i.display.sizer.style.minHeight=l.docHeight+"px",i.display.heightForcer.style.top=l.docHeight+"px",i.display.gutters.style.height=l.docHeight+i.display.barHeight+nn(i)+"px"}function Hf(i){var l=i.display,p=l.view;if(!(!l.alignWidgets&&(!l.gutters.firstChild||!i.options.fixedGutter))){for(var d=Cu(l)-l.scroller.scrollLeft+i.doc.scrollLeft,v=l.gutters.offsetWidth,m=d+"px",w=0;w<p.length;w++)if(!p[w].hidden){i.options.fixedGutter&&(p[w].gutter&&(p[w].gutter.style.left=m),p[w].gutterBackground&&(p[w].gutterBackground.style.left=m));var C=p[w].alignable;if(C)for(var S=0;S<C.length;S++)C[S].style.left=m}i.options.fixedGutter&&(l.gutters.style.left=d+v+"px")}}function Bf(i){if(!i.options.lineNumbers)return!1;var l=i.doc,p=hn(i.options,l.first+l.size-1),d=i.display;if(p.length!=d.lineNumChars){var v=d.measure.appendChild(U("div",[U("div",p)],"CodeMirror-linenumber CodeMirror-gutter-elt")),m=v.firstChild.offsetWidth,w=v.offsetWidth-m;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(m,d.lineGutter.offsetWidth-w)+1,d.lineNumWidth=d.lineNumInnerWidth+w,d.lineNumChars=d.lineNumInnerWidth?p.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",Mu(i.display),!0}return!1}function Lu(i,l){for(var p=[],d=!1,v=0;v<i.length;v++){var m=i[v],w=null;if(typeof m!="string"&&(w=m.style,m=m.className),m=="CodeMirror-linenumbers")if(l)d=!0;else continue;p.push({className:m,style:w})}return l&&!d&&p.push({className:"CodeMirror-linenumbers",style:null}),p}function Uf(i){var l=i.gutters,p=i.gutterSpecs;H(l),i.lineGutter=null;for(var d=0;d<p.length;++d){var v=p[d],m=v.className,w=v.style,C=l.appendChild(U("div",null,"CodeMirror-gutter "+m));w&&(C.style.cssText=w),m=="CodeMirror-linenumbers"&&(i.lineGutter=C,C.style.width=(i.lineNumWidth||1)+"px")}l.style.display=p.length?"":"none",Mu(i)}function Sa(i){Uf(i.display),Ur(i),Hf(i)}function wg(i,l,p,d){var v=this;this.input=p,v.scrollbarFiller=U("div",null,"CodeMirror-scrollbar-filler"),v.scrollbarFiller.setAttribute("cm-not-content","true"),v.gutterFiller=U("div",null,"CodeMirror-gutter-filler"),v.gutterFiller.setAttribute("cm-not-content","true"),v.lineDiv=B("div",null,"CodeMirror-code"),v.selectionDiv=U("div",null,null,"position: relative; z-index: 1"),v.cursorDiv=U("div",null,"CodeMirror-cursors"),v.measure=U("div",null,"CodeMirror-measure"),v.lineMeasure=U("div",null,"CodeMirror-measure"),v.lineSpace=B("div",[v.measure,v.lineMeasure,v.selectionDiv,v.cursorDiv,v.lineDiv],null,"position: relative; outline: none");var m=B("div",[v.lineSpace],"CodeMirror-lines");v.mover=U("div",[m],null,"position: relative"),v.sizer=U("div",[v.mover],"CodeMirror-sizer"),v.sizerWidth=null,v.heightForcer=U("div",null,null,"position: absolute; height: "+re+"px; width: 1px;"),v.gutters=U("div",null,"CodeMirror-gutters"),v.lineGutter=null,v.scroller=U("div",[v.sizer,v.heightForcer,v.gutters],"CodeMirror-scroll"),v.scroller.setAttribute("tabIndex","-1"),v.wrapper=U("div",[v.scrollbarFiller,v.gutterFiller,v.scroller],"CodeMirror"),v.wrapper.setAttribute("translate","no"),u&&c<8&&(v.gutters.style.zIndex=-1,v.scroller.style.paddingRight=0),!f&&!(e&&z)&&(v.scroller.draggable=!0),i&&(i.appendChild?i.appendChild(v.wrapper):i(v.wrapper)),v.viewFrom=v.viewTo=l.first,v.reportedViewFrom=v.reportedViewTo=l.first,v.view=[],v.renderedView=null,v.externalMeasured=null,v.viewOffset=0,v.lastWrapHeight=v.lastWrapWidth=0,v.updateLineNumbers=null,v.nativeBarWidth=v.barHeight=v.barWidth=0,v.scrollbarsClipped=!1,v.lineNumWidth=v.lineNumInnerWidth=v.lineNumChars=null,v.alignWidgets=!1,v.cachedCharWidth=v.cachedTextHeight=v.cachedPaddingH=null,v.maxLine=null,v.maxLineLength=0,v.maxLineChanged=!1,v.wheelDX=v.wheelDY=v.wheelStartX=v.wheelStartY=null,v.shift=!1,v.selForContextMenu=null,v.activeTouch=null,v.gutterSpecs=Lu(d.gutters,d.lineNumbers),Uf(v),p.init(v)}var Vs=0,wn=null;u?wn=-.53:e?wn=15:g?wn=-.7:_&&(wn=-1/3);function Wf(i){var l=i.wheelDeltaX,p=i.wheelDeltaY;return l==null&&i.detail&&i.axis==i.HORIZONTAL_AXIS&&(l=i.detail),p==null&&i.detail&&i.axis==i.VERTICAL_AXIS?p=i.detail:p==null&&(p=i.wheelDelta),{x:l,y:p}}function bg(i){var l=Wf(i);return l.x*=wn,l.y*=wn,l}function zf(i,l){var p=Wf(l),d=p.x,v=p.y,m=i.display,w=m.scroller,C=w.scrollWidth>w.clientWidth,S=w.scrollHeight>w.clientHeight;if(d&&C||v&&S){if(v&&F&&f){t:for(var E=l.target,G=m.view;E!=w;E=E.parentNode)for(var Z=0;Z<G.length;Z++)if(G[Z].node==E){i.display.currentWheelTarget=E;break t}}if(d&&!e&&!y&&wn!=null){v&&S&&wa(i,Math.max(0,w.scrollTop+v*wn)),Jo(i,Math.max(0,w.scrollLeft+d*wn)),(!v||v&&S)&&Te(l),m.wheelStartX=null;return}if(v&&wn!=null){var pt=v*wn,ot=i.doc.scrollTop,wt=ot+m.wrapper.clientHeight;pt<0?ot=Math.max(0,ot+pt-50):wt=Math.min(i.doc.height,wt+pt+50),ku(i,{top:ot,bottom:wt})}Vs<20&&(m.wheelStartX==null?(m.wheelStartX=w.scrollLeft,m.wheelStartY=w.scrollTop,m.wheelDX=d,m.wheelDY=v,setTimeout(function(){if(m.wheelStartX!=null){var kt=w.scrollLeft-m.wheelStartX,It=w.scrollTop-m.wheelStartY,Kt=It&&m.wheelDY&&It/m.wheelDY||kt&&m.wheelDX&&kt/m.wheelDX;m.wheelStartX=m.wheelStartY=null,Kt&&(wn=(wn*Vs+Kt)/(Vs+1),++Vs)}},200)):(m.wheelDX+=d,m.wheelDY+=v))}}var bn=function(i,l){this.ranges=i,this.primIndex=l};bn.prototype.primary=function(){return this.ranges[this.primIndex]},bn.prototype.equals=function(i){if(i==this)return!0;if(i.primIndex!=this.primIndex||i.ranges.length!=this.ranges.length)return!1;for(var l=0;l<this.ranges.length;l++){var p=this.ranges[l],d=i.ranges[l];if(!vn(p.anchor,d.anchor)||!vn(p.head,d.head))return!1}return!0},bn.prototype.deepCopy=function(){for(var i=[],l=0;l<this.ranges.length;l++)i[l]=new Ie(M(this.ranges[l].anchor),M(this.ranges[l].head));return new bn(i,this.primIndex)},bn.prototype.somethingSelected=function(){for(var i=0;i<this.ranges.length;i++)if(!this.ranges[i].empty())return!0;return!1},bn.prototype.contains=function(i,l){l||(l=i);for(var p=0;p<this.ranges.length;p++){var d=this.ranges[p];if(de(l,d.from())>=0&&de(i,d.to())<=0)return p}return-1};var Ie=function(i,l){this.anchor=i,this.head=l};Ie.prototype.from=function(){return Ct(this.anchor,this.head)},Ie.prototype.to=function(){return Y(this.anchor,this.head)},Ie.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Hn(i,l,p){var d=i&&i.options.selectionsMayTouch,v=l[p];l.sort(function(pt,ot){return de(pt.from(),ot.from())}),p=Qt(l,v);for(var m=1;m<l.length;m++){var w=l[m],C=l[m-1],S=de(C.to(),w.from());if(d&&!w.empty()?S>0:S>=0){var E=Ct(C.from(),w.from()),G=Y(C.to(),w.to()),Z=C.empty()?w.from()==w.head:C.from()==C.head;m<=p&&--p,l.splice(--m,2,new Ie(Z?G:E,Z?E:G))}}return new bn(l,p)}function Lo(i,l){return new bn([new Ie(i,l||i)],0)}function jo(i){return i.text?Dt(i.from.line+i.text.length-1,Rt(i.text).length+(i.text.length==1?i.from.ch:0)):i.to}function Kf(i,l){if(de(i,l.from)<0)return i;if(de(i,l.to)<=0)return jo(l);var p=i.line+l.text.length-(l.to.line-l.from.line)-1,d=i.ch;return i.line==l.to.line&&(d+=jo(l).ch-l.to.ch),Dt(p,d)}function ju(i,l){for(var p=[],d=0;d<i.sel.ranges.length;d++){var v=i.sel.ranges[d];p.push(new Ie(Kf(v.anchor,l),Kf(v.head,l)))}return Hn(i.cm,p,i.sel.primIndex)}function Gf(i,l,p){return i.line==l.line?Dt(p.line,i.ch-l.ch+p.ch):Dt(p.line+(i.line-l.line),i.ch)}function Cg(i,l,p){for(var d=[],v=Dt(i.first,0),m=v,w=0;w<l.length;w++){var C=l[w],S=Gf(C.from,v,m),E=Gf(jo(C),v,m);if(v=C.to,m=E,p=="around"){var G=i.sel.ranges[w],Z=de(G.head,G.anchor)<0;d[w]=new Ie(Z?E:S,Z?S:E)}else d[w]=new Ie(S,S)}return new bn(d,i.sel.primIndex)}function Vu(i){i.doc.mode=ve(i.options,i.doc.modeOption),Oa(i)}function Oa(i){i.doc.iter(function(l){l.stateAfter&&(l.stateAfter=null),l.styles&&(l.styles=null)}),i.doc.modeFrontier=i.doc.highlightFrontier=i.doc.first,xa(i,100),i.state.modeGen++,i.curOp&&Ur(i)}function $f(i,l){return l.from.ch==0&&l.to.ch==0&&Rt(l.text)==""&&(!i.cm||i.cm.options.wholeLineUpdateBefore)}function Iu(i,l,p,d){function v(Jt){return p?p[Jt]:null}function m(Jt,Gt,ee){hs(Jt,Gt,ee,d),Ze(Jt,"change",Jt,l)}function w(Jt,Gt){for(var ee=[],pe=Jt;pe<Gt;++pe)ee.push(new mr(E[pe],v(pe),d));return ee}var C=l.from,S=l.to,E=l.text,G=te(i,C.line),Z=te(i,S.line),pt=Rt(E),ot=v(E.length-1),wt=S.line-C.line;if(l.full)i.insert(0,w(0,E.length)),i.remove(E.length,i.size-E.length);else if($f(i,l)){var kt=w(0,E.length-1);m(Z,Z.text,ot),wt&&i.remove(C.line,wt),kt.length&&i.insert(C.line,kt)}else if(G==Z)if(E.length==1)m(G,G.text.slice(0,C.ch)+pt+G.text.slice(S.ch),ot);else{var It=w(1,E.length-1);It.push(new mr(pt+G.text.slice(S.ch),ot,d)),m(G,G.text.slice(0,C.ch)+E[0],v(0)),i.insert(C.line+1,It)}else if(E.length==1)m(G,G.text.slice(0,C.ch)+E[0]+Z.text.slice(S.ch),v(0)),i.remove(C.line+1,wt);else{m(G,G.text.slice(0,C.ch)+E[0],v(0)),m(Z,pt+Z.text.slice(S.ch),ot);var Kt=w(1,E.length-1);wt>1&&i.remove(C.line+1,wt-1),i.insert(C.line+1,Kt)}Ze(i,"change",i,l)}function Vo(i,l,p){function d(v,m,w){if(v.linked)for(var C=0;C<v.linked.length;++C){var S=v.linked[C];if(S.doc!=m){var E=w&&S.sharedHist;p&&!E||(l(S.doc,E),d(S.doc,v,E))}}}d(i,null,!0)}function qf(i,l){if(l.cm)throw new Error("This document is already in use.");i.doc=l,l.cm=i,xu(i),Vu(i),Yf(i),i.options.direction=l.direction,i.options.lineWrapping||xo(i),i.options.mode=l.modeOption,Ur(i)}function Yf(i){(i.doc.direction=="rtl"?gt:nt)(i.display.lineDiv,"CodeMirror-rtl")}function xg(i){on(i,function(){Yf(i),Ur(i)})}function Is(i){this.done=[],this.undone=[],this.undoDepth=i?i.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=i?i.maxGeneration:1}function Nu(i,l){var p={from:M(l.from),to:jo(l),text:gr(i,l.from,l.to)};return Jf(i,p,l.from.line,l.to.line+1),Vo(i,function(d){return Jf(d,p,l.from.line,l.to.line+1)},!0),p}function Xf(i){for(;i.length;){var l=Rt(i);if(l.ranges)i.pop();else break}}function Sg(i,l){if(l)return Xf(i.done),Rt(i.done);if(i.done.length&&!Rt(i.done).ranges)return Rt(i.done);if(i.done.length>1&&!i.done[i.done.length-2].ranges)return i.done.pop(),Rt(i.done)}function Zf(i,l,p,d){var v=i.history;v.undone.length=0;var m=+new Date,w,C;if((v.lastOp==d||v.lastOrigin==l.origin&&l.origin&&(l.origin.charAt(0)=="+"&&v.lastModTime>m-(i.cm?i.cm.options.historyEventDelay:500)||l.origin.charAt(0)=="*"))&&(w=Sg(v,v.lastOp==d)))C=Rt(w.changes),de(l.from,l.to)==0&&de(l.from,C.to)==0?C.to=jo(l):w.changes.push(Nu(i,l));else{var S=Rt(v.done);for((!S||!S.ranges)&&Ns(i.sel,v.done),w={changes:[Nu(i,l)],generation:v.generation},v.done.push(w);v.done.length>v.undoDepth;)v.done.shift(),v.done[0].ranges||v.done.shift()}v.done.push(p),v.generation=++v.maxGeneration,v.lastModTime=v.lastSelTime=m,v.lastOp=v.lastSelOp=d,v.lastOrigin=v.lastSelOrigin=l.origin,C||Yt(i,"historyAdded")}function Og(i,l,p,d){var v=l.charAt(0);return v=="*"||v=="+"&&p.ranges.length==d.ranges.length&&p.somethingSelected()==d.somethingSelected()&&new Date-i.history.lastSelTime<=(i.cm?i.cm.options.historyEventDelay:500)}function Tg(i,l,p,d){var v=i.history,m=d&&d.origin;p==v.lastSelOp||m&&v.lastSelOrigin==m&&(v.lastModTime==v.lastSelTime&&v.lastOrigin==m||Og(i,m,Rt(v.done),l))?v.done[v.done.length-1]=l:Ns(l,v.done),v.lastSelTime=+new Date,v.lastSelOrigin=m,v.lastSelOp=p,d&&d.clearRedo!==!1&&Xf(v.undone)}function Ns(i,l){var p=Rt(l);p&&p.ranges&&p.equals(i)||l.push(i)}function Jf(i,l,p,d){var v=l["spans_"+i.id],m=0;i.iter(Math.max(i.first,p),Math.min(i.first+i.size,d),function(w){w.markedSpans&&((v||(v=l["spans_"+i.id]={}))[m]=w.markedSpans),++m})}function Pg(i){if(!i)return null;for(var l,p=0;p<i.length;++p)i[p].marker.explicitlyCleared?l||(l=i.slice(0,p)):l&&l.push(i[p]);return l?l.length?l:null:i}function Eg(i,l){var p=l["spans_"+i.id];if(!p)return null;for(var d=[],v=0;v<l.text.length;++v)d.push(Pg(p[v]));return d}function Qf(i,l){var p=Eg(i,l),d=ro(i,l);if(!p)return d;if(!d)return p;for(var v=0;v<p.length;++v){var m=p[v],w=d[v];if(m&&w)t:for(var C=0;C<w.length;++C){for(var S=w[C],E=0;E<m.length;++E)if(m[E].marker==S.marker)continue t;m.push(S)}else w&&(p[v]=w)}return p}function Pi(i,l,p){for(var d=[],v=0;v<i.length;++v){var m=i[v];if(m.ranges){d.push(p?bn.prototype.deepCopy.call(m):m);continue}var w=m.changes,C=[];d.push({changes:C});for(var S=0;S<w.length;++S){var E=w[S],G=void 0;if(C.push({from:E.from,to:E.to,text:E.text}),l)for(var Z in E)(G=Z.match(/^spans_(\d+)$/))&&Qt(l,Number(G[1]))>-1&&(Rt(C)[Z]=E[Z],delete E[Z])}}return d}function Ru(i,l,p,d){if(d){var v=i.anchor;if(p){var m=de(l,v)<0;m!=de(p,v)<0?(v=l,l=p):m!=de(l,p)<0&&(l=p)}return new Ie(v,l)}else return new Ie(p||l,l)}function Rs(i,l,p,d,v){v==null&&(v=i.cm&&(i.cm.display.shift||i.extend)),kr(i,new bn([Ru(i.sel.primary(),l,p,v)],0),d)}function td(i,l,p){for(var d=[],v=i.cm&&(i.cm.display.shift||i.extend),m=0;m<i.sel.ranges.length;m++)d[m]=Ru(i.sel.ranges[m],l[m],null,v);var w=Hn(i.cm,d,i.sel.primIndex);kr(i,w,p)}function Fu(i,l,p,d){var v=i.sel.ranges.slice(0);v[l]=p,kr(i,Hn(i.cm,v,i.sel.primIndex),d)}function ed(i,l,p,d){kr(i,Lo(l,p),d)}function Ag(i,l,p){var d={ranges:l.ranges,update:function(v){this.ranges=[];for(var m=0;m<v.length;m++)this.ranges[m]=new Ie(Vt(i,v[m].anchor),Vt(i,v[m].head))},origin:p&&p.origin};return Yt(i,"beforeSelectionChange",i,d),i.cm&&Yt(i.cm,"beforeSelectionChange",i.cm,d),d.ranges!=l.ranges?Hn(i.cm,d.ranges,d.ranges.length-1):l}function rd(i,l,p){var d=i.history.done,v=Rt(d);v&&v.ranges?(d[d.length-1]=l,Fs(i,l,p)):kr(i,l,p)}function kr(i,l,p){Fs(i,l,p),Tg(i,i.sel,i.cm?i.cm.curOp.id:NaN,p)}function Fs(i,l,p){(Se(i,"beforeSelectionChange")||i.cm&&Se(i.cm,"beforeSelectionChange"))&&(l=Ag(i,l,p));var d=p&&p.bias||(de(l.primary().head,i.sel.primary().head)<0?-1:1);nd(i,id(i,l,d,!0)),!(p&&p.scroll===!1)&&i.cm&&i.cm.getOption("readOnly")!="nocursor"&&Oi(i.cm)}function nd(i,l){l.equals(i.sel)||(i.sel=l,i.cm&&(i.cm.curOp.updateInput=1,i.cm.curOp.selectionChanged=!0,ae(i.cm)),Ze(i,"cursorActivity",i))}function od(i){nd(i,id(i,i.sel,null,!1))}function id(i,l,p,d){for(var v,m=0;m<l.ranges.length;m++){var w=l.ranges[m],C=l.ranges.length==i.sel.ranges.length&&i.sel.ranges[m],S=Hs(i,w.anchor,C&&C.anchor,p,d),E=Hs(i,w.head,C&&C.head,p,d);(v||S!=w.anchor||E!=w.head)&&(v||(v=l.ranges.slice(0,m)),v[m]=new Ie(S,E))}return v?Hn(i.cm,v,l.primIndex):l}function Ei(i,l,p,d,v){var m=te(i,l.line);if(m.markedSpans)for(var w=0;w<m.markedSpans.length;++w){var C=m.markedSpans[w],S=C.marker,E="selectLeft"in S?!S.selectLeft:S.inclusiveLeft,G="selectRight"in S?!S.selectRight:S.inclusiveRight;if((C.from==null||(E?C.from<=l.ch:C.from<l.ch))&&(C.to==null||(G?C.to>=l.ch:C.to>l.ch))){if(v&&(Yt(S,"beforeCursorEnter"),S.explicitlyCleared))if(m.markedSpans){--w;continue}else break;if(!S.atomic)continue;if(p){var Z=S.find(d<0?1:-1),pt=void 0;if((d<0?G:E)&&(Z=ad(i,Z,-d,Z&&Z.line==l.line?m:null)),Z&&Z.line==l.line&&(pt=de(Z,p))&&(d<0?pt<0:pt>0))return Ei(i,Z,l,d,v)}var ot=S.find(d<0?-1:1);return(d<0?E:G)&&(ot=ad(i,ot,d,ot.line==l.line?m:null)),ot?Ei(i,ot,l,d,v):null}}return l}function Hs(i,l,p,d,v){var m=d||1,w=Ei(i,l,p,m,v)||!v&&Ei(i,l,p,m,!0)||Ei(i,l,p,-m,v)||!v&&Ei(i,l,p,-m,!0);return w||(i.cantEdit=!0,Dt(i.first,0))}function ad(i,l,p,d){return p<0&&l.ch==0?l.line>i.first?Vt(i,Dt(l.line-1)):null:p>0&&l.ch==(d||te(i,l.line)).text.length?l.line<i.first+i.size-1?Dt(l.line+1,0):null:new Dt(l.line,l.ch+p)}function sd(i){i.setSelection(Dt(i.firstLine(),0),Dt(i.lastLine()),zt)}function ld(i,l,p){var d={canceled:!1,from:l.from,to:l.to,text:l.text,origin:l.origin,cancel:function(){return d.canceled=!0}};return p&&(d.update=function(v,m,w,C){v&&(d.from=Vt(i,v)),m&&(d.to=Vt(i,m)),w&&(d.text=w),C!==void 0&&(d.origin=C)}),Yt(i,"beforeChange",i,d),i.cm&&Yt(i.cm,"beforeChange",i.cm,d),d.canceled?(i.cm&&(i.cm.curOp.updateInput=2),null):{from:d.from,to:d.to,text:d.text,origin:d.origin}}function Ai(i,l,p){if(i.cm){if(!i.cm.curOp)return _r(i.cm,Ai)(i,l,p);if(i.cm.state.suppressEdits)return}if(!((Se(i,"beforeChange")||i.cm&&Se(i.cm,"beforeChange"))&&(l=ld(i,l,!0),!l))){var d=ar&&!p&&_n(i,l.from,l.to);if(d)for(var v=d.length-1;v>=0;--v)ud(i,{from:d[v].from,to:d[v].to,text:v?[""]:l.text,origin:l.origin});else ud(i,l)}}function ud(i,l){if(!(l.text.length==1&&l.text[0]==""&&de(l.from,l.to)==0)){var p=ju(i,l);Zf(i,l,p,i.cm?i.cm.curOp.id:NaN),Ta(i,l,p,ro(i,l));var d=[];Vo(i,function(v,m){!m&&Qt(d,v.history)==-1&&(pd(v.history,l),d.push(v.history)),Ta(v,l,null,ro(v,l))})}}function Bs(i,l,p){var d=i.cm&&i.cm.state.suppressEdits;if(!(d&&!p)){for(var v=i.history,m,w=i.sel,C=l=="undo"?v.done:v.undone,S=l=="undo"?v.undone:v.done,E=0;E<C.length&&(m=C[E],!(p?m.ranges&&!m.equals(i.sel):!m.ranges));E++);if(E!=C.length){for(v.lastOrigin=v.lastSelOrigin=null;;)if(m=C.pop(),m.ranges){if(Ns(m,S),p&&!m.equals(i.sel)){kr(i,m,{clearRedo:!1});return}w=m}else if(d){C.push(m);return}else break;var G=[];Ns(w,S),S.push({changes:G,generation:v.generation}),v.generation=m.generation||++v.maxGeneration;for(var Z=Se(i,"beforeChange")||i.cm&&Se(i.cm,"beforeChange"),pt=function(kt){var It=m.changes[kt];if(It.origin=l,Z&&!ld(i,It,!1))return C.length=0,{};G.push(Nu(i,It));var Kt=kt?ju(i,It):Rt(C);Ta(i,It,Kt,Qf(i,It)),!kt&&i.cm&&i.cm.scrollIntoView({from:It.from,to:jo(It)});var Jt=[];Vo(i,function(Gt,ee){!ee&&Qt(Jt,Gt.history)==-1&&(pd(Gt.history,It),Jt.push(Gt.history)),Ta(Gt,It,null,Qf(Gt,It))})},ot=m.changes.length-1;ot>=0;--ot){var wt=pt(ot);if(wt)return wt.v}}}}function cd(i,l){if(l!=0&&(i.first+=l,i.sel=new bn(oe(i.sel.ranges,function(v){return new Ie(Dt(v.anchor.line+l,v.anchor.ch),Dt(v.head.line+l,v.head.ch))}),i.sel.primIndex),i.cm)){Ur(i.cm,i.first,i.first-l,l);for(var p=i.cm.display,d=p.viewFrom;d<p.viewTo;d++)Mo(i.cm,d,"gutter")}}function Ta(i,l,p,d){if(i.cm&&!i.cm.curOp)return _r(i.cm,Ta)(i,l,p,d);if(l.to.line<i.first){cd(i,l.text.length-1-(l.to.line-l.from.line));return}if(!(l.from.line>i.lastLine())){if(l.from.line<i.first){var v=l.text.length-1-(i.first-l.from.line);cd(i,v),l={from:Dt(i.first,0),to:Dt(l.to.line+v,l.to.ch),text:[Rt(l.text)],origin:l.origin}}var m=i.lastLine();l.to.line>m&&(l={from:l.from,to:Dt(m,te(i,m).text.length),text:[l.text[0]],origin:l.origin}),l.removed=gr(i,l.from,l.to),p||(p=ju(i,l)),i.cm?kg(i.cm,l,d):Iu(i,l,d),Fs(i,p,zt),i.cantEdit&&Hs(i,Dt(i.firstLine(),0))&&(i.cantEdit=!1)}}function kg(i,l,p){var d=i.doc,v=i.display,m=l.from,w=l.to,C=!1,S=m.line;i.options.lineWrapping||(S=Ee(Ge(te(d,m.line))),d.iter(S,w.line+1,function(ot){if(ot==v.maxLine)return C=!0,!0})),d.sel.contains(l.from,l.to)>-1&&ae(i),Iu(d,l,p,Ef(i)),i.options.lineWrapping||(d.iter(S,m.line+l.text.length,function(ot){var wt=io(ot);wt>v.maxLineLength&&(v.maxLine=ot,v.maxLineLength=wt,v.maxLineChanged=!0,C=!1)}),C&&(i.curOp.updateMaxLine=!0)),bo(d,m.line),xa(i,400);var E=l.text.length-(w.line-m.line)-1;l.full?Ur(i):m.line==w.line&&l.text.length==1&&!$f(i.doc,l)?Mo(i,m.line,"text"):Ur(i,m.line,w.line+1,E);var G=Se(i,"changes"),Z=Se(i,"change");if(Z||G){var pt={from:m,to:w,text:l.text,removed:l.removed,origin:l.origin};Z&&Ze(i,"change",i,pt),G&&(i.curOp.changeObjs||(i.curOp.changeObjs=[])).push(pt)}i.display.selForContextMenu=null}function ki(i,l,p,d,v){var m;d||(d=p),de(d,p)<0&&(m=[d,p],p=m[0],d=m[1]),typeof l=="string"&&(l=i.splitLines(l)),Ai(i,{from:p,to:d,text:l,origin:v})}function fd(i,l,p,d){p<i.line?i.line+=d:l<i.line&&(i.line=l,i.ch=0)}function dd(i,l,p,d){for(var v=0;v<i.length;++v){var m=i[v],w=!0;if(m.ranges){m.copied||(m=i[v]=m.deepCopy(),m.copied=!0);for(var C=0;C<m.ranges.length;C++)fd(m.ranges[C].anchor,l,p,d),fd(m.ranges[C].head,l,p,d);continue}for(var S=0;S<m.changes.length;++S){var E=m.changes[S];if(p<E.from.line)E.from=Dt(E.from.line+d,E.from.ch),E.to=Dt(E.to.line+d,E.to.ch);else if(l<=E.to.line){w=!1;break}}w||(i.splice(0,v+1),v=0)}}function pd(i,l){var p=l.from.line,d=l.to.line,v=l.text.length-(d-p)-1;dd(i.done,p,d,v),dd(i.undone,p,d,v)}function Pa(i,l,p,d){var v=l,m=l;return typeof l=="number"?m=te(i,jt(i,l)):v=Ee(l),v==null?null:(d(m,v)&&i.cm&&Mo(i.cm,v,p),m)}function Ea(i){this.lines=i,this.parent=null;for(var l=0,p=0;p<i.length;++p)i[p].parent=this,l+=i[p].height;this.height=l}Ea.prototype={chunkSize:function(){return this.lines.length},removeInner:function(i,l){for(var p=i,d=i+l;p<d;++p){var v=this.lines[p];this.height-=v.height,yi(v),Ze(v,"delete")}this.lines.splice(i,l)},collapse:function(i){i.push.apply(i,this.lines)},insertInner:function(i,l,p){this.height+=p,this.lines=this.lines.slice(0,i).concat(l).concat(this.lines.slice(i));for(var d=0;d<l.length;++d)l[d].parent=this},iterN:function(i,l,p){for(var d=i+l;i<d;++i)if(p(this.lines[i]))return!0}};function Aa(i){this.children=i;for(var l=0,p=0,d=0;d<i.length;++d){var v=i[d];l+=v.chunkSize(),p+=v.height,v.parent=this}this.size=l,this.height=p,this.parent=null}Aa.prototype={chunkSize:function(){return this.size},removeInner:function(i,l){this.size-=l;for(var p=0;p<this.children.length;++p){var d=this.children[p],v=d.chunkSize();if(i<v){var m=Math.min(l,v-i),w=d.height;if(d.removeInner(i,m),this.height-=w-d.height,v==m&&(this.children.splice(p--,1),d.parent=null),(l-=m)==0)break;i=0}else i-=v}if(this.size-l<25&&(this.children.length>1||!(this.children[0]instanceof Ea))){var C=[];this.collapse(C),this.children=[new Ea(C)],this.children[0].parent=this}},collapse:function(i){for(var l=0;l<this.children.length;++l)this.children[l].collapse(i)},insertInner:function(i,l,p){this.size+=l.length,this.height+=p;for(var d=0;d<this.children.length;++d){var v=this.children[d],m=v.chunkSize();if(i<=m){if(v.insertInner(i,l,p),v.lines&&v.lines.length>50){for(var w=v.lines.length%25+25,C=w;C<v.lines.length;){var S=new Ea(v.lines.slice(C,C+=25));v.height-=S.height,this.children.splice(++d,0,S),S.parent=this}v.lines=v.lines.slice(0,w),this.maybeSpill()}break}i-=m}},maybeSpill:function(){if(!(this.children.length<=10)){var i=this;do{var l=i.children.splice(i.children.length-5,5),p=new Aa(l);if(i.parent){i.size-=p.size,i.height-=p.height;var v=Qt(i.parent.children,i);i.parent.children.splice(v+1,0,p)}else{var d=new Aa(i.children);d.parent=i,i.children=[d,p],i=d}p.parent=i.parent}while(i.children.length>10);i.parent.maybeSpill()}},iterN:function(i,l,p){for(var d=0;d<this.children.length;++d){var v=this.children[d],m=v.chunkSize();if(i<m){var w=Math.min(l,m-i);if(v.iterN(i,w,p))return!0;if((l-=w)==0)break;i=0}else i-=m}}};var ka=function(i,l,p){if(p)for(var d in p)p.hasOwnProperty(d)&&(this[d]=p[d]);this.doc=i,this.node=l};ka.prototype.clear=function(){var i=this.doc.cm,l=this.line.widgets,p=this.line,d=Ee(p);if(!(d==null||!l)){for(var v=0;v<l.length;++v)l[v]==this&&l.splice(v--,1);l.length||(p.widgets=null);var m=Ao(this);yr(p,Math.max(0,p.height-m)),i&&(on(i,function(){hd(i,p,-m),Mo(i,d,"widget")}),Ze(i,"lineWidgetCleared",i,this,d))}},ka.prototype.changed=function(){var i=this,l=this.height,p=this.doc.cm,d=this.line;this.height=null;var v=Ao(this)-l;v&&(Br(this.doc,d)||yr(d,d.height+v),p&&on(p,function(){p.curOp.forceUpdate=!0,hd(p,d,v),Ze(p,"lineWidgetChanged",p,i,Ee(d))}))},Ae(ka);function hd(i,l,p){An(l)<(i.curOp&&i.curOp.scrollTop||i.doc.scrollTop)&&Eu(i,p)}function Mg(i,l,p,d){var v=new ka(i,p,d),m=i.cm;return m&&v.noHScroll&&(m.display.alignWidgets=!0),Pa(i,l,"widget",function(w){var C=w.widgets||(w.widgets=[]);if(v.insertAt==null?C.push(v):C.splice(Math.min(C.length,Math.max(0,v.insertAt)),0,v),v.line=w,m&&!Br(i,w)){var S=An(w)<i.scrollTop;yr(w,w.height+Ao(v)),S&&Eu(m,v.height),m.curOp.forceUpdate=!0}return!0}),m&&Ze(m,"lineWidgetAdded",m,v,typeof l=="number"?l:Ee(l)),v}var vd=0,Io=function(i,l){this.lines=[],this.type=l,this.doc=i,this.id=++vd};Io.prototype.clear=function(){if(!this.explicitlyCleared){var i=this.doc.cm,l=i&&!i.curOp;if(l&&ti(i),Se(this,"clear")){var p=this.find();p&&Ze(this,"clear",p.from,p.to)}for(var d=null,v=null,m=0;m<this.lines.length;++m){var w=this.lines[m],C=jr(w.markedSpans,this);i&&!this.collapsed?Mo(i,Ee(w),"text"):i&&(C.to!=null&&(v=Ee(w)),C.from!=null&&(d=Ee(w))),w.markedSpans=pr(w.markedSpans,C),C.from==null&&this.collapsed&&!Br(this.doc,w)&&i&&yr(w,Ci(i.display))}if(i&&this.collapsed&&!i.options.lineWrapping)for(var S=0;S<this.lines.length;++S){var E=Ge(this.lines[S]),G=io(E);G>i.display.maxLineLength&&(i.display.maxLine=E,i.display.maxLineLength=G,i.display.maxLineChanged=!0)}d!=null&&i&&this.collapsed&&Ur(i,d,v+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,i&&od(i.doc)),i&&Ze(i,"markerCleared",i,this,d,v),l&&ei(i),this.parent&&this.parent.clear()}},Io.prototype.find=function(i,l){i==null&&this.type=="bookmark"&&(i=1);for(var p,d,v=0;v<this.lines.length;++v){var m=this.lines[v],w=jr(m.markedSpans,this);if(w.from!=null&&(p=Dt(l?m:Ee(m),w.from),i==-1))return p;if(w.to!=null&&(d=Dt(l?m:Ee(m),w.to),i==1))return d}return p&&{from:p,to:d}},Io.prototype.changed=function(){var i=this,l=this.find(-1,!0),p=this,d=this.doc.cm;!l||!d||on(d,function(){var v=l.line,m=Ee(l.line),w=lt(d,m);if(w&&(ga(w),d.curOp.selectionChanged=d.curOp.forceUpdate=!0),d.curOp.updateMaxLine=!0,!Br(p.doc,v)&&p.height!=null){var C=p.height;p.height=null;var S=Ao(p)-C;S&&yr(v,v.height+S)}Ze(d,"markerChanged",d,i)})},Io.prototype.attachLine=function(i){if(!this.lines.length&&this.doc.cm){var l=this.doc.cm.curOp;(!l.maybeHiddenMarkers||Qt(l.maybeHiddenMarkers,this)==-1)&&(l.maybeUnhiddenMarkers||(l.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(i)},Io.prototype.detachLine=function(i){if(this.lines.splice(Qt(this.lines,i),1),!this.lines.length&&this.doc.cm){var l=this.doc.cm.curOp;(l.maybeHiddenMarkers||(l.maybeHiddenMarkers=[])).push(this)}},Ae(Io);function Mi(i,l,p,d,v){if(d&&d.shared)return Dg(i,l,p,d,v);if(i.cm&&!i.cm.curOp)return _r(i.cm,Mi)(i,l,p,d,v);var m=new Io(i,v),w=de(l,p);if(d&&At(d,m,!1),w>0||w==0&&m.clearWhenEmpty!==!1)return m;if(m.replacedWith&&(m.collapsed=!0,m.widgetNode=B("span",[m.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||m.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(m.widgetNode.insertLeft=!0)),m.collapsed){if(ye(i,l.line,l,p,m)||l.line!=p.line&&ye(i,p.line,l,p,m))throw new Error("Inserting collapsed marker partially overlapping an existing one");gn()}m.addToHistory&&Zf(i,{from:l,to:p,origin:"markText"},i.sel,NaN);var C=l.line,S=i.cm,E;if(i.iter(C,p.line+1,function(Z){S&&m.collapsed&&!S.options.lineWrapping&&Ge(Z)==S.display.maxLine&&(E=!0),m.collapsed&&C!=l.line&&yr(Z,0),gi(Z,new In(m,C==l.line?l.ch:null,C==p.line?p.ch:null),i.cm&&i.cm.curOp),++C}),m.collapsed&&i.iter(l.line,p.line+1,function(Z){Br(i,Z)&&yr(Z,0)}),m.clearOnEnter&&vt(m,"beforeCursorEnter",function(){return m.clear()}),m.readOnly&&(Go(),(i.history.done.length||i.history.undone.length)&&i.clearHistory()),m.collapsed&&(m.id=++vd,m.atomic=!0),S){if(E&&(S.curOp.updateMaxLine=!0),m.collapsed)Ur(S,l.line,p.line+1);else if(m.className||m.startStyle||m.endStyle||m.css||m.attributes||m.title)for(var G=l.line;G<=p.line;G++)Mo(S,G,"text");m.atomic&&od(S.doc),Ze(S,"markerAdded",S,m)}return m}var Ma=function(i,l){this.markers=i,this.primary=l;for(var p=0;p<i.length;++p)i[p].parent=this};Ma.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var i=0;i<this.markers.length;++i)this.markers[i].clear();Ze(this,"clear")}},Ma.prototype.find=function(i,l){return this.primary.find(i,l)},Ae(Ma);function Dg(i,l,p,d,v){d=At(d),d.shared=!1;var m=[Mi(i,l,p,d,v)],w=m[0],C=d.widgetNode;return Vo(i,function(S){C&&(d.widgetNode=C.cloneNode(!0)),m.push(Mi(S,Vt(S,l),Vt(S,p),d,v));for(var E=0;E<S.linked.length;++E)if(S.linked[E].isParent)return;w=Rt(m)}),new Ma(m,w)}function gd(i){return i.findMarks(Dt(i.first,0),i.clipPos(Dt(i.lastLine())),function(l){return l.parent})}function Lg(i,l){for(var p=0;p<l.length;p++){var d=l[p],v=d.find(),m=i.clipPos(v.from),w=i.clipPos(v.to);if(de(m,w)){var C=Mi(i,m,w,d.primary,d.primary.type);d.markers.push(C),C.parent=d}}}function jg(i){for(var l=function(d){var v=i[d],m=[v.primary.doc];Vo(v.primary.doc,function(S){return m.push(S)});for(var w=0;w<v.markers.length;w++){var C=v.markers[w];Qt(m,C.doc)==-1&&(C.parent=null,v.markers.splice(w--,1))}},p=0;p<i.length;p++)l(p)}var Vg=0,Wr=function(i,l,p,d,v){if(!(this instanceof Wr))return new Wr(i,l,p,d,v);p==null&&(p=0),Aa.call(this,[new Ea([new mr("",null)])]),this.first=p,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=p;var m=Dt(p,0);this.sel=Lo(m),this.history=new Is(null),this.id=++Vg,this.modeOption=l,this.lineSep=d,this.direction=v=="rtl"?"rtl":"ltr",this.extend=!1,typeof i=="string"&&(i=this.splitLines(i)),Iu(this,{from:m,to:m,text:i}),kr(this,Lo(m),zt)};Wr.prototype=P(Aa.prototype,{constructor:Wr,iter:function(i,l,p){p?this.iterN(i-this.first,l-i,p):this.iterN(this.first,this.first+this.size,i)},insert:function(i,l){for(var p=0,d=0;d<l.length;++d)p+=l[d].height;this.insertInner(i-this.first,l,p)},remove:function(i,l){this.removeInner(i-this.first,l)},getValue:function(i){var l=Ke(this,this.first,this.first+this.size);return i===!1?l:l.join(i||this.lineSeparator())},setValue:wr(function(i){var l=Dt(this.first,0),p=this.first+this.size-1;Ai(this,{from:l,to:Dt(p,te(this,p).text.length),text:this.splitLines(i),origin:"setValue",full:!0},!0),this.cm&&_a(this.cm,0,0),kr(this,Lo(l),zt)}),replaceRange:function(i,l,p,d){l=Vt(this,l),p=p?Vt(this,p):l,ki(this,i,l,p,d)},getRange:function(i,l,p){var d=gr(this,Vt(this,i),Vt(this,l));return p===!1?d:p===""?d.join(""):d.join(p||this.lineSeparator())},getLine:function(i){var l=this.getLineHandle(i);return l&&l.text},getLineHandle:function(i){if(tn(this,i))return te(this,i)},getLineNumber:function(i){return Ee(i)},getLineHandleVisualStart:function(i){return typeof i=="number"&&(i=te(this,i)),Ge(i)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(i){return Vt(this,i)},getCursor:function(i){var l=this.sel.primary(),p;return i==null||i=="head"?p=l.head:i=="anchor"?p=l.anchor:i=="end"||i=="to"||i===!1?p=l.to():p=l.from(),p},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:wr(function(i,l,p){ed(this,Vt(this,typeof i=="number"?Dt(i,l||0):i),null,p)}),setSelection:wr(function(i,l,p){ed(this,Vt(this,i),Vt(this,l||i),p)}),extendSelection:wr(function(i,l,p){Rs(this,Vt(this,i),l&&Vt(this,l),p)}),extendSelections:wr(function(i,l){td(this,Pe(this,i),l)}),extendSelectionsBy:wr(function(i,l){var p=oe(this.sel.ranges,i);td(this,Pe(this,p),l)}),setSelections:wr(function(i,l,p){if(i.length){for(var d=[],v=0;v<i.length;v++)d[v]=new Ie(Vt(this,i[v].anchor),Vt(this,i[v].head||i[v].anchor));l==null&&(l=Math.min(i.length-1,this.sel.primIndex)),kr(this,Hn(this.cm,d,l),p)}}),addSelection:wr(function(i,l,p){var d=this.sel.ranges.slice(0);d.push(new Ie(Vt(this,i),Vt(this,l||i))),kr(this,Hn(this.cm,d,d.length-1),p)}),getSelection:function(i){for(var l=this.sel.ranges,p,d=0;d<l.length;d++){var v=gr(this,l[d].from(),l[d].to());p=p?p.concat(v):v}return i===!1?p:p.join(i||this.lineSeparator())},getSelections:function(i){for(var l=[],p=this.sel.ranges,d=0;d<p.length;d++){var v=gr(this,p[d].from(),p[d].to());i!==!1&&(v=v.join(i||this.lineSeparator())),l[d]=v}return l},replaceSelection:function(i,l,p){for(var d=[],v=0;v<this.sel.ranges.length;v++)d[v]=i;this.replaceSelections(d,l,p||"+input")},replaceSelections:wr(function(i,l,p){for(var d=[],v=this.sel,m=0;m<v.ranges.length;m++){var w=v.ranges[m];d[m]={from:w.from(),to:w.to(),text:this.splitLines(i[m]),origin:p}}for(var C=l&&l!="end"&&Cg(this,d,l),S=d.length-1;S>=0;S--)Ai(this,d[S]);C?rd(this,C):this.cm&&Oi(this.cm)}),undo:wr(function(){Bs(this,"undo")}),redo:wr(function(){Bs(this,"redo")}),undoSelection:wr(function(){Bs(this,"undo",!0)}),redoSelection:wr(function(){Bs(this,"redo",!0)}),setExtending:function(i){this.extend=i},getExtending:function(){return this.extend},historySize:function(){for(var i=this.history,l=0,p=0,d=0;d<i.done.length;d++)i.done[d].ranges||++l;for(var v=0;v<i.undone.length;v++)i.undone[v].ranges||++p;return{undo:l,redo:p}},clearHistory:function(){var i=this;this.history=new Is(this.history),Vo(this,function(l){return l.history=i.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(i){return i&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(i){return this.history.generation==(i||this.cleanGeneration)},getHistory:function(){return{done:Pi(this.history.done),undone:Pi(this.history.undone)}},setHistory:function(i){var l=this.history=new Is(this.history);l.done=Pi(i.done.slice(0),null,!0),l.undone=Pi(i.undone.slice(0),null,!0)},setGutterMarker:wr(function(i,l,p){return Pa(this,i,"gutter",function(d){var v=d.gutterMarkers||(d.gutterMarkers={});return v[l]=p,!p&&mt(v)&&(d.gutterMarkers=null),!0})}),clearGutter:wr(function(i){var l=this;this.iter(function(p){p.gutterMarkers&&p.gutterMarkers[i]&&Pa(l,p,"gutter",function(){return p.gutterMarkers[i]=null,mt(p.gutterMarkers)&&(p.gutterMarkers=null),!0})})}),lineInfo:function(i){var l;if(typeof i=="number"){if(!tn(this,i)||(l=i,i=te(this,i),!i))return null}else if(l=Ee(i),l==null)return null;return{line:l,handle:i,text:i.text,gutterMarkers:i.gutterMarkers,textClass:i.textClass,bgClass:i.bgClass,wrapClass:i.wrapClass,widgets:i.widgets}},addLineClass:wr(function(i,l,p){return Pa(this,i,l=="gutter"?"gutter":"class",function(d){var v=l=="text"?"textClass":l=="background"?"bgClass":l=="gutter"?"gutterClass":"wrapClass";if(!d[v])d[v]=p;else{if(q(p).test(d[v]))return!1;d[v]+=" "+p}return!0})}),removeLineClass:wr(function(i,l,p){return Pa(this,i,l=="gutter"?"gutter":"class",function(d){var v=l=="text"?"textClass":l=="background"?"bgClass":l=="gutter"?"gutterClass":"wrapClass",m=d[v];if(m)if(p==null)d[v]=null;else{var w=m.match(q(p));if(!w)return!1;var C=w.index+w[0].length;d[v]=m.slice(0,w.index)+(!w.index||C==m.length?"":" ")+m.slice(C)||null}else return!1;return!0})}),addLineWidget:wr(function(i,l,p){return Mg(this,i,l,p)}),removeLineWidget:function(i){i.clear()},markText:function(i,l,p){return Mi(this,Vt(this,i),Vt(this,l),p,p&&p.type||"range")},setBookmark:function(i,l){var p={replacedWith:l&&(l.nodeType==null?l.widget:l),insertLeft:l&&l.insertLeft,clearWhenEmpty:!1,shared:l&&l.shared,handleMouseEvents:l&&l.handleMouseEvents};return i=Vt(this,i),Mi(this,i,i,p,"bookmark")},findMarksAt:function(i){i=Vt(this,i);var l=[],p=te(this,i.line).markedSpans;if(p)for(var d=0;d<p.length;++d){var v=p[d];(v.from==null||v.from<=i.ch)&&(v.to==null||v.to>=i.ch)&&l.push(v.marker.parent||v.marker)}return l},findMarks:function(i,l,p){i=Vt(this,i),l=Vt(this,l);var d=[],v=i.line;return this.iter(i.line,l.line+1,function(m){var w=m.markedSpans;if(w)for(var C=0;C<w.length;C++){var S=w[C];!(S.to!=null&&v==i.line&&i.ch>=S.to||S.from==null&&v!=i.line||S.from!=null&&v==l.line&&S.from>=l.ch)&&(!p||p(S.marker))&&d.push(S.marker.parent||S.marker)}++v}),d},getAllMarks:function(){var i=[];return this.iter(function(l){var p=l.markedSpans;if(p)for(var d=0;d<p.length;++d)p[d].from!=null&&i.push(p[d].marker)}),i},posFromIndex:function(i){var l,p=this.first,d=this.lineSeparator().length;return this.iter(function(v){var m=v.text.length+d;if(m>i)return l=i,!0;i-=m,++p}),Vt(this,Dt(p,l))},indexFromPos:function(i){i=Vt(this,i);var l=i.ch;if(i.line<this.first||i.ch<0)return 0;var p=this.lineSeparator().length;return this.iter(this.first,i.line,function(d){l+=d.text.length+p}),l},copy:function(i){var l=new Wr(Ke(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return l.scrollTop=this.scrollTop,l.scrollLeft=this.scrollLeft,l.sel=this.sel,l.extend=!1,i&&(l.history.undoDepth=this.history.undoDepth,l.setHistory(this.getHistory())),l},linkedDoc:function(i){i||(i={});var l=this.first,p=this.first+this.size;i.from!=null&&i.from>l&&(l=i.from),i.to!=null&&i.to<p&&(p=i.to);var d=new Wr(Ke(this,l,p),i.mode||this.modeOption,l,this.lineSep,this.direction);return i.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:i.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:i.sharedHist}],Lg(d,gd(this)),d},unlinkDoc:function(i){if(i instanceof $e&&(i=i.doc),this.linked)for(var l=0;l<this.linked.length;++l){var p=this.linked[l];if(p.doc==i){this.linked.splice(l,1),i.unlinkDoc(this),jg(gd(this));break}}if(i.history==this.history){var d=[i.id];Vo(i,function(v){return d.push(v.id)},!0),i.history=new Is(null),i.history.done=Pi(this.history.done,d),i.history.undone=Pi(this.history.undone,d)}},iterLinkedDocs:function(i){Vo(this,i)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(i){return this.lineSep?i.split(this.lineSep):tr(i)},lineSeparator:function(){return this.lineSep||`
`},setDirection:wr(function(i){i!="rtl"&&(i="ltr"),i!=this.direction&&(this.direction=i,this.iter(function(l){return l.order=null}),this.cm&&xg(this.cm))})}),Wr.prototype.eachLine=Wr.prototype.iter;var yd=0;function Ig(i){var l=this;if(md(l),!(Ut(l,i)||kn(l.display,i))){Te(i),u&&(yd=+new Date);var p=Xo(l,i,!0),d=i.dataTransfer.files;if(!(!p||l.isReadOnly()))if(d&&d.length&&window.FileReader&&window.File)for(var v=d.length,m=Array(v),w=0,C=function(){++w==v&&_r(l,function(){p=Vt(l.doc,p);var ot={from:p,to:p,text:l.doc.splitLines(m.filter(function(wt){return wt!=null}).join(l.doc.lineSeparator())),origin:"paste"};Ai(l.doc,ot),rd(l.doc,Lo(Vt(l.doc,p),Vt(l.doc,jo(ot))))})()},S=function(ot,wt){if(l.options.allowDropFileTypes&&Qt(l.options.allowDropFileTypes,ot.type)==-1){C();return}var kt=new FileReader;kt.onerror=function(){return C()},kt.onload=function(){var It=kt.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(It)){C();return}m[wt]=It,C()},kt.readAsText(ot)},E=0;E<d.length;E++)S(d[E],E);else{if(l.state.draggingText&&l.doc.sel.contains(p)>-1){l.state.draggingText(i),setTimeout(function(){return l.display.input.focus()},20);return}try{var G=i.dataTransfer.getData("Text");if(G){var Z;if(l.state.draggingText&&!l.state.draggingText.copy&&(Z=l.listSelections()),Fs(l.doc,Lo(p,p)),Z)for(var pt=0;pt<Z.length;++pt)ki(l.doc,"",Z[pt].anchor,Z[pt].head,"drag");l.replaceSelection(G,"around","paste"),l.display.input.focus()}}catch{}}}}function Ng(i,l){if(u&&(!i.state.draggingText||+new Date-yd<100)){j(l);return}if(!(Ut(i,l)||kn(i.display,l))&&(l.dataTransfer.setData("Text",i.getSelection()),l.dataTransfer.effectAllowed="copyMove",l.dataTransfer.setDragImage&&!_)){var p=U("img",null,null,"position: fixed; left: 0; top: 0;");p.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",y&&(p.width=p.height=1,i.display.wrapper.appendChild(p),p._top=p.offsetTop),l.dataTransfer.setDragImage(p,0,0),y&&p.parentNode.removeChild(p)}}function Rg(i,l){var p=Xo(i,l);if(p){var d=document.createDocumentFragment();Mf(i,p,d),i.display.dragCursor||(i.display.dragCursor=U("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),i.display.lineSpace.insertBefore(i.display.dragCursor,i.display.cursorDiv)),V(i.display.dragCursor,d)}}function md(i){i.display.dragCursor&&(i.display.lineSpace.removeChild(i.display.dragCursor),i.display.dragCursor=null)}function _d(i){if(document.getElementsByClassName){for(var l=document.getElementsByClassName("CodeMirror"),p=[],d=0;d<l.length;d++){var v=l[d].CodeMirror;v&&p.push(v)}p.length&&p[0].operation(function(){for(var m=0;m<p.length;m++)i(p[m])})}}var wd=!1;function Fg(){wd||(Hg(),wd=!0)}function Hg(){var i;vt(window,"resize",function(){i==null&&(i=setTimeout(function(){i=null,_d(Bg)},100))}),vt(window,"blur",function(){return _d(Si)})}function Bg(i){var l=i.display;l.cachedCharWidth=l.cachedTextHeight=l.cachedPaddingH=null,l.scrollbarsClipped=!1,i.setSize()}for(var No={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Da=0;Da<10;Da++)No[Da+48]=No[Da+96]=String(Da);for(var Us=65;Us<=90;Us++)No[Us]=String.fromCharCode(Us);for(var La=1;La<=12;La++)No[La+111]=No[La+63235]="F"+La;var lo={};lo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},lo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},lo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},lo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},lo.default=F?lo.macDefault:lo.pcDefault;function Ug(i){var l=i.split(/-(?!$)/);i=l[l.length-1];for(var p,d,v,m,w=0;w<l.length-1;w++){var C=l[w];if(/^(cmd|meta|m)$/i.test(C))m=!0;else if(/^a(lt)?$/i.test(C))p=!0;else if(/^(c|ctrl|control)$/i.test(C))d=!0;else if(/^s(hift)?$/i.test(C))v=!0;else throw new Error("Unrecognized modifier name: "+C)}return p&&(i="Alt-"+i),d&&(i="Ctrl-"+i),m&&(i="Cmd-"+i),v&&(i="Shift-"+i),i}function Wg(i){var l={};for(var p in i)if(i.hasOwnProperty(p)){var d=i[p];if(/^(name|fallthrough|(de|at)tach)$/.test(p))continue;if(d=="..."){delete i[p];continue}for(var v=oe(p.split(" "),Ug),m=0;m<v.length;m++){var w=void 0,C=void 0;m==v.length-1?(C=v.join(" "),w=d):(C=v.slice(0,m+1).join(" "),w="...");var S=l[C];if(!S)l[C]=w;else if(S!=w)throw new Error("Inconsistent bindings for "+C)}delete i[p]}for(var E in l)i[E]=l[E];return i}function Di(i,l,p,d){l=Ws(l);var v=l.call?l.call(i,d):l[i];if(v===!1)return"nothing";if(v==="...")return"multi";if(v!=null&&p(v))return"handled";if(l.fallthrough){if(Object.prototype.toString.call(l.fallthrough)!="[object Array]")return Di(i,l.fallthrough,p,d);for(var m=0;m<l.fallthrough.length;m++){var w=Di(i,l.fallthrough[m],p,d);if(w)return w}}}function bd(i){var l=typeof i=="string"?i:No[i.keyCode];return l=="Ctrl"||l=="Alt"||l=="Shift"||l=="Mod"}function Cd(i,l,p){var d=i;return l.altKey&&d!="Alt"&&(i="Alt-"+i),(xt?l.metaKey:l.ctrlKey)&&d!="Ctrl"&&(i="Ctrl-"+i),(xt?l.ctrlKey:l.metaKey)&&d!="Mod"&&(i="Cmd-"+i),!p&&l.shiftKey&&d!="Shift"&&(i="Shift-"+i),i}function xd(i,l){if(y&&i.keyCode==34&&i.char)return!1;var p=No[i.keyCode];return p==null||i.altGraphKey?!1:(i.keyCode==3&&i.code&&(p=i.code),Cd(p,i,l))}function Ws(i){return typeof i=="string"?lo[i]:i}function Li(i,l){for(var p=i.doc.sel.ranges,d=[],v=0;v<p.length;v++){for(var m=l(p[v]);d.length&&de(m.from,Rt(d).to)<=0;){var w=d.pop();if(de(w.from,m.from)<0){m.from=w.from;break}}d.push(m)}on(i,function(){for(var C=d.length-1;C>=0;C--)ki(i.doc,"",d[C].from,d[C].to,"+delete");Oi(i)})}function Hu(i,l,p){var d=it(i.text,l+p,p);return d<0||d>i.text.length?null:d}function Bu(i,l,p){var d=Hu(i,l.ch,p);return d==null?null:new Dt(l.line,d,p<0?"after":"before")}function Uu(i,l,p,d,v){if(i){l.doc.direction=="rtl"&&(v=-v);var m=D(p,l.doc.direction);if(m){var w=v<0?Rt(m):m[0],C=v<0==(w.level==1),S=C?"after":"before",E;if(w.level>0||l.doc.direction=="rtl"){var G=Ot(l,p);E=v<0?p.text.length-1:0;var Z=Ft(l,G,E).top;E=ne(function(pt){return Ft(l,G,pt).top==Z},v<0==(w.level==1)?w.from:w.to-1,E),S=="before"&&(E=Hu(p,E,1))}else E=v<0?w.to:w.from;return new Dt(d,E,S)}}return new Dt(d,v<0?p.text.length:0,v<0?"before":"after")}function zg(i,l,p,d){var v=D(l,i.doc.direction);if(!v)return Bu(l,p,d);p.ch>=l.text.length?(p.ch=l.text.length,p.sticky="before"):p.ch<=0&&(p.ch=0,p.sticky="after");var m=R(v,p.ch,p.sticky),w=v[m];if(i.doc.direction=="ltr"&&w.level%2==0&&(d>0?w.to>p.ch:w.from<p.ch))return Bu(l,p,d);var C=function(Kt,Jt){return Hu(l,Kt instanceof Dt?Kt.ch:Kt,Jt)},S,E=function(Kt){return i.options.lineWrapping?(S=S||Ot(i,l),Pf(i,l,S,Kt)):{begin:0,end:l.text.length}},G=E(p.sticky=="before"?C(p,-1):p.ch);if(i.doc.direction=="rtl"||w.level==1){var Z=w.level==1==d<0,pt=C(p,Z?1:-1);if(pt!=null&&(Z?pt<=w.to&&pt<=G.end:pt>=w.from&&pt>=G.begin)){var ot=Z?"before":"after";return new Dt(p.line,pt,ot)}}var wt=function(Kt,Jt,Gt){for(var ee=function(Fe,br){return br?new Dt(p.line,C(Fe,1),"before"):new Dt(p.line,Fe,"after")};Kt>=0&&Kt<v.length;Kt+=Jt){var pe=v[Kt],fe=Jt>0==(pe.level!=1),Oe=fe?Gt.begin:C(Gt.end,-1);if(pe.from<=Oe&&Oe<pe.to||(Oe=fe?pe.from:C(pe.to,-1),Gt.begin<=Oe&&Oe<Gt.end))return ee(Oe,fe)}},kt=wt(m+d,d,G);if(kt)return kt;var It=d>0?G.end:C(G.begin,-1);return It!=null&&!(d>0&&It==l.text.length)&&(kt=wt(d>0?0:v.length-1,d,E(It)),kt)?kt:null}var ja={selectAll:sd,singleSelection:function(i){return i.setSelection(i.getCursor("anchor"),i.getCursor("head"),zt)},killLine:function(i){return Li(i,function(l){if(l.empty()){var p=te(i.doc,l.head.line).text.length;return l.head.ch==p&&l.head.line<i.lastLine()?{from:l.head,to:Dt(l.head.line+1,0)}:{from:l.head,to:Dt(l.head.line,p)}}else return{from:l.from(),to:l.to()}})},deleteLine:function(i){return Li(i,function(l){return{from:Dt(l.from().line,0),to:Vt(i.doc,Dt(l.to().line+1,0))}})},delLineLeft:function(i){return Li(i,function(l){return{from:Dt(l.from().line,0),to:l.from()}})},delWrappedLineLeft:function(i){return Li(i,function(l){var p=i.charCoords(l.head,"div").top+5,d=i.coordsChar({left:0,top:p},"div");return{from:d,to:l.from()}})},delWrappedLineRight:function(i){return Li(i,function(l){var p=i.charCoords(l.head,"div").top+5,d=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:p},"div");return{from:l.from(),to:d}})},undo:function(i){return i.undo()},redo:function(i){return i.redo()},undoSelection:function(i){return i.undoSelection()},redoSelection:function(i){return i.redoSelection()},goDocStart:function(i){return i.extendSelection(Dt(i.firstLine(),0))},goDocEnd:function(i){return i.extendSelection(Dt(i.lastLine()))},goLineStart:function(i){return i.extendSelectionsBy(function(l){return Sd(i,l.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(i){return i.extendSelectionsBy(function(l){return Od(i,l.head)},{origin:"+move",bias:1})},goLineEnd:function(i){return i.extendSelectionsBy(function(l){return Kg(i,l.head.line)},{origin:"+move",bias:-1})},goLineRight:function(i){return i.extendSelectionsBy(function(l){var p=i.cursorCoords(l.head,"div").top+5;return i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:p},"div")},me)},goLineLeft:function(i){return i.extendSelectionsBy(function(l){var p=i.cursorCoords(l.head,"div").top+5;return i.coordsChar({left:0,top:p},"div")},me)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(l){var p=i.cursorCoords(l.head,"div").top+5,d=i.coordsChar({left:0,top:p},"div");return d.ch<i.getLine(d.line).search(/\S/)?Od(i,l.head):d},me)},goLineUp:function(i){return i.moveV(-1,"line")},goLineDown:function(i){return i.moveV(1,"line")},goPageUp:function(i){return i.moveV(-1,"page")},goPageDown:function(i){return i.moveV(1,"page")},goCharLeft:function(i){return i.moveH(-1,"char")},goCharRight:function(i){return i.moveH(1,"char")},goColumnLeft:function(i){return i.moveH(-1,"column")},goColumnRight:function(i){return i.moveH(1,"column")},goWordLeft:function(i){return i.moveH(-1,"word")},goGroupRight:function(i){return i.moveH(1,"group")},goGroupLeft:function(i){return i.moveH(-1,"group")},goWordRight:function(i){return i.moveH(1,"word")},delCharBefore:function(i){return i.deleteH(-1,"codepoint")},delCharAfter:function(i){return i.deleteH(1,"char")},delWordBefore:function(i){return i.deleteH(-1,"word")},delWordAfter:function(i){return i.deleteH(1,"word")},delGroupBefore:function(i){return i.deleteH(-1,"group")},delGroupAfter:function(i){return i.deleteH(1,"group")},indentAuto:function(i){return i.indentSelection("smart")},indentMore:function(i){return i.indentSelection("add")},indentLess:function(i){return i.indentSelection("subtract")},insertTab:function(i){return i.replaceSelection("	")},insertSoftTab:function(i){for(var l=[],p=i.listSelections(),d=i.options.tabSize,v=0;v<p.length;v++){var m=p[v].from(),w=Ht(i.getLine(m.line),m.ch,d);l.push(Zt(d-w%d))}i.replaceSelections(l)},defaultTab:function(i){i.somethingSelected()?i.indentSelection("add"):i.execCommand("insertTab")},transposeChars:function(i){return on(i,function(){for(var l=i.listSelections(),p=[],d=0;d<l.length;d++)if(l[d].empty()){var v=l[d].head,m=te(i.doc,v.line).text;if(m){if(v.ch==m.length&&(v=new Dt(v.line,v.ch-1)),v.ch>0)v=new Dt(v.line,v.ch+1),i.replaceRange(m.charAt(v.ch-1)+m.charAt(v.ch-2),Dt(v.line,v.ch-2),v,"+transpose");else if(v.line>i.doc.first){var w=te(i.doc,v.line-1).text;w&&(v=new Dt(v.line,1),i.replaceRange(m.charAt(0)+i.doc.lineSeparator()+w.charAt(w.length-1),Dt(v.line-1,w.length-1),v,"+transpose"))}}p.push(new Ie(v,v))}i.setSelections(p)})},newlineAndIndent:function(i){return on(i,function(){for(var l=i.listSelections(),p=l.length-1;p>=0;p--)i.replaceRange(i.doc.lineSeparator(),l[p].anchor,l[p].head,"+input");l=i.listSelections();for(var d=0;d<l.length;d++)i.indentLine(l[d].from().line,null,!0);Oi(i)})},openLine:function(i){return i.replaceSelection(`
`,"start")},toggleOverwrite:function(i){return i.toggleOverwrite()}};function Sd(i,l){var p=te(i.doc,l),d=Ge(p);return d!=p&&(l=Ee(d)),Uu(!0,i,d,l,1)}function Kg(i,l){var p=te(i.doc,l),d=sr(p);return d!=p&&(l=Ee(d)),Uu(!0,i,p,l,-1)}function Od(i,l){var p=Sd(i,l.line),d=te(i.doc,p.line),v=D(d,i.doc.direction);if(!v||v[0].level==0){var m=Math.max(p.ch,d.text.search(/\S/)),w=l.line==p.line&&l.ch<=m&&l.ch;return Dt(p.line,w?0:m,p.sticky)}return p}function zs(i,l,p){if(typeof l=="string"&&(l=ja[l],!l))return!1;i.display.input.ensurePolled();var d=i.display.shift,v=!1;try{i.isReadOnly()&&(i.state.suppressEdits=!0),p&&(i.display.shift=!1),v=l(i)!=$t}finally{i.display.shift=d,i.state.suppressEdits=!1}return v}function Gg(i,l,p){for(var d=0;d<i.state.keyMaps.length;d++){var v=Di(l,i.state.keyMaps[d],p,i);if(v)return v}return i.options.extraKeys&&Di(l,i.options.extraKeys,p,i)||Di(l,i.options.keyMap,p,i)}var $g=new Et;function Va(i,l,p,d){var v=i.state.keySeq;if(v){if(bd(l))return"handled";if(/\'$/.test(l)?i.state.keySeq=null:$g.set(50,function(){i.state.keySeq==v&&(i.state.keySeq=null,i.display.input.reset())}),Td(i,v+" "+l,p,d))return!0}return Td(i,l,p,d)}function Td(i,l,p,d){var v=Gg(i,l,d);return v=="multi"&&(i.state.keySeq=l),v=="handled"&&Ze(i,"keyHandled",i,l,p),(v=="handled"||v=="multi")&&(Te(p),Su(i)),!!v}function Pd(i,l){var p=xd(l,!0);return p?l.shiftKey&&!i.state.keySeq?Va(i,"Shift-"+p,l,function(d){return zs(i,d,!0)})||Va(i,p,l,function(d){if(typeof d=="string"?/^go[A-Z]/.test(d):d.motion)return zs(i,d)}):Va(i,p,l,function(d){return zs(i,d)}):!1}function qg(i,l,p){return Va(i,"'"+p+"'",l,function(d){return zs(i,d,!0)})}var Wu=null;function Ed(i){var l=this;if(!(i.target&&i.target!=l.display.input.getField())&&(l.curOp.focus=yt(),!Ut(l,i))){u&&c<11&&i.keyCode==27&&(i.returnValue=!1);var p=i.keyCode;l.display.shift=p==16||i.shiftKey;var d=Pd(l,i);y&&(Wu=d?p:null,!d&&p==88&&!pn&&(F?i.metaKey:i.ctrlKey)&&l.replaceSelection("",null,"cut")),e&&!F&&!d&&p==46&&i.shiftKey&&!i.ctrlKey&&document.execCommand&&document.execCommand("cut"),p==18&&!/\bCodeMirror-crosshair\b/.test(l.display.lineDiv.className)&&Yg(l)}}function Yg(i){var l=i.display.lineDiv;gt(l,"CodeMirror-crosshair");function p(d){(d.keyCode==18||!d.altKey)&&(nt(l,"CodeMirror-crosshair"),Xt(document,"keyup",p),Xt(document,"mouseover",p))}vt(document,"keyup",p),vt(document,"mouseover",p)}function Ad(i){i.keyCode==16&&(this.doc.sel.shift=!1),Ut(this,i)}function kd(i){var l=this;if(!(i.target&&i.target!=l.display.input.getField())&&!(kn(l.display,i)||Ut(l,i)||i.ctrlKey&&!i.altKey||F&&i.metaKey)){var p=i.keyCode,d=i.charCode;if(y&&p==Wu){Wu=null,Te(i);return}if(!(y&&(!i.which||i.which<10)&&Pd(l,i))){var v=String.fromCharCode(d??p);v!="\b"&&(qg(l,i,v)||l.display.input.onKeyPress(i))}}}var Xg=400,zu=function(i,l,p){this.time=i,this.pos=l,this.button=p};zu.prototype.compare=function(i,l,p){return this.time+Xg>i&&de(l,this.pos)==0&&p==this.button};var Ia,Na;function Zg(i,l){var p=+new Date;return Na&&Na.compare(p,i,l)?(Ia=Na=null,"triple"):Ia&&Ia.compare(p,i,l)?(Na=new zu(p,i,l),Ia=null,"double"):(Ia=new zu(p,i,l),Na=null,"single")}function Md(i){var l=this,p=l.display;if(!(Ut(l,i)||p.activeTouch&&p.input.supportsTouch())){if(p.input.ensurePolled(),p.shift=i.shiftKey,kn(p,i)){f||(p.scroller.draggable=!1,setTimeout(function(){return p.scroller.draggable=!0},100));return}if(!Ku(l,i)){var d=Xo(l,i),v=st(i),m=d?Zg(d,v):"single";window.focus(),v==1&&l.state.selectingText&&l.state.selectingText(i),!(d&&Jg(l,v,d,m,i))&&(v==1?d?ty(l,d,m,i):J(i)==p.scroller&&Te(i):v==2?(d&&Rs(l.doc,d),setTimeout(function(){return p.input.focus()},20)):v==3&&(ut?l.display.input.onContextMenu(i):Ou(l)))}}}function Jg(i,l,p,d,v){var m="Click";return d=="double"?m="Double"+m:d=="triple"&&(m="Triple"+m),m=(l==1?"Left":l==2?"Middle":"Right")+m,Va(i,Cd(m,v),v,function(w){if(typeof w=="string"&&(w=ja[w]),!w)return!1;var C=!1;try{i.isReadOnly()&&(i.state.suppressEdits=!0),C=w(i,p)!=$t}finally{i.state.suppressEdits=!1}return C})}function Qg(i,l,p){var d=i.getOption("configureMouse"),v=d?d(i,l,p):{};if(v.unit==null){var m=W?p.shiftKey&&p.metaKey:p.altKey;v.unit=m?"rectangle":l=="single"?"char":l=="double"?"word":"line"}return(v.extend==null||i.doc.extend)&&(v.extend=i.doc.extend||p.shiftKey),v.addNew==null&&(v.addNew=F?p.metaKey:p.ctrlKey),v.moveOnDrag==null&&(v.moveOnDrag=!(F?p.altKey:p.ctrlKey)),v}function ty(i,l,p,d){u?setTimeout(ft(Df,i),0):i.curOp.focus=yt();var v=Qg(i,p,d),m=i.doc.sel,w;i.options.dragDrop&&Tt&&!i.isReadOnly()&&p=="single"&&(w=m.contains(l))>-1&&(de((w=m.ranges[w]).from(),l)<0||l.xRel>0)&&(de(w.to(),l)>0||l.xRel<0)?ey(i,d,l,v):ry(i,d,l,v)}function ey(i,l,p,d){var v=i.display,m=!1,w=_r(i,function(E){f&&(v.scroller.draggable=!1),i.state.draggingText=!1,i.state.delayingBlurEvent&&(i.hasFocus()?i.state.delayingBlurEvent=!1:Ou(i)),Xt(v.wrapper.ownerDocument,"mouseup",w),Xt(v.wrapper.ownerDocument,"mousemove",C),Xt(v.scroller,"dragstart",S),Xt(v.scroller,"drop",w),m||(Te(E),d.addNew||Rs(i.doc,p,null,null,d.extend),f&&!_||u&&c==9?setTimeout(function(){v.wrapper.ownerDocument.body.focus({preventScroll:!0}),v.input.focus()},20):v.input.focus())}),C=function(E){m=m||Math.abs(l.clientX-E.clientX)+Math.abs(l.clientY-E.clientY)>=10},S=function(){return m=!0};f&&(v.scroller.draggable=!0),i.state.draggingText=w,w.copy=!d.moveOnDrag,vt(v.wrapper.ownerDocument,"mouseup",w),vt(v.wrapper.ownerDocument,"mousemove",C),vt(v.scroller,"dragstart",S),vt(v.scroller,"drop",w),i.state.delayingBlurEvent=!0,setTimeout(function(){return v.input.focus()},20),v.scroller.dragDrop&&v.scroller.dragDrop()}function Dd(i,l,p){if(p=="char")return new Ie(l,l);if(p=="word")return i.findWordAt(l);if(p=="line")return new Ie(Dt(l.line,0),Vt(i.doc,Dt(l.line+1,0)));var d=p(i,l);return new Ie(d.from,d.to)}function ry(i,l,p,d){u&&Ou(i);var v=i.display,m=i.doc;Te(l);var w,C,S=m.sel,E=S.ranges;if(d.addNew&&!d.extend?(C=m.sel.contains(p),C>-1?w=E[C]:w=new Ie(p,p)):(w=m.sel.primary(),C=m.sel.primIndex),d.unit=="rectangle")d.addNew||(w=new Ie(p,p)),p=Xo(i,l,!0,!0),C=-1;else{var G=Dd(i,p,d.unit);d.extend?w=Ru(w,G.anchor,G.head,d.extend):w=G}d.addNew?C==-1?(C=E.length,kr(m,Hn(i,E.concat([w]),C),{scroll:!1,origin:"*mouse"})):E.length>1&&E[C].empty()&&d.unit=="char"&&!d.extend?(kr(m,Hn(i,E.slice(0,C).concat(E.slice(C+1)),0),{scroll:!1,origin:"*mouse"}),S=m.sel):Fu(m,C,w,se):(C=0,kr(m,new bn([w],0),se),S=m.sel);var Z=p;function pt(Gt){if(de(Z,Gt)!=0)if(Z=Gt,d.unit=="rectangle"){for(var ee=[],pe=i.options.tabSize,fe=Ht(te(m,p.line).text,p.ch,pe),Oe=Ht(te(m,Gt.line).text,Gt.ch,pe),Fe=Math.min(fe,Oe),br=Math.max(fe,Oe),Xe=Math.min(p.line,Gt.line),an=Math.min(i.lastLine(),Math.max(p.line,Gt.line));Xe<=an;Xe++){var zr=te(m,Xe).text,lr=rt(zr,Fe,pe);Fe==br?ee.push(new Ie(Dt(Xe,lr),Dt(Xe,lr))):zr.length>lr&&ee.push(new Ie(Dt(Xe,lr),Dt(Xe,rt(zr,br,pe))))}ee.length||ee.push(new Ie(p,p)),kr(m,Hn(i,S.ranges.slice(0,C).concat(ee),C),{origin:"*mouse",scroll:!1}),i.scrollIntoView(Gt)}else{var Kr=w,Or=Dd(i,Gt,d.unit),vr=Kr.anchor,ur;de(Or.anchor,vr)>0?(ur=Or.head,vr=Ct(Kr.from(),Or.anchor)):(ur=Or.anchor,vr=Y(Kr.to(),Or.head));var Je=S.ranges.slice(0);Je[C]=ny(i,new Ie(Vt(m,vr),ur)),kr(m,Hn(i,Je,C),se)}}var ot=v.wrapper.getBoundingClientRect(),wt=0;function kt(Gt){var ee=++wt,pe=Xo(i,Gt,!0,d.unit=="rectangle");if(pe)if(de(pe,Z)!=0){i.curOp.focus=yt(),pt(pe);var fe=Ds(v,m);(pe.line>=fe.to||pe.line<fe.from)&&setTimeout(_r(i,function(){wt==ee&&kt(Gt)}),150)}else{var Oe=Gt.clientY<ot.top?-20:Gt.clientY>ot.bottom?20:0;Oe&&setTimeout(_r(i,function(){wt==ee&&(v.scroller.scrollTop+=Oe,kt(Gt))}),50)}}function It(Gt){i.state.selectingText=!1,wt=1/0,Gt&&(Te(Gt),v.input.focus()),Xt(v.wrapper.ownerDocument,"mousemove",Kt),Xt(v.wrapper.ownerDocument,"mouseup",Jt),m.history.lastSelOrigin=null}var Kt=_r(i,function(Gt){Gt.buttons===0||!st(Gt)?It(Gt):kt(Gt)}),Jt=_r(i,It);i.state.selectingText=Jt,vt(v.wrapper.ownerDocument,"mousemove",Kt),vt(v.wrapper.ownerDocument,"mouseup",Jt)}function ny(i,l){var p=l.anchor,d=l.head,v=te(i.doc,p.line);if(de(p,d)==0&&p.sticky==d.sticky)return l;var m=D(v);if(!m)return l;var w=R(m,p.ch,p.sticky),C=m[w];if(C.from!=p.ch&&C.to!=p.ch)return l;var S=w+(C.from==p.ch==(C.level!=1)?0:1);if(S==0||S==m.length)return l;var E;if(d.line!=p.line)E=(d.line-p.line)*(i.doc.direction=="ltr"?1:-1)>0;else{var G=R(m,d.ch,d.sticky),Z=G-w||(d.ch-p.ch)*(C.level==1?-1:1);G==S-1||G==S?E=Z<0:E=Z>0}var pt=m[S+(E?-1:0)],ot=E==(pt.level==1),wt=ot?pt.from:pt.to,kt=ot?"after":"before";return p.ch==wt&&p.sticky==kt?l:new Ie(new Dt(p.line,wt,kt),d)}function Ld(i,l,p,d){var v,m;if(l.touches)v=l.touches[0].clientX,m=l.touches[0].clientY;else try{v=l.clientX,m=l.clientY}catch{return!1}if(v>=Math.floor(i.display.gutters.getBoundingClientRect().right))return!1;d&&Te(l);var w=i.display,C=w.lineDiv.getBoundingClientRect();if(m>C.bottom||!Se(i,p))return fr(l);m-=C.top-w.viewOffset;for(var S=0;S<i.display.gutterSpecs.length;++S){var E=w.gutters.childNodes[S];if(E&&E.getBoundingClientRect().right>=v){var G=Re(i.doc,m),Z=i.display.gutterSpecs[S];return Yt(i,p,i,G,Z.className,l),fr(l)}}}function Ku(i,l){return Ld(i,l,"gutterClick",!0)}function jd(i,l){kn(i.display,l)||oy(i,l)||Ut(i,l,"contextmenu")||ut||i.display.input.onContextMenu(l)}function oy(i,l){return Se(i,"gutterContextMenu")?Ld(i,l,"gutterContextMenu",!1):!1}function Vd(i){i.display.wrapper.className=i.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+i.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ya(i)}var ji={toString:function(){return"CodeMirror.Init"}},Id={},Ks={};function iy(i){var l=i.optionHandlers;function p(d,v,m,w){i.defaults[d]=v,m&&(l[d]=w?function(C,S,E){E!=ji&&m(C,S,E)}:m)}i.defineOption=p,i.Init=ji,p("value","",function(d,v){return d.setValue(v)},!0),p("mode",null,function(d,v){d.doc.modeOption=v,Vu(d)},!0),p("indentUnit",2,Vu,!0),p("indentWithTabs",!1),p("smartIndent",!0),p("tabSize",4,function(d){Oa(d),ya(d),Ur(d)},!0),p("lineSeparator",null,function(d,v){if(d.doc.lineSep=v,!!v){var m=[],w=d.doc.first;d.doc.iter(function(S){for(var E=0;;){var G=S.text.indexOf(v,E);if(G==-1)break;E=G+v.length,m.push(Dt(w,G))}w++});for(var C=m.length-1;C>=0;C--)ki(d.doc,v,m[C],Dt(m[C].line,m[C].ch+v.length))}}),p("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(d,v,m){d.state.specialChars=new RegExp(v.source+(v.test("	")?"":"|	"),"g"),m!=ji&&d.refresh()}),p("specialCharPlaceholder",gs,function(d){return d.refresh()},!0),p("electricChars",!0),p("inputStyle",z?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),p("spellcheck",!1,function(d,v){return d.getInputField().spellcheck=v},!0),p("autocorrect",!1,function(d,v){return d.getInputField().autocorrect=v},!0),p("autocapitalize",!1,function(d,v){return d.getInputField().autocapitalize=v},!0),p("rtlMoveVisually",!ct),p("wholeLineUpdateBefore",!0),p("theme","default",function(d){Vd(d),Sa(d)},!0),p("keyMap","default",function(d,v,m){var w=Ws(v),C=m!=ji&&Ws(m);C&&C.detach&&C.detach(d,w),w.attach&&w.attach(d,C||null)}),p("extraKeys",null),p("configureMouse",null),p("lineWrapping",!1,sy,!0),p("gutters",[],function(d,v){d.display.gutterSpecs=Lu(v,d.options.lineNumbers),Sa(d)},!0),p("fixedGutter",!0,function(d,v){d.display.gutters.style.left=v?Cu(d.display)+"px":"0",d.refresh()},!0),p("coverGutterNextToScrollbar",!1,function(d){return Ti(d)},!0),p("scrollbarStyle","native",function(d){Rf(d),Ti(d),d.display.scrollbars.setScrollTop(d.doc.scrollTop),d.display.scrollbars.setScrollLeft(d.doc.scrollLeft)},!0),p("lineNumbers",!1,function(d,v){d.display.gutterSpecs=Lu(d.options.gutters,v),Sa(d)},!0),p("firstLineNumber",1,Sa,!0),p("lineNumberFormatter",function(d){return d},Sa,!0),p("showCursorWhenSelecting",!1,ma,!0),p("resetSelectionOnContextMenu",!0),p("lineWiseCopyCut",!0),p("pasteLinesPerSelection",!0),p("selectionsMayTouch",!1),p("readOnly",!1,function(d,v){v=="nocursor"&&(Si(d),d.display.input.blur()),d.display.input.readOnlyChanged(v)}),p("screenReaderLabel",null,function(d,v){v=v===""?null:v,d.display.input.screenReaderLabelChanged(v)}),p("disableInput",!1,function(d,v){v||d.display.input.reset()},!0),p("dragDrop",!0,ay),p("allowDropFileTypes",null),p("cursorBlinkRate",530),p("cursorScrollMargin",0),p("cursorHeight",1,ma,!0),p("singleCursorHeightPerLine",!0,ma,!0),p("workTime",100),p("workDelay",100),p("flattenSpans",!0,Oa,!0),p("addModeClass",!1,Oa,!0),p("pollInterval",100),p("undoDepth",200,function(d,v){return d.doc.history.undoDepth=v}),p("historyEventDelay",1250),p("viewportMargin",10,function(d){return d.refresh()},!0),p("maxHighlightLength",1e4,Oa,!0),p("moveInputWithCursor",!0,function(d,v){v||d.display.input.resetPosition()}),p("tabindex",null,function(d,v){return d.display.input.getField().tabIndex=v||""}),p("autofocus",null),p("direction","ltr",function(d,v){return d.doc.setDirection(v)},!0),p("phrases",null)}function ay(i,l,p){var d=p&&p!=ji;if(!l!=!d){var v=i.display.dragFunctions,m=l?vt:Xt;m(i.display.scroller,"dragstart",v.start),m(i.display.scroller,"dragenter",v.enter),m(i.display.scroller,"dragover",v.over),m(i.display.scroller,"dragleave",v.leave),m(i.display.scroller,"drop",v.drop)}}function sy(i){i.options.lineWrapping?(gt(i.display.wrapper,"CodeMirror-wrap"),i.display.sizer.style.minWidth="",i.display.sizerWidth=null):(nt(i.display.wrapper,"CodeMirror-wrap"),xo(i)),xu(i),Ur(i),ya(i),setTimeout(function(){return Ti(i)},100)}function $e(i,l){var p=this;if(!(this instanceof $e))return new $e(i,l);this.options=l=l?At(l):{},At(Id,l,!1);var d=l.value;typeof d=="string"?d=new Wr(d,l.mode,null,l.lineSeparator,l.direction):l.mode&&(d.modeOption=l.mode),this.doc=d;var v=new $e.inputStyles[l.inputStyle](this),m=this.display=new wg(i,d,v,l);m.wrapper.CodeMirror=this,Vd(this),l.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Rf(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Et,keySeq:null,specialChars:null},l.autofocus&&!z&&m.input.focus(),u&&c<11&&setTimeout(function(){return p.display.input.reset(!0)},20),ly(this),Fg(),ti(this),this.curOp.forceUpdate=!0,qf(this,d),l.autofocus&&!z||this.hasFocus()?setTimeout(function(){p.hasFocus()&&!p.state.focused&&Tu(p)},20):Si(this);for(var w in Ks)Ks.hasOwnProperty(w)&&Ks[w](this,l[w],ji);Bf(this),l.finishInit&&l.finishInit(this);for(var C=0;C<Gu.length;++C)Gu[C](this);ei(this),f&&l.lineWrapping&&getComputedStyle(m.lineDiv).textRendering=="optimizelegibility"&&(m.lineDiv.style.textRendering="auto")}$e.defaults=Id,$e.optionHandlers=Ks;function ly(i){var l=i.display;vt(l.scroller,"mousedown",_r(i,Md)),u&&c<11?vt(l.scroller,"dblclick",_r(i,function(S){if(!Ut(i,S)){var E=Xo(i,S);if(!(!E||Ku(i,S)||kn(i.display,S))){Te(S);var G=i.findWordAt(E);Rs(i.doc,G.anchor,G.head)}}})):vt(l.scroller,"dblclick",function(S){return Ut(i,S)||Te(S)}),vt(l.scroller,"contextmenu",function(S){return jd(i,S)}),vt(l.input.getField(),"contextmenu",function(S){l.scroller.contains(S.target)||jd(i,S)});var p,d={end:0};function v(){l.activeTouch&&(p=setTimeout(function(){return l.activeTouch=null},1e3),d=l.activeTouch,d.end=+new Date)}function m(S){if(S.touches.length!=1)return!1;var E=S.touches[0];return E.radiusX<=1&&E.radiusY<=1}function w(S,E){if(E.left==null)return!0;var G=E.left-S.left,Z=E.top-S.top;return G*G+Z*Z>20*20}vt(l.scroller,"touchstart",function(S){if(!Ut(i,S)&&!m(S)&&!Ku(i,S)){l.input.ensurePolled(),clearTimeout(p);var E=+new Date;l.activeTouch={start:E,moved:!1,prev:E-d.end<=300?d:null},S.touches.length==1&&(l.activeTouch.left=S.touches[0].pageX,l.activeTouch.top=S.touches[0].pageY)}}),vt(l.scroller,"touchmove",function(){l.activeTouch&&(l.activeTouch.moved=!0)}),vt(l.scroller,"touchend",function(S){var E=l.activeTouch;if(E&&!kn(l,S)&&E.left!=null&&!E.moved&&new Date-E.start<300){var G=i.coordsChar(l.activeTouch,"page"),Z;!E.prev||w(E,E.prev)?Z=new Ie(G,G):!E.prev.prev||w(E,E.prev.prev)?Z=i.findWordAt(G):Z=new Ie(Dt(G.line,0),Vt(i.doc,Dt(G.line+1,0))),i.setSelection(Z.anchor,Z.head),i.focus(),Te(S)}v()}),vt(l.scroller,"touchcancel",v),vt(l.scroller,"scroll",function(){l.scroller.clientHeight&&(wa(i,l.scroller.scrollTop),Jo(i,l.scroller.scrollLeft,!0),Yt(i,"scroll",i))}),vt(l.scroller,"mousewheel",function(S){return zf(i,S)}),vt(l.scroller,"DOMMouseScroll",function(S){return zf(i,S)}),vt(l.wrapper,"scroll",function(){return l.wrapper.scrollTop=l.wrapper.scrollLeft=0}),l.dragFunctions={enter:function(S){Ut(i,S)||j(S)},over:function(S){Ut(i,S)||(Rg(i,S),j(S))},start:function(S){return Ng(i,S)},drop:_r(i,Ig),leave:function(S){Ut(i,S)||md(i)}};var C=l.input.getField();vt(C,"keyup",function(S){return Ad.call(i,S)}),vt(C,"keydown",_r(i,Ed)),vt(C,"keypress",_r(i,kd)),vt(C,"focus",function(S){return Tu(i,S)}),vt(C,"blur",function(S){return Si(i,S)})}var Gu=[];$e.defineInitHook=function(i){return Gu.push(i)};function Ra(i,l,p,d){var v=i.doc,m;p==null&&(p="add"),p=="smart"&&(v.mode.indent?m=Jn(i,l).state:p="prev");var w=i.options.tabSize,C=te(v,l),S=Ht(C.text,null,w);C.stateAfter&&(C.stateAfter=null);var E=C.text.match(/^\s*/)[0],G;if(!d&&!/\S/.test(C.text))G=0,p="not";else if(p=="smart"&&(G=v.mode.indent(m,C.text.slice(E.length),C.text),G==$t||G>150)){if(!d)return;p="prev"}p=="prev"?l>v.first?G=Ht(te(v,l-1).text,null,w):G=0:p=="add"?G=S+i.options.indentUnit:p=="subtract"?G=S-i.options.indentUnit:typeof p=="number"&&(G=S+p),G=Math.max(0,G);var Z="",pt=0;if(i.options.indentWithTabs)for(var ot=Math.floor(G/w);ot;--ot)pt+=w,Z+="	";if(pt<G&&(Z+=Zt(G-pt)),Z!=E)return ki(v,Z,Dt(l,0),Dt(l,E.length),"+input"),C.stateAfter=null,!0;for(var wt=0;wt<v.sel.ranges.length;wt++){var kt=v.sel.ranges[wt];if(kt.head.line==l&&kt.head.ch<E.length){var It=Dt(l,E.length);Fu(v,wt,new Ie(It,It));break}}}var Bn=null;function Gs(i){Bn=i}function $u(i,l,p,d,v){var m=i.doc;i.display.shift=!1,d||(d=m.sel);var w=+new Date-200,C=v=="paste"||i.state.pasteIncoming>w,S=tr(l),E=null;if(C&&d.ranges.length>1)if(Bn&&Bn.text.join(`
`)==l){if(d.ranges.length%Bn.text.length==0){E=[];for(var G=0;G<Bn.text.length;G++)E.push(m.splitLines(Bn.text[G]))}}else S.length==d.ranges.length&&i.options.pasteLinesPerSelection&&(E=oe(S,function(Kt){return[Kt]}));for(var Z=i.curOp.updateInput,pt=d.ranges.length-1;pt>=0;pt--){var ot=d.ranges[pt],wt=ot.from(),kt=ot.to();ot.empty()&&(p&&p>0?wt=Dt(wt.line,wt.ch-p):i.state.overwrite&&!C?kt=Dt(kt.line,Math.min(te(m,kt.line).text.length,kt.ch+Rt(S).length)):C&&Bn&&Bn.lineWise&&Bn.text.join(`
`)==S.join(`
`)&&(wt=kt=Dt(wt.line,0)));var It={from:wt,to:kt,text:E?E[pt%E.length]:S,origin:v||(C?"paste":i.state.cutIncoming>w?"cut":"+input")};Ai(i.doc,It),Ze(i,"inputRead",i,It)}l&&!C&&Rd(i,l),Oi(i),i.curOp.updateInput<2&&(i.curOp.updateInput=Z),i.curOp.typing=!0,i.state.pasteIncoming=i.state.cutIncoming=-1}function Nd(i,l){var p=i.clipboardData&&i.clipboardData.getData("Text");if(p)return i.preventDefault(),!l.isReadOnly()&&!l.options.disableInput&&on(l,function(){return $u(l,p,0,null,"paste")}),!0}function Rd(i,l){if(!(!i.options.electricChars||!i.options.smartIndent))for(var p=i.doc.sel,d=p.ranges.length-1;d>=0;d--){var v=p.ranges[d];if(!(v.head.ch>100||d&&p.ranges[d-1].head.line==v.head.line)){var m=i.getModeAt(v.head),w=!1;if(m.electricChars){for(var C=0;C<m.electricChars.length;C++)if(l.indexOf(m.electricChars.charAt(C))>-1){w=Ra(i,v.head.line,"smart");break}}else m.electricInput&&m.electricInput.test(te(i.doc,v.head.line).text.slice(0,v.head.ch))&&(w=Ra(i,v.head.line,"smart"));w&&Ze(i,"electricInput",i,v.head.line)}}}function Fd(i){for(var l=[],p=[],d=0;d<i.doc.sel.ranges.length;d++){var v=i.doc.sel.ranges[d].head.line,m={anchor:Dt(v,0),head:Dt(v+1,0)};p.push(m),l.push(i.getRange(m.anchor,m.head))}return{text:l,ranges:p}}function Hd(i,l,p,d){i.setAttribute("autocorrect",p?"":"off"),i.setAttribute("autocapitalize",d?"":"off"),i.setAttribute("spellcheck",!!l)}function Bd(){var i=U("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),l=U("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return f?i.style.width="1000px":i.setAttribute("wrap","off"),T&&(i.style.border="1px solid black"),Hd(i),l}function uy(i){var l=i.optionHandlers,p=i.helpers={};i.prototype={constructor:i,focus:function(){window.focus(),this.display.input.focus()},setOption:function(d,v){var m=this.options,w=m[d];m[d]==v&&d!="mode"||(m[d]=v,l.hasOwnProperty(d)&&_r(this,l[d])(this,v,w),Yt(this,"optionChange",this,d))},getOption:function(d){return this.options[d]},getDoc:function(){return this.doc},addKeyMap:function(d,v){this.state.keyMaps[v?"push":"unshift"](Ws(d))},removeKeyMap:function(d){for(var v=this.state.keyMaps,m=0;m<v.length;++m)if(v[m]==d||v[m].name==d)return v.splice(m,1),!0},addOverlay:Ir(function(d,v){var m=d.token?d:i.getMode(this.options,d);if(m.startState)throw new Error("Overlays may not be stateful.");he(this.state.overlays,{mode:m,modeSpec:d,opaque:v&&v.opaque,priority:v&&v.priority||0},function(w){return w.priority}),this.state.modeGen++,Ur(this)}),removeOverlay:Ir(function(d){for(var v=this.state.overlays,m=0;m<v.length;++m){var w=v[m].modeSpec;if(w==d||typeof d=="string"&&w.name==d){v.splice(m,1),this.state.modeGen++,Ur(this);return}}}),indentLine:Ir(function(d,v,m){typeof v!="string"&&typeof v!="number"&&(v==null?v=this.options.smartIndent?"smart":"prev":v=v?"add":"subtract"),tn(this.doc,d)&&Ra(this,d,v,m)}),indentSelection:Ir(function(d){for(var v=this.doc.sel.ranges,m=-1,w=0;w<v.length;w++){var C=v[w];if(C.empty())C.head.line>m&&(Ra(this,C.head.line,d,!0),m=C.head.line,w==this.doc.sel.primIndex&&Oi(this));else{var S=C.from(),E=C.to(),G=Math.max(m,S.line);m=Math.min(this.lastLine(),E.line-(E.ch?0:1))+1;for(var Z=G;Z<m;++Z)Ra(this,Z,d);var pt=this.doc.sel.ranges;S.ch==0&&v.length==pt.length&&pt[w].from().ch>0&&Fu(this.doc,w,new Ie(S,pt[w].to()),zt)}}}),getTokenAt:function(d,v){return wo(this,d,v)},getLineTokens:function(d,v){return wo(this,Dt(d),v,!0)},getTokenTypeAt:function(d){d=Vt(this.doc,d);var v=mo(this,te(this.doc,d.line)),m=0,w=(v.length-1)/2,C=d.ch,S;if(C==0)S=v[2];else for(;;){var E=m+w>>1;if((E?v[E*2-1]:0)>=C)w=E;else if(v[E*2+1]<C)m=E+1;else{S=v[E*2+2];break}}var G=S?S.indexOf("overlay "):-1;return G<0?S:G==0?null:S.slice(0,G-1)},getModeAt:function(d){var v=this.doc.mode;return v.innerMode?i.innerMode(v,this.getTokenAt(d).state).mode:v},getHelper:function(d,v){return this.getHelpers(d,v)[0]},getHelpers:function(d,v){var m=[];if(!p.hasOwnProperty(v))return m;var w=p[v],C=this.getModeAt(d);if(typeof C[v]=="string")w[C[v]]&&m.push(w[C[v]]);else if(C[v])for(var S=0;S<C[v].length;S++){var E=w[C[v][S]];E&&m.push(E)}else C.helperType&&w[C.helperType]?m.push(w[C.helperType]):w[C.name]&&m.push(w[C.name]);for(var G=0;G<w._global.length;G++){var Z=w._global[G];Z.pred(C,this)&&Qt(m,Z.val)==-1&&m.push(Z.val)}return m},getStateAfter:function(d,v){var m=this.doc;return d=jt(m,d??m.first+m.size-1),Jn(this,d+1,v).state},cursorCoords:function(d,v){var m,w=this.doc.sel.primary();return d==null?m=w.head:typeof d=="object"?m=Vt(this.doc,d):m=d?w.from():w.to(),Fn(this,m,v||"page")},charCoords:function(d,v){return Es(this,Vt(this.doc,d),v||"page")},coordsChar:function(d,v){return d=Sf(this,d,v||"page"),_u(this,d.left,d.top)},lineAtHeight:function(d,v){return d=Sf(this,{top:d,left:0},v||"page").top,Re(this.doc,d+this.display.viewOffset)},heightAtLine:function(d,v,m){var w=!1,C;if(typeof d=="number"){var S=this.doc.first+this.doc.size-1;d<this.doc.first?d=this.doc.first:d>S&&(d=S,w=!0),C=te(this.doc,d)}else C=d;return Ps(this,C,{top:0,left:0},v||"page",m||w).top+(w?this.doc.height-An(C):0)},defaultTextHeight:function(){return Ci(this.display)},defaultCharWidth:function(){return xi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(d,v,m,w,C){var S=this.display;d=Fn(this,Vt(this.doc,d));var E=d.bottom,G=d.left;if(v.style.position="absolute",v.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(v),S.sizer.appendChild(v),w=="over")E=d.top;else if(w=="above"||w=="near"){var Z=Math.max(S.wrapper.clientHeight,this.doc.height),pt=Math.max(S.sizer.clientWidth,S.lineSpace.clientWidth);(w=="above"||d.bottom+v.offsetHeight>Z)&&d.top>v.offsetHeight?E=d.top-v.offsetHeight:d.bottom+v.offsetHeight<=Z&&(E=d.bottom),G+v.offsetWidth>pt&&(G=pt-v.offsetWidth)}v.style.top=E+"px",v.style.left=v.style.right="",C=="right"?(G=S.sizer.clientWidth-v.offsetWidth,v.style.right="0px"):(C=="left"?G=0:C=="middle"&&(G=(S.sizer.clientWidth-v.offsetWidth)/2),v.style.left=G+"px"),m&&ag(this,{left:G,top:E,right:G+v.offsetWidth,bottom:E+v.offsetHeight})},triggerOnKeyDown:Ir(Ed),triggerOnKeyPress:Ir(kd),triggerOnKeyUp:Ad,triggerOnMouseDown:Ir(Md),execCommand:function(d){if(ja.hasOwnProperty(d))return ja[d].call(null,this)},triggerElectric:Ir(function(d){Rd(this,d)}),findPosH:function(d,v,m,w){var C=1;v<0&&(C=-1,v=-v);for(var S=Vt(this.doc,d),E=0;E<v&&(S=qu(this.doc,S,C,m,w),!S.hitSide);++E);return S},moveH:Ir(function(d,v){var m=this;this.extendSelectionsBy(function(w){return m.display.shift||m.doc.extend||w.empty()?qu(m.doc,w.head,d,v,m.options.rtlMoveVisually):d<0?w.from():w.to()},me)}),deleteH:Ir(function(d,v){var m=this.doc.sel,w=this.doc;m.somethingSelected()?w.replaceSelection("",null,"+delete"):Li(this,function(C){var S=qu(w,C.head,d,v,!1);return d<0?{from:S,to:C.head}:{from:C.head,to:S}})}),findPosV:function(d,v,m,w){var C=1,S=w;v<0&&(C=-1,v=-v);for(var E=Vt(this.doc,d),G=0;G<v;++G){var Z=Fn(this,E,"div");if(S==null?S=Z.left:Z.left=S,E=Ud(this,Z,C,m),E.hitSide)break}return E},moveV:Ir(function(d,v){var m=this,w=this.doc,C=[],S=!this.display.shift&&!w.extend&&w.sel.somethingSelected();if(w.extendSelectionsBy(function(G){if(S)return d<0?G.from():G.to();var Z=Fn(m,G.head,"div");G.goalColumn!=null&&(Z.left=G.goalColumn),C.push(Z.left);var pt=Ud(m,Z,d,v);return v=="page"&&G==w.sel.primary()&&Eu(m,Es(m,pt,"div").top-Z.top),pt},me),C.length)for(var E=0;E<w.sel.ranges.length;E++)w.sel.ranges[E].goalColumn=C[E]}),findWordAt:function(d){var v=this.doc,m=te(v,d.line).text,w=d.ch,C=d.ch;if(m){var S=this.getHelper(d,"wordChars");(d.sticky=="before"||C==m.length)&&w?--w:++C;for(var E=m.charAt(w),G=at(E,S)?function(Z){return at(Z,S)}:/\s/.test(E)?function(Z){return/\s/.test(Z)}:function(Z){return!/\s/.test(Z)&&!at(Z)};w>0&&G(m.charAt(w-1));)--w;for(;C<m.length&&G(m.charAt(C));)++C}return new Ie(Dt(d.line,w),Dt(d.line,C))},toggleOverwrite:function(d){d!=null&&d==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?gt(this.display.cursorDiv,"CodeMirror-overwrite"):nt(this.display.cursorDiv,"CodeMirror-overwrite"),Yt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==yt()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Ir(function(d,v){_a(this,d,v)}),getScrollInfo:function(){var d=this.display.scroller;return{left:d.scrollLeft,top:d.scrollTop,height:d.scrollHeight-nn(this)-this.display.barHeight,width:d.scrollWidth-nn(this)-this.display.barWidth,clientHeight:O(this),clientWidth:so(this)}},scrollIntoView:Ir(function(d,v){d==null?(d={from:this.doc.sel.primary().head,to:null},v==null&&(v=this.options.cursorScrollMargin)):typeof d=="number"?d={from:Dt(d,0),to:null}:d.from==null&&(d={from:d,to:null}),d.to||(d.to=d.from),d.margin=v||0,d.from.line!=null?sg(this,d):jf(this,d.from,d.to,d.margin)}),setSize:Ir(function(d,v){var m=this,w=function(S){return typeof S=="number"||/^\d+$/.test(String(S))?S+"px":S};d!=null&&(this.display.wrapper.style.width=w(d)),v!=null&&(this.display.wrapper.style.height=w(v)),this.options.lineWrapping&&bf(this);var C=this.display.viewFrom;this.doc.iter(C,this.display.viewTo,function(S){if(S.widgets){for(var E=0;E<S.widgets.length;E++)if(S.widgets[E].noHScroll){Mo(m,C,"widget");break}}++C}),this.curOp.forceUpdate=!0,Yt(this,"refresh",this)}),operation:function(d){return on(this,d)},startOperation:function(){return ti(this)},endOperation:function(){return ei(this)},refresh:Ir(function(){var d=this.display.cachedTextHeight;Ur(this),this.curOp.forceUpdate=!0,ya(this),_a(this,this.doc.scrollLeft,this.doc.scrollTop),Mu(this.display),(d==null||Math.abs(d-Ci(this.display))>.5||this.options.lineWrapping)&&xu(this),Yt(this,"refresh",this)}),swapDoc:Ir(function(d){var v=this.doc;return v.cm=null,this.state.selectingText&&this.state.selectingText(),qf(this,d),ya(this),this.display.input.reset(),_a(this,d.scrollLeft,d.scrollTop),this.curOp.forceScroll=!0,Ze(this,"swapDoc",this,v),v}),phrase:function(d){var v=this.options.phrases;return v&&Object.prototype.hasOwnProperty.call(v,d)?v[d]:d},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ae(i),i.registerHelper=function(d,v,m){p.hasOwnProperty(d)||(p[d]=i[d]={_global:[]}),p[d][v]=m},i.registerGlobalHelper=function(d,v,m,w){i.registerHelper(d,v,w),p[d]._global.push({pred:m,val:w})}}function qu(i,l,p,d,v){var m=l,w=p,C=te(i,l.line),S=v&&i.direction=="rtl"?-p:p;function E(){var Jt=l.line+S;return Jt<i.first||Jt>=i.first+i.size?!1:(l=new Dt(Jt,l.ch,l.sticky),C=te(i,Jt))}function G(Jt){var Gt;if(d=="codepoint"){var ee=C.text.charCodeAt(l.ch+(p>0?0:-1));if(isNaN(ee))Gt=null;else{var pe=p>0?ee>=55296&&ee<56320:ee>=56320&&ee<57343;Gt=new Dt(l.line,Math.max(0,Math.min(C.text.length,l.ch+p*(pe?2:1))),-p)}}else v?Gt=zg(i.cm,C,l,p):Gt=Bu(C,l,p);if(Gt==null)if(!Jt&&E())l=Uu(v,i.cm,C,l.line,S);else return!1;else l=Gt;return!0}if(d=="char"||d=="codepoint")G();else if(d=="column")G(!0);else if(d=="word"||d=="group")for(var Z=null,pt=d=="group",ot=i.cm&&i.cm.getHelper(l,"wordChars"),wt=!0;!(p<0&&!G(!wt));wt=!1){var kt=C.text.charAt(l.ch)||`
`,It=at(kt,ot)?"w":pt&&kt==`
`?"n":!pt||/\s/.test(kt)?null:"p";if(pt&&!wt&&!It&&(It="s"),Z&&Z!=It){p<0&&(p=1,G(),l.sticky="after");break}if(It&&(Z=It),p>0&&!G(!wt))break}var Kt=Hs(i,l,m,w,!0);return vn(m,Kt)&&(Kt.hitSide=!0),Kt}function Ud(i,l,p,d){var v=i.doc,m=l.left,w;if(d=="page"){var C=Math.min(i.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),S=Math.max(C-.5*Ci(i.display),3);w=(p>0?l.bottom:l.top)+p*S}else d=="line"&&(w=p>0?l.bottom+3:l.top-3);for(var E;E=_u(i,m,w),!!E.outside;){if(p<0?w<=0:w>=v.height){E.hitSide=!0;break}w+=p*5}return E}var Ne=function(i){this.cm=i,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Et,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ne.prototype.init=function(i){var l=this,p=this,d=p.cm,v=p.div=i.lineDiv;v.contentEditable=!0,Hd(v,d.options.spellcheck,d.options.autocorrect,d.options.autocapitalize);function m(C){for(var S=C.target;S;S=S.parentNode){if(S==v)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(S.className))break}return!1}vt(v,"paste",function(C){!m(C)||Ut(d,C)||Nd(C,d)||c<=11&&setTimeout(_r(d,function(){return l.updateFromDOM()}),20)}),vt(v,"compositionstart",function(C){l.composing={data:C.data,done:!1}}),vt(v,"compositionupdate",function(C){l.composing||(l.composing={data:C.data,done:!1})}),vt(v,"compositionend",function(C){l.composing&&(C.data!=l.composing.data&&l.readFromDOMSoon(),l.composing.done=!0)}),vt(v,"touchstart",function(){return p.forceCompositionEnd()}),vt(v,"input",function(){l.composing||l.readFromDOMSoon()});function w(C){if(!(!m(C)||Ut(d,C))){if(d.somethingSelected())Gs({lineWise:!1,text:d.getSelections()}),C.type=="cut"&&d.replaceSelection("",null,"cut");else if(d.options.lineWiseCopyCut){var S=Fd(d);Gs({lineWise:!0,text:S.text}),C.type=="cut"&&d.operation(function(){d.setSelections(S.ranges,0,zt),d.replaceSelection("",null,"cut")})}else return;if(C.clipboardData){C.clipboardData.clearData();var E=Bn.text.join(`
`);if(C.clipboardData.setData("Text",E),C.clipboardData.getData("Text")==E){C.preventDefault();return}}var G=Bd(),Z=G.firstChild;d.display.lineSpace.insertBefore(G,d.display.lineSpace.firstChild),Z.value=Bn.text.join(`
`);var pt=yt();qt(Z),setTimeout(function(){d.display.lineSpace.removeChild(G),pt.focus(),pt==v&&p.showPrimarySelection()},50)}}vt(v,"copy",w),vt(v,"cut",w)},Ne.prototype.screenReaderLabelChanged=function(i){i?this.div.setAttribute("aria-label",i):this.div.removeAttribute("aria-label")},Ne.prototype.prepareSelection=function(){var i=kf(this.cm,!1);return i.focus=yt()==this.div,i},Ne.prototype.showSelection=function(i,l){!i||!this.cm.display.view.length||((i.focus||l)&&this.showPrimarySelection(),this.showMultipleSelections(i))},Ne.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ne.prototype.showPrimarySelection=function(){var i=this.getSelection(),l=this.cm,p=l.doc.sel.primary(),d=p.from(),v=p.to();if(l.display.viewTo==l.display.viewFrom||d.line>=l.display.viewTo||v.line<l.display.viewFrom){i.removeAllRanges();return}var m=$s(l,i.anchorNode,i.anchorOffset),w=$s(l,i.focusNode,i.focusOffset);if(!(m&&!m.bad&&w&&!w.bad&&de(Ct(m,w),d)==0&&de(Y(m,w),v)==0)){var C=l.display.view,S=d.line>=l.display.viewFrom&&Wd(l,d)||{node:C[0].measure.map[2],offset:0},E=v.line<l.display.viewTo&&Wd(l,v);if(!E){var G=C[C.length-1].measure,Z=G.maps?G.maps[G.maps.length-1]:G.map;E={node:Z[Z.length-1],offset:Z[Z.length-2]-Z[Z.length-3]}}if(!S||!E){i.removeAllRanges();return}var pt=i.rangeCount&&i.getRangeAt(0),ot;try{ot=tt(S.node,S.offset,E.offset,E.node)}catch{}ot&&(!e&&l.state.focused?(i.collapse(S.node,S.offset),ot.collapsed||(i.removeAllRanges(),i.addRange(ot))):(i.removeAllRanges(),i.addRange(ot)),pt&&i.anchorNode==null?i.addRange(pt):e&&this.startGracePeriod()),this.rememberSelection()}},Ne.prototype.startGracePeriod=function(){var i=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){i.gracePeriod=!1,i.selectionChanged()&&i.cm.operation(function(){return i.cm.curOp.selectionChanged=!0})},20)},Ne.prototype.showMultipleSelections=function(i){V(this.cm.display.cursorDiv,i.cursors),V(this.cm.display.selectionDiv,i.selection)},Ne.prototype.rememberSelection=function(){var i=this.getSelection();this.lastAnchorNode=i.anchorNode,this.lastAnchorOffset=i.anchorOffset,this.lastFocusNode=i.focusNode,this.lastFocusOffset=i.focusOffset},Ne.prototype.selectionInEditor=function(){var i=this.getSelection();if(!i.rangeCount)return!1;var l=i.getRangeAt(0).commonAncestorContainer;return A(this.div,l)},Ne.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||yt()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ne.prototype.blur=function(){this.div.blur()},Ne.prototype.getField=function(){return this.div},Ne.prototype.supportsTouch=function(){return!0},Ne.prototype.receivedFocus=function(){var i=this,l=this;this.selectionInEditor()?setTimeout(function(){return i.pollSelection()},20):on(this.cm,function(){return l.cm.curOp.selectionChanged=!0});function p(){l.cm.state.focused&&(l.pollSelection(),l.polling.set(l.cm.options.pollInterval,p))}this.polling.set(this.cm.options.pollInterval,p)},Ne.prototype.selectionChanged=function(){var i=this.getSelection();return i.anchorNode!=this.lastAnchorNode||i.anchorOffset!=this.lastAnchorOffset||i.focusNode!=this.lastFocusNode||i.focusOffset!=this.lastFocusOffset},Ne.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var i=this.getSelection(),l=this.cm;if(I&&g&&this.cm.display.gutterSpecs.length&&cy(i.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var p=$s(l,i.anchorNode,i.anchorOffset),d=$s(l,i.focusNode,i.focusOffset);p&&d&&on(l,function(){kr(l.doc,Lo(p,d),zt),(p.bad||d.bad)&&(l.curOp.selectionChanged=!0)})}}},Ne.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var i=this.cm,l=i.display,p=i.doc.sel.primary(),d=p.from(),v=p.to();if(d.ch==0&&d.line>i.firstLine()&&(d=Dt(d.line-1,te(i.doc,d.line-1).length)),v.ch==te(i.doc,v.line).text.length&&v.line<i.lastLine()&&(v=Dt(v.line+1,0)),d.line<l.viewFrom||v.line>l.viewTo-1)return!1;var m,w,C;d.line==l.viewFrom||(m=Zo(i,d.line))==0?(w=Ee(l.view[0].line),C=l.view[0].node):(w=Ee(l.view[m].line),C=l.view[m-1].node.nextSibling);var S=Zo(i,v.line),E,G;if(S==l.view.length-1?(E=l.viewTo-1,G=l.lineDiv.lastChild):(E=Ee(l.view[S+1].line)-1,G=l.view[S+1].node.previousSibling),!C)return!1;for(var Z=i.doc.splitLines(fy(i,C,G,w,E)),pt=gr(i.doc,Dt(w,0),Dt(E,te(i.doc,E).text.length));Z.length>1&&pt.length>1;)if(Rt(Z)==Rt(pt))Z.pop(),pt.pop(),E--;else if(Z[0]==pt[0])Z.shift(),pt.shift(),w++;else break;for(var ot=0,wt=0,kt=Z[0],It=pt[0],Kt=Math.min(kt.length,It.length);ot<Kt&&kt.charCodeAt(ot)==It.charCodeAt(ot);)++ot;for(var Jt=Rt(Z),Gt=Rt(pt),ee=Math.min(Jt.length-(Z.length==1?ot:0),Gt.length-(pt.length==1?ot:0));wt<ee&&Jt.charCodeAt(Jt.length-wt-1)==Gt.charCodeAt(Gt.length-wt-1);)++wt;if(Z.length==1&&pt.length==1&&w==d.line)for(;ot&&ot>d.ch&&Jt.charCodeAt(Jt.length-wt-1)==Gt.charCodeAt(Gt.length-wt-1);)ot--,wt++;Z[Z.length-1]=Jt.slice(0,Jt.length-wt).replace(/^\u200b+/,""),Z[0]=Z[0].slice(ot).replace(/\u200b+$/,"");var pe=Dt(w,ot),fe=Dt(E,pt.length?Rt(pt).length-wt:0);if(Z.length>1||Z[0]||de(pe,fe))return ki(i.doc,Z,pe,fe,"+input"),!0},Ne.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ne.prototype.reset=function(){this.forceCompositionEnd()},Ne.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ne.prototype.readFromDOMSoon=function(){var i=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(i.readDOMTimeout=null,i.composing)if(i.composing.done)i.composing=null;else return;i.updateFromDOM()},80))},Ne.prototype.updateFromDOM=function(){var i=this;(this.cm.isReadOnly()||!this.pollContent())&&on(this.cm,function(){return Ur(i.cm)})},Ne.prototype.setUneditable=function(i){i.contentEditable="false"},Ne.prototype.onKeyPress=function(i){i.charCode==0||this.composing||(i.preventDefault(),this.cm.isReadOnly()||_r(this.cm,$u)(this.cm,String.fromCharCode(i.charCode==null?i.keyCode:i.charCode),0))},Ne.prototype.readOnlyChanged=function(i){this.div.contentEditable=String(i!="nocursor")},Ne.prototype.onContextMenu=function(){},Ne.prototype.resetPosition=function(){},Ne.prototype.needsContentAttribute=!0;function Wd(i,l){var p=lt(i,l.line);if(!p||p.hidden)return null;var d=te(i.doc,l.line),v=X(p,d,l.line),m=D(d,i.doc.direction),w="left";if(m){var C=R(m,l.ch);w=C%2?"right":"left"}var S=be(v.map,l.ch,w);return S.offset=S.collapse=="right"?S.end:S.start,S}function cy(i){for(var l=i;l;l=l.parentNode)if(/CodeMirror-gutter-wrapper/.test(l.className))return!0;return!1}function Vi(i,l){return l&&(i.bad=!0),i}function fy(i,l,p,d,v){var m="",w=!1,C=i.doc.lineSeparator(),S=!1;function E(ot){return function(wt){return wt.id==ot}}function G(){w&&(m+=C,S&&(m+=C),w=S=!1)}function Z(ot){ot&&(G(),m+=ot)}function pt(ot){if(ot.nodeType==1){var wt=ot.getAttribute("cm-text");if(wt){Z(wt);return}var kt=ot.getAttribute("cm-marker"),It;if(kt){var Kt=i.findMarks(Dt(d,0),Dt(v+1,0),E(+kt));Kt.length&&(It=Kt[0].find(0))&&Z(gr(i.doc,It.from,It.to).join(C));return}if(ot.getAttribute("contenteditable")=="false")return;var Jt=/^(pre|div|p|li|table|br)$/i.test(ot.nodeName);if(!/^br$/i.test(ot.nodeName)&&ot.textContent.length==0)return;Jt&&G();for(var Gt=0;Gt<ot.childNodes.length;Gt++)pt(ot.childNodes[Gt]);/^(pre|p)$/i.test(ot.nodeName)&&(S=!0),Jt&&(w=!0)}else ot.nodeType==3&&Z(ot.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;pt(l),l!=p;)l=l.nextSibling,S=!1;return m}function $s(i,l,p){var d;if(l==i.display.lineDiv){if(d=i.display.lineDiv.childNodes[p],!d)return Vi(i.clipPos(Dt(i.display.viewTo-1)),!0);l=null,p=0}else for(d=l;;d=d.parentNode){if(!d||d==i.display.lineDiv)return null;if(d.parentNode&&d.parentNode==i.display.lineDiv)break}for(var v=0;v<i.display.view.length;v++){var m=i.display.view[v];if(m.node==d)return dy(m,l,p)}}function dy(i,l,p){var d=i.text.firstChild,v=!1;if(!l||!A(d,l))return Vi(Dt(Ee(i.line),0),!0);if(l==d&&(v=!0,l=d.childNodes[p],p=0,!l)){var m=i.rest?Rt(i.rest):i.line;return Vi(Dt(Ee(m),m.text.length),v)}var w=l.nodeType==3?l:null,C=l;for(!w&&l.childNodes.length==1&&l.firstChild.nodeType==3&&(w=l.firstChild,p&&(p=w.nodeValue.length));C.parentNode!=d;)C=C.parentNode;var S=i.measure,E=S.maps;function G(It,Kt,Jt){for(var Gt=-1;Gt<(E?E.length:0);Gt++)for(var ee=Gt<0?S.map:E[Gt],pe=0;pe<ee.length;pe+=3){var fe=ee[pe+2];if(fe==It||fe==Kt){var Oe=Ee(Gt<0?i.line:i.rest[Gt]),Fe=ee[pe]+Jt;return(Jt<0||fe!=It)&&(Fe=ee[pe+(Jt?1:0)]),Dt(Oe,Fe)}}}var Z=G(w,C,p);if(Z)return Vi(Z,v);for(var pt=C.nextSibling,ot=w?w.nodeValue.length-p:0;pt;pt=pt.nextSibling){if(Z=G(pt,pt.firstChild,0),Z)return Vi(Dt(Z.line,Z.ch-ot),v);ot+=pt.textContent.length}for(var wt=C.previousSibling,kt=p;wt;wt=wt.previousSibling){if(Z=G(wt,wt.firstChild,-1),Z)return Vi(Dt(Z.line,Z.ch+kt),v);kt+=wt.textContent.length}}var rr=function(i){this.cm=i,this.prevInput="",this.pollingFast=!1,this.polling=new Et,this.hasSelection=!1,this.composing=null};rr.prototype.init=function(i){var l=this,p=this,d=this.cm;this.createField(i);var v=this.textarea;i.wrapper.insertBefore(this.wrapper,i.wrapper.firstChild),T&&(v.style.width="0px"),vt(v,"input",function(){u&&c>=9&&l.hasSelection&&(l.hasSelection=null),p.poll()}),vt(v,"paste",function(w){Ut(d,w)||Nd(w,d)||(d.state.pasteIncoming=+new Date,p.fastPoll())});function m(w){if(!Ut(d,w)){if(d.somethingSelected())Gs({lineWise:!1,text:d.getSelections()});else if(d.options.lineWiseCopyCut){var C=Fd(d);Gs({lineWise:!0,text:C.text}),w.type=="cut"?d.setSelections(C.ranges,null,zt):(p.prevInput="",v.value=C.text.join(`
`),qt(v))}else return;w.type=="cut"&&(d.state.cutIncoming=+new Date)}}vt(v,"cut",m),vt(v,"copy",m),vt(i.scroller,"paste",function(w){if(!(kn(i,w)||Ut(d,w))){if(!v.dispatchEvent){d.state.pasteIncoming=+new Date,p.focus();return}var C=new Event("paste");C.clipboardData=w.clipboardData,v.dispatchEvent(C)}}),vt(i.lineSpace,"selectstart",function(w){kn(i,w)||Te(w)}),vt(v,"compositionstart",function(){var w=d.getCursor("from");p.composing&&p.composing.range.clear(),p.composing={start:w,range:d.markText(w,d.getCursor("to"),{className:"CodeMirror-composing"})}}),vt(v,"compositionend",function(){p.composing&&(p.poll(),p.composing.range.clear(),p.composing=null)})},rr.prototype.createField=function(i){this.wrapper=Bd(),this.textarea=this.wrapper.firstChild},rr.prototype.screenReaderLabelChanged=function(i){i?this.textarea.setAttribute("aria-label",i):this.textarea.removeAttribute("aria-label")},rr.prototype.prepareSelection=function(){var i=this.cm,l=i.display,p=i.doc,d=kf(i);if(i.options.moveInputWithCursor){var v=Fn(i,p.sel.primary().head,"div"),m=l.wrapper.getBoundingClientRect(),w=l.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(l.wrapper.clientHeight-10,v.top+w.top-m.top)),d.teLeft=Math.max(0,Math.min(l.wrapper.clientWidth-10,v.left+w.left-m.left))}return d},rr.prototype.showSelection=function(i){var l=this.cm,p=l.display;V(p.cursorDiv,i.cursors),V(p.selectionDiv,i.selection),i.teTop!=null&&(this.wrapper.style.top=i.teTop+"px",this.wrapper.style.left=i.teLeft+"px")},rr.prototype.reset=function(i){if(!(this.contextMenuPending||this.composing)){var l=this.cm;if(l.somethingSelected()){this.prevInput="";var p=l.getSelection();this.textarea.value=p,l.state.focused&&qt(this.textarea),u&&c>=9&&(this.hasSelection=p)}else i||(this.prevInput=this.textarea.value="",u&&c>=9&&(this.hasSelection=null))}},rr.prototype.getField=function(){return this.textarea},rr.prototype.supportsTouch=function(){return!1},rr.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!z||yt()!=this.textarea))try{this.textarea.focus()}catch{}},rr.prototype.blur=function(){this.textarea.blur()},rr.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},rr.prototype.receivedFocus=function(){this.slowPoll()},rr.prototype.slowPoll=function(){var i=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){i.poll(),i.cm.state.focused&&i.slowPoll()})},rr.prototype.fastPoll=function(){var i=!1,l=this;l.pollingFast=!0;function p(){var d=l.poll();!d&&!i?(i=!0,l.polling.set(60,p)):(l.pollingFast=!1,l.slowPoll())}l.polling.set(20,p)},rr.prototype.poll=function(){var i=this,l=this.cm,p=this.textarea,d=this.prevInput;if(this.contextMenuPending||!l.state.focused||Ue(p)&&!d&&!this.composing||l.isReadOnly()||l.options.disableInput||l.state.keySeq)return!1;var v=p.value;if(v==d&&!l.somethingSelected())return!1;if(u&&c>=9&&this.hasSelection===v||F&&/[\uf700-\uf7ff]/.test(v))return l.display.input.reset(),!1;if(l.doc.sel==l.display.selForContextMenu){var m=v.charCodeAt(0);if(m==8203&&!d&&(d="​"),m==8666)return this.reset(),this.cm.execCommand("undo")}for(var w=0,C=Math.min(d.length,v.length);w<C&&d.charCodeAt(w)==v.charCodeAt(w);)++w;return on(l,function(){$u(l,v.slice(w),d.length-w,null,i.composing?"*compose":null),v.length>1e3||v.indexOf(`
`)>-1?p.value=i.prevInput="":i.prevInput=v,i.composing&&(i.composing.range.clear(),i.composing.range=l.markText(i.composing.start,l.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},rr.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},rr.prototype.onKeyPress=function(){u&&c>=9&&(this.hasSelection=null),this.fastPoll()},rr.prototype.onContextMenu=function(i){var l=this,p=l.cm,d=p.display,v=l.textarea;l.contextMenuPending&&l.contextMenuPending();var m=Xo(p,i),w=d.scroller.scrollTop;if(!m||y)return;var C=p.options.resetSelectionOnContextMenu;C&&p.doc.sel.contains(m)==-1&&_r(p,kr)(p.doc,Lo(m),zt);var S=v.style.cssText,E=l.wrapper.style.cssText,G=l.wrapper.offsetParent.getBoundingClientRect();l.wrapper.style.cssText="position: static",v.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(i.clientY-G.top-5)+"px; left: "+(i.clientX-G.left-5)+`px;
      z-index: 1000; background: `+(u?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var Z;f&&(Z=window.scrollY),d.input.focus(),f&&window.scrollTo(null,Z),d.input.reset(),p.somethingSelected()||(v.value=l.prevInput=" "),l.contextMenuPending=ot,d.selForContextMenu=p.doc.sel,clearTimeout(d.detectingSelectAll);function pt(){if(v.selectionStart!=null){var kt=p.somethingSelected(),It="​"+(kt?v.value:"");v.value="⇚",v.value=It,l.prevInput=kt?"":"​",v.selectionStart=1,v.selectionEnd=It.length,d.selForContextMenu=p.doc.sel}}function ot(){if(l.contextMenuPending==ot&&(l.contextMenuPending=!1,l.wrapper.style.cssText=E,v.style.cssText=S,u&&c<9&&d.scrollbars.setScrollTop(d.scroller.scrollTop=w),v.selectionStart!=null)){(!u||u&&c<9)&&pt();var kt=0,It=function(){d.selForContextMenu==p.doc.sel&&v.selectionStart==0&&v.selectionEnd>0&&l.prevInput=="​"?_r(p,sd)(p):kt++<10?d.detectingSelectAll=setTimeout(It,500):(d.selForContextMenu=null,d.input.reset())};d.detectingSelectAll=setTimeout(It,200)}}if(u&&c>=9&&pt(),ut){j(i);var wt=function(){Xt(window,"mouseup",wt),setTimeout(ot,20)};vt(window,"mouseup",wt)}else setTimeout(ot,50)},rr.prototype.readOnlyChanged=function(i){i||this.reset(),this.textarea.disabled=i=="nocursor",this.textarea.readOnly=!!i},rr.prototype.setUneditable=function(){},rr.prototype.needsContentAttribute=!1;function py(i,l){if(l=l?At(l):{},l.value=i.value,!l.tabindex&&i.tabIndex&&(l.tabindex=i.tabIndex),!l.placeholder&&i.placeholder&&(l.placeholder=i.placeholder),l.autofocus==null){var p=yt();l.autofocus=p==i||i.getAttribute("autofocus")!=null&&p==document.body}function d(){i.value=C.getValue()}var v;if(i.form&&(vt(i.form,"submit",d),!l.leaveSubmitMethodAlone)){var m=i.form;v=m.submit;try{var w=m.submit=function(){d(),m.submit=v,m.submit(),m.submit=w}}catch{}}l.finishInit=function(S){S.save=d,S.getTextArea=function(){return i},S.toTextArea=function(){S.toTextArea=isNaN,d(),i.parentNode.removeChild(S.getWrapperElement()),i.style.display="",i.form&&(Xt(i.form,"submit",d),!l.leaveSubmitMethodAlone&&typeof i.form.submit=="function"&&(i.form.submit=v))}},i.style.display="none";var C=$e(function(S){return i.parentNode.insertBefore(S,i.nextSibling)},l);return C}function hy(i){i.off=Xt,i.on=vt,i.wheelEventPixels=bg,i.Doc=Wr,i.splitLines=tr,i.countColumn=Ht,i.findColumn=rt,i.isWordChar=$,i.Pass=$t,i.signal=Yt,i.Line=mr,i.changeEnd=jo,i.scrollbarModel=Nf,i.Pos=Dt,i.cmpPos=de,i.modes=Jr,i.mimeModes=Le,i.resolveMode=Er,i.getMode=ve,i.modeExtensions=Qr,i.extendMode=Fr,i.copyState=or,i.startState=Lr,i.innerMode=ir,i.commands=ja,i.keyMap=lo,i.keyName=xd,i.isModifierKey=bd,i.lookupKey=Di,i.normalizeKeyMap=Wg,i.StringStream=je,i.SharedTextMarker=Ma,i.TextMarker=Io,i.LineWidget=ka,i.e_preventDefault=Te,i.e_stopPropagation=Ye,i.e_stop=j,i.addClass=gt,i.contains=A,i.rmClass=nt,i.keyNames=No}iy($e),uy($e);var vy="iter insert remove copy getEditor constructor".split(" ");for(var qs in Wr.prototype)Wr.prototype.hasOwnProperty(qs)&&Qt(vy,qs)<0&&($e.prototype[qs]=function(i){return function(){return i.apply(this.doc,arguments)}}(Wr.prototype[qs]));return Ae(Wr),$e.inputStyles={textarea:rr,contenteditable:Ne},$e.defineMode=function(i){!$e.defaults.mode&&i!="null"&&($e.defaults.mode=i),er.apply(this,arguments)},$e.defineMIME=ke,$e.defineMode("null",function(){return{token:function(i){return i.skipToEnd()}}}),$e.defineMIME("text/plain","null"),$e.defineExtension=function(i,l){$e.prototype[i]=l},$e.defineDocExtension=function(i,l){Wr.prototype[i]=l},$e.fromTextArea=py,hy($e),$e.version="5.63.0",$e})},7389:(a,n,t)=>{(function(e){e(t(4408))})(function(e){e.defineMode("css",function(H,V){var U=V.inline;V.propertyKeywords||(V=e.resolveMode("text/css"));var B=H.indentUnit,tt=V.tokenHooks,A=V.documentTypes||{},yt=V.mediaTypes||{},gt=V.mediaFeatures||{},Mt=V.mediaValueKeywords||{},qt=V.propertyKeywords||{},ft=V.nonStandardPropertyKeywords||{},At=V.fontProperties||{},Ht=V.counterDescriptors||{},Et=V.colorKeywords||{},Qt=V.valueKeywords||{},re=V.allowNested,$t=V.lineComment,zt=V.supportsAtComponent===!0,se=H.highlightNonStandardPropertyKeywords!==!1,me,rt;function bt(K,dt){return me=dt,K}function Zt(K,dt){var it=K.next();if(tt[it]){var ne=tt[it](K,dt);if(ne!==!1)return ne}if(it=="@")return K.eatWhile(/[\w\\\-]/),bt("def",K.current());if(it=="="||(it=="~"||it=="|")&&K.eat("="))return bt(null,"compare");if(it=='"'||it=="'")return dt.tokenize=Rt(it),dt.tokenize(K,dt);if(it=="#")return K.eatWhile(/[\w\\\-]/),bt("atom","hash");if(it=="!")return K.match(/^\s*\w*/),bt("keyword","important");if(/\d/.test(it)||it=="."&&K.eat(/\d/))return K.eatWhile(/[\w.%]/),bt("number","unit");if(it==="-"){if(/[\d.]/.test(K.peek()))return K.eatWhile(/[\w.%]/),bt("number","unit");if(K.match(/^-[\w\\\-]*/))return K.eatWhile(/[\w\\\-]/),K.match(/^\s*:/,!1)?bt("variable-2","variable-definition"):bt("variable-2","variable");if(K.match(/^\w+-/))return bt("meta","meta")}else return/[,+>*\/]/.test(it)?bt(null,"select-op"):it=="."&&K.match(/^-?[_a-z][_a-z0-9-]*/i)?bt("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(it)?bt(null,it):K.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(K.current())&&(dt.tokenize=oe),bt("variable callee","variable")):/[\w\\\-]/.test(it)?(K.eatWhile(/[\w\\\-]/),bt("property","word")):bt(null,null)}function Rt(K){return function(dt,it){for(var ne=!1,we;(we=dt.next())!=null;){if(we==K&&!ne){K==")"&&dt.backUp(1);break}ne=!ne&&we=="\\"}return(we==K||!ne&&K!=")")&&(it.tokenize=null),bt("string","string")}}function oe(K,dt){return K.next(),K.match(/^\s*[\"\')]/,!1)?dt.tokenize=null:dt.tokenize=Rt(")"),bt(null,"(")}function he(K,dt,it){this.type=K,this.indent=dt,this.prev=it}function ie(K,dt,it,ne){return K.context=new he(it,dt.indentation()+(ne===!1?0:B),K.context),it}function P(K){return K.context.prev&&(K.context=K.context.prev),K.context.type}function N(K,dt,it){return mt[it.context.type](K,dt,it)}function $(K,dt,it,ne){for(var we=ne||1;we>0;we--)it.context=it.context.prev;return N(K,dt,it)}function at(K){var dt=K.current().toLowerCase();Qt.hasOwnProperty(dt)?rt="atom":Et.hasOwnProperty(dt)?rt="keyword":rt="variable"}var mt={};return mt.top=function(K,dt,it){if(K=="{")return ie(it,dt,"block");if(K=="}"&&it.context.prev)return P(it);if(zt&&/@component/i.test(K))return ie(it,dt,"atComponentBlock");if(/^@(-moz-)?document$/i.test(K))return ie(it,dt,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(K))return ie(it,dt,"atBlock");if(/^@(font-face|counter-style)/i.test(K))return it.stateArg=K,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(K))return"keyframes";if(K&&K.charAt(0)=="@")return ie(it,dt,"at");if(K=="hash")rt="builtin";else if(K=="word")rt="tag";else{if(K=="variable-definition")return"maybeprop";if(K=="interpolation")return ie(it,dt,"interpolation");if(K==":")return"pseudo";if(re&&K=="(")return ie(it,dt,"parens")}return it.context.type},mt.block=function(K,dt,it){if(K=="word"){var ne=dt.current().toLowerCase();return qt.hasOwnProperty(ne)?(rt="property","maybeprop"):ft.hasOwnProperty(ne)?(rt=se?"string-2":"property","maybeprop"):re?(rt=dt.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(rt+=" error","maybeprop")}else return K=="meta"?"block":!re&&(K=="hash"||K=="qualifier")?(rt="error","block"):mt.top(K,dt,it)},mt.maybeprop=function(K,dt,it){return K==":"?ie(it,dt,"prop"):N(K,dt,it)},mt.prop=function(K,dt,it){if(K==";")return P(it);if(K=="{"&&re)return ie(it,dt,"propBlock");if(K=="}"||K=="{")return $(K,dt,it);if(K=="(")return ie(it,dt,"parens");if(K=="hash"&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(dt.current()))rt+=" error";else if(K=="word")at(dt);else if(K=="interpolation")return ie(it,dt,"interpolation");return"prop"},mt.propBlock=function(K,dt,it){return K=="}"?P(it):K=="word"?(rt="property","maybeprop"):it.context.type},mt.parens=function(K,dt,it){return K=="{"||K=="}"?$(K,dt,it):K==")"?P(it):K=="("?ie(it,dt,"parens"):K=="interpolation"?ie(it,dt,"interpolation"):(K=="word"&&at(dt),"parens")},mt.pseudo=function(K,dt,it){return K=="meta"?"pseudo":K=="word"?(rt="variable-3",it.context.type):N(K,dt,it)},mt.documentTypes=function(K,dt,it){return K=="word"&&A.hasOwnProperty(dt.current())?(rt="tag",it.context.type):mt.atBlock(K,dt,it)},mt.atBlock=function(K,dt,it){if(K=="(")return ie(it,dt,"atBlock_parens");if(K=="}"||K==";")return $(K,dt,it);if(K=="{")return P(it)&&ie(it,dt,re?"block":"top");if(K=="interpolation")return ie(it,dt,"interpolation");if(K=="word"){var ne=dt.current().toLowerCase();ne=="only"||ne=="not"||ne=="and"||ne=="or"?rt="keyword":yt.hasOwnProperty(ne)?rt="attribute":gt.hasOwnProperty(ne)?rt="property":Mt.hasOwnProperty(ne)?rt="keyword":qt.hasOwnProperty(ne)?rt="property":ft.hasOwnProperty(ne)?rt=se?"string-2":"property":Qt.hasOwnProperty(ne)?rt="atom":Et.hasOwnProperty(ne)?rt="keyword":rt="error"}return it.context.type},mt.atComponentBlock=function(K,dt,it){return K=="}"?$(K,dt,it):K=="{"?P(it)&&ie(it,dt,re?"block":"top",!1):(K=="word"&&(rt="error"),it.context.type)},mt.atBlock_parens=function(K,dt,it){return K==")"?P(it):K=="{"||K=="}"?$(K,dt,it,2):mt.atBlock(K,dt,it)},mt.restricted_atBlock_before=function(K,dt,it){return K=="{"?ie(it,dt,"restricted_atBlock"):K=="word"&&it.stateArg=="@counter-style"?(rt="variable","restricted_atBlock_before"):N(K,dt,it)},mt.restricted_atBlock=function(K,dt,it){return K=="}"?(it.stateArg=null,P(it)):K=="word"?(it.stateArg=="@font-face"&&!At.hasOwnProperty(dt.current().toLowerCase())||it.stateArg=="@counter-style"&&!Ht.hasOwnProperty(dt.current().toLowerCase())?rt="error":rt="property","maybeprop"):"restricted_atBlock"},mt.keyframes=function(K,dt,it){return K=="word"?(rt="variable","keyframes"):K=="{"?ie(it,dt,"top"):N(K,dt,it)},mt.at=function(K,dt,it){return K==";"?P(it):K=="{"||K=="}"?$(K,dt,it):(K=="word"?rt="tag":K=="hash"&&(rt="builtin"),"at")},mt.interpolation=function(K,dt,it){return K=="}"?P(it):K=="{"||K==";"?$(K,dt,it):(K=="word"?rt="variable":K!="variable"&&K!="("&&K!=")"&&(rt="error"),"interpolation")},{startState:function(K){return{tokenize:null,state:U?"block":"top",stateArg:null,context:new he(U?"block":"top",K||0,null)}},token:function(K,dt){if(!dt.tokenize&&K.eatSpace())return null;var it=(dt.tokenize||Zt)(K,dt);return it&&typeof it=="object"&&(me=it[1],it=it[0]),rt=it,me!="comment"&&(dt.state=mt[dt.state](me,K,dt)),rt},indent:function(K,dt){var it=K.context,ne=dt&&dt.charAt(0),we=it.indent;return it.type=="prop"&&(ne=="}"||ne==")")&&(it=it.prev),it.prev&&(ne=="}"&&(it.type=="block"||it.type=="top"||it.type=="interpolation"||it.type=="restricted_atBlock")?(it=it.prev,we=it.indent):(ne==")"&&(it.type=="parens"||it.type=="atBlock_parens")||ne=="{"&&(it.type=="at"||it.type=="atBlock"))&&(we=Math.max(0,it.indent-B))),we},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:$t,fold:"brace"}});function r(H){for(var V={},U=0;U<H.length;++U)V[H[U].toLowerCase()]=!0;return V}var o=["domain","regexp","url","url-prefix"],s=r(o),u=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],c=r(u),f=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],h=r(f),g=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],y=r(g),_=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],b=r(_),x=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],T=r(x),I=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],z=r(I),F=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],W=r(F),ct=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],_t=r(ct),xt=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],ut=r(xt),q=o.concat(u).concat(f).concat(g).concat(_).concat(x).concat(ct).concat(xt);e.registerHelper("hintWords","css",q);function nt(H,V){for(var U=!1,B;(B=H.next())!=null;){if(U&&B=="/"){V.tokenize=null;break}U=B=="*"}return["comment","comment"]}e.defineMIME("text/css",{documentTypes:s,mediaTypes:c,mediaFeatures:h,mediaValueKeywords:y,propertyKeywords:b,nonStandardPropertyKeywords:T,fontProperties:z,counterDescriptors:W,colorKeywords:_t,valueKeywords:ut,tokenHooks:{"/":function(H,V){return H.eat("*")?(V.tokenize=nt,nt(H,V)):!1}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:c,mediaFeatures:h,mediaValueKeywords:y,propertyKeywords:b,nonStandardPropertyKeywords:T,colorKeywords:_t,valueKeywords:ut,fontProperties:z,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(H,V){return H.eat("/")?(H.skipToEnd(),["comment","comment"]):H.eat("*")?(V.tokenize=nt,nt(H,V)):["operator","operator"]},":":function(H){return H.match(/^\s*\{/,!1)?[null,null]:!1},$:function(H){return H.match(/^[\w-]+/),H.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(H){return H.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:c,mediaFeatures:h,mediaValueKeywords:y,propertyKeywords:b,nonStandardPropertyKeywords:T,colorKeywords:_t,valueKeywords:ut,fontProperties:z,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(H,V){return H.eat("/")?(H.skipToEnd(),["comment","comment"]):H.eat("*")?(V.tokenize=nt,nt(H,V)):["operator","operator"]},"@":function(H){return H.eat("{")?[null,"interpolation"]:H.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(H.eatWhile(/[\w\\\-]/),H.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:s,mediaTypes:c,mediaFeatures:h,propertyKeywords:b,nonStandardPropertyKeywords:T,fontProperties:z,counterDescriptors:W,colorKeywords:_t,valueKeywords:ut,supportsAtComponent:!0,tokenHooks:{"/":function(H,V){return H.eat("*")?(V.tokenize=nt,nt(H,V)):!1}},name:"css",helperType:"gss"})})},8253:(a,n,t)=>{(function(e){e(t(4408),t(9701),t(6061),t(7389))})(function(e){var r={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function o(y,_,b){var x=y.current(),T=x.search(_);return T>-1?y.backUp(x.length-T):x.match(/<\/?$/)&&(y.backUp(x.length),y.match(_,!1)||y.match(x)),b}var s={};function u(y){var _=s[y];return _||(s[y]=new RegExp("\\s+"+y+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function c(y,_){var b=y.match(u(_));return b?/^\s*(.*?)\s*$/.exec(b[2])[1]:""}function f(y,_){return new RegExp((_?"^":"")+"</s*"+y+"s*>","i")}function h(y,_){for(var b in y)for(var x=_[b]||(_[b]=[]),T=y[b],I=T.length-1;I>=0;I--)x.unshift(T[I])}function g(y,_){for(var b=0;b<y.length;b++){var x=y[b];if(!x[0]||x[1].test(c(_,x[0])))return x[2]}}e.defineMode("htmlmixed",function(y,_){var b=e.getMode(y,{name:"xml",htmlMode:!0,multilineTagIndentFactor:_.multilineTagIndentFactor,multilineTagIndentPastTag:_.multilineTagIndentPastTag,allowMissingTagName:_.allowMissingTagName}),x={},T=_&&_.tags,I=_&&_.scriptTypes;if(h(r,x),T&&h(T,x),I)for(var z=I.length-1;z>=0;z--)x.script.unshift(["type",I[z].matches,I[z].mode]);function F(W,ct){var _t=b.token(W,ct.htmlState),xt=/\btag\b/.test(_t),ut;if(xt&&!/[<>\s\/]/.test(W.current())&&(ut=ct.htmlState.tagName&&ct.htmlState.tagName.toLowerCase())&&x.hasOwnProperty(ut))ct.inTag=ut+" ";else if(ct.inTag&&xt&&/>$/.test(W.current())){var q=/^([\S]+) (.*)/.exec(ct.inTag);ct.inTag=null;var nt=W.current()==">"&&g(x[q[1]],q[2]),H=e.getMode(y,nt),V=f(q[1],!0),U=f(q[1],!1);ct.token=function(B,tt){return B.match(V,!1)?(tt.token=F,tt.localState=tt.localMode=null,null):o(B,U,tt.localMode.token(B,tt.localState))},ct.localMode=H,ct.localState=e.startState(H,b.indent(ct.htmlState,"",""))}else ct.inTag&&(ct.inTag+=W.current(),W.eol()&&(ct.inTag+=" "));return _t}return{startState:function(){var W=e.startState(b);return{token:F,inTag:null,localMode:null,localState:null,htmlState:W}},copyState:function(W){var ct;return W.localState&&(ct=e.copyState(W.localMode,W.localState)),{token:W.token,inTag:W.inTag,localMode:W.localMode,localState:ct,htmlState:e.copyState(b,W.htmlState)}},token:function(W,ct){return ct.token(W,ct)},indent:function(W,ct,_t){return!W.localMode||/^\s*<\//.test(ct)?b.indent(W.htmlState,ct,_t):W.localMode.indent?W.localMode.indent(W.localState,ct,_t):e.Pass},innerMode:function(W){return{state:W.localState||W.htmlState,mode:W.localMode||b}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")})},6061:(a,n,t)=>{(function(e){e(t(4408))})(function(e){e.defineMode("javascript",function(r,o){var s=r.indentUnit,u=o.statementIndent,c=o.jsonld,f=o.json||c,h=o.trackScope!==!1,g=o.typescript,y=o.wordCharacters||/[\w$\xa1-\uffff]/,_=function(){function M(ze){return{type:ze,style:"keyword"}}var Y=M("keyword a"),Ct=M("keyword b"),jt=M("keyword c"),Vt=M("keyword d"),xe=M("operator"),Pe={type:"atom",style:"atom"};return{if:M("if"),while:Y,with:Y,else:Ct,do:Ct,try:Ct,finally:Ct,return:Vt,break:Vt,continue:Vt,new:M("new"),delete:jt,void:jt,throw:jt,debugger:M("debugger"),var:M("var"),const:M("var"),let:M("var"),function:M("function"),catch:M("catch"),for:M("for"),switch:M("switch"),case:M("case"),default:M("default"),in:xe,typeof:xe,instanceof:xe,true:Pe,false:Pe,null:Pe,undefined:Pe,NaN:Pe,Infinity:Pe,this:M("this"),class:M("class"),super:M("atom"),yield:jt,export:M("export"),import:M("import"),extends:jt,await:jt}}(),b=/[+\-*&%=<>!?|~^@]/,x=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function T(M){for(var Y=!1,Ct,jt=!1;(Ct=M.next())!=null;){if(!Y){if(Ct=="/"&&!jt)return;Ct=="["?jt=!0:jt&&Ct=="]"&&(jt=!1)}Y=!Y&&Ct=="\\"}}var I,z;function F(M,Y,Ct){return I=M,z=Ct,Y}function W(M,Y){var Ct=M.next();if(Ct=='"'||Ct=="'")return Y.tokenize=ct(Ct),Y.tokenize(M,Y);if(Ct=="."&&M.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return F("number","number");if(Ct=="."&&M.match(".."))return F("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Ct))return F(Ct);if(Ct=="="&&M.eat(">"))return F("=>","operator");if(Ct=="0"&&M.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return F("number","number");if(/\d/.test(Ct))return M.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),F("number","number");if(Ct=="/")return M.eat("*")?(Y.tokenize=_t,_t(M,Y)):M.eat("/")?(M.skipToEnd(),F("comment","comment")):vn(M,Y,1)?(T(M),M.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),F("regexp","string-2")):(M.eat("="),F("operator","operator",M.current()));if(Ct=="`")return Y.tokenize=xt,xt(M,Y);if(Ct=="#"&&M.peek()=="!")return M.skipToEnd(),F("meta","meta");if(Ct=="#"&&M.eatWhile(y))return F("variable","property");if(Ct=="<"&&M.match("!--")||Ct=="-"&&M.match("->")&&!/\S/.test(M.string.slice(0,M.start)))return M.skipToEnd(),F("comment","comment");if(b.test(Ct))return(Ct!=">"||!Y.lexical||Y.lexical.type!=">")&&(M.eat("=")?(Ct=="!"||Ct=="=")&&M.eat("="):/[<>*+\-|&?]/.test(Ct)&&(M.eat(Ct),Ct==">"&&M.eat(Ct))),Ct=="?"&&M.eat(".")?F("."):F("operator","operator",M.current());if(y.test(Ct)){M.eatWhile(y);var jt=M.current();if(Y.lastType!="."){if(_.propertyIsEnumerable(jt)){var Vt=_[jt];return F(Vt.type,Vt.style,jt)}if(jt=="async"&&M.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return F("async","keyword",jt)}return F("variable","variable",jt)}}function ct(M){return function(Y,Ct){var jt=!1,Vt;if(c&&Y.peek()=="@"&&Y.match(x))return Ct.tokenize=W,F("jsonld-keyword","meta");for(;(Vt=Y.next())!=null&&!(Vt==M&&!jt);)jt=!jt&&Vt=="\\";return jt||(Ct.tokenize=W),F("string","string")}}function _t(M,Y){for(var Ct=!1,jt;jt=M.next();){if(jt=="/"&&Ct){Y.tokenize=W;break}Ct=jt=="*"}return F("comment","comment")}function xt(M,Y){for(var Ct=!1,jt;(jt=M.next())!=null;){if(!Ct&&(jt=="`"||jt=="$"&&M.eat("{"))){Y.tokenize=W;break}Ct=!Ct&&jt=="\\"}return F("quasi","string-2",M.current())}var ut="([{}])";function q(M,Y){Y.fatArrowAt&&(Y.fatArrowAt=null);var Ct=M.string.indexOf("=>",M.start);if(!(Ct<0)){if(g){var jt=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(M.string.slice(M.start,Ct));jt&&(Ct=jt.index)}for(var Vt=0,xe=!1,Pe=Ct-1;Pe>=0;--Pe){var ze=M.string.charAt(Pe),Ve=ut.indexOf(ze);if(Ve>=0&&Ve<3){if(!Vt){++Pe;break}if(--Vt==0){ze=="("&&(xe=!0);break}}else if(Ve>=3&&Ve<6)++Vt;else if(y.test(ze))xe=!0;else if(/["'\/`]/.test(ze))for(;;--Pe){if(Pe==0)return;var en=M.string.charAt(Pe-1);if(en==ze&&M.string.charAt(Pe-2)!="\\"){Pe--;break}}else if(xe&&!Vt){++Pe;break}}xe&&!Vt&&(Y.fatArrowAt=Pe)}}var nt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function H(M,Y,Ct,jt,Vt,xe){this.indented=M,this.column=Y,this.type=Ct,this.prev=Vt,this.info=xe,jt!=null&&(this.align=jt)}function V(M,Y){if(!h)return!1;for(var Ct=M.localVars;Ct;Ct=Ct.next)if(Ct.name==Y)return!0;for(var jt=M.context;jt;jt=jt.prev)for(var Ct=jt.vars;Ct;Ct=Ct.next)if(Ct.name==Y)return!0}function U(M,Y,Ct,jt,Vt){var xe=M.cc;for(B.state=M,B.stream=Vt,B.marked=null,B.cc=xe,B.style=Y,M.lexical.hasOwnProperty("align")||(M.lexical.align=!0);;){var Pe=xe.length?xe.pop():f?bt:me;if(Pe(Ct,jt)){for(;xe.length&&xe[xe.length-1].lex;)xe.pop()();return B.marked?B.marked:Ct=="variable"&&V(M,jt)?"variable-2":Y}}}var B={state:null,column:null,marked:null,cc:null};function tt(){for(var M=arguments.length-1;M>=0;M--)B.cc.push(arguments[M])}function A(){return tt.apply(null,arguments),!0}function yt(M,Y){for(var Ct=Y;Ct;Ct=Ct.next)if(Ct.name==M)return!0;return!1}function gt(M){var Y=B.state;if(B.marked="def",!!h){if(Y.context){if(Y.lexical.info=="var"&&Y.context&&Y.context.block){var Ct=Mt(M,Y.context);if(Ct!=null){Y.context=Ct;return}}else if(!yt(M,Y.localVars)){Y.localVars=new At(M,Y.localVars);return}}o.globalVars&&!yt(M,Y.globalVars)&&(Y.globalVars=new At(M,Y.globalVars))}}function Mt(M,Y){if(Y)if(Y.block){var Ct=Mt(M,Y.prev);return Ct?Ct==Y.prev?Y:new ft(Ct,Y.vars,!0):null}else return yt(M,Y.vars)?Y:new ft(Y.prev,new At(M,Y.vars),!1);else return null}function qt(M){return M=="public"||M=="private"||M=="protected"||M=="abstract"||M=="readonly"}function ft(M,Y,Ct){this.prev=M,this.vars=Y,this.block=Ct}function At(M,Y){this.name=M,this.next=Y}var Ht=new At("this",new At("arguments",null));function Et(){B.state.context=new ft(B.state.context,B.state.localVars,!1),B.state.localVars=Ht}function Qt(){B.state.context=new ft(B.state.context,B.state.localVars,!0),B.state.localVars=null}function re(){B.state.localVars=B.state.context.vars,B.state.context=B.state.context.prev}re.lex=!0;function $t(M,Y){var Ct=function(){var jt=B.state,Vt=jt.indented;if(jt.lexical.type=="stat")Vt=jt.lexical.indented;else for(var xe=jt.lexical;xe&&xe.type==")"&&xe.align;xe=xe.prev)Vt=xe.indented;jt.lexical=new H(Vt,B.stream.column(),M,null,jt.lexical,Y)};return Ct.lex=!0,Ct}function zt(){var M=B.state;M.lexical.prev&&(M.lexical.type==")"&&(M.indented=M.lexical.indented),M.lexical=M.lexical.prev)}zt.lex=!0;function se(M){function Y(Ct){return Ct==M?A():M==";"||Ct=="}"||Ct==")"||Ct=="]"?tt():A(Y)}return Y}function me(M,Y){return M=="var"?A($t("vardef",Y),ce,se(";"),zt):M=="keyword a"?A($t("form"),Rt,me,zt):M=="keyword b"?A($t("form"),me,zt):M=="keyword d"?B.stream.match(/^\s*$/,!1)?A():A($t("stat"),he,se(";"),zt):M=="debugger"?A(se(";")):M=="{"?A($t("}"),Qt,vt,zt,re):M==";"?A():M=="if"?(B.state.lexical.info=="else"&&B.state.cc[B.state.cc.length-1]==zt&&B.state.cc.pop()(),A($t("form"),Rt,me,zt,We)):M=="function"?A(er):M=="for"?A($t("form"),Qt,Dr,me,re,zt):M=="class"||g&&Y=="interface"?(B.marked="keyword",A($t("form",M=="class"?M:Y),Fr,zt)):M=="variable"?g&&Y=="declare"?(B.marked="keyword",A(me)):g&&(Y=="module"||Y=="enum"||Y=="type")&&B.stream.match(/^\s*\w/,!1)?(B.marked="keyword",Y=="enum"?A(hn):Y=="type"?A(Er,se("operator"),ae,se(";")):A($t("form"),_e,se("{"),$t("}"),vt,zt,zt)):g&&Y=="namespace"?(B.marked="keyword",A($t("form"),bt,me,zt)):g&&Y=="abstract"?(B.marked="keyword",A(me)):A($t("stat"),ne):M=="switch"?A($t("form"),Rt,se("{"),$t("}","switch"),Qt,vt,zt,zt,re):M=="case"?A(bt,se(":")):M=="default"?A(se(":")):M=="catch"?A($t("form"),Et,rt,me,zt,re):M=="export"?A($t("stat"),je,zt):M=="import"?A($t("stat"),gr,zt):M=="async"?A(me):Y=="@"?A(bt,me):tt($t("stat"),bt,se(";"),zt)}function rt(M){if(M=="(")return A(ve,se(")"))}function bt(M,Y){return oe(M,Y,!1)}function Zt(M,Y){return oe(M,Y,!0)}function Rt(M){return M!="("?tt():A($t(")"),he,se(")"),zt)}function oe(M,Y,Ct){if(B.state.fatArrowAt==B.stream.start){var jt=Ct?mt:at;if(M=="(")return A(Et,$t(")"),D(ve,")"),zt,se("=>"),jt,re);if(M=="variable")return tt(Et,_e,se("=>"),jt,re)}var Vt=Ct?P:ie;return nt.hasOwnProperty(M)?A(Vt):M=="function"?A(er,Vt):M=="class"||g&&Y=="interface"?(B.marked="keyword",A($t("form"),Qr,zt)):M=="keyword c"||M=="async"?A(Ct?Zt:bt):M=="("?A($t(")"),he,se(")"),zt,Vt):M=="operator"||M=="spread"?A(Ct?Zt:bt):M=="["?A($t("]"),tn,zt,Vt):M=="{"?St(ge,"}",null,Vt):M=="quasi"?tt(N,Vt):M=="new"?A(K(Ct)):A()}function he(M){return M.match(/[;\}\)\],]/)?tt():tt(bt)}function ie(M,Y){return M==","?A(he):P(M,Y,!1)}function P(M,Y,Ct){var jt=Ct==!1?ie:P,Vt=Ct==!1?bt:Zt;if(M=="=>")return A(Et,Ct?mt:at,re);if(M=="operator")return/\+\+|--/.test(Y)||g&&Y=="!"?A(jt):g&&Y=="<"&&B.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?A($t(">"),D(ae,">"),zt,jt):Y=="?"?A(bt,se(":"),Vt):A(Vt);if(M=="quasi")return tt(N,jt);if(M!=";"){if(M=="(")return St(Zt,")","call",jt);if(M==".")return A(we,jt);if(M=="[")return A($t("]"),he,se("]"),zt,jt);if(g&&Y=="as")return B.marked="keyword",A(ae,jt);if(M=="regexp")return B.state.lastType=B.marked="operator",B.stream.backUp(B.stream.pos-B.stream.start-1),A(Vt)}}function N(M,Y){return M!="quasi"?tt():Y.slice(Y.length-2)!="${"?A(N):A(he,$)}function $(M){if(M=="}")return B.marked="string-2",B.state.tokenize=xt,A(N)}function at(M){return q(B.stream,B.state),tt(M=="{"?me:bt)}function mt(M){return q(B.stream,B.state),tt(M=="{"?me:Zt)}function K(M){return function(Y){return Y=="."?A(M?it:dt):Y=="variable"&&g?A(st,M?P:ie):tt(M?Zt:bt)}}function dt(M,Y){if(Y=="target")return B.marked="keyword",A(ie)}function it(M,Y){if(Y=="target")return B.marked="keyword",A(P)}function ne(M){return M==":"?A(zt,me):tt(ie,se(";"),zt)}function we(M){if(M=="variable")return B.marked="property",A()}function ge(M,Y){if(M=="async")return B.marked="property",A(ge);if(M=="variable"||B.style=="keyword"){if(B.marked="property",Y=="get"||Y=="set")return A(R);var Ct;return g&&B.state.fatArrowAt==B.stream.start&&(Ct=B.stream.match(/^\s*:\s*/,!1))&&(B.state.fatArrowAt=B.stream.pos+Ct[0].length),A(et)}else{if(M=="number"||M=="string")return B.marked=c?"property":B.style+" property",A(et);if(M=="jsonld-keyword")return A(et);if(g&&qt(Y))return B.marked="keyword",A(ge);if(M=="[")return A(bt,Lt,se("]"),et);if(M=="spread")return A(Zt,et);if(Y=="*")return B.marked="keyword",A(ge);if(M==":")return tt(et)}}function R(M){return M!="variable"?tt(et):(B.marked="property",A(er))}function et(M){if(M==":")return A(Zt);if(M=="(")return tt(er)}function D(M,Y,Ct){function jt(Vt,xe){if(Ct?Ct.indexOf(Vt)>-1:Vt==","){var Pe=B.state.lexical;return Pe.info=="call"&&(Pe.pos=(Pe.pos||0)+1),A(function(ze,Ve){return ze==Y||Ve==Y?tt():tt(M)},jt)}return Vt==Y||xe==Y?A():Ct&&Ct.indexOf(";")>-1?tt(M):A(se(Y))}return function(Vt,xe){return Vt==Y||xe==Y?A():tt(M,jt)}}function St(M,Y,Ct){for(var jt=3;jt<arguments.length;jt++)B.cc.push(arguments[jt]);return A($t(Y,Ct),D(M,Y),zt)}function vt(M){return M=="}"?A():tt(me,vt)}function Lt(M,Y){if(g){if(M==":")return A(ae);if(Y=="?")return A(Lt)}}function Xt(M,Y){if(g&&(M==":"||Y=="in"))return A(ae)}function Yt(M){if(g&&M==":")return B.stream.match(/^\s*\w+\s+is\b/,!1)?A(bt,Ut,ae):A(ae)}function Ut(M,Y){if(Y=="is")return B.marked="keyword",A()}function ae(M,Y){if(Y=="keyof"||Y=="typeof"||Y=="infer"||Y=="readonly")return B.marked="keyword",A(Y=="typeof"?Zt:ae);if(M=="variable"||Y=="void")return B.marked="type",A(J);if(Y=="|"||Y=="&")return A(ae);if(M=="string"||M=="number"||M=="atom")return A(J);if(M=="[")return A($t("]"),D(ae,"]",","),zt,J);if(M=="{")return A($t("}"),Ae,zt,J);if(M=="(")return A(D(j,")"),Se,J);if(M=="<")return A(D(ae,">"),ae);if(M=="quasi")return tt(Ye,J)}function Se(M){if(M=="=>")return A(ae)}function Ae(M){return M.match(/[\}\)\]]/)?A():M==","||M==";"?A(Ae):tt(Te,Ae)}function Te(M,Y){if(M=="variable"||B.style=="keyword")return B.marked="property",A(Te);if(Y=="?"||M=="number"||M=="string")return A(Te);if(M==":")return A(ae);if(M=="[")return A(se("variable"),Xt,se("]"),Te);if(M=="(")return tt(ke,Te);if(!M.match(/[;\}\)\],]/))return A()}function Ye(M,Y){return M!="quasi"?tt():Y.slice(Y.length-2)!="${"?A(Ye):A(ae,fr)}function fr(M){if(M=="}")return B.marked="string-2",B.state.tokenize=xt,A(Ye)}function j(M,Y){return M=="variable"&&B.stream.match(/^\s*[?:]/,!1)||Y=="?"?A(j):M==":"?A(ae):M=="spread"?A(j):tt(ae)}function J(M,Y){if(Y=="<")return A($t(">"),D(ae,">"),zt,J);if(Y=="|"||M=="."||Y=="&")return A(ae);if(M=="[")return A(ae,se("]"),J);if(Y=="extends"||Y=="implements")return B.marked="keyword",A(ae);if(Y=="?")return A(ae,se(":"),ae)}function st(M,Y){if(Y=="<")return A($t(">"),D(ae,">"),zt,J)}function Tt(){return tt(ae,Bt)}function Bt(M,Y){if(Y=="=")return A(ae)}function ce(M,Y){return Y=="enum"?(B.marked="keyword",A(hn)):tt(_e,Lt,Ue,pn)}function _e(M,Y){if(g&&qt(Y))return B.marked="keyword",A(_e);if(M=="variable")return gt(Y),A();if(M=="spread")return A(_e);if(M=="[")return St(tr,"]");if(M=="{")return St(Be,"}")}function Be(M,Y){return M=="variable"&&!B.stream.match(/^\s*:/,!1)?(gt(Y),A(Ue)):(M=="variable"&&(B.marked="property"),M=="spread"?A(_e):M=="}"?tt():M=="["?A(bt,se("]"),se(":"),Be):A(se(":"),_e,Ue))}function tr(){return tt(_e,Ue)}function Ue(M,Y){if(Y=="=")return A(Zt)}function pn(M){if(M==",")return A(ce)}function We(M,Y){if(M=="keyword b"&&Y=="else")return A($t("form","else"),me,zt)}function Dr(M,Y){if(Y=="await")return A(Dr);if(M=="(")return A($t(")"),Jr,zt)}function Jr(M){return M=="var"?A(ce,Le):M=="variable"?A(Le):tt(Le)}function Le(M,Y){return M==")"?A():M==";"?A(Le):Y=="in"||Y=="of"?(B.marked="keyword",A(bt,Le)):tt(bt,Le)}function er(M,Y){if(Y=="*")return B.marked="keyword",A(er);if(M=="variable")return gt(Y),A(er);if(M=="(")return A(Et,$t(")"),D(ve,")"),zt,Yt,me,re);if(g&&Y=="<")return A($t(">"),D(Tt,">"),zt,er)}function ke(M,Y){if(Y=="*")return B.marked="keyword",A(ke);if(M=="variable")return gt(Y),A(ke);if(M=="(")return A(Et,$t(")"),D(ve,")"),zt,Yt,re);if(g&&Y=="<")return A($t(">"),D(Tt,">"),zt,ke)}function Er(M,Y){if(M=="keyword"||M=="variable")return B.marked="type",A(Er);if(Y=="<")return A($t(">"),D(Tt,">"),zt)}function ve(M,Y){return Y=="@"&&A(bt,ve),M=="spread"?A(ve):g&&qt(Y)?(B.marked="keyword",A(ve)):g&&M=="this"?A(Lt,Ue):tt(_e,Lt,Ue)}function Qr(M,Y){return M=="variable"?Fr(M,Y):or(M,Y)}function Fr(M,Y){if(M=="variable")return gt(Y),A(or)}function or(M,Y){if(Y=="<")return A($t(">"),D(Tt,">"),zt,or);if(Y=="extends"||Y=="implements"||g&&M==",")return Y=="implements"&&(B.marked="keyword"),A(g?ae:bt,or);if(M=="{")return A($t("}"),ir,zt)}function ir(M,Y){if(M=="async"||M=="variable"&&(Y=="static"||Y=="get"||Y=="set"||g&&qt(Y))&&B.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return B.marked="keyword",A(ir);if(M=="variable"||B.style=="keyword")return B.marked="property",A(Lr,ir);if(M=="number"||M=="string")return A(Lr,ir);if(M=="[")return A(bt,Lt,se("]"),Lr,ir);if(Y=="*")return B.marked="keyword",A(ir);if(g&&M=="(")return tt(ke,ir);if(M==";"||M==",")return A(ir);if(M=="}")return A();if(Y=="@")return A(bt,ir)}function Lr(M,Y){if(Y=="!"||Y=="?")return A(Lr);if(M==":")return A(ae,Ue);if(Y=="=")return A(Zt);var Ct=B.state.lexical.prev,jt=Ct&&Ct.info=="interface";return tt(jt?ke:er)}function je(M,Y){return Y=="*"?(B.marked="keyword",A(Re,se(";"))):Y=="default"?(B.marked="keyword",A(bt,se(";"))):M=="{"?A(D(te,"}"),Re,se(";")):tt(me)}function te(M,Y){if(Y=="as")return B.marked="keyword",A(se("variable"));if(M=="variable")return tt(Zt,te)}function gr(M){return M=="string"?A():M=="("?tt(bt):M=="."?tt(ie):tt(Ke,yr,Re)}function Ke(M,Y){return M=="{"?St(Ke,"}"):(M=="variable"&&gt(Y),Y=="*"&&(B.marked="keyword"),A(Ee))}function yr(M){if(M==",")return A(Ke,yr)}function Ee(M,Y){if(Y=="as")return B.marked="keyword",A(Ke)}function Re(M,Y){if(Y=="from")return B.marked="keyword",A(bt)}function tn(M){return M=="]"?A():tt(D(Zt,"]"))}function hn(){return tt($t("form"),_e,se("{"),$t("}"),D(Dt,"}"),zt,zt)}function Dt(){return tt(_e,Ue)}function de(M,Y){return M.lastType=="operator"||M.lastType==","||b.test(Y.charAt(0))||/[,.]/.test(Y.charAt(0))}function vn(M,Y,Ct){return Y.tokenize==W&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Y.lastType)||Y.lastType=="quasi"&&/\{\s*$/.test(M.string.slice(0,M.pos-(Ct||0)))}return{startState:function(M){var Y={tokenize:W,lastType:"sof",cc:[],lexical:new H((M||0)-s,0,"block",!1),localVars:o.localVars,context:o.localVars&&new ft(null,null,!1),indented:M||0};return o.globalVars&&typeof o.globalVars=="object"&&(Y.globalVars=o.globalVars),Y},token:function(M,Y){if(M.sol()&&(Y.lexical.hasOwnProperty("align")||(Y.lexical.align=!1),Y.indented=M.indentation(),q(M,Y)),Y.tokenize!=_t&&M.eatSpace())return null;var Ct=Y.tokenize(M,Y);return I=="comment"?Ct:(Y.lastType=I=="operator"&&(z=="++"||z=="--")?"incdec":I,U(Y,Ct,I,z,M))},indent:function(M,Y){if(M.tokenize==_t||M.tokenize==xt)return e.Pass;if(M.tokenize!=W)return 0;var Ct=Y&&Y.charAt(0),jt=M.lexical,Vt;if(!/^\s*else\b/.test(Y))for(var xe=M.cc.length-1;xe>=0;--xe){var Pe=M.cc[xe];if(Pe==zt)jt=jt.prev;else if(Pe!=We&&Pe!=re)break}for(;(jt.type=="stat"||jt.type=="form")&&(Ct=="}"||(Vt=M.cc[M.cc.length-1])&&(Vt==ie||Vt==P)&&!/^[,\.=+\-*:?[\(]/.test(Y));)jt=jt.prev;u&&jt.type==")"&&jt.prev.type=="stat"&&(jt=jt.prev);var ze=jt.type,Ve=Ct==ze;return ze=="vardef"?jt.indented+(M.lastType=="operator"||M.lastType==","?jt.info.length+1:0):ze=="form"&&Ct=="{"?jt.indented:ze=="form"?jt.indented+s:ze=="stat"?jt.indented+(de(M,Y)?u||s:0):jt.info=="switch"&&!Ve&&o.doubleIndentSwitch!=!1?jt.indented+(/^(?:case|default)\b/.test(Y)?s:2*s):jt.align?jt.column+(Ve?0:1):jt.indented+(Ve?0:s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:f?null:"/*",blockCommentEnd:f?null:"*/",blockCommentContinue:f?null:" * ",lineComment:f?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:f?"json":"javascript",jsonldMode:c,jsonMode:f,expressionAllowed:vn,skipExpression:function(M){U(M,"atom","atom","true",new e.StringStream("",2,null))}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/manifest+json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})})},9701:(a,n,t)=>{(function(e){e(t(4408))})(function(e){var r={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},o={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",function(s,u){var c=s.indentUnit,f={},h=u.htmlMode?r:o;for(var g in h)f[g]=h[g];for(var g in u)f[g]=u[g];var y,_;function b(A,yt){function gt(ft){return yt.tokenize=ft,ft(A,yt)}var Mt=A.next();if(Mt=="<")return A.eat("!")?A.eat("[")?A.match("CDATA[")?gt(I("atom","]]>")):null:A.match("--")?gt(I("comment","-->")):A.match("DOCTYPE",!0,!0)?(A.eatWhile(/[\w\._\-]/),gt(z(1))):null:A.eat("?")?(A.eatWhile(/[\w\._\-]/),yt.tokenize=I("meta","?>"),"meta"):(y=A.eat("/")?"closeTag":"openTag",yt.tokenize=x,"tag bracket");if(Mt=="&"){var qt;return A.eat("#")?A.eat("x")?qt=A.eatWhile(/[a-fA-F\d]/)&&A.eat(";"):qt=A.eatWhile(/[\d]/)&&A.eat(";"):qt=A.eatWhile(/[\w\.\-:]/)&&A.eat(";"),qt?"atom":"error"}else return A.eatWhile(/[^&<]/),null}b.isInText=!0;function x(A,yt){var gt=A.next();if(gt==">"||gt=="/"&&A.eat(">"))return yt.tokenize=b,y=gt==">"?"endTag":"selfcloseTag","tag bracket";if(gt=="=")return y="equals",null;if(gt=="<"){yt.tokenize=b,yt.state=xt,yt.tagName=yt.tagStart=null;var Mt=yt.tokenize(A,yt);return Mt?Mt+" tag error":"tag error"}else return/[\'\"]/.test(gt)?(yt.tokenize=T(gt),yt.stringStartCol=A.column(),yt.tokenize(A,yt)):(A.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function T(A){var yt=function(gt,Mt){for(;!gt.eol();)if(gt.next()==A){Mt.tokenize=x;break}return"string"};return yt.isInAttribute=!0,yt}function I(A,yt){return function(gt,Mt){for(;!gt.eol();){if(gt.match(yt)){Mt.tokenize=b;break}gt.next()}return A}}function z(A){return function(yt,gt){for(var Mt;(Mt=yt.next())!=null;){if(Mt=="<")return gt.tokenize=z(A+1),gt.tokenize(yt,gt);if(Mt==">")if(A==1){gt.tokenize=b;break}else return gt.tokenize=z(A-1),gt.tokenize(yt,gt)}return"meta"}}function F(A){return A&&A.toLowerCase()}function W(A,yt,gt){this.prev=A.context,this.tagName=yt||"",this.indent=A.indented,this.startOfLine=gt,(f.doNotIndent.hasOwnProperty(yt)||A.context&&A.context.noIndent)&&(this.noIndent=!0)}function ct(A){A.context&&(A.context=A.context.prev)}function _t(A,yt){for(var gt;;){if(!A.context||(gt=A.context.tagName,!f.contextGrabbers.hasOwnProperty(F(gt))||!f.contextGrabbers[F(gt)].hasOwnProperty(F(yt))))return;ct(A)}}function xt(A,yt,gt){return A=="openTag"?(gt.tagStart=yt.column(),ut):A=="closeTag"?q:xt}function ut(A,yt,gt){return A=="word"?(gt.tagName=yt.current(),_="tag",V):f.allowMissingTagName&&A=="endTag"?(_="tag bracket",V(A,yt,gt)):(_="error",ut)}function q(A,yt,gt){if(A=="word"){var Mt=yt.current();return gt.context&&gt.context.tagName!=Mt&&f.implicitlyClosed.hasOwnProperty(F(gt.context.tagName))&&ct(gt),gt.context&&gt.context.tagName==Mt||f.matchClosing===!1?(_="tag",nt):(_="tag error",H)}else return f.allowMissingTagName&&A=="endTag"?(_="tag bracket",nt(A,yt,gt)):(_="error",H)}function nt(A,yt,gt){return A!="endTag"?(_="error",nt):(ct(gt),xt)}function H(A,yt,gt){return _="error",nt(A,yt,gt)}function V(A,yt,gt){if(A=="word")return _="attribute",U;if(A=="endTag"||A=="selfcloseTag"){var Mt=gt.tagName,qt=gt.tagStart;return gt.tagName=gt.tagStart=null,A=="selfcloseTag"||f.autoSelfClosers.hasOwnProperty(F(Mt))?_t(gt,Mt):(_t(gt,Mt),gt.context=new W(gt,Mt,qt==gt.indented)),xt}return _="error",V}function U(A,yt,gt){return A=="equals"?B:(f.allowMissing||(_="error"),V(A,yt,gt))}function B(A,yt,gt){return A=="string"?tt:A=="word"&&f.allowUnquoted?(_="string",V):(_="error",V(A,yt,gt))}function tt(A,yt,gt){return A=="string"?tt:V(A,yt,gt)}return{startState:function(A){var yt={tokenize:b,state:xt,indented:A||0,tagName:null,tagStart:null,context:null};return A!=null&&(yt.baseIndent=A),yt},token:function(A,yt){if(!yt.tagName&&A.sol()&&(yt.indented=A.indentation()),A.eatSpace())return null;y=null;var gt=yt.tokenize(A,yt);return(gt||y)&&gt!="comment"&&(_=null,yt.state=yt.state(y||gt,A,yt),_&&(gt=_=="error"?gt+" error":_)),gt},indent:function(A,yt,gt){var Mt=A.context;if(A.tokenize.isInAttribute)return A.tagStart==A.indented?A.stringStartCol+1:A.indented+c;if(Mt&&Mt.noIndent)return e.Pass;if(A.tokenize!=x&&A.tokenize!=b)return gt?gt.match(/^(\s*)/)[0].length:0;if(A.tagName)return f.multilineTagIndentPastTag!==!1?A.tagStart+A.tagName.length+2:A.tagStart+c*(f.multilineTagIndentFactor||1);if(f.alignCDATA&&/<!\[CDATA\[/.test(yt))return 0;var qt=yt&&/^<(\/)?([\w_:\.-]*)/.exec(yt);if(qt&&qt[1])for(;Mt;)if(Mt.tagName==qt[2]){Mt=Mt.prev;break}else if(f.implicitlyClosed.hasOwnProperty(F(Mt.tagName)))Mt=Mt.prev;else break;else if(qt)for(;Mt;){var ft=f.contextGrabbers[F(Mt.tagName)];if(ft&&ft.hasOwnProperty(F(qt[2])))Mt=Mt.prev;else break}for(;Mt&&Mt.prev&&!Mt.startOfLine;)Mt=Mt.prev;return Mt?Mt.indent+c:A.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:f.htmlMode?"html":"xml",helperType:f.htmlMode?"html":"xml",skipAttribute:function(A){A.state==B&&(A.state=V)},xmlCurrentTag:function(A){return A.tagName?{name:A.tagName,close:A.type=="closeTag"}:null},xmlCurrentContext:function(A){for(var yt=[],gt=A.context;gt;gt=gt.prev)yt.push(gt.tagName);return yt.reverse()}}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})})},3023:(a,n,t)=>{t.d(n,{A:()=>s});var e=t(1749),r=function(){var u=function(c,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},u(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");u(c,f);function h(){this.constructor=c}c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}}(),o=function(u){r(c,u);function c(f,h,g){var y=u.call(this,h,g)||this;return y._module=f,y}return Object.defineProperty(c.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),c}(e.Kx);const s=o},2820:(a,n,t)=>{t.d(n,{A:()=>u,F:()=>o});var e=t(3023),r=function(){var c=function(f,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(g[_]=y[_])},c(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");c(f,h);function g(){this.constructor=f}f.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}(),o;(function(c){c.Select="select",c.Hover="hover",c.Spacing="spacing",c.Target="target",c.Resize="resize"})(o||(o={}));var s=function(c){r(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(f.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"component",{get:function(){var h,g=this.get("component");return g||((h=this.get("componentView"))===null||h===void 0?void 0:h.model)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"componentView",{get:function(){var h,g=this.get("componentView");return g||((h=this.get("component"))===null||h===void 0?void 0:h.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"el",{get:function(){var h;return(h=this.componentView)===null||h===void 0?void 0:h.el},enumerable:!1,configurable:!0}),f.prototype.getBoxRect=function(h){var g=this,y=g.el,_=g.em,b=_.Canvas.getCanvasView(),x=this.get("boxRect");return x||(y&&b?b.getElBoxRect(y,h):{x:0,y:0,width:0,height:0})},f.prototype.getStyle=function(h){h===void 0&&(h={});var g=h.boxRect||this.getBoxRect(h),y=g.width,_=g.height,b=g.x,x=g.y;return{width:"".concat(y,"px"),height:"".concat(_,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(b,"px ").concat(x,"px")}},f.prototype.isType=function(h){return this.type===h},f}(e.A);const u=s},8351:(a,n,t)=>{t.d(n,{A:()=>r});var e;(function(o){o.run="command:run",o._run="run",o.runCommand="command:run:",o._runCommand="run:",o.runBeforeCommand="command:run:before:",o.abort="command:abort:",o._abort="abort:",o.stop="command:stop",o._stop="stop",o.stopCommand="command:stop:",o._stopCommand="stop:",o.stopBeforeCommand="command:stop:before:"})(e||(e={}));const r=e},371:(a,n,t)=>{t.r(n),t.d(n,{default:()=>e});const e={run:function(r){r.Components.clear(),r.Css.clear()}}},6301:(a,n,t)=>{t.r(n),t.d(n,{default:()=>s});var e=t(5706),r=t(5633),o=t(2097);const s={run:function(u){(0,e.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=u,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(u){this.toggleMove(),this.disableDragger()},onKeyUp:function(u){(0,o.Ch)(u)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(u){this.toggleDragger(1,u)},disableDragger:function(u){this.toggleDragger(0,u)},toggleDragger:function(u,c){var f=this,h=f.canvasModel,g=f.em,y=this.dragger,_=u?"add":"remove";this.getCanvas().classList[_]("".concat(this.ppfx,"is__grabbing")),y||(y=new r.A({getPosition:function(){return{x:h.get("x"),y:h.get("y")}},setPosition:function(b){var x=b.x,T=b.y;h.set({x,y:T})},onStart:function(b,x){g.trigger("canvas:move:start",x)},onDrag:function(b,x){g.trigger("canvas:move",x)},onEnd:function(b,x){g.trigger("canvas:move:end",x)}}),this.dragger=y),u?y.start(c):y.stop()},toggleMove:function(u){var c=this.ppfx,f=u?"add":"remove",h=u?"on":"off",g={on:o.on,off:o.AU},y=this.getCanvas(),_=["".concat(c,"is__grab")];!u&&_.push("".concat(c,"is__grabbing")),_.forEach(function(b){return y.classList[f](b)}),g[h](document,"keyup",this.onKeyUp),g[h](y,"mousedown",this.enableDragger),g[h](document,"mouseup",this.disableDragger)}}},5301:(a,n,t)=>{t.r(n),t.d(n,{default:()=>c,defineCommand:()=>s});var e=t(1749),r=t(8351),o=function(){var f=function(h,g){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,_){y.__proto__=_}||function(y,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(y[b]=_[b])},f(h,g)};return function(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");f(h,g);function y(){this.constructor=h}h.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}}();function s(f){return f}var u=function(f){o(h,f);function h(g){var y=f.call(this,0)||this;y.config=g||{},y.em=y.config.em||{};var _=y.config.stylePrefix;return y.pfx=_,y.ppfx=y.config.pStylePrefix,y.hoverClass="".concat(_,"hover"),y.badgeClass="".concat(_,"badge"),y.plhClass="".concat(_,"placeholder"),y.freezClass="".concat(y.ppfx,"freezed"),y.canvas=y.em.Canvas,y.init(y.config),y}return h.prototype.onFrameScroll=function(g){},h.prototype.getCanvas=function(){return this.canvas.getElement()},h.prototype.getCanvasBody=function(){return this.canvas.getBody()},h.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},h.prototype.offset=function(g){var y=g.getBoundingClientRect();return{top:y.top+g.ownerDocument.body.scrollTop,left:y.left+g.ownerDocument.body.scrollLeft}},h.prototype.init=function(g){},h.prototype.callRun=function(g,y){y===void 0&&(y={});var _=this.id;if(g.trigger("".concat(r.A.runBeforeCommand).concat(_),{options:y}),g.trigger("".concat(r.A._runCommand).concat(_,":before"),y),y.abort){g.trigger("".concat(r.A.abort).concat(_),{options:y}),g.trigger("".concat(r.A._abort).concat(_),y);return}var b=y.sender||g,x=this.run(g,b,y),T={id:_,result:x,options:y};return g.trigger("".concat(r.A.runCommand).concat(_),T),g.trigger(r.A.run,T),g.trigger("".concat(r.A._runCommand).concat(_),x,y),g.trigger(r.A._run,_,x,y),x},h.prototype.callStop=function(g,y){y===void 0&&(y={});var _=this.id,b=y.sender||g;g.trigger("".concat(r.A.stopBeforeCommand).concat(_),{options:y}),g.trigger("".concat(r.A._stopCommand).concat(_,":before"),y);var x=this.stop(g,b,y),T={id:_,result:x,options:y};return g.trigger("".concat(r.A.stopCommand).concat(_),T),g.trigger(r.A.stop,T),g.trigger("".concat(r.A._stopCommand).concat(_),x,y),g.trigger(r.A._stop,_,x,y),x},h.prototype.stopCommand=function(g){this.em.Commands.stop(this.id,g)},h.prototype.run=function(g,y,_){},h.prototype.stop=function(g,y,_){},h}(e.Kx);const c=u},8542:(a,n,t)=>{t.r(n),t.d(n,{default:()=>s});var e=t(5706),r=function(u,c,f){if(f||arguments.length===2)for(var h=0,g=c.length,y;h<g;h++)(y||!(h in c))&&(y||(y=Array.prototype.slice.call(c,0,h)),y[h]=c[h]);return u.concat(y||Array.prototype.slice.call(c))},o={run:function(u,c,f){var h=this;f===void 0&&(f={});var g=[],y=f.component||u.getSelectedAll();return y=(0,e.isArray)(y)?r([],y,!0):[y],y.filter(Boolean).forEach(function(_){var b,x;if(!_.get("removable"))return h.em.logWarning("The element is not removable",{component:_});g.push(_);var T=((x=(b=_.delegate)===null||b===void 0?void 0:b.remove)===null||x===void 0?void 0:x.call(b,_))||_;T.remove()}),u.selectRemove(g),g}};const s=o},1319:(a,n,t)=>{t.r(n),t.d(n,{default:()=>u});var e=t(5706),r=t(5633),o=function(){return o=Object.assign||function(c){for(var f,h=1,g=arguments.length;h<g;h++){f=arguments[h];for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(c[y]=f[y])}return c},o.apply(this,arguments)},s="dmode";const u={run:function(c,f,h){var g=this;h===void 0&&(h={}),(0,e.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var y=h.target,_=h.event,b=h.mode,x=h.dragger,T=x===void 0?{}:x,I=y.getEl(),z=o({doc:I.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return g.guidesStatic},guidesTarget:function(){return g.guidesTarget}},T);this.setupGuides(),this.opts=h,this.editor=c,this.em=c.getModel(),this.target=y,this.isTran=b=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var F=this.dragger;return F?F.setOptions(z):(F=new r.A(z),this.dragger=F),_&&F.start(_),this.toggleDrag(1),this.em.trigger("".concat(s,":start"),this.getEventOpts()),F},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach(function(c){var f=c.guide;f&&f.parentNode.removeChild(f)}),this.guides=[]},getGuidesContainer:function(){var c=this,f=this.guidesEl;if(!f){var h=this,g=h.editor,y=h.em,_=h.opts,b=g.getConfig().stylePrefix,x=document.createElement("div"),T=document.createElement("div"),I='<div class="'.concat(b,"guide-info__line ").concat(b,`danger-bg">
        <div class="`).concat(b,"guide-info__content ").concat(b,`danger-color"></div>
      </div>`);f=document.createElement("div"),f.className="".concat(b,"guides"),x.className="".concat(b,"guide-info ").concat(b,"guide-info__x"),T.className="".concat(b,"guide-info ").concat(b,"guide-info__y"),x.innerHTML=I,T.innerHTML=I,f.appendChild(x),f.appendChild(T),g.Canvas.getGlobalToolsEl().appendChild(f),this.guidesEl=f,this.elGuideInfoX=x,this.elGuideInfoY=T,this.elGuideInfoContentX=x.querySelector(".".concat(b,"guide-info__content")),this.elGuideInfoContentY=T.querySelector(".".concat(b,"guide-info__content")),y.on("canvas:update frame:scroll",(0,e.debounce)(function(){var z;c.updateGuides(),_.debug&&((z=c.guides)===null||z===void 0||z.forEach(function(F){return c.renderGuide(F)}))},200))}return f},getGuidesStatic:function(){var c=this,f=[],h=this.target.getEl(),g=h.parentNode,y=g===void 0?{}:g;return(0,e.each)(y.children,function(_){return f=f.concat(h!==_?c.getElementGuides(_):[])}),f.concat(this.getElementGuides(y))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(c){var f=this,h,g;(c||this.guides).forEach(function(y){var _=y.origin,b=h===_?g:f.getElementPos(_);h=_,g=b,(0,e.each)(f.getGuidePosUpdate(y,b),function(x,T){return y[T]=x}),y.originRect=b})},getGuidePosUpdate:function(c,f){var h={},g=f.top,y=f.height,_=f.left,b=f.width;switch(c.type){case"t":h.y=g;break;case"b":h.y=g+y;break;case"l":h.x=_;break;case"r":h.x=_+b;break;case"x":h.x=_+b/2;break;case"y":h.y=g+y/2;break}return h},renderGuide:function(c){c===void 0&&(c={});var f=c.guide||document.createElement("div"),h="px",g=c.active?2:1,y=f.children[0];return f.style="position: absolute; background-color: ".concat(c.active?"green":"red",";"),f.children.length||(y=document.createElement("div"),y.style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",f.appendChild(y)),c.y?(f.style.width="100%",f.style.height="".concat(g).concat(h),f.style.top="".concat(c.y).concat(h),f.style.left=0):(f.style.width="".concat(g).concat(h),f.style.height="100%",f.style.left="".concat(c.x).concat(h),f.style.top="0".concat(h)),!c.guide&&this.guidesContainer.appendChild(f),f},getElementPos:function(c){return this.editor.Canvas.getElementPos(c,{noScroll:1})},getElementGuides:function(c){var f=this,h=this.opts,g=this.getElementPos(c),y=g.top,_=g.height,b=g.left,x=g.width,T=[{type:"t",y},{type:"b",y:y+_},{type:"l",x:b},{type:"r",x:b+x},{type:"x",x:b+x/2},{type:"y",y:y+_/2}].map(function(I){return o(o({},I),{origin:c,originRect:g,guide:h.debug&&f.renderGuide(I)})});return T.forEach(function(I){var z;return(z=f.guides)===null||z===void 0?void 0:z.push(I)}),T},getTranslate:function(c,f){f===void 0&&(f="x");var h=0;return(c||"").split(" ").forEach(function(g){var y=g.trim(),_="translate".concat(f.toUpperCase(),"(");y.indexOf(_)===0&&(h=parseFloat(y.replace(_,"")))}),h},setTranslate:function(c,f,h){var g="translate".concat(f.toUpperCase(),"("),y="".concat(g).concat(h,")"),_=(c||"").split(" ").map(function(b){var x=b.trim();return x.indexOf(g)===0&&(b=y),b}).join(" ");return _.indexOf(g)<0&&(_+=" ".concat(y)),_},getPosition:function(){var c=this,f=c.target,h=c.isTran,g=f.getStyle(),y=g.left,_=g.top,b=g.transform,x=0,T=0;return h?(x=this.getTranslate(b),T=this.getTranslate(b,"y")):(x=parseFloat(y||0),T=parseFloat(_||0)),{x,y:T}},setPosition:function(c){var f=c.x,h=c.y,g=c.end,y=c.position,_=c.width,b=c.height,x=this,T=x.target,I=x.isTran,z=x.em,F="px",W=!g,ct="".concat(parseInt(f,10)).concat(F),_t="".concat(parseInt(h,10)).concat(F),xt={};if(I){var ut=T.getStyle().transform||"";ut=this.setTranslate(ut,"x",ct),ut=this.setTranslate(ut,"y",_t),xt={transform:ut,__p:W},T.addStyle(xt,{avoidStore:!g})}else{var q={position:y,width:_,height:b},nt={left:ct,top:_t,__p:W};(0,e.keys)(q).forEach(function(H){var V=q[H];V&&(nt[H]=V)}),xt=nt,T.addStyle(xt,{avoidStore:!g})}z==null||z.Styles.__emitCmpStyleUpdate(xt,{components:z.getSelected()})},_getDragData:function(){var c=this.target;return{target:c,parent:c.parent(),index:c.index()}},onStart:function(c){var f=this,h=f.target,g=f.editor,y=f.isTran,_=f.opts,b=_.center,x=_.onStart,T=g.Canvas,I=h.getStyle(),z="absolute",F=[z,"relative"];if(x&&x(this._getDragData()),!y&&I.position!==z){var W=T.offset(h.getEl()),ct=W.left,_t=W.top,xt=W.width,ut=W.height,q=h.parent(),nt=void 0;do{var H=q.getStyle();nt=F.indexOf(H.position)>=0?q:null,q=q.parent()}while(q&&!nt);if(b){var V=T.getMouseRelativeCanvas(c),U=V.x,B=V.y;ct=U,_t=B}else if(nt){var tt=T.offset(nt.getEl());ct=ct-tt.left,_t=_t-tt.top}this.setPosition({x:ct,y:_t,width:"".concat(xt,"px"),height:"".concat(ut,"px"),position:z})}},onDrag:function(){var c=this,f=this,h=f.guidesTarget,g=f.opts,y=g.onDrag;this.updateGuides(h),g.debug&&h.forEach(function(_){return c.renderGuide(_)}),g.guidesInfo&&this.renderGuideInfo(h.filter(function(_){return _.active})),y&&y(this._getDragData())},onEnd:function(c,f,h){h===void 0&&(h={});var g=this,y=g.editor,_=g.opts,b=g.id,x=_.onEnd;x&&x(c,h,o(o({event:c},h),this._getDragData())),y.stopCommand(b),this.hideGuidesInfo(),this.em.trigger("".concat(s,":end"),this.getEventOpts())},hideGuidesInfo:function(){var c=this;["X","Y"].forEach(function(f){var h=c["elGuideInfo".concat(f)];h&&(h.style.display="none")})},renderGuideInfo:function(c){var f=this;c===void 0&&(c=[]);var h=this.guidesStatic;this.hideGuidesInfo(),c.forEach(function(g){var y=g.origin,_=g.x,b=f.getElementPos(y),x=(0,e.isUndefined)(_)?"y":"x",T=x==="y",I=b[T?"left":"top"],z=b.rect[T?"left":"top"],F=T?I+b.width:I+b.height,W=T?z+b.rect.width:z+b.rect.height,ct=f["elGuideInfo".concat(x.toUpperCase())],_t=f["elGuideInfoContent".concat(x.toUpperCase())],xt=ct.style,ut=h==null?void 0:h.filter(function(Qt){return Qt.type===g.type}).map(function(Qt){var re=Qt.originRect,$t=re.left,zt=re.width,se=re.top,me=re.height,rt=T?$t:se,bt=T?$t+zt:se+me;return{gap:bt<I?I-bt:rt-F,guide:Qt}}).filter(function(Qt){return Qt.gap>0}).sort(function(Qt,re){return Qt.gap-re.gap}).map(function(Qt){return Qt.guide})[0];if(ut){var q=ut.originRect,nt=q.left,H=q.width,V=q.top,U=q.height,B=q.rect,tt=T?nt<b.left:V<b.top,A=T?nt:V,yt=T?B.left:B.top,gt=T?nt+H:V+U,Mt=T?B.left+B.width:B.top+B.height,qt=T?g.y:g.x,ft=tt?gt:F,At="".concat(qt,"px"),Ht=tt?I-gt:A-F,Et=tt?z-Mt:yt-W;xt.display="",xt[T?"top":"left"]=At,xt[T?"left":"top"]="".concat(ft,"px"),xt[T?"width":"height"]="".concat(Ht,"px"),_t.innerHTML="".concat(Math.round(Et),"px"),f.em.trigger("".concat(s,":active"),o(o({},f.getEventOpts()),{guide:g,guidesStatic:h,matched:ut,posFirst:qt,posSecond:ft,size:Ht,sizeRaw:Et,elGuideInfo:ct,elGuideInfoCnt:_t}))}})},toggleDrag:function(c){var f=this,h=f.ppfx,g=f.editor,y=c?"add":"remove",_=["".concat(h,"is__grabbing")],b=g.Canvas,x=b.getBody();_.forEach(function(T){return x.classList[y](T)}),b[c?"startAutoscroll":"stopAutoscroll"]()}}},1859:(a,n,t)=>{t.r(n),t.d(n,{default:()=>e});const e={run:function(r){if(r.Canvas.hasFocus()){var o=[];r.getSelectedAll().forEach(function(s){var u=s.components(),c=u&&u.filter(function(f){return f.get("selectable")})[0];c&&o.push(c)}),o.length&&r.select(o)}}}},3709:(a,n,t)=>{t.r(n),t.d(n,{default:()=>e});const e={run:function(r,o,s){if(s===void 0&&(s={}),!(!r.Canvas.hasFocus()&&!s.force)){var u=[];r.getSelectedAll().forEach(function(c){for(var f=c.parent();f&&!f.get("selectable");)f=f.parent();f&&u.push(f)}),u.length&&r.select(u)}}}},2860:(a,n,t)=>{t.r(n),t.d(n,{default:()=>e});const e={run:function(r){if(r.Canvas.hasFocus()){var o=[];r.getSelectedAll().forEach(function(s){var u=s.parent();if(u){var c=u.components().length,f=0,h=0,g;do f++,h=s.index()+f,g=h<=c?u.getChildAt(h):null;while(g&&!g.get("selectable"));o.push(g||s)}}),o.length&&r.select(o)}}}},4944:(a,n,t)=>{t.r(n),t.d(n,{default:()=>e});const e={run:function(r){if(r.Canvas.hasFocus()){var o=[];r.getSelectedAll().forEach(function(s){var u=s.parent();if(u){var c=0,f=0,h;do c++,f=s.index()-c,h=f>=0?u.getChildAt(f):null;while(h&&!h.get("selectable"));o.push(h||s)}}),o.length&&r.select(o)}}}},767:(a,n,t)=>{t.r(n),t.d(n,{default:()=>r});var e=t(5706);const r={run:function(o,s,u){u===void 0&&(u={});var c=u.target,f=[];if(!c.get("styles"))return f;var h=c.get("type"),g=o.Pages.getAllWrappers(),y=(0,e.flatten)(g.map(function(b){return b.findType(h)})).length;if(!y){var _=o.CssComposer.getAll();f=_.filter(function(b){return b.get("group")==="cmp:".concat(h)}),_.remove(f)}return f}}},2126:(a,n,t)=>{t.r(n),t.d(n,{default:()=>r});var e=function(o,s,u){if(u||arguments.length===2)for(var c=0,f=s.length,h;c<f;c++)(h||!(c in s))&&(h||(h=Array.prototype.slice.call(s,0,c)),h[c]=s[c]);return o.concat(h||Array.prototype.slice.call(s))};const r={run:function(o){var s=o.getModel(),u=e([],o.getSelectedAll(),!0).map(function(c){var f,h;return((h=(f=c.delegate)===null||f===void 0?void 0:f.copy)===null||h===void 0?void 0:h.call(f,c))||c}).filter(Boolean);u.length&&s.set("clipboard",u)}}},4860:(a,n,t)=>{t.r(n),t.d(n,{default:()=>r});var e=t(2097);const r={run:function(o,s,u){var c=this;u===void 0&&(u={}),s&&s.set&&s.set("active",0);var f=o.getConfig(),h=o.Modal,g=f.stylePrefix;if(this.cm=o.CodeManager||null,!this.editors){var y=this.buildEditor("htmlmixed","hopscotch","HTML"),_=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=y.model,this.cssEditor=_.model;var b=(0,e.a_)("div",{class:"".concat(g,"export-dl")});b.appendChild(y.el),b.appendChild(_.el),this.editors=b}h.open({title:f.textViewCode,content:this.editors}).getModel().once("change:open",function(){return o.stopCommand("".concat(c.id))}),this.htmlEditor.setContent(o.getHtml(u.optsHtml)),this.cssEditor.setContent(o.getCss(u.optsCss))},stop:function(o){var s=o.Modal;s&&s.close()},buildEditor:function(o,s,u){var c=this.em.CodeManager,f=c.createViewer({label:u,codeName:o,theme:s}),h=new c.EditorView({model:f,config:c.getConfig()}).render().el;return{model:f,el:h}}}},1085:(a,n,t)=>{t.r(n),t.d(n,{default:()=>r});var e=t(5706);const r={isEnabled:function(){var o=document;return!!(o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement)},enable:function(o){var s="";return o.requestFullscreen?o.requestFullscreen():o.webkitRequestFullscreen?(s="webkit",o.webkitRequestFullscreen()):o.mozRequestFullScreen?(s="moz",o.mozRequestFullScreen()):o.msRequestFullscreen&&o.msRequestFullscreen(),s},disable:function(){var o=document;this.isEnabled()&&(o.exitFullscreen?o.exitFullscreen():o.webkitExitFullscreen?o.webkitExitFullscreen():o.mozCancelFullScreen?o.mozCancelFullScreen():o.msExitFullscreen&&o.msExitFullscreen())},fsChanged:function(o){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(o||"","fullscreenchange"),this.fsChanged))},run:function(o,s,u){u===void 0&&(u={}),this.sender=s;var c=u.target,f=(0,e.isElement)(c)?c:document.querySelector(c),h=this.enable(f||o.getContainer());this.fsChanged=this.fsChanged.bind(this,h),document.addEventListener(h+"fullscreenchange",this.fsChanged)},stop:function(o,s){s&&s.set&&s.set("active",!1),this.disable()}}},9622:(a,n,t)=>{t.r(n),t.d(n,{default:()=>c});var e=t(5706),r=t(6411),o=t(2097),s=t(4596),u=t(2983);const c=(0,e.extend)({},u.default,s.default,{init:function(f){s.default.init.apply(this,arguments),(0,e.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=f,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];s.default.enable.apply(this,f),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var g=this.$wrapper;g.css("cursor","move"),g.on("mousedown",this.initSorter),g.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(f){var h=(0,r.default)(f.target).data("model"),g=h.get("draggable");g&&(this.cacheEl=null,this.startSelectPosition(f.target,this.frameEl.contentDocument),this.sorter.draggable=g,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,o.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(f){var h=f.get("draggable");if(h){this.cacheEl=null;var g=f.view.el;this.startSelectPosition(g,this.frameEl.contentDocument),this.sorter.draggable=h,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,o.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(f){this.cacheEl=null;var h=f[f.length-1],g=this.em.getCurrentFrame(),y=h.getEl(g==null?void 0:g.model),_=y.ownerDocument,b=f.map(function(x){var T;return(T=x==null?void 0:x.view)===null||T===void 0?void 0:T.el});this.startSelectPosition(b,_,{onStart:this.onStart}),this.sorter.eventHandlers.legacyOnMoveClb=this.onDrag,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,o.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,o.AU)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,o.AU)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(f,h){},rollback:function(f,h){var g=f.which||f.keyCode;(g==27||h)&&this.sorter.cancelDrag()},getBadgeEl:function(){return this.$badge||(this.$badge=(0,r.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,r.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];s.default.stop.apply(this,f),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var g=this.$wrapper;g.css("cursor","").unbind().removeClass(this.noSelClass)}})},8481:(a,n,t)=>{t.r(n),t.d(n,{default:()=>o});var e=t(5706),r=t(2097);const o={open:function(s){var u=this,c=this,f=c.editor,h=c.title,g=c.config,y=c.am,_=g.custom;if((0,e.isFunction)(_.open))return _.open(y.__customData());var b=f.Modal;b.open({title:h,content:s}).onceClose(function(){return f.stopCommand(u.id)})},close:function(){var s=this.config.custom;if((0,e.isFunction)(s.close))return s.close(this.am.__customData());var u=this.editor.Modal;u&&u.close()},run:function(s,u,c){c===void 0&&(c={});var f=s.AssetManager,h=f.getConfig(),g=c.types,y=g===void 0?[]:g,_=c.accept,b=c.select;if(this.title=c.modalTitle||s.t("assetManager.modalTitle")||"",this.editor=s,this.config=h,this.am=f,f.setTarget(c.target),f.onClick(c.onClick),f.onDblClick(c.onDblClick),f.onSelect(c.onSelect),f.__behaviour({select:b,types:y,options:c}),h.custom)this.rendered=this.rendered||(0,r.a_)("div"),this.rendered.className="".concat(h.stylePrefix,"custom-wrp"),f.__behaviour({container:this.rendered}),f.__trgCustom();else{if(!this.rendered||y){var x=f.getAll().filter(function(I){return I});y&&y.length&&(x=x.filter(function(I){return y.indexOf(I.get("type"))!==-1})),f.render(x),this.rendered=f.getContainer()}if(_){var T=this.rendered.querySelector("input#".concat(h.stylePrefix,"uploadFile"));T&&T.setAttribute("accept",_)}}return this.open(this.rendered),this},stop:function(s){this.editor=s,this.close(this.rendered)}}},3666:(a,n,t)=>{t.r(n),t.d(n,{default:()=>o});var e=t(5706),r=t(2097);const o={open:function(){var s=this,u=s.container,c=s.editor,f=s.bm,h=s.config,g=h.custom,y=h.appendTo;if((0,e.isFunction)(g.open))return g.open(f.__customData());if(this.firstRender&&!y){var _="views-container",b=c.Panels,x=b.getPanel(_)||b.addPanel({id:_});x.set("appendContent",u).trigger("change:appendContent"),g||u.appendChild(f.render())}u&&(u.style.display="block")},close:function(){var s=this,u=s.container,c=s.config,f=c.custom;if((0,e.isFunction)(f.close))return f.close(this.bm.__customData());u&&(u.style.display="none")},run:function(s){var u=s.Blocks;this.config=u.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,r.a_)("div"),this.editor=s,this.bm=u;var c=this.container;u.__behaviour({container:c}),this.config.custom&&u.__trgCustom(),this.open()},stop:function(){this.close()}}},5838:(a,n,t)=>{t.r(n),t.d(n,{default:()=>e});const e={run:function(r){var o=r.LayerManager,s=r.Panels,u=o.getConfig();if(!u.appendTo){if(!this.layers){var c="views-container",f=document.createElement("div"),h=s.getPanel(c)||s.addPanel({id:c});u.custom?o.__trgCustom({container:f}):f.appendChild(o.render()),h.set("appendContent",f).trigger("change:appendContent"),this.layers=f}this.layers.style.display="block"}},stop:function(){var r=this.layers;r&&(r.style.display="none")}}},8692:(a,n,t)=>{t.r(n),t.d(n,{default:()=>r});var e=t(6411);const r={run:function(o,s){if(this.sender=s,!this.$cnt){var u=o.getConfig(),c=o.Panels,f=o.DeviceManager,h=o.SelectorManager,g=o.StyleManager,y="change:appendContent",_=(0,e.default)("<div></div>"),b=(0,e.default)("<div></div>"),x=(0,e.default)("<div></div>"),T=(0,e.default)("<div></div>");if(this.$cnt=_,this.$cntInner=b,b.append(x),b.append(T),_.append(b),f&&u.showDevices){var I=c.addPanel({id:"devices-c"}),z=f.render();I.set("appendContent",z).trigger(y)}var F=h.getConfig();F.custom?h.__trgCustom({container:x.get(0)}):F.appendTo||x.append(h.render([])),this.sm=g;var W=g.getConfig(),ct=W.stylePrefix;this.$header=(0,e.default)('<div class="'.concat(ct,'header">').concat(o.t("styleManager.empty"),"</div>")),_.append(this.$header),W.custom?g.__trgCustom({container:T.get(0)}):W.appendTo||T.append(g.render());var _t="views-container",xt=c.getPanel(_t)||c.addPanel({id:_t});xt.set("appendContent",_).trigger(y);var ut=o.getModel();this.listenTo(ut,g.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var o=this,s=o.sender,u=o.sm,c=o.$cntInner,f=o.$header;s&&s.get&&!s.get("active")||!u||(u.getSelected()?(c==null||c.show(),f==null||f.hide()):(c==null||c.hide(),f==null||f.show()))},stop:function(){var o,s;(o=this.$cntInner)===null||o===void 0||o.hide(),(s=this.$header)===null||s===void 0||s.hide()}}},9163:(a,n,t)=>{t.r(n),t.d(n,{default:()=>r});var e=t(6411);const r={run:function(o,s){this.sender=s;var u=o.getModel(),c=o.Config,f=c.stylePrefix,h=o.TraitManager,g=h.getConfig(),y;if(!g.appendTo){if(!this.$cn){this.$cn=(0,e.default)("<div></div>"),this.$cn2=(0,e.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,e.default)("<div>").append('<div class="'.concat(g.stylePrefix,'header">').concat(u.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),g.custom?h.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(f,'traits-label">').concat(u.t("traitManager.label"),"</div>")),this.$cn2.append(h.render()));var _=o.Panels;_.getPanel("views-container")?y=_.getPanel("views-container"):y=_.addPanel({id:"views-container"}),y==null||y.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=o.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var o=this.sender;o&&o.get&&!o.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},9298:(a,n,t)=>{t.r(n),t.d(n,{default:()=>r});var e=t(5706);const r={run:function(s,u,c){c===void 0&&(c={});var f=s.getModel(),h=f.get("clipboard"),g=s.getSelected();h!=null&&h.length&&g&&(s.getSelectedAll().forEach(function(y){var _,b,x,T=((b=(_=y.delegate)===null||_===void 0?void 0:_.copy)===null||b===void 0?void 0:b.call(_,y))||y,I=T.collection,z;if(I){var F=T.index()+1,W={at:F,action:c.action||"paste-component"};(0,e.contains)(h,T)&&T.get("copyable")?z=I.add(T.clone(),W):z=o(s,h,T.parent(),W)}else{var ct=(x=f.Pages.getSelected())===null||x===void 0?void 0:x.getMainComponent(),W={at:(ct==null?void 0:ct.components().length)||0,action:c.action||"paste-component"};z=o(s,h,ct,W)}z=(0,e.isArray)(z)?z:[z],z.forEach(function(_t){return s.trigger("component:paste",_t)})}),g.emitUpdate())}};function o(s,u,c,f){var h=u.filter(function(y){return y.get("copyable")}),g=h.filter(function(y){return s.Components.canMove(c,y).result});return c.components().add(g.map(function(y){return y.clone()}),f)}},8594:(a,n,t)=>{t.r(n),t.d(n,{default:()=>s});var e=t(5706),r=function(u,c,f){if(f||arguments.length===2)for(var h=0,g=c.length,y;h<g;h++)(y||!(h in c))&&(y||(y=Array.prototype.slice.call(c,0,h)),y[h]=c[h]);return u.concat(y||Array.prototype.slice.call(c))},o="core:component-outline";const s={getPanels:function(u){return this.panels||(this.panels=u.Panels.getPanels()),this.panels},preventDrag:function(u){u.abort=1},tglEffects:function(u){var c=this.em,f=u?"on":"off";if(c){var h=c.Canvas,g=h.getBody(),y=h.getToolbarEl();y&&(y.style.display=u?"none":"");var _=g.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,e.each)(_,function(b){return b.style.pointerEvents=u?"all":""}),c[f]("run:tlb-move:before",this.preventDrag)}},run:function(u,c){var f=this;this.sender=c,this.selected=r([],u.getSelectedAll(),!0),u.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=u.Commands.isActive(o)),this.shouldRunSwVisibility&&u.stopCommand(o),u.getModel().stopDefault();var h=this.getPanels(u),g=u.Canvas.getElement(),y=u.getEl(),_=u.Config.stylePrefix;if(!this.helper){var b=document.createElement("span");b.className="".concat(_,"off-prv fa fa-eye-slash"),y.appendChild(b),b.onclick=function(){return f.stopCommand()},this.helper=b}this.helper.style.display="inline-block",h.forEach(function(T){return T.set("visible",!1)});var x=g.style;x.width="100%",x.height="100%",x.top="0",x.left="0",x.padding="0",x.margin="0",u.refresh(),this.tglEffects(1)},stop:function(u){var c=this,f=c.sender,h=f===void 0?{}:f,g=c.selected;h.set&&h.set("active",0);var y=this.getPanels(u);this.shouldRunSwVisibility&&(u.runCommand(o),this.shouldRunSwVisibility=!1),u.getModel().runDefault(),y.forEach(function(b){return b.set("visible",!0)});var _=u.Canvas.getElement();_.setAttribute("style",""),g&&u.select(g),delete this.selected,this.helper&&(this.helper.style.display="none"),u.refresh(),this.tglEffects()}}},7604:(a,n,t)=>{t.r(n),t.d(n,{default:()=>r});var e=function(){return e=Object.assign||function(o){for(var s,u=1,c=arguments.length;u<c;u++){s=arguments[u];for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(o[f]=s[f])}return o},e.apply(this,arguments)};const r={run:function(o,s,u){var c=u||{},f=o.Canvas,h=f.getCanvasView(),g=e({appendTo:f.getResizerEl(),prefix:o.getConfig().stylePrefix,posFetcher:h.getElementPos.bind(h),mousePosFetcher:f.getMouseRelativePos.bind(f)},c.options||{}),y=this.canvasResizer;return(!y||c.forceNew)&&(this.canvasResizer=new o.Utils.Resizer(g),y=this.canvasResizer),y.setOptions(g,!0),y.blur(),y.focus(c.el),y},stop:function(){var o;(o=this.canvasResizer)===null||o===void 0||o.blur()}}},4596:(a,n,t)=>{t.r(n),t.d(n,{default:()=>nt});var e=t(5706),r=t(1749),o=function(){var H=function(V,U){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,tt){B.__proto__=tt}||function(B,tt){for(var A in tt)Object.prototype.hasOwnProperty.call(tt,A)&&(B[A]=tt[A])},H(V,U)};return function(V,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");H(V,U);function B(){this.constructor=V}V.prototype=U===null?Object.create(U):(B.prototype=U.prototype,new B)}}(),s=function(H){o(V,H);function V(){return H!==null&&H.apply(this,arguments)||this}return V.prototype.defaults=function(){return{command:"",attributes:{}}},V}(r.Kx);const u=s;var c=function(){var H=function(V,U){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,tt){B.__proto__=tt}||function(B,tt){for(var A in tt)Object.prototype.hasOwnProperty.call(tt,A)&&(B[A]=tt[A])},H(V,U)};return function(V,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");H(V,U);function B(){this.constructor=V}V.prototype=U===null?Object.create(U):(B.prototype=U.prototype,new B)}}(),f=function(H){c(V,H);function V(){return H!==null&&H.apply(this,arguments)||this}return V}(r.pM);const h=f;f.prototype.model=u;var g=t(91),y=function(){var H=function(V,U){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,tt){B.__proto__=tt}||function(B,tt){for(var A in tt)Object.prototype.hasOwnProperty.call(tt,A)&&(B[A]=tt[A])},H(V,U)};return function(V,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");H(V,U);function B(){this.constructor=V}V.prototype=U===null?Object.create(U):(B.prototype=U.prototype,new B)}}(),_=function(){return _=Object.assign||function(H){for(var V,U=1,B=arguments.length;U<B;U++){V=arguments[U];for(var tt in V)Object.prototype.hasOwnProperty.call(V,tt)&&(H[tt]=V[tt])}return H},_.apply(this,arguments)},b=function(H){y(V,H);function V(U){var B=H.call(this,U)||this;return B.em=U.config.em,B}return V.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},V.prototype.attributes=function(){return this.model.get("attributes")},V.prototype.handleClick=function(U){U.preventDefault(),U.stopPropagation();var B=this.em,tt=B.Canvas.getFrameEl().getBoundingClientRect(),A=tt.left,yt=tt.top,gt=_(_({},U),{clientX:U.clientX-A,clientY:U.clientY-yt});B.trigger("toolbar:run:before",{event:gt}),this.execCommand(gt)},V.prototype.execCommand=function(U){var B=this,tt=B.em,A=B.model,yt={event:U},gt=A.get("command"),Mt=tt.Editor;(0,e.isFunction)(gt)&&gt(Mt,null,yt),(0,e.isString)(gt)&&Mt.runCommand(gt,yt)},V.prototype.render=function(){var U=this,B=U.em,tt=U.$el,A=U.model,yt=A.get("id"),gt=A.get("label"),Mt=B.getConfig().stylePrefix;return tt.addClass("".concat(Mt,"toolbar-item")),yt&&tt.addClass("".concat(Mt,"toolbar-item__").concat(yt)),gt&&tt.append(gt),this},V}(r.Ss);const x=b;var T=function(){var H=function(V,U){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,tt){B.__proto__=tt}||function(B,tt){for(var A in tt)Object.prototype.hasOwnProperty.call(tt,A)&&(B[A]=tt[A])},H(V,U)};return function(V,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");H(V,U);function B(){this.constructor=V}V.prototype=U===null?Object.create(U):(B.prototype=U.prototype,new B)}}(),I=function(H){T(V,H);function V(U){var B=H.call(this,U)||this,tt=U.em;return B.em=tt,B.config={em:tt},B.listenTo(B.collection,"reset",B.render),B}return V.prototype.onRender=function(){var U=this.em.config.stylePrefix;this.el.className="".concat(U,"toolbar-items")},V}(g.A);const z=I;I.prototype.itemView=x;var F=t(2097),W=t(9195),ct=t(2820),_t=t(3172),xt=function(){return xt=Object.assign||function(H){for(var V,U=1,B=arguments.length;U<B;U++){V=arguments[U];for(var tt in V)Object.prototype.hasOwnProperty.call(V,tt)&&(H[tt]=V[tt])}return H},xt.apply(this,arguments)},ut=function(H,V){var U={};for(var B in H)Object.prototype.hasOwnProperty.call(H,B)&&V.indexOf(B)<0&&(U[B]=H[B]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tt=0,B=Object.getOwnPropertySymbols(H);tt<B.length;tt++)V.indexOf(B[tt])<0&&Object.prototype.propertyIsEnumerable.call(H,B[tt])&&(U[B[tt]]=H[B[tt]]);return U},q;const nt={activeResizer:!1,init:function(){this.onSelect=(0,e.debounce)(this.onSelect,0),(0,e.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),q=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(H){var V=this,U=this.em,B=U.getConfig().listenToEl,tt=U.getContainer().parentNode,A=H?"on":"off",yt={on:F.on,off:F.AU},gt=_t.I.update;!B.length&&tt&&B.push(tt);var Mt=function(qt,ft){yt[A](ft,"mouseover",V.onHover),yt[A](ft,"mouseleave",V.onOut),yt[A](ft,"click",V.onClick),yt[A](qt,"scroll",V.onFrameScroll,!0),yt[A](qt,"resize",V.onFrameResize)};yt[A](window,"resize",this.onFrameUpdated),yt[A](B,"scroll",this.onContainerChange),U[A]("component:toggled ".concat(gt," undo redo"),this.onSelect,this),U[A]("change:componentHovered",this.onHovered,this),U[A]("component:resize styleable:change component:input",this.updateGlobalPos,this),U[A]("".concat(gt,":toolbar"),this._upToolbar,this),U[A]("frame:updated",this.onFrameUpdated,this),U[A]("canvas:updateTools",this.onFrameUpdated,this),U[A](U.Canvas.events.refresh,this.updateAttached,this),U.Canvas.getFrames().forEach(function(qt){var ft=qt.view,At=ft==null?void 0:ft.getWindow();At&&Mt(At,ft==null?void 0:ft.getBody())})},onHover:function(H){H.stopPropagation();var V=this.em,U=H.target,B=(0,W.getComponentView)(U),tt=B==null?void 0:B.frameView,A=B==null?void 0:B.model;if(!A)for(var yt=U.parentNode;!A&&yt&&!(0,F.ZQ)(yt);)A=(0,W.getComponentModel)(yt),yt=yt.parentNode;this.currentDoc=U.ownerDocument,V.setHovered(A,{useValid:!0}),tt&&V.setCurrentFrame(tt)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(H,V){var U=this,B,tt={};V?(B=V.views)===null||B===void 0||B.forEach(function(A){var yt=A.el,gt=U.getElementPos(yt);tt={el:yt,pos:gt,component:V,view:(0,W.getViewEl)(yt)},yt.ownerDocument===U.currentDoc&&(U.elHovered=tt),U.updateToolsLocal(tt)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(A){var yt=A.view,gt=yt&&yt.getToolsEl();gt&&U.toggleToolsEl(0,0,{el:gt})}))},onSelect:function(){var H=this.em,V=H.getSelected(),U=H.getCurrentFrame(),B=V&&V.getView(U==null?void 0:U.model),tt=B&&B.el,A={};if(tt&&(0,F.zN)(tt)){var yt=this.getElementPos(tt);A={el:tt,pos:yt,component:V,view:(0,W.getViewEl)(tt)}}this.elSelected=A,this.updateToolsGlobal(),this.updateLocalPos(A),this.initResize(V)},updateGlobalPos:function(){var H=this.getElSelected();H.el&&(H.pos=this.getElementPos(H.el),this.updateToolsGlobal())},updateLocalPos:function(H){var V=this.getElHovered();V.el&&(V.pos=this.getElementPos(V.el),this.updateToolsLocal(H))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(H,V,U){U===void 0&&(U={});var B=U.el||this.canvas.getToolsEl(V);return B&&(B.style.display=H?"":"none"),B||{}},showElementOffset:function(H,V,U){U===void 0&&(U={}),q&&this.editor.runCommand("show-offset",{el:H,elPos:V,view:U.view,force:1,top:0,left:0})},hideElementOffset:function(H){this.editor.stopCommand("show-offset",{view:H})},showFixedElementOffset:function(H,V){this.editor.runCommand("show-offset",{el:H,elPos:V,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(H){this.canvas.getHighlighter(H).style.opacity=0},onClick:function(H){H.stopPropagation(),H.preventDefault();var V=this.em;if(V.get("_cmpDrag"))return V.set("_cmpDrag");var U=H.target,B=(0,W.getComponentModel)(U);if(!B)for(var tt=U.parentNode;!B&&tt&&!(0,F.ZQ)(tt);)B=(0,W.getComponentModel)(tt),tt=tt.parentNode;if(B){if(V.isEditing()&&(!B.get("textable")&&B.isChildOf("text")||V.getEditing()!==B))return;this.select(B,H)}},select:function(H,V){if(V===void 0&&(V={}),!!H){var U=this.em;U.setSelected(H,{event:V,useValid:!0}),this.initResize(U.getSelected())}},updateBadge:function(H,V,U){U===void 0&&(U={});var B=this.canvas,tt=(0,W.getComponentModel)(H),A=this.getBadge(U),yt=A.style;if(!tt||!tt.get("badgable")){yt.display="none";return}if(!U.posOnly){var gt=this.canvas.getConfig(),Mt=tt.getIcon(),qt=gt.pStylePrefix||"",ft="".concat(qt,"badge"),At=gt.customBadgeLabel,Ht="".concat(Mt?'<div class="'.concat(ft,'__icon">').concat(Mt,"</div>"):"",`
        <div class="`).concat(ft,'__name">').concat(tt.getName(),"</div>");A.innerHTML=At?At(tt):Ht}var Et="px";yt.display="block";var Qt=B.getTargetToElementFixed(H,A,{pos:V}),re=Qt.top,$t=U.leftOff<0?-U.leftOff:0;yt.top=re+Et,yt.left=$t+Et},showHighlighter:function(H){this.canvas.getHighlighter(H).style.opacity=""},initResize:function(H){var V=this,U=V.em,B=V.canvas,tt=U.Editor,A=!(0,e.isElement)(H)&&(0,F.GW)(H)?H:U.getSelected(),yt=A==null?void 0:A.get("resizable"),gt=ct.F.Resize,Mt=B.hasCustomSpot(gt);if(B.removeSpots({type:gt}),A&&yt){B.addSpot({type:gt,component:A});var qt=(0,e.isElement)(H)?H:A.getEl(),ft=(0,W.isObject)(yt)?yt:{},At=ft.onStart,Ht=At===void 0?function(){}:At,Et=ft.onMove,Qt=Et===void 0?function(){}:Et,re=ft.onEnd,$t=re===void 0?function(){}:re,zt=ft.updateTarget,se=zt===void 0?function(){}:zt,me=ut(ft,["onStart","onMove","onEnd","updateTarget"]);if(Mt||!qt||this.activeResizer)return;var rt,bt=U.config,Zt=bt.stylePrefix||"",Rt="".concat(Zt,"resizing"),oe=this,he={component:A,el:qt},ie=function(N,$,at){var mt=at.docs;mt&&mt.forEach(function(K){var dt=K.body,it=dt.className||"";dt.className=(N=="add"?"".concat(it," ").concat(Rt):it.replace(Rt,"")).trim()})},P=xt({onStart:function(N,$){Ht(N,$);var at=$.el,mt=$.config,K=$.resizer,dt=mt.keyHeight,it=mt.keyWidth,ne=mt.currentUnit,we=mt.keepAutoHeight,ge=mt.keepAutoWidth;ie("add",N,$),rt=U.Styles.getModelToStyle(A),B.toggleFramesEvents(!1);var R=getComputedStyle(at),et=rt.getStyle(),D=et[it];mt.autoWidth=ge&&D==="auto",isNaN(parseFloat(D))&&(D=R[it]);var St=et[dt];mt.autoHeight=we&&St==="auto",isNaN(parseFloat(St))&&(St=R[dt]),K.startDim.w=parseFloat(D),K.startDim.h=parseFloat(St),q=!1,ne&&(mt.unitHeight=(0,W.getUnitFromValue)(St),mt.unitWidth=(0,W.getUnitFromValue)(D)),oe.activeResizer=!0,tt.trigger("component:resize",xt(xt({},he),{type:"start"}))},onMove:function(N){Qt(N),tt.trigger("component:resize",xt(xt({},he),{type:"move"}))},onEnd:function(N,$){$t(N,$),ie("remove",N,$),tt.trigger("component:resize",xt(xt({},he),{type:"end"})),B.toggleFramesEvents(!0),q=!0,oe.activeResizer=!1},updateTarget:function(N,$,at){if(se(N,$,at),!!rt){var mt=at.store,K=at.selectedHandler,dt=at.config,it=dt.keyHeight,ne=dt.keyWidth,we=dt.autoHeight,ge=dt.autoWidth,R=dt.unitWidth,et=dt.unitHeight,D=["tc","bc"].indexOf(K)>=0,St=["cl","cr"].indexOf(K)>=0,vt={};if(!D){var Lt=B.getBody().offsetWidth,Xt=$.w<Lt?$.w:Lt;vt[ne]=ge?"auto":"".concat(Xt).concat(R)}St||(vt[it]=we?"auto":"".concat($.h).concat(et)),U.getDragMode(A)&&(vt.top="".concat($.t).concat(et),vt.left="".concat($.l).concat(R));var Yt=xt(xt({},vt),{__p:!mt});rt.addStyle(Yt,{avoidStore:!mt}),U.Styles.__emitCmpStyleUpdate(Yt,{components:U.getSelected()})}}},me);this.resizer=tt.runCommand("resize",{el:qt,options:P,force:1})}else{if(Mt)return;tt.stopCommand("resize"),this.resizer=null}},updateToolbar:function(H){var V=this.canvas,U=this.config.em,B=H===U?U.getSelected():H,tt=V.getToolbarEl(),A=tt.style,yt=B.get("toolbar"),gt=U.config.showToolbar,Mt=!V.hasCustomSpot(ct.F.Select);if(B&&gt&&yt&&yt.length&&Mt){if(A.display="",!this.toolbar){tt.innerHTML="",this.toolbar=new h(yt);var qt=new z({collection:this.toolbar,em:U});tt.appendChild(qt.render().el)}this.toolbar.reset(yt),A.top="-100px",A.left="0"}else A.display="none"},updateToolbarPos:function(H){var V="px",U=this.canvas.getToolbarEl().style;U.top="".concat(H.top).concat(V),U.left="".concat(H.left).concat(V),U.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(H){return H===void 0&&(H={}),this.canvas.getBadgeEl(H.view)},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refresh({all:!0})},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(H){return H&&H.get("status")==="selected"},updateToolsLocal:function(H){var V=this.em.getConfig(),U=H||this.getElHovered(),B=U.el,tt=U.pos,A=U.view,yt=U.component;if(!B){this.lastHovered=0;return}var gt=yt.get("hoverable"),Mt=this.lastHovered!==B,qt=Mt?{}:{posOnly:1},ft=this.canvas.hasCustomSpot(ct.F.Hover);Mt&&gt&&(this.lastHovered=B,ft?this.hideHighlighter(A):this.showHighlighter(A),this.showElementOffset(B,tt,{view:A})),this.isCompSelected(yt)&&(this.hideHighlighter(A),!V.showOffsetsSelected&&this.hideElementOffset(A));var At="px",Ht=this.toggleToolsEl(1,A),Et=Ht.style,Qt=this.canvas.canvasRectOffset(B,tt),re=Qt.top,$t=Qt.left;!ft&&this.updateBadge(B,tt,xt(xt({},qt),{view:A,topOff:re,leftOff:$t})),Et.top=re+At,Et.left=$t+At,Et.width=tt.width+At,Et.height=tt.height+At,this._trgToolUp("local",{component:yt,el:Ht,top:re,left:$t,width:tt.width,height:tt.height})},_upToolbar:(0,e.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(H,V){V===void 0&&(V={}),this.em.trigger("canvas:tools:update",xt({type:H},V))},updateToolsGlobal:function(H){H===void 0&&(H={});var V=this.getElSelected(),U=V.el,B=V.pos,tt=V.component;if(!U){this.toggleToolsEl(),this.lastSelected=0;return}var A=this.canvas,yt=this.lastSelected!==U;(yt||H.force)&&(this.lastSelected=U,this.updateToolbar(tt));var gt="px",Mt=this.toggleToolsEl(1),qt=Mt.style,ft=A.getTargetToElementFixed(U,A.getToolbarEl(),{pos:B}),At=ft.canvasOffsetTop,Ht=ft.canvasOffsetLeft;qt.top=At+gt,qt.left=Ht+gt,qt.width=B.width+gt,qt.height=B.height+gt,this.updateToolbarPos({top:ft.top,left:ft.left}),this._trgToolUp("global",{component:tt,el:Mt,top:At,left:Ht,width:B.width,height:B.height})},updateAttached:(0,e.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,e.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(H){return this.canvas.getCanvasView().getElementPos(H,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(H){H&&H.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(H){(0,W.hasWin)()&&(this.editor=H&&H.get("Editor"),this.enable())},stop:function(H,V,U){if(U===void 0&&(U={}),!!(0,W.hasWin)()){var B=this,tt=B.em,A=B.editor;this.onHovered(),this.stopSelectComponent(),!U.preserveSelected&&tt.setSelected(),this.toggleToolsEl(),A&&A.stopCommand("resize")}}}},2983:(a,n,t)=>{t.r(n),t.d(n,{default:()=>s});var e=t(6411),r=t(6778),o=t(2128);const s={startSelectPosition:function(u,c,f){f===void 0&&(f={}),this.isPointed=!1;var h=this.em.Utils,g=u[0].ownerDocument.body;h&&(this.sorter=new h.ComponentSorter({em:this.em,treeClass:r.A,containerContext:{container:g,containerSel:"*",itemSel:"*",pfx:this.ppfx,document:c,placeholderElement:this.canvas.getPlacerEl()},positionOptions:{windowMargin:1,canvasRelative:!0},dragBehavior:{dragDirection:o.A.BothDirections,nested:!0}})),f.onStart&&(this.sorter.eventHandlers.legacyOnStartSort=f.onStart),u&&u.length>0&&this.sorter.startSort(u.map(function(y){return{element:y}}))},getOffsetDim:function(){var u=this.offset(this.canvas.getFrameEl()),c=this.offset(this.canvas.getElement()),f=u.top-c.top,h=u.left-c.left;return{top:f,left:h}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&this.sorter.cancelDrag(),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,e.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,e.default)(this.cDim[this.posIndex][5]).parent():(0,e.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(u,c,f){var h=u||0,g=c||"before",y=f.length,_=y!==0&&g=="after"&&h==y;return y!==0&&(!_&&!f[h][4]||f[h-1]&&!f[h-1][4]||_&&!f[h-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},9490:(a,n,t)=>{t.r(n),t.d(n,{default:()=>u});var e=t(5706),r=t(2820),o=t(6411),s=function(){return s=Object.assign||function(c){for(var f,h=1,g=arguments.length;h<g;h++){f=arguments[h];for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(c[y]=f[y])}return c},s.apply(this,arguments)};const u={getOffsetMethod:function(c){var f=c||"";return"get"+f+"OffsetViewerEl"},run:function(c,f,h){var g=this.canvas,y=h||{},_=y.state||"",b=c.getConfig(),x=this.em.getZoomDecimal(),T=y.el;if(!b.showOffsets||!(T instanceof HTMLElement)||!b.showOffsetsSelected&&_=="Fixed"){c.stopCommand("".concat(this.id),h);return}if(!g.hasCustomSpot(r.F.Spacing)){var I=s({},y.elPos||g.getElementPos(T));(0,e.isUndefined)(y.top)||(I.top=y.top),(0,e.isUndefined)(y.left)||(I.left=y.left);var z=window.getComputedStyle(T),F=this.ppfx,W=_+"State",ct=this.getOffsetMethod(_),_t=g[ct](h.view);_t.style.opacity="";var xt=this["marginT"+_],ut=this["marginB"+_],q=this["marginL"+_],nt=this["marginR"+_],H=this["padT"+_],V=this["padB"+_],U=this["padL"+_],B=this["padR"+_];if(_t.childNodes.length&&(this[W]="1",xt=_t.querySelector("[data-offset-m-t]"),ut=_t.querySelector("[data-offset-m-b]"),q=_t.querySelector("[data-offset-m-l]"),nt=_t.querySelector("[data-offset-m-r]"),H=_t.querySelector("[data-offset-p-t]"),V=_t.querySelector("[data-offset-p-b]"),U=_t.querySelector("[data-offset-p-l]"),B=_t.querySelector("[data-offset-p-r]")),!this[W]){var tt=_.toLowerCase(),A=tt+"margin-v",yt=tt+"padding-v",gt=(0,o.default)('<div class="'.concat(F,'marginName">')).get(0),Mt=(0,o.default)('<div class="'.concat(F,'paddingName">')).get(0),qt=F+A+"-el",ft=F+yt+"-el",At="".concat(qt," ").concat(F+A),Ht="".concat(ft," ").concat(F+yt);xt=(0,o.default)('<div class="'.concat(At,'-top"></div>')).get(0),ut=(0,o.default)('<div class="'.concat(At,'-bottom"></div>')).get(0),q=(0,o.default)('<div class="'.concat(At,'-left"></div>')).get(0),nt=(0,o.default)('<div class="'.concat(At,'-right"></div>')).get(0),H=(0,o.default)('<div class="'.concat(Ht,'-top"></div>')).get(0),V=(0,o.default)('<div class="'.concat(Ht,'-bottom"></div>')).get(0),U=(0,o.default)('<div class="'.concat(Ht,'-left"></div>')).get(0),B=(0,o.default)('<div class="'.concat(Ht,'-right"></div>')).get(0),this["marginT"+_]=xt,this["marginB"+_]=ut,this["marginL"+_]=q,this["marginR"+_]=nt,this["padT"+_]=H,this["padB"+_]=V,this["padL"+_]=U,this["padR"+_]=B,gt.appendChild(xt),gt.appendChild(ut),gt.appendChild(q),gt.appendChild(nt),Mt.appendChild(H),Mt.appendChild(V),Mt.appendChild(U),Mt.appendChild(B),_t.appendChild(gt),_t.appendChild(Mt),this[W]="1"}var Et="px",Qt=parseFloat(z.marginLeft.replace(Et,""))*x,re=parseFloat(z.marginRight.replace(Et,""))*x,$t=parseFloat(z.marginTop.replace(Et,""))*x,zt=parseFloat(z.marginBottom.replace(Et,""))*x,se=xt.style,me=ut.style,rt=q.style,bt=nt.style,Zt=H.style,Rt=V.style,oe=U.style,he=B.style,ie=parseFloat(I.left),P=parseFloat(z.width)*x+Et;se.height=$t+Et,se.width=P,se.top=I.top-$t+Et,se.left=ie+Et,me.height=zt+Et,me.width=P,me.top=I.top+I.height+Et,me.left=ie+Et;var N=I.height+$t+zt+Et,$=I.top-$t+Et;rt.height=N,rt.width=Qt+Et,rt.top=$,rt.left=ie-Qt+Et,bt.height=N,bt.width=re+Et,bt.top=$,bt.left=ie+I.width+Et;var at=parseFloat(z.paddingTop)*x;Zt.height=at+Et;var mt=parseFloat(z.paddingBottom)*x;Rt.height=mt+Et;var K=I.height-mt-at+Et,dt=I.top+at+Et;oe.height=K,oe.width=parseFloat(z.paddingLeft)*x+Et,oe.top=dt;var it=parseFloat(z.paddingRight)*x;he.height=K,he.width=it+Et,he.top=dt}},stop:function(c,f,h){h===void 0&&(h={});var g=h||{},y=g.state||"",_=this.getOffsetMethod(y),b=h.view,x=this.canvas,T=x[_](b);T.style.opacity=0}}},1396:(a,n,t)=>{t.r(n),t.d(n,{default:()=>o});var e=t(5706),r=t(9195);const o={init:function(){(0,e.bindAll)(this,"_onFramesChange")},run:function(s){this.toggleVis(s,!0)},stop:function(s){this.toggleVis(s,!1)},toggleVis:function(s,u){if(u===void 0&&(u=!0),!s.Commands.isActive("preview")){var c=s.Canvas,f=u?"on":"off",h=c.getModel();h[f]("change:frames",this._onFramesChange),this.handleFrames(c.getFrames(),u)}},handleFrames:function(s,u){var c=this;s.forEach(function(f){var h;!((h=f.view)===null||h===void 0)&&h.loaded&&c._upFrame(f,u),f.__ol||(f.on("loaded",function(){return c._upFrame(f)}),f.__ol=!0)})},_onFramesChange:function(s,u){this.handleFrames(u)},_upFrame:function(s,u){var c,f=this,h=f.ppfx,g=f.em,y=f.id,_=(0,r.isDef)(u)?u:g.Commands.isActive(y),b=_?"add":"remove",x="".concat(h,"dashed");(c=s.view)===null||c===void 0||c.getBody().classList[b](x)}}},1749:(a,n,t)=>{t.d(n,{Kx:()=>c,Ss:()=>h,e2:()=>u,lK:()=>y,pM:()=>f,x2:()=>g});var e=t(4193),r=t.n(e),o=function(){var _=function(b,x){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,I){T.__proto__=I}||function(T,I){for(var z in I)Object.prototype.hasOwnProperty.call(I,z)&&(T[z]=I[z])},_(b,x)};return function(b,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");_(b,x);function T(){this.constructor=b}b.prototype=x===null?Object.create(x):(T.prototype=x.prototype,new T)}}(),s=function(){return s=Object.assign||function(_){for(var b,x=1,T=arguments.length;x<T;x++){b=arguments[x];for(var I in b)Object.prototype.hasOwnProperty.call(b,I)&&(_[I]=b[I])}return _},s.apply(this,arguments)},u="add remove reset change",c=function(_){o(b,_);function b(){return _!==null&&_.apply(this,arguments)||this}return b}(r().Model),f=function(_){o(b,_);function b(){return _!==null&&_.apply(this,arguments)||this}return b}(r().Collection),h=function(_){o(b,_);function b(){return _!==null&&_.apply(this,arguments)||this}return b}(r().View),g;(function(_){_.Screen="screen",_.World="world"})(g||(g={}));var y={x:0,y:0};s(s({},y),{width:0,height:0})},3172:(a,n,t)=>{t.d(n,{I:()=>r,t:()=>e});var e;(function(o){o.remove="component:remove",o.add="component:add",o.move="component:move"})(e||(e={}));var r;(function(o){o.add="component:add",o.remove="component:remove",o.removeBefore="component:remove:before",o.create="component:create",o.update="component:update",o.updateInside="component:update-inside",o.select="component:select",o.selectBefore="component:select:before",o.symbolMainAdd="symbol:main:add",o.symbolMainUpdate="symbol:main:update",o.symbolMainUpdateDeep="symbol:main:update-deep",o.symbolMainRemove="symbol:main:remove",o.symbolMain="symbol:main",o.symbolInstanceAdd="symbol:instance:add",o.symbolInstanceRemove="symbol:instance:remove",o.symbolInstance="symbol:instance",o.symbol="symbol"})(r||(r={}))},91:(a,n,t)=>{t.d(n,{A:()=>u});var e=t(5706),r=t(1749),o=function(){var c=function(f,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(g[_]=y[_])},c(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");c(f,h);function g(){this.constructor=f}f.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}(),s=function(c){o(f,c);function f(h,g,y){h===void 0&&(h={}),y===void 0&&(y=!1);var _=c.call(this,h)||this;return _.itemsView="",_.itemType="type",_.reuseView=!1,_.config=g||h.config||{},y&&_.listenTo(_.collection,"add",_.addTo),_.items=[],_}return f.prototype.addTo=function(h){this.add(h)},f.prototype.itemViewNotFound=function(h){var g=this,y=g.config,_=g.ns,b=y.em,x="".concat(_?"[".concat(_,"]: "):"","'").concat(h,"' type not found");b&&b.logWarning(x)},f.prototype.add=function(h,g){var y=this,_=y.config,b=y.reuseView,x=y.items,T=this.itemsView||{},I=["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],z=g||null,F=this.itemView,W=h.get(this.itemType),ct;T[W]?F=T[W]:W&&!T[W]&&!(0,e.includes)(I,W)&&this.itemViewNotFound(W),h.view&&b?ct=h.view:ct=new F({model:h,config:_},_),x&&x.push(ct);var _t=ct.render().el;z?z.appendChild(_t):this.$el.append(_t)},f.prototype.render=function(){var h=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(g){this.add(g,h)},this),this.$el.append(h),this.onRender(),this},f.prototype.onRender=function(){},f.prototype.onRemoveBefore=function(h,g){},f.prototype.onRemove=function(h,g){},f.prototype.remove=function(h){h===void 0&&(h={});var g=this.items;return this.onRemoveBefore(g,h),this.clearItems(),c.prototype.remove.call(this),this.onRemove(g,h),this},f.prototype.clearItems=function(){this.items},f}(r.Ss);const u=s;s.prototype.itemView=""},5633:(a,n,t)=>{t.d(n,{A:()=>f});var e=t(5706),r=t(2097),o=function(){return o=Object.assign||function(h){for(var g,y=1,_=arguments.length;y<_;y++){g=arguments[y];for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(h[b]=g[b])}return h},o.apply(this,arguments)},s=function(){return{x:0,y:0}},u=["x","y"],c=function(){function h(g){return g===void 0&&(g={}),this.opts={snapOffset:5,scale:1},(0,e.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(g),this.delta=s(),this.lastScroll=s(),this.lastScrollDiff=s(),this.startPointer=s(),this.startPosition=s(),this.globScrollDiff=s(),this.currentPointer=s(),this.position=s(),this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return h.prototype.setOptions=function(g){g===void 0&&(g={}),this.opts=o(o({},this.opts),g)},h.prototype.toggleDrag=function(g){var y=this.getDocumentEl(),_=this.getContainerEl(),b=this.getWindowEl(),x=g?"on":"off",T={on:r.on,off:r.AU};T[x](_,"mousemove dragover",this.drag),T[x](y,"mouseup dragend touchend",this.stop),T[x](y,"keydown",this.keyHandle),T[x](b,"scroll",this.handleScroll)},h.prototype.handleScroll=function(){var g=this,y=g.lastScroll,_=g.delta,b=this.getScrollInfo(),x={x:b.x-y.x,y:b.y-y.y};this.move(_.x+x.x,_.y+x.y),this.lastScrollDiff=x},h.prototype.start=function(g){var y=this.opts,_=y.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(g),this.guidesStatic=(0,e.result)(y,"guidesStatic")||[],this.guidesTarget=(0,e.result)(y,"guidesTarget")||[],(0,e.isFunction)(_)&&_(g,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff=s(),this.globScrollDiff=s(),this.drag(g)},h.prototype.drag=function(g){var y=this,_=this,b=_.opts,x=_.lastScrollDiff,T=_.globScrollDiff,I=b.onDrag,z=this.startPointer,F=this.getPointerPos(g),W={x:T.x+x.x,y:T.y+x.y};this.globScrollDiff=W;var ct={x:F.x-z.x+W.x,y:F.y-z.y+W.y};this.lastScrollDiff=s();var _t=this.lockedAxis;g.shiftKey?_t=!_t&&this.detectAxisLock(ct.x,ct.y):_t=null,_t==="x"?ct.x=z.x:_t==="y"&&(ct.y=z.y);var xt=function(U){u.forEach(function(B){return U[B]=U[B]*(0,e.result)(b,"scale")}),y.delta=U,y.move(U.x,U.y),(0,e.isFunction)(I)&&I(g,y)},ut=o({},ct);if(this.currentPointer=F,this.lockedAxis=_t,this.lastScroll=this.getScrollInfo(),xt(ct),this.guidesTarget.length){var q=this.snapGuides(ut),nt=q.newDelta,H=q.trgX,V=q.trgY;(H||V)&&xt(nt)}g.which===0&&this.stop(g)},h.prototype.snapGuides=function(g){var y=this,_=g,b=this,x=b.trgX,T=b.trgY;return this.guidesTarget.forEach(function(I){I.x&&y.trgX||I.y&&y.trgY||(I.active=!1,y.guidesStatic.forEach(function(z){if(!(I.y&&z.x||I.x&&z.y)){var F=I.y&&z.y,W=F?"y":"x",ct=I[W],_t=z[W],xt=g[W],ut=F?T:x;if(y.isPointIn(ct,_t)&&(0,e.isUndefined)(ut)){var q=xt-(ct-_t);y.setGuideLock(I,q)}}}))}),x=this.trgX,T=this.trgY,u.forEach(function(I){var z=I.toUpperCase(),F=y["trg".concat(z)];F&&!y.isPointIn(g[I],F.lock)&&(y.setGuideLock(F,null),F=null),F&&!(0,e.isUndefined)(F.lock)&&(_[I]=F.lock)}),{newDelta:_,trgX:this.trgX,trgY:this.trgY}},h.prototype.isPointIn=function(g,y,_){var b=_===void 0?{}:_,x=b.offset,T=x||this.opts.snapOffset||0;return g>=y&&g<=y+T||g<=y&&g>=y-T},h.prototype.setGuideLock=function(g,y){var _=(0,e.isUndefined)(g.x)?"Y":"X",b="trg".concat(_);return y!==null?(g.active=!0,g.lock=y,this[b]=g):(delete g.active,delete g.lock,delete this[b]),g},h.prototype.stop=function(g,y){y===void 0&&(y={});var _=this.delta,b=!!y.cancel,x=b?0:_.x,T=b?0:_.y;this.toggleDrag(),this.lockedAxis=null,this.move(x,T,!0);var I=this.opts.onEnd;(0,e.isFunction)(I)&&I(g,this,{cancelled:b})},h.prototype.keyHandle=function(g){(0,r.v$)(g)&&this.stop(g,{cancel:!0})},h.prototype.move=function(g,y,_){var b=this,x=b.el,T=b.opts,I=this.startPosition;if(I){var z=T.setPosition,F=I.x+g,W=I.y+y;this.position={x:F,y:W,end:_},(0,e.isFunction)(z)&&z(this.position),x&&(x.style.left="".concat(F,"px"),x.style.top="".concat(W,"px"))}},h.prototype.getContainerEl=function(){var g=this.opts.container;return g?[g]:this.getDocumentEl()},h.prototype.getWindowEl=function(){var g=this.getContainerEl();return g.map(function(y){var _=y.ownerDocument||y;return _.defaultView||_.parentWindow})},h.prototype.getDocumentEl=function(g){var y=this.opts.doc;if(g=g||this.el,!this.docs.length){var _=[document];g&&_.push(g.ownerDocument),y&&_.push(y),this.docs=_}return this.docs},h.prototype.getPointerPos=function(g){var y=this.opts.getPointerPosition,_=(0,r.G2)(g);return y?y(g):{x:_.clientX,y:_.clientY}},h.prototype.getStartPosition=function(){var g=this,y=g.el,_=g.opts,b=_.getPosition,x=s();return(0,e.isFunction)(b)?x=b():y&&(x={x:parseFloat(y.style.left),y:parseFloat(y.style.top)}),x},h.prototype.getScrollInfo=function(){var g=this.opts.doc,y=g&&g.body;return{y:y?y.scrollTop:0,x:y?y.scrollLeft:0}},h.prototype.detectAxisLock=function(g,y){var _=g,b=y,x=Math.abs(_),T=Math.abs(b);if(b>=x||b<=-x)return"x";if(_>T||_<-T)return"y"},h}();const f=c},6411:(a,n,t)=>{t.r(n),t.d(n,{default:()=>fr});var e=typeof document<"u"?document:null,r=typeof window<"u"?window:null,o=Array.prototype,s=o.filter,u=o.indexOf,c=o.map,f=o.push,h=o.reverse,g=o.slice,y=o.splice,_=/^#[\w-]*$/,b=/^\.[\w-]*$/,x=/<.+>/,T=/^\w+$/;function I(j,J){return J===void 0&&(J=e),b.test(j)?J.getElementsByClassName(j.slice(1)):T.test(j)?J.getElementsByTagName(j):J.querySelectorAll(j)}function z(j,J){if(J===void 0&&(J=e),!!j){if(j.__cash)return j;var st=j;if(U(j)){if(J.__cash&&(J=J[0]),st=_.test(j)?J.getElementById(j.slice(1)):x.test(j)?Se(j):I(j,J),!st)return}else if(V(j))return this.ready(j);(st.nodeType||st===r)&&(st=[st]),this.length=st.length;for(var Tt=0,Bt=this.length;Tt<Bt;Tt++)this[Tt]=st[Tt]}}function F(j,J){return new z(j,J)}var W=F.fn=F.prototype=z.prototype={constructor:F,__cash:!0,length:0,splice:y};W.get=function(j){return j===void 0?g.call(this):this[j<0?j+this.length:j]},W.eq=function(j){return F(this.get(j))},W.first=function(){return this.eq(0)},W.last=function(){return this.eq(-1)},W.map=function(j){return F(c.call(this,function(J,st){return j.call(J,st,J)}))},W.slice=function(){return F(g.apply(this,arguments))};var ct=/(?:^\w|[A-Z]|\b\w)/g,_t=/[\s-_]+/g;function xt(j){return j.replace(ct,function(J,st){return J[st?"toUpperCase":"toLowerCase"]()}).replace(_t,"")}F.camelCase=xt;function ut(j,J){for(var st=0,Tt=j.length;st<Tt&&J.call(j[st],j[st],st,j)!==!1;st++);}F.each=ut,W.each=function(j){return ut(this,function(J,st){return j.call(J,st,J)}),this},W.removeProp=function(j){return this.each(function(J,st){delete st[j]})};function q(j){j===void 0&&(j=this);for(var J=arguments,st=J.length,Tt=st<2?0:1;Tt<st;Tt++)for(var Bt in J[Tt])j[Bt]=J[Tt][Bt];return j}F.extend=W.extend=q;var nt=1;F.guid=nt;function H(j,J){var st=j&&(j.matches||j.webkitMatchesSelector||j.mozMatchesSelector||j.msMatchesSelector||j.oMatchesSelector);return!!st&&st.call(j,J)}F.matches=H;function V(j){return typeof j=="function"}F.isFunction=V;function U(j){return typeof j=="string"}F.isString=U;function B(j){return!isNaN(parseFloat(j))&&isFinite(j)}F.isNumeric=B;var tt=Array.isArray;F.isArray=tt,W.prop=function(j,J){if(j){if(U(j))return arguments.length<2?this[0]&&this[0][j]:this.each(function(Tt,Bt){Bt[j]=J});for(var st in j)this.prop(st,j[st]);return this}};function A(j){return U(j)?function(J,st){return H(st,j)}:j.__cash?function(J,st){return j.is(st)}:function(J,st,Tt){return st===Tt}}W.filter=function(j){if(!j)return F();var J=V(j)?j:A(j);return F(s.call(this,function(st,Tt){return J.call(st,Tt,st,j)}))};var yt=/\S+/g;function gt(j){return U(j)?j.match(yt)||[]:[]}W.hasClass=function(j){var J=gt(j),st=!1;return J.length&&this.each(function(Tt,Bt){return st=Bt.classList.contains(J[0]),!st}),st},W.removeAttr=function(j){var J=gt(j);return J.length?this.each(function(st,Tt){ut(J,function(Bt){Tt.removeAttribute(Bt)})}):this},W.attr=function(j,J){if(j){if(U(j)){if(arguments.length<2){if(!this[0])return;var st=this[0].getAttribute(j);return st===null?void 0:st}return J===null?this.removeAttr(j):this.each(function(Bt,ce){ce.setAttribute(j,J)})}for(var Tt in j)this.attr(Tt,j[Tt]);return this}},W.toggleClass=function(j,J){var st=gt(j),Tt=J!==void 0;return st.length?this.each(function(Bt,ce){ut(st,function(_e){Tt?J?ce.classList.add(_e):ce.classList.remove(_e):ce.classList.toggle(_e)})}):this},W.addClass=function(j){return this.toggleClass(j,!0)},W.removeClass=function(j){return arguments.length?this.toggleClass(j,!1):this.attr("class","")};function Mt(j){return j.filter(function(J,st,Tt){return Tt.indexOf(J)===st})}F.unique=Mt,W.add=function(j,J){return F(Mt(this.get().concat(F(j,J).get())))};function qt(j,J,st){if(j.nodeType===1){var Tt=r.getComputedStyle(j,null);return J?st?Tt.getPropertyValue(J):Tt[J]:Tt}}function ft(j,J){return parseInt(qt(j,J),10)||0}var At=/^--/;function Ht(j){return At.test(j)}var Et={},Qt=e&&e.createElement("div"),re=Qt?Qt.style:{},$t=["webkit","moz","ms","o"];function zt(j,J){if(J===void 0&&(J=Ht(j)),J)return j;if(!Et[j]){var st=xt(j),Tt=""+st.charAt(0).toUpperCase()+st.slice(1),Bt=(st+" "+$t.join(Tt+" ")+Tt).split(" ");ut(Bt,function(ce){if(ce in re)return Et[j]=ce,!1})}return Et[j]}F.prefixedProp=zt;var se={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function me(j,J,st){return st===void 0&&(st=Ht(j)),!st&&!se[j]&&B(J)?J+"px":J}W.css=function(j,J){if(U(j)){var st=Ht(j);return j=zt(j,st),arguments.length<2?this[0]&&qt(this[0],j,st):j?(J=me(j,J,st),this.each(function(Bt,ce){ce.nodeType===1&&(st?ce.style.setProperty(j,J):ce.style[j]=J)})):this}for(var Tt in j)this.css(Tt,j[Tt]);return this};var rt="__cashData",bt=/^data-(.*)/;F.hasData=function(j){return rt in j};function Zt(j){return j[rt]=j[rt]||{}}function Rt(j,J){var st=Zt(j);if(J){if(!(J in st)){var Tt=j.dataset?j.dataset[J]||j.dataset[xt(J)]:F(j).attr("data-"+J);if(Tt!==void 0){try{Tt=JSON.parse(Tt)}catch{}st[J]=Tt}}return st[J]}return st}function oe(j,J){J===void 0?delete j[rt]:delete Zt(j)[J]}function he(j,J,st){Zt(j)[J]=st}W.data=function(j,J){var st=this;if(!j)return this[0]?(ut(this[0].attributes,function(Bt){var ce=Bt.name.match(bt);ce&&st.data(ce[1])}),Rt(this[0])):void 0;if(U(j))return J===void 0?this[0]&&Rt(this[0],j):this.each(function(Bt,ce){return he(ce,j,J)});for(var Tt in j)this.data(Tt,j[Tt]);return this},W.removeData=function(j){return this.each(function(J,st){return oe(st,j)})};function ie(j,J){return ft(j,"border"+(J?"Left":"Top")+"Width")+ft(j,"padding"+(J?"Left":"Top"))+ft(j,"padding"+(J?"Right":"Bottom"))+ft(j,"border"+(J?"Right":"Bottom")+"Width")}ut(["Width","Height"],function(j){W["inner"+j]=function(){if(this[0])return this[0]===r?r["inner"+j]:this[0]["client"+j]}}),ut(["width","height"],function(j,J){W[j]=function(st){return this[0]?arguments.length?(st=parseInt(st,10),this.each(function(Tt,Bt){if(Bt.nodeType===1){var ce=qt(Bt,"boxSizing");Bt.style[j]=me(j,st+(ce==="border-box"?ie(Bt,!J):0))}})):this[0]===r?this[0][xt("outer-"+j)]:this[0].getBoundingClientRect()[j]-ie(this[0],!J):st===void 0?void 0:this}}),ut(["Width","Height"],function(j,J){W["outer"+j]=function(st){if(this[0])return this[0]===r?r["outer"+j]:this[0]["offset"+j]+(st?ft(this[0],"margin"+(J?"Top":"Left"))+ft(this[0],"margin"+(J?"Bottom":"Right")):0)}});function P(j,J){for(var st=0,Tt=J.length;st<Tt;st++)if(j.indexOf(J[st])<0)return!1;return!0}function N(j,J,st){ut(j[st],function(Tt){Tt[0];var Bt=Tt[1];J.removeEventListener(st,Bt)}),delete j[st]}var $="__cashEvents",at=".";function mt(j){return j[$]=j[$]||{}}function K(j,J,st,Tt){Tt.guid=Tt.guid||nt++;var Bt=mt(j);Bt[J]=Bt[J]||[],Bt[J].push([st,Tt]),j.addEventListener(J,Tt)}function dt(j){var J=j.split(at);return[J[0],J.slice(1).sort()]}function it(j,J,st,Tt){var Bt=mt(j);if(J){var ce=Bt[J];if(!ce)return;Tt&&(Tt.guid=Tt.guid||nt++),Bt[J]=ce.filter(function(_e){var Be=_e[0],tr=_e[1];if(Tt&&tr.guid!==Tt.guid||!P(Be,st))return!0;j.removeEventListener(J,tr)})}else if(!st||!st.length)for(J in Bt)N(Bt,j,J);else for(J in Bt)it(j,J,st,Tt)}W.off=function(j,J){var st=this;return j===void 0?this.each(function(Tt,Bt){return it(Bt)}):ut(gt(j),function(Tt){var Bt=dt(Tt),ce=Bt[0],_e=Bt[1];st.each(function(Be,tr){return it(tr,ce,_e,J)})}),this},W.on=function(j,J,st,Tt){var Bt=this;if(!U(j)){for(var ce in j)this.on(ce,J,j[ce]);return this}return V(J)&&(st=J,J=!1),ut(gt(j),function(_e){var Be=dt(_e),tr=Be[0],Ue=Be[1];Bt.each(function(pn,We){var Dr=function Jr(Le){if(!(Le.namespace&&!P(Ue,Le.namespace.split(at)))){var er=We;if(J){for(var ke=Le.target;!H(ke,J);)if(ke===We||(ke=ke.parentNode,!ke))return;er=ke}Le.namespace=Le.namespace||"";var Er=st.call(er,Le,Le.data);Tt&&it(We,tr,Ue,Jr),Er===!1&&(Le.preventDefault(),Le.stopPropagation())}};Dr.guid=st.guid=st.guid||nt++,K(We,tr,Ue,Dr)})}),this},W.one=function(j,J,st){return this.on(j,J,st,!0)},W.ready=function(j){var J=function(){return j(F)};return e.readyState!=="loading"?setTimeout(J):e.addEventListener("DOMContentLoaded",J),this},W.trigger=function(j,J){var st=j;if(U(j)){var Tt=dt(j),Bt=Tt[0],ce=Tt[1];st=e.createEvent("HTMLEvents"),st.initEvent(Bt,!0,!0),st.namespace=ce.join(at)}return st.data=J,this.each(function(_e,Be){Be.dispatchEvent(st)})};function ne(j){var J=[];return ut(j.options,function(st){st.selected&&!st.disabled&&!st.parentNode.disabled&&J.push(st.value)}),J}function we(j){return j.selectedIndex<0?null:j.options[j.selectedIndex].value}var ge=/select-one/i,R=/select-multiple/i;function et(j){var J=j.type;return ge.test(J)?we(j):R.test(J)?ne(j):j.value}var D=/%20/g;function St(j,J){return"&"+encodeURIComponent(j)+"="+encodeURIComponent(J).replace(D,"+")}var vt=/file|reset|submit|button|image/i,Lt=/radio|checkbox/i;W.serialize=function(){var j="";return this.each(function(J,st){ut(st.elements||[st],function(Tt){if(!(Tt.disabled||!Tt.name||Tt.tagName==="FIELDSET")&&!vt.test(Tt.type)&&!(Lt.test(Tt.type)&&!Tt.checked)){var Bt=et(Tt);if(Bt!==void 0){var ce=tt(Bt)?Bt:[Bt];ut(ce,function(_e){j+=St(Tt.name,_e)})}}})}),j.substr(1)},W.val=function(j){return j===void 0?this[0]&&et(this[0]):this.each(function(J,st){var Tt=R.test(st.type),Bt=j===null?Tt?[]:"":j;Tt&&tt(Bt)?ut(st.options,function(ce){ce.selected=Bt.indexOf(ce.value)>=0}):st.value=Bt})},W.clone=function(){return this.map(function(j,J){return J.cloneNode(!0)})},W.detach=function(){return this.each(function(j,J){J.parentNode&&J.parentNode.removeChild(J)})};var Xt=/^\s*<(\w+)[^>]*>/,Yt=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/,Ut;function ae(){if(!Ut){var j=e.createElement("table"),J=e.createElement("tr");Ut={"*":e.createElement("div"),tr:e.createElement("tbody"),td:J,th:J,thead:j,tbody:j,tfoot:j}}}function Se(j){if(ae(),!U(j))return[];if(Yt.test(j))return[e.createElement(RegExp.$1)];var J=Xt.test(j)&&RegExp.$1,st=Ut[J]||Ut["*"];return st.innerHTML=j,F(st.childNodes).detach().get()}F.parseHTML=Se,W.empty=function(){var j=this[0];if(j)for(;j.firstChild;)j.removeChild(j.firstChild);return this};function Ae(j,J,st){st?j.insertBefore(J,j.childNodes[0]):j.appendChild(J)}function Te(j,J,st){if(J!==void 0){var Tt=U(J);!Tt&&J.length?ut(J,function(Bt){return Te(j,Bt,st)}):ut(j,Tt?function(Bt){Bt.insertAdjacentHTML(st?"afterbegin":"beforeend",J)}:function(Bt,ce){return Ae(Bt,ce?J.cloneNode(!0):J,st)})}}W.append=function(){var j=this;return ut(arguments,function(J){Te(j,J)}),this},W.appendTo=function(j){return Te(F(j),this),this},W.html=function(j){if(j===void 0)return this[0]&&this[0].innerHTML;var J=j.nodeType?j[0].outerHTML:j;return this.each(function(st,Tt){Tt.innerHTML=J})},W.insertAfter=function(j){var J=this;return F(j).each(function(st,Tt){var Bt=Tt.parentNode;J.each(function(ce,_e){Bt.insertBefore(st?_e.cloneNode(!0):_e,Tt.nextSibling)})}),this},W.after=function(){var j=this;return ut(h.apply(arguments),function(J){h.apply(F(J).slice()).insertAfter(j)}),this},W.insertBefore=function(j){var J=this;return F(j).each(function(st,Tt){var Bt=Tt.parentNode;J.each(function(ce,_e){Bt.insertBefore(st?_e.cloneNode(!0):_e,Tt)})}),this},W.before=function(){var j=this;return ut(arguments,function(J){F(J).insertBefore(j)}),this},W.prepend=function(){var j=this;return ut(arguments,function(J){Te(j,J,!0)}),this},W.prependTo=function(j){return Te(F(j),h.apply(this.slice()),!0),this},W.remove=function(){return this.detach().off()},W.replaceWith=function(j){var J=this;return this.each(function(st,Tt){var Bt=Tt.parentNode;if(Bt){var ce=st?F(j).clone():F(j);if(!ce[0])return J.remove(),!1;Bt.replaceChild(ce[0],Tt),F(ce[0]).after(ce.slice(1))}})},W.replaceAll=function(j){return F(j).replaceWith(this),this},W.text=function(j){return j===void 0?this[0]?this[0].textContent:"":this.each(function(J,st){st.textContent=j})};var Ye=e&&e.documentElement;W.offset=function(){var j=this[0];if(j){var J=j.getBoundingClientRect();return{top:J.top+r.pageYOffset-Ye.clientTop,left:J.left+r.pageXOffset-Ye.clientLeft}}},W.offsetParent=function(){return F(this[0]&&this[0].offsetParent)},W.position=function(){var j=this[0];if(j)return{left:j.offsetLeft,top:j.offsetTop}},W.children=function(j){var J=[];return this.each(function(st,Tt){f.apply(J,Tt.children)}),J=F(Mt(J)),j?J.filter(function(st,Tt){return H(Tt,j)}):J},W.contents=function(){var j=[];return this.each(function(J,st){f.apply(j,st.tagName==="IFRAME"?[st.contentDocument]:st.childNodes)}),F(j.length&&Mt(j))},W.find=function(j){for(var J=[],st=0,Tt=this.length;st<Tt;st++){var Bt=I(j,this[st]);Bt.length&&f.apply(J,Bt)}return F(J.length&&Mt(J))},W.has=function(j){var J=U(j)?function(st,Tt){return!!I(j,Tt).length}:function(st,Tt){return Tt.contains(j)};return this.filter(J)},W.is=function(j){if(!j||!this[0])return!1;var J=A(j),st=!1;return this.each(function(Tt,Bt){return st=J(Tt,Bt,j),!st}),st},W.next=function(){return F(this[0]&&this[0].nextElementSibling)},W.not=function(j){if(!j||!this[0])return this;var J=A(j);return this.filter(function(st,Tt){return!J(st,Tt,j)})},W.parent=function(){var j=[];return this.each(function(J,st){st&&st.parentNode&&j.push(st.parentNode)}),F(Mt(j))},W.index=function(j){var J=j?F(j)[0]:this[0],st=j?this:F(J).parent().children();return u.call(st,J)},W.closest=function(j){return!j||!this[0]?F():this.is(j)?this.filter(j):this.parent().closest(j)},W.parents=function(j){var J=[],st;return this.each(function(Tt,Bt){for(st=Bt;st&&st.parentNode&&st!==e.body.parentNode;)st=st.parentNode,(!j||j&&H(st,j))&&J.push(st)}),F(Mt(J))},W.prev=function(){return F(this[0]&&this[0].previousElementSibling)},W.siblings=function(){var j=this[0];return this.parent().children().filter(function(J,st){return st!==j})};const fr=F},2097:(a,n,t)=>{t.d(n,{AU:()=>qt,BC:()=>T,C8:()=>ut,Ch:()=>H,Ci:()=>B,D8:()=>u,G2:()=>V,GW:()=>xt,GZ:()=>z,I6:()=>g,LJ:()=>yt,Sc:()=>x,X6:()=>y,Xy:()=>q,YZ:()=>f,ZQ:()=>c,a_:()=>I,af:()=>W,bG:()=>b,cx:()=>h,ir:()=>ct,kk:()=>gt,on:()=>Mt,rp:()=>A,v$:()=>U,yL:()=>F,zN:()=>_});var e=t(5706),r=function(ft,At,Ht){if(Ht||arguments.length===2)for(var Et=0,Qt=At.length,re;Et<Qt;Et++)(re||!(Et in At))&&(re||(re=Array.prototype.slice.call(At,0,Et)),re[Et]=At[Et]);return ft.concat(re||Array.prototype.slice.call(At))},o="tag",s="attributes",u="transitionend oTransitionEnd transitionend webkitTransitionEnd",c=function(ft){return(ft==null?void 0:ft.nodeType)===Node.DOCUMENT_NODE},f=function(ft){var At=ft&&ft.parentNode;At&&At.removeChild(ft)};function h(){for(var ft=[],At=0;At<arguments.length;At++)ft[At]=arguments[At];var Ht=Array.isArray(ft[0])?ft[0]:r([],ft,!0);return Ht.filter(Boolean).join(" ")}var g=function(ft,At){return ft.querySelectorAll(At)},y=function(ft,At){return At===void 0&&(At={}),ft&&ft.setAttribute&&(0,e.each)(At,function(Ht,Et){return ft.setAttribute(Et,Ht)})},_=function(ft){var At;return ft&&!!(ft.offsetWidth||ft.offsetHeight||!((At=ft.getClientRects)===null||At===void 0)&&At.call(ft).length)},b=function(ft,At){var Ht;(Ht=ft.parentNode)===null||Ht===void 0||Ht.replaceChild(At,ft)},x=function(ft,At,Ht){var Et=ft.childNodes,Qt=Et.length,re=(0,e.isUndefined)(Ht)?Qt:Ht;(0,e.isString)(At)&&(ft.insertAdjacentHTML("beforeEnd",At),At=ft.lastChild,ft.removeChild(At)),re>=Qt?ft.appendChild(At):ft.insertBefore(At,Et[re])},T=function(ft,At){return x(ft,At)},I=function(ft,At,Ht){At===void 0&&(At={});var Et=document.createElement(ft);return At&&(0,e.each)(At,function(Qt,re){return Et.setAttribute(re,Qt)}),Ht&&((0,e.isString)(Ht)?Et.innerHTML=Ht:Et.appendChild(Ht)),Et},z=function(ft){return document.createTextNode(ft)},F=function(ft,At){var Ht,Et=ft.type;try{Ht=new window[At](Et,ft)}catch{Ht=document.createEvent(At),Ht.initEvent(Et,!0,!0)}return Ht._parentEvent=ft,Et.indexOf("key")===0&&(Ht.keyCodeVal=ft.keyCode,["keyCode","which"].forEach(function(Qt){Object.defineProperty(Ht,Qt,{get:function(){return this.keyCodeVal}})})),Ht},W=function(ft,At){At===void 0&&(At=[]);var Ht=Array.isArray(At)?At:[At];Ht.forEach(function(Et){var Qt=Et[o]||"div",re=Et[s]||{},$t=document.createElement(Qt);(0,e.each)(re,function(zt,se){$t.setAttribute(se,zt)}),ft.appendChild($t)})},ct=function(ft){return(ft==null?void 0:ft.nodeType)===Node.TEXT_NODE},_t=function(ft){return(ft==null?void 0:ft.nodeType)===Node.COMMENT_NODE},xt=function(ft){return ft&&!ct(ft)&&!_t(ft)},ut=function(ft){var At={top:0,left:0,width:0,height:0};if(!ft)return At;var Ht;if(ct(ft)){var Et=document.createRange();Et.selectNode(ft),Ht=Et.getBoundingClientRect(),Et.detach()}return Ht||(ft.getBoundingClientRect?ft.getBoundingClientRect():At)},q=function(ft){var At=(ft==null?void 0:ft.ownerDocument)||document,Ht=At.documentElement,Et=At.defaultView||window;return{x:(Et.pageXOffset||Ht.scrollLeft||0)-(Ht.clientLeft||0),y:(Et.pageYOffset||Ht.scrollTop||0)-(Ht.clientTop||0)}},nt=function(ft){return ft.which||ft.keyCode},H=function(ft){return String.fromCharCode(nt(ft))},V=function(ft){return ft.touches&&ft.touches[0]?ft.touches[0]:ft},U=function(ft){return nt(ft)===27},B=function(ft){return nt(ft)===13},tt=function(ft){return ft.ctrlKey},A=function(ft){return tt(ft)||ft.metaKey},yt=function(ft){if(!ft)return"";var At=ft.name,Ht=ft.publicId,Et=ft.systemId,Qt=Ht?' PUBLIC "'.concat(Ht,'"'):"",re=!Ht&&Et?' SYSTEM "'.concat(Et,'"'):"";return"<!DOCTYPE ".concat(At).concat(Qt).concat(re,">")},gt=function(ft){ft===void 0&&(ft={});var At=[];return(0,e.each)(ft,function(Ht,Et){return At.push("".concat(Et,'="').concat(Ht,'"'))}),At.join(" ")},Mt=function(ft,At,Ht,Et){var Qt=At.split(/\s+/),re=(0,e.isArray)(ft)?ft:[ft];Qt.forEach(function($t){re.forEach(function(zt){return zt==null?void 0:zt.addEventListener($t,Ht,Et)})})},qt=function(ft,At,Ht,Et){var Qt=At.split(/\s+/),re=(0,e.isArray)(ft)?ft:[ft];Qt.forEach(function($t){re.forEach(function(zt){return zt==null?void 0:zt.removeEventListener($t,Ht,Et)})})}},9195:(a,n,t)=>{t.r(n),t.d(n,{appendStyles:()=>xt,buildBase64UrlFromSvg:()=>me,camelCase:()=>H,capitalize:()=>At,createId:()=>se,deepMerge:()=>gt,escape:()=>A,escapeNodeContent:()=>yt,find:()=>tt,get:()=>y,getComponentModel:()=>$t,getComponentView:()=>re,getElement:()=>B,getGlobal:()=>z,getModel:()=>Mt,getUiClass:()=>_t,getUnitFromValue:()=>q,getViewEl:()=>Et,hasDnd:()=>U,hasWin:()=>I,isBultInMethod:()=>_,isComponent:()=>Qt,isDef:()=>T,isEmptyObj:()=>ft,isObject:()=>qt,isRule:()=>Ht,matches:()=>ct,normalizeFloat:()=>V,normalizeKey:()=>b,setViewEl:()=>zt,shallowDiff:()=>ut,stringToPath:()=>h,toLowerCase:()=>F,upFirst:()=>nt,wait:()=>x});var e=t(5706),r=t(2097),o=function(){return o=Object.assign||function(rt){for(var bt,Zt=1,Rt=arguments.length;Zt<Rt;Zt++){bt=arguments[Zt];for(var oe in bt)Object.prototype.hasOwnProperty.call(bt,oe)&&(rt[oe]=bt[oe])}return rt},o.apply(this,arguments)},s=function(rt,bt,Zt){if(Zt||arguments.length===2)for(var Rt=0,oe=bt.length,he;Rt<oe;Rt++)(he||!(Rt in bt))&&(he||(he=Array.prototype.slice.call(bt,0,Rt)),he[Rt]=bt[Rt]);return rt.concat(he||Array.prototype.slice.call(bt))},u={},c=/\\(\\)?/g,f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=function(rt){var bt=[];return rt.charCodeAt(0)===46&&bt.push(""),rt.replace(f,function(Zt,Rt,oe,he){return bt.push(oe?he.replace(c,"$1"):Rt||Zt),""}),bt};function g(rt,bt){return(0,e.isArray)(rt)?rt:bt.hasOwnProperty(rt)?[rt]:h(rt)}var y=function(rt,bt,Zt){for(var Rt,oe=g(bt,rt),he=oe.length,ie=0;rt!=null&&ie<he;)rt=rt["".concat(oe[ie++])];return(Rt=ie&&ie==he?rt:void 0)!==null&&Rt!==void 0?Rt:Zt},_=function(rt){return(0,e.isFunction)(u[rt])},b=function(rt){return _(rt)?"_".concat(rt):rt},x=function(rt){return rt===void 0&&(rt=0),new Promise(function(bt){return setTimeout(bt,rt)})},T=function(rt){return typeof rt<"u"},I=function(){return typeof window<"u"},z=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:t.g},F=function(rt){return(rt||"").toLowerCase()},W=I()?window.Element.prototype:{},ct=W.matches||W.webkitMatchesSelector||W.mozMatchesSelector||W.msMatchesSelector,_t=function(rt,bt){var Zt=rt.getConfig(),Rt=Zt.stylePrefix,oe=Zt.customUI;return[oe&&"".concat(Rt,"cui"),bt].filter(function(he){return he}).join(" ")},xt=function(rt,bt){bt===void 0&&(bt={});var Zt=(0,e.isArray)(rt)?s([],rt,!0):[rt];if(Zt.length){var Rt=Zt.shift();if(Rt&&(!bt.unique||!document.querySelector('link[href="'.concat(Rt,'"]')))){var oe=document.head,he=document.createElement("link");he.href=Rt,he.rel="stylesheet",bt.prepand?oe.insertBefore(he,oe.firstChild):oe.appendChild(he)}xt(Zt)}},ut=function(rt,bt){var Zt={},Rt=(0,e.keys)(bt);for(var oe in rt)if(rt.hasOwnProperty(oe)){var he=rt[oe],ie=bt[oe];Rt.indexOf(oe)>=0?he!==ie&&(Zt[oe]=ie):Zt[oe]=null}for(var oe in bt)bt.hasOwnProperty(oe)&&(0,e.isUndefined)(rt[oe])&&(Zt[oe]=bt[oe]);return Zt},q=function(rt){return rt.replace(parseFloat(rt),"")},nt=function(rt){return rt[0].toUpperCase()+rt.toLowerCase().slice(1)},H=function(rt){return rt.replace(/-./g,function(bt){return bt[1].toUpperCase()})},V=function(rt,bt,Zt){bt===void 0&&(bt=1),Zt===void 0&&(Zt=0);var Rt=0;if(isNaN(rt))return Zt;if(rt=parseFloat(rt),Math.floor(rt)!==rt){var oe=bt.toString().split(".")[1];Rt=oe?oe.length:0}return Rt?parseFloat(rt.toFixed(Rt)):rt},U=function(rt){return"draggable"in document.createElement("i")&&(rt?rt.config.nativeDnD:!0)},B=function(rt){if((0,e.isElement)(rt)||(0,r.ir)(rt))return rt;if(rt&&rt.getEl)return rt.getEl()},tt=function(rt,bt){var Zt=null;return rt.some(function(Rt,oe){return bt(Rt,oe,rt)?(Zt=Rt,1):0}),Zt},A=function(rt){return rt===void 0&&(rt=""),"".concat(rt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},yt=function(rt){return rt===void 0&&(rt=""),"".concat(rt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},gt=function(){for(var rt=[],bt=0;bt<arguments.length;bt++)rt[bt]=arguments[bt];for(var Zt=o({},rt[0]),Rt=1;Rt<rt.length;Rt++){var oe=o({},rt[Rt]);for(var he in oe){var ie=Zt[he],P=oe[he];qt(ie)&&qt(P)?Zt[he]=gt(ie,P):Zt[he]=P}}return Zt},Mt=function(rt,bt){var Zt;return!bt&&rt&&rt.__cashData?Zt=rt.__cashData.model:bt&&(0,e.isElement)(rt)&&(Zt=bt(rt).data("model")),Zt},qt=function(rt){return rt&&!Array.isArray(rt)&&typeof rt=="object"},ft=function(rt){return Object.keys(rt).length<=0},At=function(rt){return rt===void 0&&(rt=""),rt&&rt.charAt(0).toUpperCase()+rt.substring(1)},Ht=function(rt){return rt&&rt.toCSS},Et=function(rt){return rt==null?void 0:rt.__gjsv},Qt=function(rt){return!!(rt!=null&&rt.toHTML)},re=function(rt){return Et(rt)},$t=function(rt){var bt;return(bt=re(rt))===null||bt===void 0?void 0:bt.model},zt=function(rt,bt){rt.__gjsv=bt},se=function(rt){rt===void 0&&(rt=16);for(var bt="",Zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Rt=Zt.length,oe=0;oe<rt;oe++)bt+=Zt.charAt(Math.floor(Math.random()*Rt));return bt},me=function(rt){if(rt&&rt.substr(0,4)==="<svg"){var bt="";return I()?bt=window.btoa(rt):typeof Buffer<"u"&&(bt=Buffer.from(rt,"utf8").toString("base64")),bt?"data:image/svg+xml;base64,".concat(bt):rt}return rt}},3253:(a,n,t)=>{t.d(n,{h:()=>o});var e=t(3161),r=function(){var u=function(c,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},u(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");u(c,f);function h(){this.constructor=c}c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}}(),o=function(u){r(c,u);function c(){var f=u!==null&&u.apply(this,arguments)||this;return f.displayCache=new Map,f}return c.prototype.getChildren=function(){return this.getDisplayedChildren()},c.prototype.getDisplayedChildren=function(){var f=this,h=this.model.components(),g=h.filter(function(y){return f.isChildDisplayed(y)});return g.map(function(y){return new f.constructor(y)})},c.prototype.isChildDisplayed=function(f){if(this.displayCache.has(f))return this.displayCache.get(f);var h=f.getEl(),g=s(h);return this.displayCache.set(f,g),g},c.prototype.getParent=function(){var f=this.model.parent();return f?new this.constructor(f):null},c.prototype.addChildAt=function(f,h,g){var y,_,b,x,T,I,z,F;g===void 0&&(g={action:"add-component"});var W=((_=(y=this.model)===null||y===void 0?void 0:y.isInstanceOf)===null||_===void 0?void 0:_.call(y,"text"))&&((x=(b=f==null?void 0:f.model)===null||b===void 0?void 0:b.get)===null||x===void 0?void 0:x.call(b,"textable"));if(W)return(F=(z=(I=(T=this.model)===null||T===void 0?void 0:T.getView)===null||I===void 0?void 0:I.call(T))===null||z===void 0?void 0:z.insertComponent)===null||F===void 0?void 0:F.call(z,f==null?void 0:f.model,{action:g.action});var ct=this.model.components().add(f.model,{at:this.getRealIndex(h),action:g.action});return new this.constructor(ct)},c.prototype.removeChildAt=function(f,h){h===void 0&&(h={temporary:!1});var g=this.model.components().at(this.getRealIndex(f));g&&this.model.components().remove(g,h)},c.prototype.indexOfChild=function(f){return this.getDisplayIndex(f)},c.prototype.getDisplayIndex=function(f){var h=this.getDisplayedChildren();return h?h.findIndex(function(g){return g.model===f.model}):-1},c.prototype.getRealIndex=function(f){if(f===-1)return-1;for(var h=0,g=this.model.components(),y=0;y<g.length;y++){var _=g.at(y),b=this.isChildDisplayed(_);if(b&&h++,h===f+1)return y}return-1},c.prototype.canMove=function(f,h){return this.model.em.Components.canMove(this.model,f.model,this.getRealIndex(h)).result},c.prototype.restNodeState=function(){this.clearState();var f=this.model;this.setContentEditable(!1),f.em.getEditing()===f&&this.disableEditing()},c.prototype.setContentEditable=function(f){this.element&&this.isTextNode()&&(this.element.contentEditable=f?"true":"false")},c.prototype.disableEditing=function(){var f,h;(h=(f=this.view)===null||f===void 0?void 0:f.disableEditing)===null||h===void 0||h.call(f)},c.prototype.clearState=function(){var f,h;(h=(f=this.model).set)===null||h===void 0||h.call(f,"status","")},c.prototype.setSelectedParentState=function(){var f,h;(h=(f=this.model).set)===null||h===void 0||h.call(f,"status","selected-parent")},c.prototype.isTextNode=function(){var f,h;return(h=(f=this.model).isInstanceOf)===null||h===void 0?void 0:h.call(f,"text")},c.prototype.isTextable=function(){var f,h;return(h=(f=this.model).get)===null||h===void 0?void 0:h.call(f,"textable")},c}(e.$);function s(u){return u?typeof u=="object"&&u.nodeType===Node.ELEMENT_NODE&&window.getComputedStyle(u).display!=="none"&&u.offsetWidth>0&&u.offsetHeight>0:!1}},6778:(a,n,t)=>{t.d(n,{A:()=>s});var e=t(3253),r=function(){var u=function(c,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},u(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");u(c,f);function h(){this.constructor=c}c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}}(),o=function(u){r(c,u);function c(){var f=u!==null&&u.apply(this,arguments)||this;return f._dropAreaConfig={ratio:.8,minUndroppableDimension:1,maxUndroppableDimension:15},f}return Object.defineProperty(c.prototype,"view",{get:function(){var f,h;return(h=(f=this.model).getView)===null||h===void 0?void 0:h.call(f)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"element",{get:function(){var f,h;return(h=(f=this.model).getEl)===null||h===void 0?void 0:h.call(f)},enumerable:!1,configurable:!0}),c}(e.h);const s=o},3161:(a,n,t)=>{t.d(n,{$:()=>e});var e=function(){function r(o,s){s===void 0&&(s={}),this._dropAreaConfig={ratio:1,minUndroppableDimension:0,maxUndroppableDimension:0},this._model=o,this._dragSource=s}return Object.defineProperty(r.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dragSource",{get:function(){return this._dragSource},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropArea",{get:function(){var o,s;return this.getParent()?(s=this.nodeDimensions)===null||s===void 0?void 0:s.getDropArea(this._dropAreaConfig):(o=this.nodeDimensions)===null||o===void 0?void 0:o.clone()},enumerable:!1,configurable:!0}),r.prototype.isWithinDropBounds=function(o,s){return!!this.dropArea&&this.dropArea.isWithinBounds(o,s)},r.prototype.equals=function(o){return!!(o!=null&&o._model)&&this._model===o._model},r.prototype.adjustDimensions=function(o){var s,u;o.topDifference===0&&o.leftDifference===0||((s=this.nodeDimensions)===null||s===void 0||s.adjustDimensions(o),(u=this.childrenDimensions)===null||u===void 0||u.forEach(function(c){return c.adjustDimensions(o)}))},r}()},2128:(a,n,t)=>{t.d(n,{A:()=>e});var e;(function(r){r.Vertical="Vertical",r.Horizontal="Horizontal",r.BothDirections="BothDirections"})(e||(e={}))},585:(a,n,t)=>{var e={"./CanvasClear":371,"./CanvasClear.ts":371,"./CanvasMove":6301,"./CanvasMove.ts":6301,"./CommandAbstract":5301,"./CommandAbstract.ts":5301,"./ComponentDelete":8542,"./ComponentDelete.ts":8542,"./ComponentDrag":1319,"./ComponentDrag.ts":1319,"./ComponentEnter":1859,"./ComponentEnter.ts":1859,"./ComponentExit":3709,"./ComponentExit.ts":3709,"./ComponentNext":2860,"./ComponentNext.ts":2860,"./ComponentPrev":4944,"./ComponentPrev.ts":4944,"./ComponentStyleClear":767,"./ComponentStyleClear.ts":767,"./CopyComponent":2126,"./CopyComponent.ts":2126,"./ExportTemplate":4860,"./ExportTemplate.ts":4860,"./Fullscreen":1085,"./Fullscreen.ts":1085,"./MoveComponent":9622,"./MoveComponent.ts":9622,"./OpenAssets":8481,"./OpenAssets.ts":8481,"./OpenBlocks":3666,"./OpenBlocks.ts":3666,"./OpenLayers":5838,"./OpenLayers.ts":5838,"./OpenStyleManager":8692,"./OpenStyleManager.ts":8692,"./OpenTraitManager":9163,"./OpenTraitManager.ts":9163,"./PasteComponent":9298,"./PasteComponent.ts":9298,"./Preview":8594,"./Preview.ts":8594,"./Resize":7604,"./Resize.ts":7604,"./SelectComponent":4596,"./SelectComponent.ts":4596,"./SelectPosition":2983,"./SelectPosition.ts":2983,"./ShowOffset":9490,"./ShowOffset.ts":9490,"./SwitchVisibility":1396,"./SwitchVisibility.ts":1396};function r(s){var u=o(s);return t(u)}function o(s){if(!t.o(e,s)){var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}return e[s]}r.keys=function(){return Object.keys(e)},r.resolve=o,a.exports=r,r.id=585},5706:(a,n,t)=>{t.r(n),t.d(n,{VERSION:()=>r,after:()=>mn,all:()=>io,allKeys:()=>Ut,any:()=>xo,assign:()=>Dr,before:()=>_n,bind:()=>bo,bindAll:()=>Go,chain:()=>wo,chunk:()=>kn,clone:()=>Er,collect:()=>Vr,compact:()=>bs,compose:()=>ro,constant:()=>ie,contains:()=>mr,countBy:()=>_s,create:()=>ke,debounce:()=>gi,default:()=>so,defaults:()=>Jr,defer:()=>jr,delay:()=>In,detect:()=>ye,difference:()=>ha,drop:()=>$n,each:()=>sr,escape:()=>jt,every:()=>io,extend:()=>We,extendOwn:()=>Dr,filter:()=>rn,find:()=>ye,findIndex:()=>Pn,findKey:()=>Co,findLastIndex:()=>oo,findWhere:()=>Ge,first:()=>Oo,flatten:()=>pa,foldl:()=>Hr,foldr:()=>Br,forEach:()=>sr,functions:()=>Ue,get:()=>ir,groupBy:()=>ms,has:()=>Lr,head:()=>Oo,identity:()=>je,include:()=>mr,includes:()=>mr,indexBy:()=>ca,indexOf:()=>le,initial:()=>Ze,inject:()=>Hr,intersection:()=>xs,invert:()=>tr,invoke:()=>hs,isArguments:()=>Rt,isArray:()=>rt,isArrayBuffer:()=>ft,isBoolean:()=>V,isDataView:()=>me,isDate:()=>yt,isElement:()=>U,isEmpty:()=>R,isEqual:()=>Yt,isError:()=>Mt,isFinite:()=>oe,isFunction:()=>Et,isMap:()=>st,isMatch:()=>et,isNaN:()=>he,isNull:()=>nt,isNumber:()=>A,isObject:()=>q,isRegExp:()=>gt,isSet:()=>Bt,isString:()=>tt,isSymbol:()=>qt,isTypedArray:()=>dt,isUndefined:()=>H,isWeakMap:()=>Tt,isWeakSet:()=>ce,iteratee:()=>Ee,keys:()=>ge,last:()=>To,lastIndexOf:()=>Me,map:()=>Vr,mapObject:()=>tn,matcher:()=>te,matches:()=>te,max:()=>la,memoize:()=>gn,methods:()=>Ue,min:()=>ua,mixin:()=>qo,negate:()=>yn,noop:()=>hn,now:()=>M,object:()=>Ss,omit:()=>So,once:()=>$o,pairs:()=>Be,partial:()=>Vn,partition:()=>fa,pick:()=>da,pluck:()=>yi,property:()=>gr,propertyOf:()=>Dt,random:()=>vn,range:()=>Ao,reduce:()=>Hr,reduceRight:()=>Br,reject:()=>An,rest:()=>$n,restArguments:()=>ut,result:()=>to,sample:()=>mi,select:()=>rn,shuffle:()=>gs,size:()=>ws,some:()=>xo,sortBy:()=>ys,sortedIndex:()=>Rn,tail:()=>$n,take:()=>Oo,tap:()=>ve,template:()=>Qn,templateSettings:()=>Pe,throttle:()=>pr,times:()=>de,toArray:()=>ao,toPath:()=>Qr,transpose:()=>Eo,unescape:()=>xe,union:()=>Cs,uniq:()=>Po,unique:()=>Po,uniqueId:()=>_o,unzip:()=>Eo,values:()=>_e,where:()=>vs,without:()=>bi,wrap:()=>Nn,zip:()=>va});var e={};t.r(e),t.d(e,{VERSION:()=>r,after:()=>mn,all:()=>io,allKeys:()=>Ut,any:()=>xo,assign:()=>Dr,before:()=>_n,bind:()=>bo,bindAll:()=>Go,chain:()=>wo,chunk:()=>kn,clone:()=>Er,collect:()=>Vr,compact:()=>bs,compose:()=>ro,constant:()=>ie,contains:()=>mr,countBy:()=>_s,create:()=>ke,debounce:()=>gi,default:()=>Os,defaults:()=>Jr,defer:()=>jr,delay:()=>In,detect:()=>ye,difference:()=>ha,drop:()=>$n,each:()=>sr,escape:()=>jt,every:()=>io,extend:()=>We,extendOwn:()=>Dr,filter:()=>rn,find:()=>ye,findIndex:()=>Pn,findKey:()=>Co,findLastIndex:()=>oo,findWhere:()=>Ge,first:()=>Oo,flatten:()=>pa,foldl:()=>Hr,foldr:()=>Br,forEach:()=>sr,functions:()=>Ue,get:()=>ir,groupBy:()=>ms,has:()=>Lr,head:()=>Oo,identity:()=>je,include:()=>mr,includes:()=>mr,indexBy:()=>ca,indexOf:()=>le,initial:()=>Ze,inject:()=>Hr,intersection:()=>xs,invert:()=>tr,invoke:()=>hs,isArguments:()=>Rt,isArray:()=>rt,isArrayBuffer:()=>ft,isBoolean:()=>V,isDataView:()=>me,isDate:()=>yt,isElement:()=>U,isEmpty:()=>R,isEqual:()=>Yt,isError:()=>Mt,isFinite:()=>oe,isFunction:()=>Et,isMap:()=>st,isMatch:()=>et,isNaN:()=>he,isNull:()=>nt,isNumber:()=>A,isObject:()=>q,isRegExp:()=>gt,isSet:()=>Bt,isString:()=>tt,isSymbol:()=>qt,isTypedArray:()=>dt,isUndefined:()=>H,isWeakMap:()=>Tt,isWeakSet:()=>ce,iteratee:()=>Ee,keys:()=>ge,last:()=>To,lastIndexOf:()=>Me,map:()=>Vr,mapObject:()=>tn,matcher:()=>te,matches:()=>te,max:()=>la,memoize:()=>gn,methods:()=>Ue,min:()=>ua,mixin:()=>qo,negate:()=>yn,noop:()=>hn,now:()=>M,object:()=>Ss,omit:()=>So,once:()=>$o,pairs:()=>Be,partial:()=>Vn,partition:()=>fa,pick:()=>da,pluck:()=>yi,property:()=>gr,propertyOf:()=>Dt,random:()=>vn,range:()=>Ao,reduce:()=>Hr,reduceRight:()=>Br,reject:()=>An,rest:()=>$n,restArguments:()=>ut,result:()=>to,sample:()=>mi,select:()=>rn,shuffle:()=>gs,size:()=>ws,some:()=>xo,sortBy:()=>ys,sortedIndex:()=>Rn,tail:()=>$n,take:()=>Oo,tap:()=>ve,template:()=>Qn,templateSettings:()=>Pe,throttle:()=>pr,times:()=>de,toArray:()=>ao,toPath:()=>Qr,transpose:()=>Eo,unescape:()=>xe,union:()=>Cs,uniq:()=>Po,unique:()=>Po,uniqueId:()=>_o,unzip:()=>Eo,values:()=>_e,where:()=>vs,without:()=>bi,wrap:()=>Nn,zip:()=>va});var r="1.13.1",o=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},s=Array.prototype,u=Object.prototype,c=typeof Symbol<"u"?Symbol.prototype:null,f=s.push,h=s.slice,g=u.toString,y=u.hasOwnProperty,_=typeof ArrayBuffer<"u",b=typeof DataView<"u",x=Array.isArray,T=Object.keys,I=Object.create,z=_&&ArrayBuffer.isView,F=isNaN,W=isFinite,ct=!{toString:null}.propertyIsEnumerable("toString"),_t=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],xt=Math.pow(2,53)-1;function ut(O,L){return L=L==null?O.length-1:+L,function(){for(var X=Math.max(arguments.length-L,0),Q=Array(X),ht=0;ht<X;ht++)Q[ht]=arguments[ht+L];switch(L){case 0:return O.call(this,Q);case 1:return O.call(this,arguments[0],Q);case 2:return O.call(this,arguments[0],arguments[1],Q)}var lt=Array(L+1);for(ht=0;ht<L;ht++)lt[ht]=arguments[ht];return lt[L]=Q,O.apply(this,lt)}}function q(O){var L=typeof O;return L==="function"||L==="object"&&!!O}function nt(O){return O===null}function H(O){return O===void 0}function V(O){return O===!0||O===!1||g.call(O)==="[object Boolean]"}function U(O){return!!(O&&O.nodeType===1)}function B(O){var L="[object "+O+"]";return function(X){return g.call(X)===L}}const tt=B("String"),A=B("Number"),yt=B("Date"),gt=B("RegExp"),Mt=B("Error"),qt=B("Symbol"),ft=B("ArrayBuffer");var At=B("Function"),Ht=o.document&&o.document.childNodes;typeof Int8Array!="object"&&typeof Ht!="function"&&(At=function(O){return typeof O=="function"||!1});const Et=At,Qt=B("Object");var re=b&&Qt(new DataView(new ArrayBuffer(8))),$t=typeof Map<"u"&&Qt(new Map),zt=B("DataView");function se(O){return O!=null&&Et(O.getInt8)&&ft(O.buffer)}const me=re?se:zt,rt=x||B("Array");function bt(O,L){return O!=null&&y.call(O,L)}var Zt=B("Arguments");(function(){Zt(arguments)||(Zt=function(O){return bt(O,"callee")})})();const Rt=Zt;function oe(O){return!qt(O)&&W(O)&&!isNaN(parseFloat(O))}function he(O){return A(O)&&F(O)}function ie(O){return function(){return O}}function P(O){return function(L){var X=O(L);return typeof X=="number"&&X>=0&&X<=xt}}function N(O){return function(L){return L==null?void 0:L[O]}}const $=N("byteLength"),at=P($);var mt=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function K(O){return z?z(O)&&!me(O):at(O)&&mt.test(g.call(O))}const dt=_?K:ie(!1),it=N("length");function ne(O){for(var L={},X=O.length,Q=0;Q<X;++Q)L[O[Q]]=!0;return{contains:function(ht){return L[ht]},push:function(ht){return L[ht]=!0,O.push(ht)}}}function we(O,L){L=ne(L);var X=_t.length,Q=O.constructor,ht=Et(Q)&&Q.prototype||u,lt="constructor";for(bt(O,lt)&&!L.contains(lt)&&L.push(lt);X--;)lt=_t[X],lt in O&&O[lt]!==ht[lt]&&!L.contains(lt)&&L.push(lt)}function ge(O){if(!q(O))return[];if(T)return T(O);var L=[];for(var X in O)bt(O,X)&&L.push(X);return ct&&we(O,L),L}function R(O){if(O==null)return!0;var L=it(O);return typeof L=="number"&&(rt(O)||tt(O)||Rt(O))?L===0:it(ge(O))===0}function et(O,L){var X=ge(L),Q=X.length;if(O==null)return!Q;for(var ht=Object(O),lt=0;lt<Q;lt++){var Ot=X[lt];if(L[Ot]!==ht[Ot]||!(Ot in ht))return!1}return!0}function D(O){if(O instanceof D)return O;if(!(this instanceof D))return new D(O);this._wrapped=O}D.VERSION=r,D.prototype.value=function(){return this._wrapped},D.prototype.valueOf=D.prototype.toJSON=D.prototype.value,D.prototype.toString=function(){return String(this._wrapped)};function St(O){return new Uint8Array(O.buffer||O,O.byteOffset||0,$(O))}var vt="[object DataView]";function Lt(O,L,X,Q){if(O===L)return O!==0||1/O===1/L;if(O==null||L==null)return!1;if(O!==O)return L!==L;var ht=typeof O;return ht!=="function"&&ht!=="object"&&typeof L!="object"?!1:Xt(O,L,X,Q)}function Xt(O,L,X,Q){O instanceof D&&(O=O._wrapped),L instanceof D&&(L=L._wrapped);var ht=g.call(O);if(ht!==g.call(L))return!1;if(re&&ht=="[object Object]"&&me(O)){if(!me(L))return!1;ht=vt}switch(ht){case"[object RegExp]":case"[object String]":return""+O==""+L;case"[object Number]":return+O!=+O?+L!=+L:+O==0?1/+O===1/L:+O==+L;case"[object Date]":case"[object Boolean]":return+O==+L;case"[object Symbol]":return c.valueOf.call(O)===c.valueOf.call(L);case"[object ArrayBuffer]":case vt:return Xt(St(O),St(L),X,Q)}var lt=ht==="[object Array]";if(!lt&&dt(O)){var Ot=$(O);if(Ot!==$(L))return!1;if(O.buffer===L.buffer&&O.byteOffset===L.byteOffset)return!0;lt=!0}if(!lt){if(typeof O!="object"||typeof L!="object")return!1;var Ft=O.constructor,Ce=L.constructor;if(Ft!==Ce&&!(Et(Ft)&&Ft instanceof Ft&&Et(Ce)&&Ce instanceof Ce)&&"constructor"in O&&"constructor"in L)return!1}X=X||[],Q=Q||[];for(var be=X.length;be--;)if(X[be]===O)return Q[be]===L;if(X.push(O),Q.push(L),lt){if(be=O.length,be!==L.length)return!1;for(;be--;)if(!Lt(O[be],L[be],X,Q))return!1}else{var hr=ge(O),Ar;if(be=hr.length,ge(L).length!==be)return!1;for(;be--;)if(Ar=hr[be],!(bt(L,Ar)&&Lt(O[Ar],L[Ar],X,Q)))return!1}return X.pop(),Q.pop(),!0}function Yt(O,L){return Lt(O,L)}function Ut(O){if(!q(O))return[];var L=[];for(var X in O)L.push(X);return ct&&we(O,L),L}function ae(O){var L=it(O);return function(X){if(X==null)return!1;var Q=Ut(X);if(it(Q))return!1;for(var ht=0;ht<L;ht++)if(!Et(X[O[ht]]))return!1;return O!==j||!Et(X[Se])}}var Se="forEach",Ae="has",Te=["clear","delete"],Ye=["get",Ae,"set"],fr=Te.concat(Se,Ye),j=Te.concat(Ye),J=["add"].concat(Te,Se,Ae);const st=$t?ae(fr):B("Map"),Tt=$t?ae(j):B("WeakMap"),Bt=$t?ae(J):B("Set"),ce=B("WeakSet");function _e(O){for(var L=ge(O),X=L.length,Q=Array(X),ht=0;ht<X;ht++)Q[ht]=O[L[ht]];return Q}function Be(O){for(var L=ge(O),X=L.length,Q=Array(X),ht=0;ht<X;ht++)Q[ht]=[L[ht],O[L[ht]]];return Q}function tr(O){for(var L={},X=ge(O),Q=0,ht=X.length;Q<ht;Q++)L[O[X[Q]]]=X[Q];return L}function Ue(O){var L=[];for(var X in O)Et(O[X])&&L.push(X);return L.sort()}function pn(O,L){return function(X){var Q=arguments.length;if(L&&(X=Object(X)),Q<2||X==null)return X;for(var ht=1;ht<Q;ht++)for(var lt=arguments[ht],Ot=O(lt),Ft=Ot.length,Ce=0;Ce<Ft;Ce++){var be=Ot[Ce];(!L||X[be]===void 0)&&(X[be]=lt[be])}return X}}const We=pn(Ut),Dr=pn(ge),Jr=pn(Ut,!0);function Le(){return function(){}}function er(O){if(!q(O))return{};if(I)return I(O);var L=Le();L.prototype=O;var X=new L;return L.prototype=null,X}function ke(O,L){var X=er(O);return L&&Dr(X,L),X}function Er(O){return q(O)?rt(O)?O.slice():We({},O):O}function ve(O,L){return L(O),O}function Qr(O){return rt(O)?O:[O]}D.toPath=Qr;function Fr(O){return D.toPath(O)}function or(O,L){for(var X=L.length,Q=0;Q<X;Q++){if(O==null)return;O=O[L[Q]]}return X?O:void 0}function ir(O,L,X){var Q=or(O,Fr(L));return H(Q)?X:Q}function Lr(O,L){L=Fr(L);for(var X=L.length,Q=0;Q<X;Q++){var ht=L[Q];if(!bt(O,ht))return!1;O=O[ht]}return!!X}function je(O){return O}function te(O){return O=Dr({},O),function(L){return et(L,O)}}function gr(O){return O=Fr(O),function(L){return or(L,O)}}function Ke(O,L,X){if(L===void 0)return O;switch(X??3){case 1:return function(Q){return O.call(L,Q)};case 3:return function(Q,ht,lt){return O.call(L,Q,ht,lt)};case 4:return function(Q,ht,lt,Ot){return O.call(L,Q,ht,lt,Ot)}}return function(){return O.apply(L,arguments)}}function yr(O,L,X){return O==null?je:Et(O)?Ke(O,L,X):q(O)&&!rt(O)?te(O):gr(O)}function Ee(O,L){return yr(O,L,1/0)}D.iteratee=Ee;function Re(O,L,X){return D.iteratee!==Ee?D.iteratee(O,L):yr(O,L,X)}function tn(O,L,X){L=Re(L,X);for(var Q=ge(O),ht=Q.length,lt={},Ot=0;Ot<ht;Ot++){var Ft=Q[Ot];lt[Ft]=L(O[Ft],Ft,O)}return lt}function hn(){}function Dt(O){return O==null?hn:function(L){return ir(O,L)}}function de(O,L,X){var Q=Array(Math.max(0,O));L=Ke(L,X,1);for(var ht=0;ht<O;ht++)Q[ht]=L(ht);return Q}function vn(O,L){return L==null&&(L=O,O=0),O+Math.floor(Math.random()*(L-O+1))}const M=Date.now||function(){return new Date().getTime()};function Y(O){var L=function(lt){return O[lt]},X="(?:"+ge(O).join("|")+")",Q=RegExp(X),ht=RegExp(X,"g");return function(lt){return lt=lt==null?"":""+lt,Q.test(lt)?lt.replace(ht,L):lt}}const Ct={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},jt=Y(Ct),Vt=tr(Ct),xe=Y(Vt),Pe=D.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ze=/(.)^/,Ve={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},en=/\\|'|\r|\n|\u2028|\u2029/g;function mo(O){return"\\"+Ve[O]}var Jn=/^\s*(\w|\$)+\s*$/;function Qn(O,L,X){!L&&X&&(L=X),L=Jr({},L,D.templateSettings);var Q=RegExp([(L.escape||ze).source,(L.interpolate||ze).source,(L.evaluate||ze).source].join("|")+"|$","g"),ht=0,lt="__p+='";O.replace(Q,function(be,hr,Ar,Ts,ga){return lt+=O.slice(ht,ga).replace(en,mo),ht=ga+be.length,hr?lt+=`'+
((__t=(`+hr+`))==null?'':_.escape(__t))+
'`:Ar?lt+=`'+
((__t=(`+Ar+`))==null?'':__t)+
'`:Ts&&(lt+=`';
`+Ts+`
__p+='`),be}),lt+=`';
`;var Ot=L.variable;if(Ot){if(!Jn.test(Ot))throw new Error("variable is not a bare identifier: "+Ot)}else lt=`with(obj||{}){
`+lt+`}
`,Ot="obj";lt=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+lt+`return __p;
`;var Ft;try{Ft=new Function(Ot,"_",lt)}catch(be){throw be.source=lt,be}var Ce=function(be){return Ft.call(this,be,D)};return Ce.source="function("+Ot+`){
`+lt+"}",Ce}function to(O,L,X){L=Fr(L);var Q=L.length;if(!Q)return Et(X)?X.call(O):X;for(var ht=0;ht<Q;ht++){var lt=O==null?void 0:O[L[ht]];lt===void 0&&(lt=X,ht=Q),O=Et(lt)?lt.call(O):lt}return O}var Ko=0;function _o(O){var L=++Ko+"";return O?O+L:L}function wo(O){var L=D(O);return L._chain=!0,L}function eo(O,L,X,Q,ht){if(!(Q instanceof L))return O.apply(X,ht);var lt=er(O.prototype),Ot=O.apply(lt,ht);return q(Ot)?Ot:lt}var Gn=ut(function(O,L){var X=Gn.placeholder,Q=function(){for(var ht=0,lt=L.length,Ot=Array(lt),Ft=0;Ft<lt;Ft++)Ot[Ft]=L[Ft]===X?arguments[ht++]:L[Ft];for(;ht<arguments.length;)Ot.push(arguments[ht++]);return eo(O,Q,this,this,Ot)};return Q});Gn.placeholder=D;const Vn=Gn,bo=ut(function(O,L,X){if(!Et(O))throw new TypeError("Bind must be called on a function");var Q=ut(function(ht){return eo(O,Q,L,this,X.concat(ht))});return Q}),ar=P(it);function dr(O,L,X,Q){if(Q=Q||[],!L&&L!==0)L=1/0;else if(L<=0)return Q.concat(O);for(var ht=Q.length,lt=0,Ot=it(O);lt<Ot;lt++){var Ft=O[lt];if(ar(Ft)&&(rt(Ft)||Rt(Ft)))if(L>1)dr(Ft,L-1,X,Q),ht=Q.length;else for(var Ce=0,be=Ft.length;Ce<be;)Q[ht++]=Ft[Ce++];else X||(Q[ht++]=Ft)}return Q}const Go=ut(function(O,L){L=dr(L,!1,!1);var X=L.length;if(X<1)throw new Error("bindAll must be passed function names");for(;X--;){var Q=L[X];O[Q]=bo(O[Q],O)}return O});function gn(O,L){var X=function(Q){var ht=X.cache,lt=""+(L?L.apply(this,arguments):Q);return bt(ht,lt)||(ht[lt]=O.apply(this,arguments)),ht[lt]};return X.cache={},X}const In=ut(function(O,L,X){return setTimeout(function(){return O.apply(null,X)},L)}),jr=Vn(In,D,1);function pr(O,L,X){var Q,ht,lt,Ot,Ft=0;X||(X={});var Ce=function(){Ft=X.leading===!1?0:M(),Q=null,Ot=O.apply(ht,lt),Q||(ht=lt=null)},be=function(){var hr=M();!Ft&&X.leading===!1&&(Ft=hr);var Ar=L-(hr-Ft);return ht=this,lt=arguments,Ar<=0||Ar>L?(Q&&(clearTimeout(Q),Q=null),Ft=hr,Ot=O.apply(ht,lt),Q||(ht=lt=null)):!Q&&X.trailing!==!1&&(Q=setTimeout(Ce,Ar)),Ot};return be.cancel=function(){clearTimeout(Q),Ft=0,Q=ht=lt=null},be}function gi(O,L,X){var Q,ht,lt,Ot,Ft,Ce=function(){var hr=M()-ht;L>hr?Q=setTimeout(Ce,L-hr):(Q=null,X||(Ot=O.apply(Ft,lt)),Q||(lt=Ft=null))},be=ut(function(hr){return Ft=this,lt=hr,ht=M(),Q||(Q=setTimeout(Ce,L),X&&(Ot=O.apply(Ft,lt))),Ot});return be.cancel=function(){clearTimeout(Q),Q=lt=Ft=null},be}function Nn(O,L){return Vn(L,O)}function yn(O){return function(){return!O.apply(this,arguments)}}function ro(){var O=arguments,L=O.length-1;return function(){for(var X=L,Q=O[L].apply(this,arguments);X--;)Q=O[X].call(this,Q);return Q}}function mn(O,L){return function(){if(--O<1)return L.apply(this,arguments)}}function _n(O,L){var X;return function(){return--O>0&&(X=L.apply(this,arguments)),O<=1&&(L=null),X}}const $o=Vn(_n,2);function Co(O,L,X){L=Re(L,X);for(var Q=ge(O),ht,lt=0,Ot=Q.length;lt<Ot;lt++)if(ht=Q[lt],L(O[ht],ht,O))return ht}function no(O){return function(L,X,Q){X=Re(X,Q);for(var ht=it(L),lt=O>0?0:ht-1;lt>=0&&lt<ht;lt+=O)if(X(L[lt],lt,L))return lt;return-1}}const Pn=no(1),oo=no(-1);function Rn(O,L,X,Q){X=Re(X,Q,1);for(var ht=X(L),lt=0,Ot=it(O);lt<Ot;){var Ft=Math.floor((lt+Ot)/2);X(O[Ft])<ht?lt=Ft+1:Ot=Ft}return lt}function ue(O,L,X){return function(Q,ht,lt){var Ot=0,Ft=it(Q);if(typeof lt=="number")O>0?Ot=lt>=0?lt:Math.max(lt+Ft,Ot):Ft=lt>=0?Math.min(lt+1,Ft):lt+Ft+1;else if(X&&lt&&Ft)return lt=X(Q,ht),Q[lt]===ht?lt:-1;if(ht!==ht)return lt=L(h.call(Q,Ot,Ft),he),lt>=0?lt+Ot:-1;for(lt=O>0?Ot:Ft-1;lt>=0&&lt<Ft;lt+=O)if(Q[lt]===ht)return lt;return-1}}const le=ue(1,Pn,Rn),Me=ue(-1,oo);function ye(O,L,X){var Q=ar(O)?Pn:Co,ht=Q(O,L,X);if(ht!==void 0&&ht!==-1)return O[ht]}function Ge(O,L){return ye(O,te(L))}function sr(O,L,X){L=Ke(L,X);var Q,ht;if(ar(O))for(Q=0,ht=O.length;Q<ht;Q++)L(O[Q],Q,O);else{var lt=ge(O);for(Q=0,ht=lt.length;Q<ht;Q++)L(O[lt[Q]],lt[Q],O)}return O}function Vr(O,L,X){L=Re(L,X);for(var Q=!ar(O)&&ge(O),ht=(Q||O).length,lt=Array(ht),Ot=0;Ot<ht;Ot++){var Ft=Q?Q[Ot]:Ot;lt[Ot]=L(O[Ft],Ft,O)}return lt}function En(O){var L=function(X,Q,ht,lt){var Ot=!ar(X)&&ge(X),Ft=(Ot||X).length,Ce=O>0?0:Ft-1;for(lt||(ht=X[Ot?Ot[Ce]:Ce],Ce+=O);Ce>=0&&Ce<Ft;Ce+=O){var be=Ot?Ot[Ce]:Ce;ht=Q(ht,X[be],be,X)}return ht};return function(X,Q,ht,lt){var Ot=arguments.length>=3;return L(X,Ke(Q,lt,4),ht,Ot)}}const Hr=En(1),Br=En(-1);function rn(O,L,X){var Q=[];return L=Re(L,X),sr(O,function(ht,lt,Ot){L(ht,lt,Ot)&&Q.push(ht)}),Q}function An(O,L,X){return rn(O,yn(Re(L)),X)}function io(O,L,X){L=Re(L,X);for(var Q=!ar(O)&&ge(O),ht=(Q||O).length,lt=0;lt<ht;lt++){var Ot=Q?Q[lt]:lt;if(!L(O[Ot],Ot,O))return!1}return!0}function xo(O,L,X){L=Re(L,X);for(var Q=!ar(O)&&ge(O),ht=(Q||O).length,lt=0;lt<ht;lt++){var Ot=Q?Q[lt]:lt;if(L(O[Ot],Ot,O))return!0}return!1}function mr(O,L,X,Q){return ar(O)||(O=_e(O)),(typeof X!="number"||Q)&&(X=0),le(O,L,X)>=0}const hs=ut(function(O,L,X){var Q,ht;return Et(L)?ht=L:(L=Fr(L),Q=L.slice(0,-1),L=L[L.length-1]),Vr(O,function(lt){var Ot=ht;if(!Ot){if(Q&&Q.length&&(lt=or(lt,Q)),lt==null)return;Ot=lt[L]}return Ot==null?Ot:Ot.apply(lt,X)})});function yi(O,L){return Vr(O,gr(L))}function vs(O,L){return rn(O,te(L))}function la(O,L,X){var Q=-1/0,ht=-1/0,lt,Ot;if(L==null||typeof L=="number"&&typeof O[0]!="object"&&O!=null){O=ar(O)?O:_e(O);for(var Ft=0,Ce=O.length;Ft<Ce;Ft++)lt=O[Ft],lt!=null&&lt>Q&&(Q=lt)}else L=Re(L,X),sr(O,function(be,hr,Ar){Ot=L(be,hr,Ar),(Ot>ht||Ot===-1/0&&Q===-1/0)&&(Q=be,ht=Ot)});return Q}function ua(O,L,X){var Q=1/0,ht=1/0,lt,Ot;if(L==null||typeof L=="number"&&typeof O[0]!="object"&&O!=null){O=ar(O)?O:_e(O);for(var Ft=0,Ce=O.length;Ft<Ce;Ft++)lt=O[Ft],lt!=null&&lt<Q&&(Q=lt)}else L=Re(L,X),sr(O,function(be,hr,Ar){Ot=L(be,hr,Ar),(Ot<ht||Ot===1/0&&Q===1/0)&&(Q=be,ht=Ot)});return Q}function mi(O,L,X){if(L==null||X)return ar(O)||(O=_e(O)),O[vn(O.length-1)];var Q=ar(O)?Er(O):_e(O),ht=it(Q);L=Math.max(Math.min(L,ht),0);for(var lt=ht-1,Ot=0;Ot<L;Ot++){var Ft=vn(Ot,lt),Ce=Q[Ot];Q[Ot]=Q[Ft],Q[Ft]=Ce}return Q.slice(0,L)}function gs(O){return mi(O,1/0)}function ys(O,L,X){var Q=0;return L=Re(L,X),yi(Vr(O,function(ht,lt,Ot){return{value:ht,index:Q++,criteria:L(ht,lt,Ot)}}).sort(function(ht,lt){var Ot=ht.criteria,Ft=lt.criteria;if(Ot!==Ft){if(Ot>Ft||Ot===void 0)return 1;if(Ot<Ft||Ft===void 0)return-1}return ht.index-lt.index}),"value")}function _i(O,L){return function(X,Q,ht){var lt=L?[[],[]]:{};return Q=Re(Q,ht),sr(X,function(Ot,Ft){var Ce=Q(Ot,Ft,X);O(lt,Ot,Ce)}),lt}}const ms=_i(function(O,L,X){bt(O,X)?O[X].push(L):O[X]=[L]}),ca=_i(function(O,L,X){O[X]=L}),_s=_i(function(O,L,X){bt(O,X)?O[X]++:O[X]=1}),fa=_i(function(O,L,X){O[X?0:1].push(L)},!0);var wi=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ao(O){return O?rt(O)?h.call(O):tt(O)?O.match(wi):ar(O)?Vr(O,je):_e(O):[]}function ws(O){return O==null?0:ar(O)?O.length:ge(O).length}function gu(O,L,X){return L in X}const da=ut(function(O,L){var X={},Q=L[0];if(O==null)return X;Et(Q)?(L.length>1&&(Q=Ke(Q,L[1])),L=Ut(O)):(Q=gu,L=dr(L,!1,!1),O=Object(O));for(var ht=0,lt=L.length;ht<lt;ht++){var Ot=L[ht],Ft=O[Ot];Q(Ft,Ot,O)&&(X[Ot]=Ft)}return X}),So=ut(function(O,L){var X=L[0],Q;return Et(X)?(X=yn(X),L.length>1&&(Q=L[1])):(L=Vr(dr(L,!1,!1),String),X=function(ht,lt){return!mr(L,lt)}),da(O,X,Q)});function Ze(O,L,X){return h.call(O,0,Math.max(0,O.length-(L==null||X?1:L)))}function Oo(O,L,X){return O==null||O.length<1?L==null||X?void 0:[]:L==null||X?O[0]:Ze(O,O.length-L)}function $n(O,L,X){return h.call(O,L==null||X?1:L)}function To(O,L,X){return O==null||O.length<1?L==null||X?void 0:[]:L==null||X?O[O.length-1]:$n(O,Math.max(0,O.length-L))}function bs(O){return rn(O,Boolean)}function pa(O,L){return dr(O,L,!1)}const ha=ut(function(O,L){return L=dr(L,!0,!0),rn(O,function(X){return!mr(L,X)})}),bi=ut(function(O,L){return ha(O,L)});function Po(O,L,X,Q){V(L)||(Q=X,X=L,L=!1),X!=null&&(X=Re(X,Q));for(var ht=[],lt=[],Ot=0,Ft=it(O);Ot<Ft;Ot++){var Ce=O[Ot],be=X?X(Ce,Ot,O):Ce;L&&!X?((!Ot||lt!==be)&&ht.push(Ce),lt=be):X?mr(lt,be)||(lt.push(be),ht.push(Ce)):mr(ht,Ce)||ht.push(Ce)}return ht}const Cs=ut(function(O){return Po(dr(O,!0,!0))});function xs(O){for(var L=[],X=arguments.length,Q=0,ht=it(O);Q<ht;Q++){var lt=O[Q];if(!mr(L,lt)){var Ot;for(Ot=1;Ot<X&&mr(arguments[Ot],lt);Ot++);Ot===X&&L.push(lt)}}return L}function Eo(O){for(var L=O&&la(O,it).length||0,X=Array(L),Q=0;Q<L;Q++)X[Q]=yi(O,Q);return X}const va=ut(Eo);function Ss(O,L){for(var X={},Q=0,ht=it(O);Q<ht;Q++)L?X[O[Q]]=L[Q]:X[O[Q][0]]=O[Q][1];return X}function Ao(O,L,X){L==null&&(L=O||0,O=0),X||(X=L<O?-1:1);for(var Q=Math.max(Math.ceil((L-O)/X),0),ht=Array(Q),lt=0;lt<Q;lt++,O+=X)ht[lt]=O;return ht}function kn(O,L){if(L==null||L<1)return[];for(var X=[],Q=0,ht=O.length;Q<ht;)X.push(h.call(O,Q,Q+=L));return X}function ko(O,L){return O._chain?D(L).chain():L}function qo(O){return sr(Ue(O),function(L){var X=D[L]=O[L];D.prototype[L]=function(){var Q=[this._wrapped];return f.apply(Q,arguments),ko(this,X.apply(D,Q))}}),D}sr(["pop","push","reverse","shift","sort","splice","unshift"],function(O){var L=s[O];D.prototype[O]=function(){var X=this._wrapped;return X!=null&&(L.apply(X,arguments),(O==="shift"||O==="splice")&&X.length===0&&delete X[0]),ko(this,X)}}),sr(["concat","join","slice"],function(O){var L=s[O];D.prototype[O]=function(){var X=this._wrapped;return X!=null&&(X=L.apply(X,arguments)),ko(this,X)}});const Os=D;var nn=qo(e);nn._=nn;const so=nn}},zd={};function De(a){var n=zd[a];if(n!==void 0)return n.exports;var t=zd[a]={exports:{}};return my[a].call(t.exports,t,t.exports,De),t.exports}De.n=a=>{var n=a&&a.__esModule?()=>a.default:()=>a;return De.d(n,{a:n}),n};De.d=(a,n)=>{for(var t in n)De.o(n,t)&&!De.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:n[t]})};De.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();De.o=(a,n)=>Object.prototype.hasOwnProperty.call(a,n);De.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var fh={};De.d(fh,{Ay:()=>BP,I0:()=>Zv,nu:()=>Xv});var k=De(5706),Pt=De(9195);function cn(a){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var e=a.raw;return e.reduce(function(r,o,s){var u=n[s-1],c=e[s-1];return Array.isArray(u)?u=u.join(""):c&&c.slice(-1)==="$"?r=r.slice(0,-1):u=(0,Pt.escape)(u),r+u+o})}var _y=function(){return{stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1,telemetry:!0}};const wy=_y;var ul=De(4193),by=De.n(ul),Pr=De(6411);const Cy=function(a){var n=a.$;if(n&&n.prototype&&n.prototype.constructor.name!=="jQuery"){var t=n.fn;t.hide=function(){return this.css("display","none")},t.show=function(){return this.css("display","block")},t.focus=function(){var o=this.get(0);return o&&o.focus(),this},t.bind=function(o,s){return this.on(o,s)},t.unbind=function(o,s){if((0,k.isObject)(o)){for(var u in o)o.hasOwnProperty(u)&&this.off(u,o[u]);return this}else return this.off(o,s)},t.click=function(o){return o?this.on("click",o):this.trigger("click")},t.change=function(o){return o?this.on("change",o):this.trigger("change")},t.keydown=function(o){return o?this.on("keydown",o):this.trigger("keydown")},t.delegate=function(o,s,u,c){return c||(c=u),this.on(s,o,function(f){f.data=u,c(f)})},t.scrollLeft=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var s=o instanceof Window?o:null;return s?s.pageXOffset:o.scrollLeft||0},t.scrollTop=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var s=o instanceof Window?o:null;return s?s.pageYOffset:o.scrollTop||0};var e=n.prototype.offset;t.offset=function(o){var s,u;return o&&(s=o.top,u=o.left),typeof s<"u"&&this.css("top","".concat(s,"px")),typeof u<"u"&&this.css("left","".concat(u,"px")),e.call(this)},n.map=function(o,s){for(var u=[],c=0;c<o.length;c++)u.push(s(o[c],c));return u};var r=Array.prototype.indexOf;n.inArray=function(o,s,u){return s==null?-1:r.call(s,o,u)},n.Event=function(o,s){if(!(this instanceof n.Event))return new n.Event(o,s);this.type=o,this.isDefaultPrevented=function(){return!1}}}};var Nt=De(1749),dh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xy=function(a){dh(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Nt.Kx),Sy=function(a){dh(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getByComponent=function(t){var e=this;return this.filter(function(r){return e.getComponent(r)===t})[0]},n.prototype.addComponent=function(t,e){var r=this,o=((0,k.isArray)(t)?t:[t]).filter(function(s){return!r.hasComponent(s)}).map(function(s){return new xy({component:s})})[0];return this.push(o,e)},n.prototype.getComponent=function(t){return t.get("component")},n.prototype.hasComponent=function(t){var e=this.getByComponent(t);return e&&this.contains(e)},n.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},n.prototype.allComponents=function(){var t=this;return this.map(function(e){return t.getComponent(e)}).filter(function(e){return e})},n.prototype.removeComponent=function(t,e){var r=this,o=((0,k.isArray)(t)?t:[t]).map(function(s){return r.getByComponent(s)});return this.remove(o,e)},n}(Nt.pM);const Oy=Sy;var Ty=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pc=function(){return Pc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Pc.apply(this,arguments)},Py=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},ph=function(){function a(n,t,e){this.debounced=[],this.collections=[],this.cls=[],this._em=n,this._name=t;var r=this.name.charAt(0).toLowerCase()+this.name.slice(1),o=(0,k.isUndefined)(n.config[r])?n.config[this.name]:n.config[r],s=o===!0?{}:o||{};s.pStylePrefix=n.config.pStylePrefix||"",!(0,k.isUndefined)(o)&&!o&&(s._disable=1),s.em=n,this._config=(0,Pt.deepMerge)(e||{},s)}return Object.defineProperty(a.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),a.prototype.render=function(n){},a.prototype.postLoad=function(n){},Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(n){return n?this.config[n]:this.config},a.prototype.__logWarn=function(n,t){t===void 0&&(t={}),this.em.logWarning("[".concat(this.name,"]: ").concat(n),t)},a.prototype.destroy=function(){this.__destroy()},a.prototype.__destroy=function(){var n,t,e;(n=this.view)===null||n===void 0||n.remove(),(t=this.state)===null||t===void 0||t.stopListening(),(e=this.state)===null||e===void 0||e.clear(),this.debounced.forEach(function(r){return r.cancel()}),this.collections.forEach(function(r){r.stopListening(),r.reset()})},a.prototype.__appendTo=function(){var n=this.getConfig().appendTo;if(n){var t=(0,k.isElement)(n)?n:document.querySelector(n);if(!t)return this.__logWarn('"appendTo" element not found');t.appendChild(this.render())}},a}();const dn=ph;var yo=function(a){Ty(n,a);function n(t,e,r,o,s,u){u===void 0&&(u={});var c=a.call(this,t,e,s)||this;return c.cls=[],c.private=!1,c.all=r,c.events=o,!u.skipListen&&c.__initListen(),c}return n.prototype.postLoad=function(t){},n.prototype.render=function(t){},n.prototype.getProjectData=function(t){var e={},r=this.storageKey;return r&&(e[r]=t||this.getAll()),e},n.prototype.loadProjectData=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=e.all,o=e.onResult,s=e.reset,u=this.storageKey,c={action:"load"},f=r||this.all,h=t[u];if(typeof h=="string")try{h=JSON.parse(h)}catch{this.__logWarn("Data parsing failed",{input:h})}return s&&h&&f.reset(void 0,c),o?h&&o(h,c):h&&(0,Pt.isDef)(h.length)&&f.reset(h,c),h},n.prototype.clear=function(t){t===void 0&&(t={});var e=this.all;return e&&e.reset(void 0,t),this},n.prototype.getAll=function(){return Py([],this.all.models,!0)},n.prototype.getAllMap=function(){return this.getAll().reduce(function(t,e){return t[e.get(e.idAttribute)]=e,t},{})},n.prototype.__initListen=function(t){t===void 0&&(t={});var e=this,r=e.all,o=e.em,s=e.events;r&&o&&r.on("add",function(u,c,f){return o.trigger(s.add,u,f)}).on("remove",function(u,c,f){return o.trigger(s.remove,u,f)}).on("change",function(u,c){return o.trigger(s.update,u,u.changedAttributes(),c)}).on("all",this.__catchAllEvent,this),this.cls=[r].concat(t.collections||[]),(t.propagate||[]).forEach(function(u){var c=u.entity,f=u.event;c.on("all",function(h,g,y,_){var b=_||y,x=Pc({event:h},b);[o,r].map(function(T){return T.trigger(f,g,x)})})})},n.prototype.__remove=function(t,e){var r=this;e===void 0&&(e={});var o=this.em,s=(0,k.isString)(t)?this.get(t):t,u=function(){return s&&r.all.remove(s,e),s};return!e.silent&&(o==null||o.trigger(this.events.removeBefore,s,u,e)),!e.abort&&u()},n.prototype.__catchAllEvent=function(t,e,r,o){var s=this,u=s.em,c=s.events,f=o||r;u&&c.all&&u.trigger(c.all,{event:t,model:e,options:f}),this.__onAllEvent()},n.prototype.__appendTo=function(t){var e=this.config.appendTo;if(e){var r=(0,k.isElement)(e)?e:document.querySelector(e);if(!r)return this.__logWarn('"appendTo" element not found');r.appendChild(this.render(t))}},n.prototype.__onAllEvent=function(){},n.prototype._createId=function(t){t===void 0&&(t=16);var e=this.getAll(),r=e.length+t,o=this.getAllMap(),s;do s=(0,Pt.createId)(r);while(o[s]);return s},n.prototype.__listenAdd=function(t,e){var r=this;t.on("add",function(o,s,u){return r.em.trigger(e,o,u)})},n.prototype.__listenRemove=function(t,e){var r=this;t.on("remove",function(o,s,u){return r.em.trigger(e,o,u)})},n.prototype.__listenUpdate=function(t,e){var r=this;t.on("change",function(o,s){return r.em.trigger(e,o,o.changedAttributes(),s)})},n.prototype.__destroy=function(){var t;this.cls.forEach(function(e){e.stopListening(),e.reset()}),(t=this.view)===null||t===void 0||t.remove(),this.view=void 0},n}(ph),Ey=function(){return{stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0}};const Ay=Ey;var zo=De(3023),ky=function(){return{default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]}};const My=ky;var Dy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ly=function(a){Dy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},n.prototype.initialize=function(){var t=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0);var e=["width","height","widthMedia"];e.forEach(function(r){return t.checkUnit(r)})},n.prototype.checkUnit=function(t){var e=this.get(t)||"",r=(parseFloat(e)||0).toString()===e.toString();r&&this.set(t,"".concat(e,"px"))},n.prototype.getName=function(){return this.get("name")||this.get("id")},n.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},n}(Nt.Kx);const hh=Ly;var jy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vh=function(a){jy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Nt.pM);const Kd=vh;vh.prototype.model=hh;var Vy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Iy=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Ny=function(a){Vy(n,a);function n(t){var e=a.call(this,t)||this;return e.config=t.config||{},e.em=e.config.em,e.ppfx=e.config.pStylePrefix||"",e.listenTo(e.em,"change:device",e.updateSelect),e}return n.prototype.template=function(t){var e=t.ppfx,r=t.label;return cn(Gd||(Gd=Iy([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),e,r,e,e,e,e,e,e,e)},n.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},n.prototype.startAdd=function(){},n.prototype.updateDevice=function(){var t=this.em;if(t){var e=this.devicesEl;t.set("device",e?e.val():"")}},n.prototype.updateSelect=function(){var t=this,e=t.em,r=t.devicesEl;if(e&&e.getDeviceModel&&r){var o=e.getDeviceModel();r.val(o?o.get("id"):"")}},n.prototype.getOptions=function(){var t=this,e=t.collection,r=t.em,o="";return e.forEach(function(s){var u=s.attributes,c=u.name,f=u.id,h=r&&r.t&&r.t("deviceManager.devices.".concat(f))||c;o+='<option value="'.concat(f||c,'">').concat(h,"</option>")}),o},n.prototype.render=function(){var t=this,e=t.em,r=t.ppfx,o=t.$el,s=t.el,u=e&&e.t&&e.t("deviceManager.device");return o.html(this.template({ppfx:r,label:u})),this.devicesEl=o.find(".".concat(r,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(e.get("device")),s.className="".concat(r,"devices-c"),this},n}(Nt.Ss);const Ry=Ny;var Gd,Fy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$a=function(){return $a=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},$a.apply(this,arguments)},gh="device",du="".concat(gh,":"),Hy="".concat(du,"select"),yh="".concat(du,"update"),By="".concat(du,"add"),mh="".concat(du,"remove"),Uy="".concat(mh,":before"),Wy="change:device",zy={all:gh,select:Hy,update:yh,add:By,remove:mh,removeBefore:Uy},Ky=function(a){Fy(n,a);function n(t){var e,r=a.call(this,t,"DeviceManager",new Kd,zy,My())||this;return r.Device=hh,r.Devices=Kd,r.storageKey="",r.devices=r.all,(e=r.config.devices)===null||e===void 0||e.forEach(function(o){return r.add(o,{silent:!0})}),r.select(r.config.default||r.devices.at(0)),t.on(Wy,r._onSelect,r),r}return n.prototype._onSelect=function(t,e,r){var o=this,s=o.em,u=o.events,c=t.previous("device"),f=this.get(e),h=u.select;s.trigger(h,f,this.get(c)),this.__catchAllEvent(h,f,r)},n.prototype.add=function(t,e){e===void 0&&(e={});var r,o=e;if((0,k.isString)(t)){var s=e;o=arguments[2]||{},r=$a($a({},o),{id:t,name:o.name||t,width:s})}else r=t;return r.id||(r.id=r.name||this._createId()),this.devices.add(r,o)},n.prototype.get=function(t){var e=this.getAll().filter(function(r){return r.get("name")===t})[0];return e||this.devices.get(t)||null},n.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},n.prototype.getDevices=function(){return this.devices.models},n.prototype.select=function(t,e){e===void 0&&(e={});var r=(0,k.isString)(t)?this.get(t):t;return r&&this.em.set("device",r.get("id"),e),this},n.prototype.getSelected=function(){return this.get(this.em.get("device"))},n.prototype.getAll=function(){return this.devices},n.prototype.render=function(){var t,e=this.em;return(t=this.view)===null||t===void 0||t.remove(),this.view=new Ry({collection:this.devices,config:$a({em:e},this.config)}),this.view.render().el},n.prototype.destroy=function(){this.__destroy()},n}(yo);const Gy=Ky;var Ec;(function(a){a.add="page:add",a.addBefore="page:add:before",a.remove="page:remove",a.removeBefore="page:remove:before",a.select="page:select",a.selectBefore="page:select:before",a.update="page:update",a.all="page"})(Ec||(Ec={}));const Ac=Ec;var $y=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qy=function(a){$y(n,a);function n(t,e,r){return a.call(this,e,{module:t,modelConstructor:r})||this}return n.prototype.add=function(t,e){var r=this,o,s=(0,k.isArray)(t)?t:(0,k.isUndefined)(t)?void 0:[t];return s=(o=s==null?void 0:s.map(function(u){return u instanceof r.newModel?u:new r.newModel(r.module,u)}))!==null&&o!==void 0?o:[void 0],a.prototype.add.call(this,(0,k.isArray)(t)?s:s[0],e)},n.prototype.preinitialize=function(t,e){this.newModel=e.modelConstructor,this.module=e.module},n}(Nt.pM);const pu=qy;var Yy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kc=function(){return kc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},kc.apply(this,arguments)},$d=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},qd="__aw",Yd="__ah",Xd=function(a,n){var t,e=a.get(n),r=(t=a.view)===null||t===void 0?void 0:t.el[n==="width"?"offsetWidth":"offsetHeight"];return(0,k.isNumber)(e)?e:(0,k.isString)(e)&&e.endsWith("px")?parseFloat(e):r||0},Xy=function(a){Yy(n,a);function n(t,e){var r=a.call(this,t,e)||this,o=r.em,s=r.attributes,u=s.styles,c=s.component,f=o.Components,h=f.getConfig(),g=o.Css.getAll(),y={},_={em:o,config:h,frame:r,idMap:y};if(!(0,Pt.isComponent)(c)){var b=(0,Pt.isObject)(c)?c:{components:c};!b.type&&(b.type="wrapper");var x=f.getType("wrapper").model;r.set("component",new x(b,_))}if(!u)r.set("styles",g);else if(!(0,Pt.isObject)(u)){var T=u;(0,k.keys)(y).length&&(T=(0,k.isString)(T)?o.Parser.parseCss(T):T,o.Css.checkId(T,{idMap:y})),g.add(T),r.set("styles",g)}return!e.width&&r.set(qd,1),!e.height&&r.set(Yd,1),!r.id&&r.set("id",(0,Pt.createId)()),r}return n.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(n.prototype,"width",{get:function(){return Xd(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return Xd(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){var t=this.refFrame;return(t==null?void 0:t.getComponent())||this.getComponent()},enumerable:!1,configurable:!0}),n.prototype.initRefs=function(){var t=this.refFrame;if((0,k.isString)(t)){var e=this.module.framesById[t];e&&this.set({refFrame:e},{silent:!0})}},n.prototype.getBoxRect=function(){var t=this.attributes,e=t.x,r=t.y,o=this,s=o.width,u=o.height;return{x:e,y:r,width:s,height:u}},n.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},n.prototype.changesUp=function(t){t===void 0&&(t={}),!(t.temporary||t.noCount||t.avoidStore)&&this.set("changesCount",this.get("changesCount")+1)},n.prototype.getComponent=function(){return this.get("component")},n.prototype.getStyles=function(){return this.get("styles")},n.prototype.disable=function(){this.trigger("disable")},n.prototype.remove=function(){var t;(t=this.view)===null||t===void 0||t.remove(),this.view=void 0;var e=this.collection;return e&&e.remove(this)},n.prototype.getHead=function(){return $d([],this.head,!0)},n.prototype.setHead=function(t){return this.set("head",$d([],t,!0))},n.prototype.addHeadItem=function(t){this.head.push(t)},n.prototype.getHeadByAttr=function(t,e,r){return this.head.filter(function(o){return o.attributes&&o.attributes[t]==e&&(!r||r===o.tag)})[0]},n.prototype.removeHeadByAttr=function(t,e,r){var o=this.getHeadByAttr(t,e,r),s=this.head.indexOf(o);s>=0&&this.head.splice(s,1)},n.prototype.addLink=function(t){var e="link";!this.getHeadByAttr("href",t,e)&&this.addHeadItem({tag:e,attributes:{href:t,rel:"stylesheet"}})},n.prototype.removeLink=function(t){this.removeHeadByAttr("href",t,"link")},n.prototype.addScript=function(t){var e="script";!this.getHeadByAttr("src",t,e)&&this.addHeadItem({tag:e,attributes:{src:t}})},n.prototype.removeScript=function(t){this.removeHeadByAttr("src",t,"script")},n.prototype.getPage=function(){var t;return(t=this.collection)===null||t===void 0?void 0:t.page},n.prototype._emitUpdated=function(t){t===void 0&&(t={}),this.em.trigger("frame:updated",kc({frame:this},t))},n.prototype.hasAutoHeight=function(){var t=this.attributes.height;return!!(t==="auto"||this.config.infiniteCanvas)},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=zo.A.prototype.toJSON.call(this,t),r=(0,k.result)(this,"defaults");return t.fromUndo&&delete e.component,delete e.styles,delete e.changesCount,e[qd]&&delete e.width,e[Yd]&&delete e.height,e.refFrame&&(e.refFrame=e.refFrame.id,delete e.component),(0,k.forEach)(e,function(o,s){s.indexOf("_")===0&&delete e[s]}),(0,k.forEach)(r,function(o,s){e[s]===o&&delete e[s]}),(0,k.forEach)(["attributes","head"],function(o){(0,k.isEmpty)(e[o])&&delete e[o]}),e},n}(zo.A);const _h=Xy;var Zy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jy=function(a){Zy(n,a);function n(t,e){e===void 0&&(e=[]);var r=a.call(this,t,e,_h)||this;return r.loadedItems=0,r.itemsToLoad=0,(0,k.bindAll)(r,"itemLoaded"),r.on("add",r.onAdd),r.on("reset",r.onReset),r.on("remove",r.onRemove),r.forEach(function(o){return r.onAdd(o)}),r}return n.prototype.onAdd=function(t){this.module.framesById[t.id]=t},n.prototype.onReset=function(t,e){var r=this,o=(e==null?void 0:e.previousModels)||[];o.map(function(s){return r.onRemove(s)})},n.prototype.onRemove=function(t){t.onRemove(),delete this.module.framesById[t.id]},n.prototype.initRefs=function(){this.forEach(function(t){return t.initRefs()})},n.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},n.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},n.prototype.listenToLoadItems=function(t){var e=this;this.forEach(function(r){return r[t?"on":"off"]("loaded",e.itemLoaded)})},n}(pu);const wh=Jy;var Qy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tm=function(a){Qy(n,a);function n(t){var e=this,r=t.em,o=t.config,s=o.scripts,u=o.styles;return e=a.call(this,t,{scripts:s,styles:u})||this,e.set("frames",new wh(t)),e.on("change:zoom",e.onZoomChange),e.on("change:x change:y",e.onCoordsChange),e.on("change:pointer change:pointerScreen",e.onPointerChange),e.listenTo(r,"change:device ".concat(yh),e.updateDevice),e.listenTo(r,Ac.select,e._pageUpdated),e}return n.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:Nt.lK,pointerScreen:Nt.lK}},Object.defineProperty(n.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),n.prototype.init=function(){var t=this.em,e=t.Pages._initPage();this.set("frames",e.getFrames()),this.updateDevice({frame:e.getMainFrame()})},n.prototype._pageUpdated=function(t,e){var r=this.em;r.setSelected(),r.get("readyCanvas")&&r.stopDefault(),e==null||e.getFrames().map(function(o){return o.disable()}),this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},n.prototype.updateDevice=function(t){t===void 0&&(t={});var e=this.em,r=e.getDeviceModel(),o=t.frame||e.getCurrentFrameModel();if(o&&r){var s=r.attributes,u=s.width,c=s.height;o.set({width:u,height:c},{noUndo:1})}},n.prototype.onZoomChange=function(){var t=this,e=t.em,r=t.module,o=this.get("zoom");o<1&&this.set("zoom",1),e.trigger(r.events.zoom)},n.prototype.onCoordsChange=function(){var t=this,e=t.em,r=t.module;e.trigger(r.events.coords)},n.prototype.onPointerChange=function(){var t=this,e=t.em,r=t.module;e.trigger(r.events.pointer)},n.prototype.getPointerCoords=function(t){t===void 0&&(t=Nt.x2.World);var e=this.attributes,r=e.pointer,o=e.pointerScreen;return t===Nt.x2.World?r:o},n}(zo.A);const em=tm;var Ln=De(2820),Sr=De(3172),rm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nm=function(a){rm(n,a);function n(t,e){e===void 0&&(e=[]);var r=a.call(this,t,e,Ln.A)||this;r.on("add",r.onAdd),r.on("change",r.onChange),r.on("remove",r.onRemove);var o=r.em;r.refreshDbn=(0,k.debounce)(function(){return r.refresh()},0);var s="component:resize styleable:change component:input ".concat(Sr.I.update," frame:updated undo redo");return r.listenTo(o,s,function(){return r.refreshDbn()}),r}return Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),n.prototype.refresh=function(){var t=this,e=t.em,r=t.events;e.trigger(r.spot)},n.prototype.onAdd=function(t){this.__trgEvent(this.events.spotAdd,{spot:t})},n.prototype.onChange=function(t){this.__trgEvent(this.events.spotUpdate,{spot:t})},n.prototype.onRemove=function(t){this.__trgEvent(this.events.spotRemove,{spot:t})},n.prototype.__trgEvent=function(t,e){var r=this.module,o=r.em;o.trigger(t,e),this.refreshDbn()},n}(pu);const om=nm;var cl;(function(a){a.dragEnter="canvas:dragenter",a.dragOver="canvas:dragover",a.dragEnd="canvas:dragend",a.dragData="canvas:dragdata",a.drop="canvas:drop",a.spot="canvas:spot",a.spotAdd="canvas:spot:add",a.spotUpdate="canvas:spot:update",a.spotRemove="canvas:spot:remove",a.coords="canvas:coords",a.zoom="canvas:zoom",a.pointer="canvas:pointer",a.refresh="canvas:refresh",a.frameLoad="canvas:frame:load",a.frameLoadHead="canvas:frame:load:head",a.frameLoadBody="canvas:frame:load:body"})(cl||(cl={}));const il=cl;var im=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),am=function(a){im(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"module",{get:function(){var t,e;return(e=(t=this.model)===null||t===void 0?void 0:t.module)!==null&&e!==void 0?e:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),n.prototype.preinitialize=function(t){this.className=""},n}(Nt.Ss);const jn=am;var Wt=De(2097),sm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lm=function(a){sm(n,a);function n(t,e){t===void 0&&(t={}),e===void 0&&(e=!1);var r=a.call(this,t)||this;return r.itemsView="",r.itemType="type",r.reuseView=!1,r.viewCollection=[],e&&r.listenTo(r.collection,"add",r.addTo),r}return n.prototype.addTo=function(t){this.add(t)},n.prototype.itemViewNotFound=function(t){},n.prototype.add=function(t,e){var r=this,o=r.reuseView,s=r.viewCollection,u=e||null,c=t.get(this.itemType),f;t.view&&o?f=t.view:f=this.renderView(t,c),s.push(f);var h=f.render().el;u?u.appendChild(h):this.$el.append(h)},n.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(r){return t.add(r,e)}),this.$el.append(e),this.onRender(),this},n.prototype.onRender=function(){},n.prototype.onRemoveBefore=function(t,e){},n.prototype.onRemove=function(t,e){},n.prototype.remove=function(t){t===void 0&&(t={});var e=this.viewCollection;return this.onRemoveBefore(e,t),this.clearItems(),Nt.Ss.prototype.remove.apply(this,t),this.onRemove(e,t),this},n.prototype.clearItems=function(){this.viewCollection},n}(jn);const um=lm;var cm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fm=function(a){cm(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{};var r=e.model;return e.listenTo(r,"change",e.render),e.listenTo(r,"destroy remove",e.remove),e.listenTo(r.get("selectors"),"change",e.render),r.setView(e),e}return Object.defineProperty(n.prototype,"frameView",{get:function(){return this.config.frameView},enumerable:!1,configurable:!0}),n.prototype.remove=function(){return a.prototype.remove.call(this),this.model.removeView(this),this},n.prototype.updateStyles=function(){this.render()},n.prototype.tagName=function(){return"style"},n.prototype.render=function(){var t=this,e=t.model,r=t.el,o=e.get("important");return r.innerHTML=e.toCSS({important:o}),this},n}(Nt.Ss);const bh=fm;var dm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pm=function(a){dm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._createElement=function(){return document.createTextNode("")},n.prototype.render=function(){var t=this.model,e=t.get("important");return this.el.textContent=t.getDeclaration({important:e}),this},n}(bh);const hm=pm;var vm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zu=function(a,n){return"".concat(a).concat(n?"-".concat(parseFloat(n)):"")},gm=function(a){vm(n,a);function n(t){var e=a.call(this,t)||this;(0,k.bindAll)(e,"sortRules");var r=t.config||{};e.atRules={},e.config=r,e.em=r.em,e.pfx=r.stylePrefix||"",e.className=e.pfx+"rules";var o=e.collection;return e.listenTo(o,"add",e.addTo),e.listenTo(o,"reset",e.render),e}return n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){if(this.renderStarted){var r=e||null,o=this.config,s={model:t,config:o},u,c;if(t.get("atRuleType")==="keyframes"){var f=t.getAtRule(),h=this.atRules[f];if(!h){var g=document.createElement("style");h=document.createTextNode(""),g.appendChild(document.createTextNode("".concat(f,"{"))),g.appendChild(h),g.appendChild(document.createTextNode("}")),this.atRules[f]=h,u=g}c=new hm(s),h.appendData(c.render().el.textContent)}else c=new bh(s),u=c.render().el;var y=this.className,_=t.get("mediaText"),b=Zu(y),x=b;if(_&&(x=Zu(y,this.getMediaWidth(_))),u){var T=r||this.el,I=void 0;try{I=T.querySelector("#".concat(x))}catch{}I||(I=T.querySelector("#".concat(b))),I==null||I.appendChild(u)}return u}},n.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},n.prototype.sortRules=function(t,e){var r=this.em,o=(r.getConfig().mediaCondition||"").indexOf("min-width")!==-1;if(!o)return 0;var s=o?t:e,u=o?e:t;return s-u},n.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var e=this,r=e.em,o=e.$el,s=e.collection,u=this.className,c=document.createDocumentFragment();o.empty();var f=r.Devices.getAll().pluck("priority").sort(this.sortRules);return f.every(function(h){return h})&&f.unshift(0),f.forEach(function(h){return c.appendChild((0,Wt.a_)("div",{id:Zu(u,h)}))}),s.each(function(h){return t.addToCollection(h,c)}),o.append(c),o.attr("class",u),this},n}(Nt.Ss);const Ch=gm;var xh="text/html",ym=xh;const mm=function(a,n){n===void 0&&(n={});var t=new DOMParser,e=n.htmlType||ym,r=e===xh,o=r?a:"<div>".concat(a,"</div>"),s=t.parseFromString(o,e),u;if(r){if(n.asDocument)return s;var c=s.head,f=s.body,h=c.querySelectorAll("script");(0,k.each)(h,function(y){return f.appendChild(y)});var g=[];(0,k.each)(c.children,function(y){return g.push(y)}),(0,k.each)(g,function(y,_){return f.insertBefore(y,f.children[_])}),u=f}else u=s.firstChild;return u};var zn=function(){return zn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},zn.apply(this,arguments)},_m="data-gjs-",Zd="parse:html",wm=function(a,n){return n===void 0&&(n={}),{compTypes:[],modelAttrStart:_m,getPropAttribute:function(t,e){var r=t.replace(this.modelAttrStart,""),o=(e==null?void 0:e.length)||0,s=e==null?void 0:e.substring(0,1),u=e==null?void 0:e.substring(o-1),c=e==="true"?!0:e==="false"?!1:e;try{c=s=="{"&&u=="}"||s=="["&&u=="]"?JSON.parse(c):c}catch{}return{name:r,value:c}},splitPropsFromAttr:function(t){var e=this;t===void 0&&(t={});var r={},o={};return(0,k.each)(t,function(s,u){if(u.indexOf(e.modelAttrStart)===0){var c=e.getPropAttribute(u,s);r[c.name]=c.value}else o[u]=s}),{props:r,attrs:o}},parseStyle:function(t){for(var e={};t.indexOf("/*")>=0;){var r=t.indexOf("/*"),o=t.indexOf("*/")+2;t=t.replace(t.slice(r,o),"")}for(var s=t.split(";"),u=0,c=s.length;u<c;u++){var f=s[u].trim();if(f){var h=f.split(":"),g=h[0].trim(),y=h.slice(1).join(":").trim();e[g]?((0,k.isArray)(e[g])||(e[g]=[e[g]]),e[g].push(y)):e[g]=y}}return e},parseClass:function(t){for(var e=[],r=t.split(" "),o=0,s=r.length;o<s;o++){var u=r[o].trim();u&&e.push(u)}return e},parseNodeAttr:function(t,e){for(var r=e||{},o=t.attributes||[],s=o.length,u=0;u<s;u++){var c=o[u].nodeName,f=o[u].nodeValue;if(c=="style")r.style=this.parseStyle(f);else if(c=="class")r.classes=this.parseClass(f);else{if(c=="contenteditable")continue;if(c.indexOf(this.modelAttrStart)===0){var h=this.getPropAttribute(c,f);r[h.name]=h.value}else f===""&&t[c]===!0&&(f=!0),r.attributes||(r.attributes={}),r.attributes[c]=f}}return r},detectNode:function(t,e){var r;e===void 0&&(e={});var o=this.compTypes,s={};if(o){var u=(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"".concat(this.modelAttrStart,"type"));if(u)s={type:u};else for(var c=0;c<o.length;c++){var f=o[c],h=f.model.isComponent(t,e);if(h){typeof h!="object"&&(h={type:f.id}),s=h;break}}}return s},parseNode:function(t,e){var r;e===void 0&&(e={});var o=((r=t.content)===null||r===void 0?void 0:r.childNodes)||t.childNodes,s=o.length,u=this.detectNode(t,e);if(!u.tagName){var c=t.tagName||"",f=t.namespaceURI||"";u.tagName=c&&f==="http://www.w3.org/1999/xhtml"?c.toLowerCase():c}if(u=this.parseNodeAttr(t,u),!s&&"".concat(t.outerHTML).slice(-2)==="/>"&&(u.void=!0),s&&!u.components&&!e.skipChildren){var h=o[0];s===1&&h.nodeType===3?(!u.type&&(u.type="text"),u.components={type:"textnode",content:h.nodeValue}):u.components=this.parseNodes(t,zn(zn({},e),{inSvg:e.inSvg||u.type==="svg"}))}var g=u.components;if(!u.type&&(g!=null&&g.length)){for(var y=n.textTypes,_=y===void 0?[]:y,b=n.textTags,x=b===void 0?[]:b,T=!0,I=!1,z=0;z<g.length;z++){var F=g[z],W=F.type;if(!_.includes(W)&&!x.includes(F.tagName)){T=!1;break}W==="textnode"&&(I=!0)}T&&I&&(u.type="text")}return u},parseNodes:function(t,e){var r;e===void 0&&(e={});for(var o=[],s=((r=t.content)===null||r===void 0?void 0:r.childNodes)||t.childNodes,u=s.length,c=0;c<u;c++){var f=s[c],h=o[o.length-1],g=this.parseNode(f,e);if(g.type==="textnode"){if((h==null?void 0:h.type)==="textnode"){h.content+=g.content;continue}if(!e.keepEmptyTextNodes){var y=f.nodeValue||"",_=c===0||c===u-1,b=y.includes(`
`);if(y!=" "&&!y.trim()&&(_||b))continue}}!g.tagName&&(0,k.isUndefined)(g.content)||o.push(g)}return o},parse:function(t,e,r){var o,s,u;r===void 0&&(r={});var c=(a==null?void 0:a.get("Config"))||{},f={html:[]},h=zn(zn({},n),r),g=zn(zn(zn({},n.optionsHtml),{htmlType:((o=n.optionsHtml)===null||o===void 0?void 0:o.htmlType)||n.htmlType}),r),y=zn(zn({},g),{asDocument:this.__checkAsDocument(t,g)}),_=y.preParser,b=y.asDocument,x=(0,k.isFunction)(_)?_(t,{editor:a==null?void 0:a.getEditor()}):t,T=(0,k.isFunction)(h.parserHtml)?h.parserHtml(x,y):mm(x,y),I=T,z=T;b&&(I=z.documentElement,f.doctype=(0,Wt.LJ)(z.doctype));var F=I.querySelectorAll("script"),W=F.length,ct=(0,k.isUndefined)(c.allowScripts)?y.allowScripts:c.allowScripts;if(!ct)for(;W--;)(s=F[W].parentNode)===null||s===void 0||s.removeChild(F[W]);if((!y.allowUnsafeAttr||!y.allowUnsafeAttrValue)&&this.__sanitizeNode(I,y),e){for(var _t=I.querySelectorAll("style"),xt=_t.length,ut="";xt--;)ut=_t[xt].innerHTML+ut,(u=_t[xt].parentNode)===null||u===void 0||u.removeChild(_t[xt]);ut&&(f.css=e.parse(ut))}a==null||a.trigger("".concat(Zd,":root"),{input:x,root:I});var q=[];if(b)f.head=this.parseNode(z.head,h),f.root=this.parseNodeAttr(I),q=this.parseNode(z.body,h);else{var nt=this.parseNodes(I,h);q=nt.length===1&&!h.returnArray?nt[0]:nt}return f.html=q,a==null||a.trigger(Zd,{input:x,output:f,options:y}),f},__sanitizeNode:function(t,e){var r=this,o=t.attributes||[],s=t.childNodes||[],u=[];(0,k.each)(o,function(c){var f=c.nodeName||"",h=c.nodeValue||"";!e.allowUnsafeAttr&&f.startsWith("on")&&u.push(f),!e.allowUnsafeAttrValue&&h.startsWith("javascript:")&&u.push(f)}),u.map(function(c){return t.removeAttribute(c)}),(0,k.each)(s,function(c){return r.__sanitizeNode(c,e)})},__checkAsDocument:function(t,e){if((0,Pt.isDef)(e.asDocument))return e.asDocument;if((0,k.isFunction)(e.detectDocument))return!!e.detectDocument(t);if(e.detectDocument)return t.toLowerCase().trim().startsWith("<!doctype")}}};const Sh=wm;var bm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zn="data-variable",Cm=function(a){bm(n,a);function n(t,e){var r=a.call(this,t,e)||this;return r.em=e.em,r.listenToDataSource(),r}return n.prototype.defaults=function(){return{type:Zn,defaultValue:"",path:""}},n.prototype.listenToDataSource=function(){var t=this.attributes.path,e=(0,Pt.stringToPath)(t).join(".");this.em&&this.listenTo(this.em.DataSources,"change:".concat(e),this.onDataSourceChange)},n.prototype.onDataSourceChange=function(){var t=this.getDataValue();this.set({value:t})},n.prototype.getDataValue=function(){var t,e=this.attributes,r=e.path,o=e.defaultValue;if(!this.em)throw new Error("EditorModel instance is not provided for a data variable.");var s=(t=this.em)===null||t===void 0?void 0:t.DataSources.getValue(r,o);return s},n}(Nt.Kx);const vi=Cm;var xm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mc=function(){return Mc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Mc.apply(this,arguments)},Sm=function(a){xm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return Mc({},a.prototype.defaults.call(this))},n}(vi);const Om=Sm;var oa;(function(a){a.add="data:add",a.addBefore="data:add:before",a.remove="data:remove",a.removeBefore="data:remove:before",a.update="data:update",a.path="data:path",a.all="data"})(oa||(oa={}));function fl(a){return typeof a=="object"&&[Zn,Kn].includes(a.type)}function Oh(a){return a instanceof vi||a instanceof cs}function as(a){return(a==null?void 0:a.type)===Zn}function dl(a,n){return as(a)?new vi(a,{em:n}).getDataValue():a}var Tm=function(){function a(n,t,e){this.operator=n,this.statements=t,this.em=e.em}return a.prototype.evaluate=function(){var n=this,t=this.statements.map(function(e){var r=new Th(e,{em:n.em});return r.evaluate()});return this.operator.evaluate(t)},a}(),hu=function(){function a(){}return a}(),Pm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Dc;(function(a){a.equals="equals",a.isTruthy="isTruthy",a.isFalsy="isFalsy",a.isDefined="isDefined",a.isNull="isNull",a.isUndefined="isUndefined",a.isArray="isArray",a.isObject="isObject",a.isString="isString",a.isNumber="isNumber",a.isBoolean="isBoolean",a.isDefaultValue="isDefaultValue"})(Dc||(Dc={}));var Em=function(a){Pm(n,a);function n(t){var e=a.call(this)||this;return e.operator=t,e}return n.prototype.evaluate=function(t,e){switch(this.operator){case"equals":return t===e;case"isTruthy":return!!t;case"isFalsy":return!t;case"isDefined":return t!=null;case"isNull":return t===null;case"isUndefined":return t===void 0;case"isArray":return Array.isArray(t);case"isObject":return typeof t=="object"&&t!==null;case"isString":return typeof t=="string";case"isNumber":return typeof t=="number";case"isBoolean":return typeof t=="boolean";case"isDefaultValue":return t instanceof vi&&t.get("default")===e;default:throw new Error("Unsupported generic operator: ".concat(this.operator))}},n}(hu),Am=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qa;(function(a){a.and="and",a.or="or",a.xor="xor"})(qa||(qa={}));var km=function(a){Am(n,a);function n(t){var e=a.call(this)||this;return e.operator=t,e}return n.prototype.evaluate=function(t){if(!t.length)throw new Error("Expected one or more statments, got none");switch(this.operator){case qa.and:return t.every(Boolean);case qa.or:return t.some(Boolean);case qa.xor:return t.filter(Boolean).length===1;default:throw new Error("Unsupported logical operator: ".concat(this.operator))}},n}(hu),Mm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fo;(function(a){a.greaterThan=">",a.lessThan="<",a.greaterThanOrEqual=">=",a.lessThanOrEqual="<=",a.equals="=",a.notEquals="!="})(Fo||(Fo={}));var Dm=function(a){Mm(n,a);function n(t){var e=a.call(this)||this;return e.operator=t,e}return n.prototype.evaluate=function(t,e){switch(this.operator){case Fo.greaterThan:return t>e;case Fo.lessThan:return t<e;case Fo.greaterThanOrEqual:return t>=e;case Fo.lessThanOrEqual:return t<=e;case Fo.equals:return t===e;case Fo.notEquals:return t!==e;default:throw new Error("Unsupported number operator: ".concat(this.operator))}},n}(hu),Lm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ui;(function(a){a.contains="contains",a.startsWith="startsWith",a.endsWith="endsWith",a.matchesRegex="matchesRegex"})(Ui||(Ui={}));var jm=function(a){Lm(n,a);function n(t){var e=a.call(this)||this;return e.operator=t,e}return n.prototype.evaluate=function(t,e){switch(this.operator){case Ui.contains:return t.includes(e);case Ui.startsWith:return t.startsWith(e);case Ui.endsWith:return t.endsWith(e);case Ui.matchesRegex:return new RegExp(e).test(t);default:throw new Error("Unsupported string operator: ".concat(this.operator))}},n}(hu),Vm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Th=function(a){Vm(n,a);function n(t,e){var r=a.call(this,t)||this;return r.condition=t,r.em=e.em,r}return n.prototype.evaluate=function(){return this.evaluateCondition(this.condition)},n.prototype.evaluateCondition=function(t){if(typeof t=="boolean")return t;if(this.isLogicGroup(t)){var e=t.logicalOperator,r=t.statements,o=new km(e),s=new Tm(o,r,{em:this.em});return s.evaluate()}if(this.isExpression(t)){var u=t.left,o=t.operator,c=t.right,f=dl(u,this.em),h=dl(c,this.em),g=this.getOperator(f,o),y=g.evaluate(f,h);return y}throw new Error("Invalid condition type.")},n.prototype.getOperator=function(t,e){if(this.isOperatorInEnum(e,Dc))return new Em(e);if(typeof t=="number")return new Dm(e);if(typeof t=="string")return new jm(e);throw new Error("Unsupported data type: ".concat(typeof t))},n.prototype.getDataVariables=function(){var t=[];return this.extractVariables(this.condition,t),t},n.prototype.extractVariables=function(t,e){var r=this;this.isExpression(t)?(as(t.left)&&e.push(t.left),as(t.right)&&e.push(t.right)):this.isLogicGroup(t)&&t.statements.forEach(function(o){return r.extractVariables(o,e)})},n.prototype.isLogicGroup=function(t){return t&&typeof t.logicalOperator<"u"&&Array.isArray(t.statements)},n.prototype.isExpression=function(t){return t&&typeof t.left<"u"&&typeof t.operator=="string"},n.prototype.isOperatorInEnum=function(t,e){return Object.values(e).includes(t)},n}(Nt.Kx),Ph=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kn="conditional-variable",cs=function(a){Ph(n,a);function n(t,e,r,o){var s=this;if(typeof t>"u")throw new Im;return s=a.call(this)||this,s.ifTrue=e,s.ifFalse=r,s.variableListeners=[],s.condition=new Th(t,{em:o.em}),s.em=o.em,s.lastEvaluationResult=s.evaluate(),s.listenToDataVariables(),s._onValueChange=o.onValueChange,s}return n.prototype.defaults=function(){return{type:Kn,condition:!1}},n.prototype.evaluate=function(){return this.condition.evaluate()},n.prototype.getDataValue=function(){return this.lastEvaluationResult?dl(this.ifTrue,this.em):dl(this.ifFalse,this.em)},n.prototype.reevaluate=function(){this.lastEvaluationResult=this.evaluate()},Object.defineProperty(n.prototype,"onValueChange",{set:function(t){this._onValueChange=t,this.listenToDataVariables()},enumerable:!1,configurable:!0}),n.prototype.listenToDataVariables=function(){var t=this;if(this.em){this.cleanupListeners();var e=this.getDependentDataVariables();e.forEach(function(r){var o=new vi(r,{em:t.em}),s=new vu({model:t,em:t.em,dataVariable:o,updateValueFromDataVariable:(function(){var u;t.reevaluate(),(u=t._onValueChange)===null||u===void 0||u.call(t)}).bind(t)});t.variableListeners.push(s)})}},n.prototype.getDependentDataVariables=function(){var t=this.condition.getDataVariables();return as(this.ifTrue)&&t.push(this.ifTrue),as(this.ifFalse)&&t.push(this.ifFalse),t},n.prototype.cleanupListeners=function(){this.variableListeners.forEach(function(t){return t.destroy()}),this.variableListeners=[]},n.prototype.toJSON=function(){return{type:Kn,condition:this.condition,ifTrue:this.ifTrue,ifFalse:this.ifFalse}},n}(Nt.Kx),Im=function(a){Ph(n,a);function n(){return a.call(this,"No condition was provided to a conditional component.")||this}return n}(Error),Nm=function(){function a(n){var t=this;this.dataListeners=[],this.onChange=function(){var e=t.dynamicVariable.getDataValue();t.updateValueFromDynamicVariable(e)},this.em=n.em,this.model=n.model,this.dynamicVariable=n.dataVariable,this.updateValueFromDynamicVariable=n.updateValueFromDataVariable,this.listenToDynamicVariable()}return a.prototype.listenToDynamicVariable=function(){var n=this,t=this,e=t.em,r=t.dynamicVariable,o=t.model;this.removeListeners();var s=r.get("type"),u=[];switch(s){case Zn:u=this.listenToDataVariable(r,e);break;case Kn:u=this.listenToConditionalVariable(r,e);break}u.forEach(function(c){return o.listenTo(c.obj,c.event,n.onChange)}),this.dataListeners=u},a.prototype.listenToConditionalVariable=function(n,t){var e=this,r=n.getDependentDataVariables().flatMap(function(o){return e.listenToDataVariable(new vi(o,{em:e.em}),t)});return r},a.prototype.listenToDataVariable=function(n,t){var e=[],r=n.attributes.path,o=(0,Pt.stringToPath)(r||"").join("."),s=this.em.DataSources.fromPath(r),u=s[0],c=s[1];return u&&e.push({obj:u.records,event:"add remove reset"}),c&&e.push({obj:c,event:"change"}),e.push({obj:n,event:"change:path change:defaultValue"},{obj:t.DataSources.all,event:"add remove reset"},{obj:t,event:"".concat(oa.path,":").concat(o)}),e},a.prototype.removeListeners=function(){var n=this,t=this.model;this.dataListeners.forEach(function(e){return t.stopListening(e.obj,e.event,n.onChange)}),this.dataListeners=[]},a.prototype.destroy=function(){this.removeListeners()},a}();const vu=Nm;var Rm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),co=function(){return co=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},co.apply(this,arguments)},Fm=Sh(),Lc=function(a){return(0,k.isArray)(a)?a[a.length-1]:a},Hm=function(a){Rm(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t,e)||this;return r.dynamicVariableListeners={},r.views=[],r.em=e.em,r}return n.prototype.parseStyle=function(t){return Fm.parseStyle(t)},n.prototype.extendStyle=function(t){return co(co({},this.getStyle("",{skipResolve:!0})),t)},n.prototype.getStyle=function(t,e){e===void 0&&(e={});var r=this.get("style")||{},o=co({},r);if(this.em&&!e.skipResolve){var s=this.resolveDataVariables(co({},o));return t&&(0,k.isString)(t)?s[t]:s}return t&&(0,k.isString)(t)?o[t]:o},n.prototype.setStyle=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,k.isString)(t)&&(t=this.parseStyle(t));var o=this.getStyle(e);e.partial||e.avoidStore?(e.avoidStore=!0,t.__p=!0):delete t.__p;var s=co({},t),u=co({},s);(0,k.keys)(u).forEach(function(f){if(u[f]===""){delete u[f];return}var h=u[f];if(fl(h)){var g=r.resolveDynamicValue(h);u[f]=g,r.manageDataVariableListener(g,f)}}),this.set("style",u,e);var c=(0,Pt.shallowDiff)(o,u);return delete c.__p,(0,k.keys)(c).forEach(function(f){var h=r.em;e.noEvent||(r.trigger("change:style:".concat(f)),h&&(h.trigger("styleable:change",r,f,e),h.trigger("styleable:change:".concat(f),r,f,e)))}),u},n.prototype.resolveDynamicValue=function(t){var e=t.type,r;switch(e){case Zn:r=new Om(t,{em:this.em});break;case Kn:{var o=t.condition,s=t.ifTrue,u=t.ifFalse;r=new cs(o,s,u,{em:this.em});break}default:throw new Error("Unsupported dynamic value type for styles. Only '".concat(Zn,"' and '").concat(Kn,"' are supported. Received '").concat(e,"'."))}return r},n.prototype.manageDataVariableListener=function(t,e){var r=this;this.dynamicVariableListeners[e]?this.dynamicVariableListeners[e].listenToDynamicVariable():this.dynamicVariableListeners[e]=new vu({model:this,em:this.em,dataVariable:t,updateValueFromDataVariable:function(){return r.updateView()}})},n.prototype.getView=function(t){var e=this,r=e.views,o=e.em,s=t||(o==null?void 0:o.getCurrentFrameModel());return s?r.find(function(u){return u.frameView===s.view}):r[0]},n.prototype.setView=function(t){var e=this.views;!e.includes(t)&&e.push(t)},n.prototype.removeView=function(t){var e=this.views;e.splice(e.indexOf(t),1)},n.prototype.updateView=function(){this.views.forEach(function(t){return t.updateStyles()})},n.prototype.resolveDataVariables=function(t){var e=this,r=co({},t);return(0,k.keys)(r).forEach(function(o){var s=r[o];if(!(typeof s=="string"||Array.isArray(s))){if(fl(s)){var u=e.resolveDynamicValue(s);r[o]=u.getDataValue()}Oh(s)&&(r[o]=s.getDataValue())}}),r},n.prototype.addStyle=function(t,e,r){var o;e===void 0&&(e=""),r===void 0&&(r={}),typeof t=="string"?t=(o={},o[t]=e,o):r=e||{},r.addStyle=t,t=this.extendStyle(t),this.setStyle(t,r)},n.prototype.removeStyle=function(t){var e=this.getStyle();delete e[t],this.setStyle(e)},n.prototype.styleToString=function(t){t===void 0&&(t={});var e=[],r=this.getStyle(t),o=t.important,s=function(c){var f=(0,k.isArray)(o)?o.indexOf(c)>=0:o,h=c.substring(0,2),g=h==="__";if(g)return"continue";var y=r[c],_=(0,k.isArray)(y)?y:[y];_.forEach(function(b){var x="".concat(b).concat(f?" !important":"");x&&e.push("".concat(c,":").concat(x,";"))})};for(var u in r)s(u);return e.join("")},n.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},n.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},n}(Nt.Kx);const Eh=Hm;var ln=function(){return ln=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ln.apply(this,arguments)},Ah=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},ui=function(a){return(0,k.isArray)(a.get(un))},pl=function(a){return!!a.get(Dn)},vo=function(a){return!!(ui(a)||pl(a))},di=function(a){var n=a.parent();return vo(a)&&(!n||!vo(n))},Fa=function(a){a.__symbReady||(a.on("change",a.__upSymbProps),a.__symbReady=!0)},Xn=function(a){var n=a.get(Dn);if(n&&(0,k.isString)(n)){var t=a.__getAllById()[n];t?(n=t,a.set(Dn,t)):n=0}return n||void 0},On=function(a){var n=a==null?void 0:a.get(un);return n&&(0,k.isArray)(n)&&(n.forEach(function(t,e){t&&(0,k.isString)(t)&&(n[e]=a.__getAllById()[t])}),n=n.filter(function(t){return t&&!(0,k.isString)(t)})),n||void 0},ia=function(a,n){n===void 0&&(n="");var t=a==null?void 0:a.get(Xa),e=n.split(":")[0],r=n!==e?[n,e]:[n];return t===!0||(0,k.isArray)(t)&&r.some(function(o){return t.indexOf(o)>=0})},ci=function(a,n){n===void 0&&(n={});var t=[],e=n.changed;if(n.fromInstance||n.noPropagate||n.fromUndo||e&&ia(a,e))return t;var r=On(a)||[],o=Xn(a),s=o?Ah([o],On(o)||[],!0):r;return t=s.filter(function(u){return u!==a}).filter(function(u){return!(e&&ia(u,e))}),t},ss=function(a,n){for(var t=a,e=a.parent(n);e&&vo(e);)t=e,e=e.parent(n);return t},of=function(a,n){n===void 0&&(n={});var t=Xn(a),e=t&&On(t);!n.skipRefs&&e&&t.set(un,e.filter(function(r){return r!==a})),a.set(Dn,0),a.components().forEach(function(r){return of(r,n)})},Ya=function(a,n,t,e){e===void 0&&(e={});var r=Xn(a),o=On(a);!r&&!o||a.em.log(n,{model:a,toUp:t,context:"symbols",opts:e})},Bm=function(a,n){n===void 0&&(n={});var t=a.changedAttributes()||{},e=t.attributes||{};if(delete t.status,delete t.open,delete t[un],delete t[Dn],delete t[Xa],delete t.attributes,delete e.id,(0,Pt.isEmptyObj)(e)||(t.attributes=e),!(0,Pt.isEmptyObj)(t)){var r=ci(a,n);(0,k.keys)(t).map(function(o){ia(a,o)&&delete t[o]}),Ya(a,"props",r,{opts:n,changed:t}),r.forEach(function(o){var s=ln({},t);(0,k.keys)(s).map(function(u){ia(o,u)&&delete s[u]}),o.set(s,ln({fromInstance:a},n))})}},Um=function(a,n){n===void 0&&(n={});var t=ci(a,n);Ya(a,"classes",t,{opts:n}),t.forEach(function(e){e.set("classes",a.get("classes"),{fromInstance:a})}),a.__changesUp(n)},kh=function(a,n,t,e){var r=e||t||{},o=r.fromInstance,s=r.fromUndo,u={fromInstance:o,fromUndo:s},c=n.opt.temporary;if(e)if(e.add){var _=[],b=!!On(a),h=ci(a,ln(ln({},u),{changed:"components:add"}));if(h.length){var x=Xn(n);_=On(x||n)||[],_=Ah([],_,!0),_.push(x||n)}!c&&Ya(a,"add",h,{opts:e,addedInstances:_.map(function(ut){return ut.cid}),added:n.cid}),h.forEach(function(ut){var q=ss(ut),nt=_.filter(function(V){var U=ss(V,{prev:1});return q&&U&&U===q})[0],H=nt||n.clone({symbol:!0,symbolInv:b});ut.append(H,ln({fromInstance:a},e))})}else{var T=Xn(n);if(T&&!e.temporary&&T.set(un,On(T).filter(function(xt){return xt!==n})),!di(n)&&!e.skipRefsUp){var I="components:remove",z=e.index,F=n.parent(),W=ln({fromInstance:n},e),ct=di(n),_t=function(ut){var q=ut.parent();q&&!ia(q,I)&&ut.remove(W)},h=ia(F,I)?[]:ci(n,u);ct&&(h=F&&ci(F,ln(ln({},u),{changed:I})),_t=function(ut){var q=ut.components().at(z);q&&q.remove(ln({fromInstance:F},W))}),!c&&Ya(a,"remove",h,{opts:e,removed:n.cid,isSymbNested:ct}),h.forEach(_t)}}else{var f=n,h=ci(a,ln(ln({},u),{changed:"components:reset"})),g=f.models,y=new Set;Ya(a,"reset",h,{components:g}),h.forEach(function(xt){var ut=xt.components(),q=g.map(function(nt,H){return!vo(nt)||y.has(nt)?(y.add(nt),nt.clone({symbol:!0})):ut.at(H)});ut.reset(q,ln({fromInstance:a},t))})}a.__changesUp(r)},Wm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Sn=function(){return Sn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Sn.apply(this,arguments)},al=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Jd=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Wi=function(a,n){if(n===void 0&&(n=[]),!a)return[];var t=(0,k.isArray)(a)||(0,k.isFunction)(a.map)?a:[a];return t.map(function(e){n.push(e.getId()),Wi(e.components().models,n)}),n},Mh=function(a,n,t){n===void 0&&(n={}),t===void 0&&(t={}),t.visitedCmps=t.visitedCmps||{};var e=t.visitedCmps,r=(0,k.isArray)(a)?a:[a];return r.map(function(o){var s=o.attributes,u=s===void 0?{}:s,c=o.components,f=o.tagName,h=o.style,g=u.id;u.draggable;var y=al(u,["id","draggable"]),_=o;if(g){if(e[g])e[g].push(_),g=cr.getNewId(n),_.attributes.id=g;else if(e[g]=[],n[g]){_=n[g];var b=_;f&&b.set({tagName:f},Sn(Sn({},t),{silent:!0})),(0,k.keys)(y).length&&b.addAttributes(y,Sn({},t)),(0,k.keys)(h).length&&b.addStyle(h,t)}}if(c){var x=Mh(c,n);if((0,k.isFunction)(_.components)){var T=_.components();T.length>0&&T.reset(x,t)}else _.components=x}return _})},zm=function(a){Wm(n,a);function n(t,e){var r=a.call(this,t,e)||this;r.opt=e,r.listenTo(r,"add",r.onAdd),r.listenTo(r,"remove",r.removeChildren),r.listenTo(r,"reset",r.resetChildren);var o=e.em,s=e.config;return r.config=s,r.em=o,r.domc=e.domc||(o==null?void 0:o.Components),r}return Object.defineProperty(n.prototype,"events",{get:function(){var t;return(t=this.domc)===null||t===void 0?void 0:t.events},enumerable:!1,configurable:!0}),n.prototype.resetChildren=function(t,e){var r=this;e===void 0&&(e={});var o=this,s=e.previousModels||[],u=s.filter(function(h){return!t.get(h.cid)}),c=Wi(t),f=Wi(s).filter(function(h){return c.indexOf(h)>=0});e.keepIds=(e.keepIds||[]).concat(f),u.forEach(function(h){return r.removeChildren(h,o,e)}),t.each(function(h){return r.onAdd(h)})},n.prototype.resetFromString=function(t,e){var r,o;t===void 0&&(t=""),e===void 0&&(e={}),e.keepIds=Wi(this);var s=this,u=s.domc,c=s.em,f=s.parent,h=c==null?void 0:c.Css,g=(u==null?void 0:u.allById())||{},y=this.parseString(t,e),_=Mh(y,g,e),b=e.visitedCmps,x=b===void 0?{}:b;Object.keys(x).forEach(function(T){var I=x[T];if(I.length){var z=(h==null?void 0:h.getRules("#".concat(T)))||[];z.length&&I.forEach(function(F){z.forEach(function(W){var ct=W.clone();ct.set("selectors",["#".concat(F.attributes.id)]),h.getAll().add(ct)})})}}),this.reset(_,e),c==null||c.trigger("component:content",f,e,t),(o=(r=f).__checkInnerChilds)===null||o===void 0||o.call(r)},n.prototype.removeChildren=function(t,e,r){var o=this;if(r===void 0&&(r={}),!!t){var s=this,u=s.domc,c=s.em,f=r.temporary||r.fromUndo;if(t.prevColl=this,!f){var h=t.getId(),g=c.Selectors.getAll(),y=c.Css.getAll(),_=(r.keepIds||[]).indexOf(h)<0,b=u?u.allById():{};delete b[h];var x=_?y.remove(y.filter(function(z){return z.getSelectors().getFullString()==="#".concat(h)}),r):[];g.remove(x.map(function(z){return z.getSelectors().at(0)})),t.opt.temporary||(c.Commands.run("core:component-style-clear",{target:t}),t.removed(),t.trigger("removed"),c.trigger(Sr.I.remove,t),u&&pl(t)&&di(t)&&u.symbols.__trgEvent(u.events.symbolInstanceRemove,{component:t},!0));var T=t.components();T.forEach(function(z){kh(z,z,T,Sn(Sn({},r),{skipRefsUp:!0})),o.removeChildren(z,e,r)})}var I=t.components();c.stopListening(I),c.stopListening(t),c.stopListening(t.get("classes")),t.__postRemove()}},n.prototype.model=function(t,e){var r=e.collection.opt,o=r.em,s,u=o.Components.componentTypes;e.em=o,e.config=r.config,e.componentTypes=u,e.domc=r.domc;for(var c=0;c<u.length;c++){var f=u[c].id;if(f==t.type){s=u[c].model;break}}return s||(s=u[u.length-1].model,o&&t.type&&o.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:e})),new s(t,e)},n.prototype.parseString=function(t,e){e===void 0&&(e={});var r=this,o=r.em,s=r.domc,u=r.parent,c=u==null?void 0:u.is("wrapper"),f=e.asDocument&&c,h=o.Css,g=o.Parser.parseHtml(t,Sn({asDocument:f},e.parserOptions)),y=g.html;if(c&&g.doctype){var _=u,b=g.html||{},x=b.components,T=al(b,["components"]),I=g.head||{},z=I.components,F=al(I,["components"]);y=x,_.set(T,e),_.head.set(F,e),_.head.components(z,e),_.docEl.set(g.root,e),_.set({doctype:g.doctype})}if(cr.checkId(y,g.css,s.componentsById,e),g.css&&h&&!e.temporary){e.at;var W=al(e,["at"]);h.addCollection(g.css,Sn(Sn({},W),{extend:1}))}return y},n.prototype.add=function(t,e){var r=this;if(e===void 0&&(e={}),t!=null){e.keepIds=Jd(Jd([],e.keepIds||[],!0),Wi(e.previousModels),!0),(0,k.isString)(t)?t=this.parseString(t,e):(0,k.isArray)(t)&&t.forEach(function(s,u){if((0,k.isString)(s)){var c=r.parseString(s,e);t[u]=(0,k.isArray)(c)&&!c.length?null:c}});var o=((0,k.isArray)(t)?t:[t]).filter(Boolean).map(function(s){return r.processDef(s)});return t=(0,k.isArray)(t)?(0,k.flatten)(o,1):o[0],a.prototype.add.call(this,t,e)}},n.prototype.processDef=function(t){if(t.cid&&t.ccid)return t;var e=this,r=e.em,o=e.config,s=o===void 0?{}:o,u=s.processor,c=t;if(u){c=Sn({},c);var f=u(c);f&&((0,k.each)(c,function(T,I){return delete c[I]}),(0,k.extend)(c,f))}if(c.$$typeof&&typeof c.props=="object"){c=Sn({},c),c.props=Sn({},c.props);var h=r.Components,g=r.Parser,y=g.parserHtml;(0,k.each)(c,function(T,I){(0,k.includes)(["props","type"],I)||delete c[I]});var _=c.props,b=_.children;delete _.children,delete c.props;var x=y.splitPropsFromAttr(_);c.attributes=x.attrs,b&&(c.components=b),c.type?h.getType(c.type)||(c.tagName=c.type,delete c.type):c.type="textnode",(0,k.extend)(c,x.props)}return c},n.prototype.onAdd=function(t,e,r){r===void 0&&(r={});var o=this,s=o.domc,u=o.em,c=t.getStyle(),f=u&&u.getConfig().avoidInlineStyle;if(s&&s.Component.ensureInList(t),!(0,k.isEmpty)(c)&&!f&&u&&u.getConfig().forceClass&&!r.temporary){var h=t.cid;u.Css.setClassRule(h,c),t.setStyle({}),t.addClass(h)}if(t.__postAdd({recursive:!0}),u&&!r.temporary){var g=function(y){u.trigger(Sr.I.add,y,r),y.components().forEach(function(_){return g(_)})};g(t),s&&pl(t)&&di(t)&&s.symbols.__trgEvent(s.events.symbolInstanceAdd,{component:t},!0)}},n}(Nt.pM);const ls=zm;var Km=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ys=1,Ju=2,Dh=function(a){Km(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t,e)||this,o=e.config,s=o===void 0?{}:o,u=r.get("name"),c=r.get("label");u?c||r.set("label",u):r.set("name",c);var f=r.get("name"),h=s.escapeName,g=h?h(f):n.escapeName(f);return r.set("name",g),r.em=e.em,r}return n.prototype.defaults=function(){return{name:"",label:"",type:Ys,active:!0,private:!1,protected:!1,_undo:!0}},n.prototype.isId=function(){return this.get("type")===Ju},n.prototype.isClass=function(){return this.get("type")===Ys},n.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.escape,r=this.get("name"),o="";switch(this.get("type")){case Ys:o=".";break;case Ju:o="#";break}return o+(e?e(r):r)},n.prototype.toString=function(){return this.getFullName()},n.prototype.getName=function(){return this.get("name")||""},n.prototype.getLabel=function(){return this.get("label")||""},n.prototype.setLabel=function(t){return this.set("label",t)},n.prototype.getActive=function(){return!!this.get("active")},n.prototype.setActive=function(t){return this.set("active",t)},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=this.em,r=Nt.Kx.prototype.toJSON.call(this,[t]),o=(0,k.result)(this,"defaults");if(e!=null&&e.getConfig().avoidDefaults){(0,k.forEach)(o,function(u,c){r[c]===u&&delete r[c]}),r.label===r.name&&delete r.label;var s=(0,k.keys)(r).length;s===1&&r.name&&(r=r.name),s===2&&r.name&&r.type&&(r=this.getFullName())}return r},n.escapeName=function(t){return"".concat(t).trim().replace(/\s+/g,"-")},n.TYPE_CLASS=Ys,n.TYPE_ID=Ju,n}(Nt.Kx);const Xr=Dh;Dh.prototype.idAttribute="name";var Gm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Lh=function(a,n){return a.reduce(function(t,e,r){return t.concat(Lh(a.slice(r+1),"".concat(n).concat(e)))},[n])},jh=function(a){Gm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||Xr.TYPE_CLASS)},n.prototype.getStyleable=function(){return(0,k.filter)(this.models,function(t){return t.getActive()&&!t.get("private")})},n.prototype.getValid=function(t){var e=t===void 0?{}:t,r=e.noDisabled;return(0,k.filter)(this.models,function(o){return!o.get("private")}).filter(function(o){return r?o.get("active"):1})},n.prototype.getFullString=function(t,e){e===void 0&&(e={});var r=[],o=t||this;return o.forEach(function(s){return r.push(s.getFullName(e))}),e.sort&&r.sort(),r.join("").trim()},n.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.combination,r=t.array,o=[],s=this.map(function(u){return u.getFullName(t)}).sort();return e?s.forEach(function(u,c){o=o.concat(Lh(s.slice(c+1),u))}):o=s,r?o:e?o.join(","):o.join("")},n}(Nt.pM);const Wo=jh;jh.prototype.model=Xr;var $m=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qd=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},qm=function(a){$m(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},n.prototype.getId=function(){return this.get("id")},n.prototype.getLabel=function(){return this.get("label")},n}(Nt.Kx);const fs=qm;function Vh(a){var n=new Set,t=new Map,e={items:[]};a.forEach(function(o){var s=o.category;if(s){n.add(s);var u=t.get(s);u?u.push(o):t.set(s,[o])}else e.items.push(o)});var r=Array.from(n).map(function(o){return{category:o,items:t.get(o)||[]}});return Qd(Qd([],r,!0),[e],!1)}var Ym=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tp="category",Ih=function(a){Ym(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initCategory=function(t){var e=t.get(tp),r=e instanceof fs;if(e&&!r){(0,k.isString)(e)?e={id:e,label:e}:(0,Pt.isObject)(e)&&!e.id&&(e.id=e.label);var o=this.getCategories().add(e);return t.set(tp,o,{silent:!0}),o}else if(r){var o=e;return this.getCategories().add(o),o}},n}(Nt.pM),Xm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Nh=function(a){Xm(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t,e)||this,o=e.events,s=e.em,u=o==null?void 0:o.update;return s&&u&&r.on("change",function(c,f){return s.trigger(u,{category:c,changes:c.changedAttributes(),options:f})}),r}return n.prototype.add=function(t,e){var r=(0,k.isArray)(t)?t:[t];return r.forEach(function(o){return o&&(o.id=(0,Pt.normalizeKey)("".concat(o.id)))}),a.prototype.add.call(this,t,e)},n.prototype.get=function(t){return a.prototype.get.call(this,(0,k.isString)(t)?(0,Pt.normalizeKey)(t):t)},n}(Nt.pM);const hl=Nh;Nh.prototype.model=fs;var vl;(function(a){a.select="trait:select",a.value="trait:value",a.categoryUpdate="trait:category:update",a.custom="trait:custom",a.all="trait"})(vl||(vl={}));const jc=vl;var Zm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jm=function(a){Zm(n,a);function n(t,e){var r=a.call(this,t,e)||this;return r.trait=e.trait,r}return n.prototype.onDataSourceChange=function(){var t,e=this.getDataValue();(t=this.trait)===null||t===void 0||t.setTargetValue(e)},n}(vi);const Rh=Jm;var Qm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gl=function(){return gl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},gl.apply(this,arguments)},t0=function(a){Qm(n,a);function n(t,e){var r=a.call(this,t)||this,o=r.attributes,s=o.target,u=o.name;if(!r.get("id")&&r.set("id",u),s&&r.setTarget(s),r.em=e,fl(r.attributes.value)){var c=r.attributes.value.type;switch(c){case Zn:r.dynamicVariable=new Rh(r.attributes.value,{em:r.em,trait:r});break;case Kn:{var f=r.attributes.value,h=f.condition,g=f.ifTrue,y=f.ifFalse;r.dynamicVariable=new cs(h,g,y,{em:r.em});break}default:return r}var _=r.dynamicVariable.getDataValue();r.set({value:_}),r.dynamicVariableListener=new vu({model:r,em:r.em,dataVariable:r.dynamicVariable,updateValueFromDataVariable:r.updateValueFromDataVariable.bind(r)})}return r}return n.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",category:"",changeProp:!1,options:[]}},Object.defineProperty(n.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"category",{get:function(){var t=this.get("category");return t instanceof fs?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"component",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"changeProp",{get:function(){return!!this.get("changeProp")},enumerable:!1,configurable:!0}),n.prototype.setTarget=function(t){if(t){var e=this.attributes,r=e.name,o=e.changeProp,s=e.value,u=e.getValue;this.target=t,this.unset("target");var c=o?"change:".concat(r):"change:attributes:".concat(r);this.listenTo(t,c,this.targetUpdated);var f=s||(u?void 0:this.getValue());!(0,k.isUndefined)(f)&&this.set({value:f},{silent:!0})}},n.prototype.updateValueFromDataVariable=function(t){this.setValue(t),this.trigger("change:value")},n.prototype.getId=function(){return this.get("id")},n.prototype.getType=function(){return this.get("type")},n.prototype.getName=function(){return this.get("name")},n.prototype.getLabel=function(t){var e;t===void 0&&(t={});var r=t.locale,o=r===void 0?!0:r,s=this.getId(),u=this.get("label")||this.getName();return o&&((e=this.em)===null||e===void 0?void 0:e.t("traitManager.traits.labels.".concat(s)))||u},n.prototype.getValue=function(t){if(this.dynamicVariable){var e=this.dynamicVariable.getDataValue();return e}return this.getTargetValue(t)},n.prototype.setValue=function(t,e){var r=this;e===void 0&&(e={});var o=this,s=o.component,u=o.em,c=e.partial,f={},h=this.attributes.setValue;if(h){h({value:t,component:s,editor:u==null?void 0:u.getEditor(),trait:this,partial:!!c,options:e,emitUpdate:function(){return r.targetUpdated()}});return}c&&(f.avoidStore=!0),this.setTargetValue(t,f)},n.prototype.getDefault=function(){return this.get("default")},n.prototype.getOptions=function(){return this.get("options")||[]},n.prototype.getOption=function(t){var e=this,r=(0,Pt.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(o){return e.getOptionId(o)===r})[0]},n.prototype.getOptionId=function(t){return t.id||t.value},n.prototype.getOptionLabel=function(t,e){var r;e===void 0&&(e={});var o=e.locale,s=o===void 0?!0:o,u=(0,k.isString)(t)?this.getOption(t):t,c=this.getOptionId(u),f=u.label||u.name||c,h=this.getName();return s&&((r=this.em)===null||r===void 0?void 0:r.t("traitManager.traits.options.".concat(h,".").concat(c)))||f},n.prototype.getCategoryLabel=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.category,s=t.locale,u=s===void 0?!0:s,c=o==null?void 0:o.getId(),f=o==null?void 0:o.getLabel();return u&&(r==null?void 0:r.t("traitManager.categories.".concat(c)))||f||""},n.prototype.runCommand=function(){var t=this.em,e=this.attributes.command;if(e&&t)return(0,k.isString)(e)?t.Commands.run(e):e(t.Editor,this)},n.prototype.props=function(){return this.attributes},n.prototype.targetUpdated=function(){var t=this,e=t.component,r=t.em,o=this.getTargetValue({useType:!0});this.set({value:o},{fromTarget:1});var s={trait:this,component:e,value:o};e.trigger(jc.value,s),r==null||r.trigger(jc.value,s),r==null||r.trigger("trait:update",s)},n.prototype.getTargetValue=function(t){t===void 0&&(t={});var e=this,r=e.component,o=e.em,s=this.getName(),u=this.get("getValue"),c;if(u?c=u({editor:o==null?void 0:o.getEditor(),trait:this,component:r}):this.changeProp?c=r.get(s):c=r.getAttributes()[s],t.useType){var f=this.getType();if(f==="checkbox"){var h=this.attributes,g=h.valueTrue,y=h.valueFalse;!(0,k.isUndefined)(g)&&g===c?c=!0:!(0,k.isUndefined)(y)&&y===c&&(c=!1)}}return(0,k.isUndefined)(c)?"":c},n.prototype.setTargetValue=function(t,e){var r;e===void 0&&(e={});var o=this,s=o.component,u=o.attributes,c=this.getName();if(!(0,k.isUndefined)(t)){var f=t;if(t==="false"?f=!1:t==="true"&&(f=!0),this.getType()==="checkbox"){var h=u.valueTrue,g=u.valueFalse;f&&!(0,k.isUndefined)(h)&&(f=h),!f&&!(0,k.isUndefined)(g)&&(f=g)}var y=(r={},r[c]=f,r);y.__p=e.avoidStore?null:void 0,this.changeProp?s.set(y,e):s.addAttributes(y,e)}},n.prototype.setValueFromInput=function(t,e,r){e===void 0&&(e=!0),r===void 0&&(r={});var o={value:t};this.set(o,gl(gl({},r),{avoidStore:1})),e&&(this.set("value","",r),this.set(o,r))},n.prototype.getInitValue=function(){var t=this.component,e=this.getName(),r;if(t){var o=t.get("attributes");r=this.changeProp?t.get(e):o[e]}return r||this.get("value")||this.get("default")},n}(Nt.Kx);const yl=t0;var e0=function(){function a(n){n===void 0&&(n={}),this.config=n}return a.prototype.build=function(n,t){return(0,k.isString)(n)?this.buildFromString(n,t):new yl(n,t)},a.prototype.buildFromString=function(n,t){var e={name:n,type:"text"};switch(n){case"target":e.type="select",e.default=!1,e.options=this.config.optionsTarget;break}return new yl(e,t)},a}();const r0=e0;var n0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),o0=function(a){n0(n,a);function n(t,e){var r=a.call(this,t)||this;r.categories=new hl;var o=e.em;r.em=o,r.categories=new hl([],{em:o,events:{update:jc.categoryUpdate}}),r.on("add",r.handleAdd),r.on("reset",r.handleReset);var s=r.module,u=s==null?void 0:s.getConfig();return r.tf=new r0(u),r}return Object.defineProperty(n.prototype,"module",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),n.prototype.getCategories=function(){return this.categories},n.prototype.handleReset=function(t,e){var r=e===void 0?{}:e,o=r.previousModels,s=o===void 0?[]:o;s.forEach(function(u){return u.trigger("remove")})},n.prototype.handleAdd=function(t){t.em=this.em;var e=this.target;e&&(t.target=e),this.initCategory(t)},n.prototype.setTarget=function(t){this.target=t,this.models.forEach(function(e){return e.setTarget(t)})},n.prototype.add=function(t,e){if(t!=null){var r=this,o=r.target,s=r.em;if((0,k.isArray)(t)){for(var u=[],c=0,f=t.length;c<f;c++){var h=t[c];u[c]=h instanceof yl?h:this.tf.build(h,s),u[c].setTarget(o)}return a.prototype.add.call(this,u,e)}var g=t instanceof yl?t:this.tf.build(t,s);return g.setTarget(o),a.prototype.add.call(this,g,e)}},n}(Ih);const ml=o0;var i0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),He=function(){return He=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},He.apply(this,arguments)},a0=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Un=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},ep=function(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},Wa=function(a){return!!(a!=null&&a.getConfig().avoidInlineStyle)},af="component:drag",un="__symbols",Dn="__symbol",Xa="__symbol_ovrd",sl=Sr.I.update,Vc=Sr.I.updateInside,rp="attributes-dynamic-value",s0=function(a){i0(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,e)||this;(0,k.bindAll)(r,"__upSymbProps","__upSymbCls","__upSymbComps");var o=e.em,s=r.parent(),u=s==null?void 0:s.attributes,c=r.get("propagate");if(c&&r.set("propagate",(0,k.isArray)(c)?c:[c]),u&&u.propagate&&!c){var f={},h=u.propagate;h.forEach(function(x){return f[x]=s.get(x)}),f.propagate=h,r.set(He(He({},f),t))}if(e&&e.config&&e.config.voidElements.indexOf(r.get("tagName"))>=0&&r.set("void",!0),e.em=o,r.opt=e,r.em=o,r.config=e.config||{},r.set("attributes",He(He({},(0,k.result)(r,"defaults").attributes||{}),r.get("attributes")||{})),r.ccid=n.createId(r,e),r.preInit(),r.initClasses(),r.initComponents(),r.initTraits(),r.initToolbar(),r.initScriptProps(),r.listenTo(r,"change:script",r.scriptUpdated),r.listenTo(r,"change:tagName",r.tagUpdated),r.listenTo(r,"change:attributes",r.attrUpdated),r.listenTo(r,"change:attributes:id",r._idUpdated),r.on("change:toolbar",r.__emitUpdateTlb),r.on("change",r.__onChange),r.on(Vc,r.__propToParent),r.set("status",""),r.views=[],["classes","traits","components"].forEach(function(x){var T="add remove ".concat(x!=="components"?"change":"");r.listenTo(r.get(x),T.trim(),function(){for(var I=[],z=0;z<arguments.length;z++)I[z]=arguments[z];return r.emitUpdate.apply(r,Un([x],I,!1))})}),!e.temporary){var g=o&&o.Css,y=r.attributes,_=y.styles,b=y.type;_&&g&&g.addCollection(_,{avoidUpdateStyle:!0},{group:"cmp:".concat(b)}),r.__postAdd(),r.init(),vo(r)&&Fa(r),o==null||o.trigger(Sr.I.create,r,e)}return r}return Object.defineProperty(n.prototype,"defaults",{get:function(){var t;return t={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null,delegate:null},t[Dn]=0,t[un]=0,t[Xa]=0,t._undo=!0,t._undoexc=["status","open"],t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tagName",{get:function(){return this.get("tagName")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"content",{get:function(){var t;return(t=this.get("content"))!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"delegate",{get:function(){return this.get("delegate")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"locked",{get:function(){return this.get("locked")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"frame",{get:function(){return this.opt.frame},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"page",{get:function(){var t;return(t=this.frame)===null||t===void 0?void 0:t.getPage()},enumerable:!1,configurable:!0}),n.prototype.preInit=function(){},n.prototype.init=function(){},n.prototype.updated=function(t,e,r){},n.prototype.removed=function(){},n.prototype.__postAdd=function(t){t===void 0&&(t={});var e=this.em,r=e==null?void 0:e.UndoManager,o=this.components();r&&!this.__hasUm&&(r.add(o),r.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&o.map(function(s){return s.__postAdd(t)})},n.prototype.__postRemove=function(){var t=this.em,e=t==null?void 0:t.UndoManager;e&&(e.remove(this.components()),e.remove(this.getSelectors()),delete this.__hasUm)},n.prototype.__onChange=function(t,e){var r=this,o=this.changedAttributes()||{};(0,k.keys)(o).forEach(function(s){return r.emitUpdate(s)}),["status","open","toolbar","traits"].forEach(function(s){return delete o[s]}),(0,Pt.isEmptyObj)(o)||(this.__changesUp(e),this.__propSelfToParent({component:this,changed:o,options:e}))},n.prototype.__onStyleChange=function(t){var e=this,r=this.em;if(r){var o="component:styleUpdate",s=(0,k.keys)(t),u={style:t};r.trigger(o,this,u),s.forEach(function(c){return r.trigger("".concat(o,":").concat(c),e,u)})}},n.prototype.__changesUp=function(t){var e=this,r=e.em,o=e.frame;[o,r].forEach(function(s){return s&&s.changesUp(t)})},n.prototype.__propSelfToParent=function(t){this.trigger(sl,t),this.__propToParent(t)},n.prototype.__propToParent=function(t){var e=this.parent();e&&e.trigger(Vc,t)},n.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},n.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},n.prototype.__upSymbProps=function(t,e){e===void 0&&(e={}),Bm(this,e)},n.prototype.__upSymbCls=function(t,e,r){r===void 0&&(r={}),Um(this,r)},n.prototype.__upSymbComps=function(t,e,r){kh(this,t,e,r)},n.prototype.is=function(t){return this.get("type")==t},n.prototype.props=function(){return this.attributes},n.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},n.prototype.setDragMode=function(t){return this.set("dmode",t)},n.prototype.getDragMode=function(){return this.get("dmode")||""},n.prototype.setSymbolOverride=function(t){var e;this.set(Xa,(e=(0,k.isString)(t)?[t]:t)!==null&&e!==void 0?e:0)},n.prototype.getSymbolOverride=function(){return this.get(Xa)},n.prototype.find=function(t){var e,r=[],o=(e=this.view)===null||e===void 0?void 0:e.$el.find(t);return o==null||o.each(function(s){var u=o.eq(s),c=u.data("model");c&&r.push(c)}),r},n.prototype.findType=function(t){var e=[],r=function(o){return o.forEach(function(s){s.is(t)&&e.push(s),r(s.components())})};return r(this.components()),e},n.prototype.findFirstType=function(t){return this.findType(t).at(0)},n.prototype.closest=function(t){var e,r=(e=this.view)===null||e===void 0?void 0:e.$el.closest(t);return r!=null&&r.length?r.data("model"):void 0},n.prototype.closestType=function(t){for(var e=this.parent();e&&!e.is(t);)e=e.parent();return e},n.prototype.contains=function(t){var e=!1;if(!t)return e;var r=function(o){!e&&o.forEach(function(s){s===t&&(e=!0),!e&&r(s.components())})};return r(this.components()),e},n.prototype.tagUpdated=function(){this.trigger("rerender")},n.prototype.replaceWith=function(t,e){e===void 0&&(e={});var r=this.collection,o=r.indexOf(this);r.remove(this);var s=r.add(t,He(He({},e),{at:o}));return(0,k.isArray)(s)?s:[s]},n.prototype.attrUpdated=function(t,e,r){var o=this;r===void 0&&(r={});var s=this.get("attributes"),u=s.class;u&&this.setClass(u),delete s.class;var c=s.style;c&&this.setStyle(c,r),delete s.style;var f=He({},this.previous("attributes")),h=(0,Pt.shallowDiff)(f,this.get("attributes"));(0,k.keys)(h).forEach(function(g){var y,_="attributes:".concat(g);o.trigger("change:".concat(_),o,h[g],r),(y=o.em)===null||y===void 0||y.trigger("".concat(sl,":").concat(_),o,h[g],r)})},n.prototype.setAttributes=function(t,e){return e===void 0&&(e={}),this.set("attributes",He({},t),e),this},n.prototype.addAttributes=function(t,e){return e===void 0&&(e={}),this.setAttributes(He(He({},this.getAttributes({noClass:!0})),t),e)},n.prototype.removeAttributes=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var r=Array.isArray(t)?t:[t],o=this.getAttributes();return r.map(function(s){return delete o[s]}),this.setAttributes(o,e)},n.prototype.getStyle=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=this.em,o=(0,k.isString)(t)?t:"",s=o?e:t;if(Wa(r)&&!s.inline){var u=r.get("state"),c=r.Css,f=c.getIdRule(this.getId(),He({state:u},s));return this.rule=f,f?f.getStyle(o):{}}return a.prototype.getStyle.call(this,o)},n.prototype.setStyle=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={});var o=this,s=o.opt,u=o.em;if(Wa(u)&&!s.temporary&&!e.inline){var c=this.get("style")||{};t=(0,k.isString)(t)?this.parseStyle(t):t,t=He(He({},t),c);var f=u.get("state"),h=u.Css,g=this.getStyle(e);this.rule=h.setIdRule(this.getId(),t,He({state:f},e));var y=(0,Pt.shallowDiff)(g,t);this.set("style","",{silent:!0}),(0,k.keys)(y).forEach(function(_){return r.trigger("change:style:".concat(_))})}else t=a.prototype.setStyle.apply(this,arguments);return s.temporary||this.__onStyleChange(e.addStyle||t),t},n.prototype.getAttributes=function(t){t===void 0&&(t={});var e=this.em,r=[],o=He({},this.get("attributes")),s=e==null?void 0:e.Selectors,u=this.getId();if(t.noClass?delete o.class:(this.classes.forEach(function(g){return r.push((0,k.isString)(g)?g:g.getName())}),r.length&&(o.class=r.join(" "))),!t.noStyle){var c=this.getStyle({inline:!0});(0,Pt.isObject)(c)&&!(0,Pt.isEmptyObj)(c)&&(o.style=this.styleToString({inline:!0}))}var f=this.get(rp);if(f&&Object.entries(f).forEach(function(g){var y=g[0],_=g[1],b;if(Oh(_))b=_;else if(fl(_)){var x=_.type;if(x===Kn){var T=_.condition,I=_.ifTrue,z=_.ifFalse;b=new cs(T,I,z,{em:e})}else b=new Rh(_,{em:e})}o[y]=b.getDataValue()}),!(0,k.has)(o,"id")){var h=!1;(Wa(e)||!(0,k.isEmpty)(this.getStyle()))&&(h=!!(s!=null&&s.get(u,s.Selector.TYPE_ID))),(vo(this)||this.get("script-export")||this.get("script"))&&(h=!0),h&&(o.id=u)}return o},n.prototype.addClass=function(t){var e=this.em.Selectors.addClass(t);return this.classes.add(e)},n.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},n.prototype.removeClass=function(t){var e=[];t=(0,k.isArray)(t)?t:[t];var r=this.classes,o=Xr.TYPE_CLASS;return t.forEach(function(s){var u=s.split(" ");u.forEach(function(c){var f=r.where({name:c,type:o})[0];f&&e.push(r.remove(f))})}),e},n.prototype.getClasses=function(){var t=this.getAttributes(),e=t.class;return e?e.split(" "):[]},n.prototype.initClasses=function(t,e,r){r===void 0&&(r={});var o="change:classes",s=this.get("attributes")||{},u=s.class,c=a0(s,["class"]),f=[this,o,this.initClasses],h=this.get("classes")||u||[],g=(0,k.isString)(h)?h.split(" "):h;this.stopListening.apply(this,f);var y=this.normalizeClasses(g),_=new Wo([]);return this.set("classes",_,r),_.add(y),_.on("add remove reset",this.__upSymbCls),u&&y.length&&this.set("attributes",c),this.listenTo.apply(this,f),this},n.prototype.initComponents=function(){var t="change:components",e=[this,t,this.initComponents];this.stopListening.apply(this,e);var r=new ls([],this.opt);r.parent=this;var o=this.get("components"),s=!this.opt.avoidChildren;return this.set("components",r),s&&o&&r.add((0,k.isFunction)(o)?o(this):o,this.opt),r.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,e),this},n.prototype.initTraits=function(t){var e=this,r=this.em,o="change:traits";this.off(o,this.initTraits),this.__loadTraits();var s=He({},this.get("attributes")),u={},c=this.traits;return c.each(function(f){var h=f.getName(),g=f.getInitValue();f.changeProp?e.set(h,g):h&&g&&(s[h]=g),f.dynamicVariable&&(u[h]=f.dynamicVariable)}),c.length&&this.set("attributes",s),Object.keys(u).length&&this.set(rp,u),this.on(o,this.initTraits),t&&r&&r.trigger("component:toggled"),this},n.prototype.initScriptProps=function(){if(!this.opt.temporary){var t="script-props",e=["change:".concat(t),this.initScriptProps];this.off.apply(this,e);var r=this.previous(t)||[],o=this.get(t)||[],s=r.map(function(c){return"change:".concat(c)}).join(" "),u=o.map(function(c){return"change:".concat(c)}).join(" ");s&&this.off(s,this.__scriptPropsChange),u&&this.on(u,this.__scriptPropsChange),this.on.apply(this,e)}},n.prototype.__scriptPropsChange=function(t,e,r){r===void 0&&(r={}),!r.avoidStore&&this.trigger("rerender")},n.prototype.append=function(t,e){e===void 0&&(e={});var r=(0,k.isArray)(t)?Un([],t,!0):[t],o=r.map(function(u){return(0,k.isString)(u)||u.collection&&u.collection.remove(u,{temporary:!0}),u}),s=this.components().add(o,He({action:Sr.t.add},e));return s},n.prototype.components=function(t,e){e===void 0&&(e={});var r=this.get("components");return(0,k.isUndefined)(t)?r:(r.reset(void 0,e),t?this.append(t,e):[])},n.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},n.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},n.prototype.empty=function(t){return t===void 0&&(t={}),this.components().reset(void 0,t),this},n.prototype.parent=function(t){t===void 0&&(t={});var e=this.collection||t.prev&&this.prevColl;return e?e.parent:void 0},n.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},n.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},n.prototype.initToolbar=function(){var t=this.em,e=this,r=t&&t.getConfig().stylePrefix||"";if(!e.get("toolbar")&&t){var o=[];e.collection&&o.push({label:t.getIcon("arrowUp"),command:function(s){return s.runCommand("core:component-exit",{force:1})}}),e.get("draggable")&&o.push({attributes:{class:"".concat(r,"no-touch-actions"),draggable:!0},label:t.getIcon("move"),command:"tlb-move"}),e.get("copyable")&&o.push({label:t.getIcon("copy"),command:"tlb-clone"}),e.get("removable")&&o.push({label:t.getIcon("delete"),command:"tlb-delete"}),e.set("toolbar",o)}},n.prototype.__loadTraits=function(t,e){e===void 0&&(e={});var r=t||this.traits;if(!(r instanceof ml)){r=(0,k.isFunction)(r)?r(this):r;var o=new ml([],this.opt);o.setTarget(this),r.length&&(r.forEach(function(s){return s.attributes&&delete s.attributes.value}),o.add(r)),this.set({traits:o},e)}return this},n.prototype.getTraits=function(){return this.__loadTraits(),Un([],this.traits.models,!0)},n.prototype.setTraits=function(t){var e=(0,k.isArray)(t)?t:[t];return this.set({traits:e}),this.getTraits()},n.prototype.getTrait=function(t){return this.getTraits().filter(function(e){return e.get("id")===t||e.get("name")===t})[0]||null},n.prototype.updateTrait=function(t,e){var r,o=this.getTrait(t);return o&&o.set(e),(r=this.em)===null||r===void 0||r.trigger("component:toggled"),this},n.prototype.getTraitIndex=function(t){var e=this.getTrait(t);return e?this.traits.indexOf(e):-1},n.prototype.removeTrait=function(t){var e=this,r,o=(0,k.isArray)(t)?t:[t],s=o.map(function(f){return e.getTrait(f)}),u=this.traits,c=s.length?u.remove(s):[];return(r=this.em)===null||r===void 0||r.trigger("component:toggled"),(0,k.isArray)(c)?c:[c]},n.prototype.addTrait=function(t,e){var r;e===void 0&&(e={}),this.__loadTraits();var o=this.traits.add(t,e);return(r=this.em)===null||r===void 0||r.trigger("component:toggled"),(0,k.isArray)(o)?o:[o]},n.prototype.normalizeClasses=function(t){var e=[],r=this.em,o=r==null?void 0:r.Selectors;return o?t.models?Un([],t.models,!0):(t.forEach(function(s){return e.push(o.add(s))}),e):[]},n.prototype.clone=function(t){t===void 0&&(t={});var e=this.em,r=He({},this.attributes),o=He({},this.opt),s=this.getId(),u=e==null?void 0:e.Css;r.attributes=He({},r.attributes),delete r.attributes.id,r.components=[],r.classes=[],r.traits=[],di(this)&&(t.symbol=!0),this.get("components").each(function(b,x){r.components[x]=b.clone(He(He({},t),{_inner:1}))}),this.get("traits").each(function(b,x){r.traits[x]=b.clone()}),this.get("classes").each(function(b,x){r.classes[x]=b.get("name")}),r.status="",o.collection=null;var c=new this.constructor(r,o),f="#".concat(c.getId()),h=u?u.getRules("#".concat(s)):[];h.forEach(function(b){var x=b.clone();x.set("selectors",[f]),u.getAll().add(x)}),c.set(un,0);var g=Xn(this),y=On(this);!t.symbol&&(g||y)?(c.set(Dn,0),c.set(un,0)):g?(g.set(un,Un(Un([],On(g),!0),[c],!1)),Fa(c)):t.symbol&&(ui(this)?(this.set(un,Un(Un([],y,!0),[c],!1)),c.set(Dn,this),Fa(c)):t.symbolInv?(this.set(un,[c]),c.set(Dn,this),[this,c].map(function(b){return Fa(b)})):(c.set(un,[this]),[this,c].map(function(b){return Fa(b)}),this.set(Dn,c)));var _="component:clone";return e&&e.trigger(_,c),this.trigger(_,c),c},n.prototype.getName=function(t){t===void 0&&(t={});var e=this.em,r=this.attributes,o=r.type,s=r.tagName,u=r.name,c=o||s,f=o?"":s,h="domComponents.names.",g=u&&(e==null?void 0:e.t("".concat(h).concat(u))),y=f&&(e==null?void 0:e.t("".concat(h).concat(f))),_=e&&(e.t("".concat(h).concat(o))||e.t("".concat(h).concat(s))),b=this.get("custom-name");return(t.noCustom?"":b)||g||u||y||(0,Pt.capitalize)(f)||_||(0,Pt.capitalize)(c)},n.prototype.setName=function(t,e){e===void 0&&(e={}),this.set("custom-name",t,e)},n.prototype.getIcon=function(){var t=this.get("icon");return t?t+" ":""},n.prototype.toHTML=function(t){t===void 0&&(t={});var e=t.tag,r=e||this.get("tagName");delete t.tag;var o=this.__attrToString(t),s=o?" ".concat(o):"",u=this.getInnerHTML(t),c=!u&&this.get("void"),f="<".concat(r).concat(s).concat(c?"/":"",">").concat(u);return!c&&(f+="</".concat(r,">")),f},n.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},n.prototype.__innerHTML=function(t){t===void 0&&(t={});var e=this.components();return e.length?e.map(function(r){return r.toHTML(t)}).join(""):this.content},n.prototype.__attrToString=function(t){t===void 0&&(t={});var e=[],r=t.attributes,o=this.getAttrToHTML(t);if(r&&((0,k.isFunction)(r)?o=r(this,o)||{}:(0,Pt.isObject)(r)&&(o=r)),t.withProps){var s=this.toJSON();(0,k.forEach)(s,function(g,y){var _=["classes","attributes","components"];y[0]!=="_"&&_.indexOf(y)<0&&(o["data-gjs-".concat(y)]=(0,k.isArray)(g)||(0,Pt.isObject)(g)?JSON.stringify(g):(0,k.isBoolean)(g)?"".concat(g):g)})}for(var u in o){var c=o[u];if(!(0,k.isUndefined)(c)&&c!==null)if((0,k.isBoolean)(c))c&&e.push(u);else{var f="";if(t.altQuoteAttr&&(0,k.isString)(c)&&c.indexOf('"')>=0)f="'".concat(c.replace(/'/g,"&apos;"),"'");else{var h=(0,k.isString)(c)?c.replace(/"/g,"&quot;"):c;f='"'.concat(h,'"')}e.push("".concat(u,"=").concat(f))}}return e.join(" ")},n.prototype.getAttrToHTML=function(t){var e=this.getAttributes();return Wa(this.em)&&(t==null?void 0:t.keepInlineStyle)!==!0&&delete e.style,e},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=ul.Model.prototype.toJSON.call(this,t);if(e.attributes=this.getAttributes(),delete e.attributes.class,delete e.toolbar,delete e.traits,delete e.status,delete e.open,delete e._undoexc,delete e.delegate,!t.fromUndo){var r=e[Dn],o=e[un];o&&(0,k.isArray)(o)&&(e[un]=o.filter(function(s){return s}).map(function(s){return s.getId?s.getId():s})),r&&!(0,k.isString)(r)&&(e[Dn]=r.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(e),e},n.prototype.getChangedProps=function(t){var e=t||ul.Model.prototype.toJSON.apply(this),r=(0,k.result)(this,"defaults");return(0,k.forEach)(r,function(o,s){["type"].indexOf(s)===-1&&e[s]===o&&delete e[s]}),(0,k.isEmpty)(e.type)&&delete e.type,(0,k.forEach)(["attributes","style"],function(o){(0,k.isEmpty)(r[o])&&(0,k.isEmpty)(e[o])&&delete e[o]}),(0,k.forEach)(["classes","components"],function(o){(!e[o]||(0,k.isEmpty)(r[o])&&!e[o].length)&&delete e[o]}),e},n.prototype.getId=function(){var t=this.get("attributes")||{};return t.id||this.ccid||this.cid},n.prototype.setId=function(t,e){var r=He({},this.get("attributes"));return r.id=t,this.set("attributes",r,e),this},n.prototype.getEl=function(t){var e=this.getView(t);return e&&e.el},n.prototype.getView=function(t){var e=this,r=e.view,o=e.views,s=e.em,u=t||(s==null?void 0:s.getCurrentFrameModel());return u&&(r=o.filter(function(c){return c.frameView===u.view})[0]),r},n.prototype.getCurrentView=function(){var t=this.em.getCurrentFrame(),e=t==null?void 0:t.model;return this.getView(e)},n.prototype.__getScriptProps=function(){var t=this.props(),e=this.get("script-props")||[];return e.reduce(function(r,o){return r[o]=t[o],r},{})},n.prototype.getScriptString=function(t){var e=this,r=t||this.get("script")||"";if(!r)return r;if(this.get("script-props"))r=r.toString().trim();else{if((0,k.isFunction)(r)){var o=r.toString().trim();o=o.slice(o.indexOf("{")+1,o.lastIndexOf("}")),r=o.trim()}var s=this.em.getConfig(),u=ep(s.tagVarStart||"{[ "),c=ep(s.tagVarEnd||" ]}"),f=new RegExp("".concat(u,"([\\w\\d-]*)").concat(c),"g");r=r.replace(f,function(h,g){e.scriptUpdated();var y=e.attributes[g]||"";return(0,k.isArray)(y)||typeof y=="object"?JSON.stringify(y):y})}return r},n.prototype.emitUpdate=function(t){for(var e,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var s=this.em,u=sl+(t?":".concat(t):""),c=t&&this.get(t);t&&this.updated.apply(this,Un([t,c,t&&this.previous(t)],r,!1)),this.trigger.apply(this,Un([u],r,!1)),s&&s.trigger.apply(s,Un([u,this],r,!1)),["components","classes"].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(e={},e[t]=c,e),options:r[2]||r[1]||{}})},n.prototype.onAll=function(t){return(0,k.isFunction)(t)&&(t(this),this.components().forEach(function(e){return e.onAll(t)})),this},n.prototype.forEachChild=function(t){(0,k.isFunction)(t)&&this.components().forEach(function(e){t(e),e.forEachChild(t)})},n.prototype.remove=function(t){var e=this;t===void 0&&(t={});var r=this.em,o=this.collection,s=function(){o&&o.remove(e,He({action:Sr.t.remove},t)),o||(e.components("",t),e.components().removeChildren(e,void 0,t))},u=He({},t);return[this,r].map(function(c){return c.trigger(Sr.I.removeBefore,e,s,u)}),!u.abort&&s(),this},n.prototype.move=function(t,e){if(e===void 0&&(e={}),t){var r=e.at,o=this.index(),s=t===this.parent(),u=o===r||o===r-1;if(!s||!u){s&&r&&r>o&&(e.at=r-1);var c=Sr.t.move;this.remove({action:c,temporary:1}),t.append(this,He({action:c},e)),this.emitUpdate()}}return this},n.prototype.isInstanceOf=function(t){var e,r,o=(r=(e=this.em)===null||e===void 0?void 0:e.Components.getType(t))===null||r===void 0?void 0:r.model;if(!o)return!1;var s=this.constructor.typeExtends;return this instanceof o||s.has(t)},n.prototype.isChildOf=function(t){for(var e=(0,k.isString)(t),r=this.parent();r;){if(e){if(r.isInstanceOf(t))return!0}else if(r===t)return!0;r=r.parent()}return!1},n.prototype.resetId=function(t){var e=this.em,r=this.getId();if(!r)return this;var o=n.createId(this);this.setId(o);var s=e==null?void 0:e.Css.getIdRule(r),u=s==null?void 0:s.get("selectors").at(0);return u==null||u.set("name",o),this},n.prototype._getStyleRule=function(t){var e=t===void 0?{}:t,r=e.id,o=this.em,s=r||this.getId();return o==null?void 0:o.Css.getIdRule(s)},n.prototype._getStyleSelector=function(t){var e=this._getStyleRule(t);return e==null?void 0:e.get("selectors").at(0)},n.prototype._idUpdated=function(t,e,r){if(r===void 0&&(r={}),!r.idUpdate){var o=this.ccid,s=(this.get("attributes")||{}).id,u=(this.previous("attributes")||{}).id||o,c=n.getList(this);if(c[s]||!s&&u)return this.setId(u,{idUpdate:!0});delete c[u],c[s]=this,this.ccid=s;var f=this._getStyleSelector({id:u});f&&f.set({name:s,label:s})}},n.getDefaults=function(){return(0,k.result)(this.prototype,"defaults")},n.isComponent=function(t,e){return{tagName:(0,Pt.toLowerCase)(t.tagName)}},n.ensureInList=function(t){var e=n.getList(t),r=t.getId(),o=e[r];if(!o)e[r]=t;else if(o!==t){var s=n.getIncrementId(r,e);t.setId(s),e[s]=t}t.components().forEach(function(u){return n.ensureInList(u)})},n.createId=function(t,e){e===void 0&&(e={});var r=n.getList(t),o=e.idMap,s=o===void 0?{}:o,u=t.get("attributes").id,c;return u?(c=n.getIncrementId(u,r,e),t.setId(c),u!==c&&(s[u]=c)):c=n.getNewId(r),r[c]=t,c},n.getNewId=function(t){for(var e=Object.keys(t).length,r=e.toString().length+2,o=(Math.random()+1.1).toString(36).slice(-r),s="i".concat(o);t[s];)s=n.getNewId(t);return s},n.getIncrementId=function(t,e,r){r===void 0&&(r={});var o=r.keepIds,s=o===void 0?[]:o,u=1,c=t;if(s.indexOf(t)<0)for(;e[c];)u++,c="".concat(t,"-").concat(u);return c},n.getList=function(t){var e,r=t.em,o=r==null?void 0:r.Components;return(e=o==null?void 0:o.componentsById)!==null&&e!==void 0?e:{}},n.checkId=function(t,e,r,o){e===void 0&&(e=[]),r===void 0&&(r={}),o===void 0&&(o={});var s=(0,k.isArray)(t)?t:[t],u=o.keepIds,c=u===void 0?[]:u,f=o.idMap,h=f===void 0?{}:f;s.forEach(function(g){g.attributes;var y=g.attributes,_=y===void 0?{}:y,b=g.components,x=_.id;if(x&&r[x]&&c.indexOf(x)<0){var T=n.getIncrementId(x,r);h[x]=T,_.id=T,(0,k.isArray)(e)&&e.forEach(function(I){var z=I.selectors;z.forEach(function(F,W){F==="#".concat(x)&&(z[W]="#".concat(T))})})}b&&n.checkId(b,e,r,o)})},n.typeExtends=new Set,n}(Eh);const cr=s0;var l0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_l=function(){return _l=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},_l.apply(this,arguments)},ra="head",u0=["title","style","base","link","meta","script","noscript"],c0=function(a){l0(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return _l(_l({},a.prototype.defaults),{type:ra,tagName:ra,draggable:!1,highlightable:!1,droppable:function(t){var e=t.tagName;return!e||u0.includes((0,Pt.toLowerCase)(e))}})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Pt.toLowerCase)(t.tagName)===ra},n}(cr);const f0=c0;var aa=De(2128),d0=De(6778),p0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),h0=function(a){p0(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.canMove=function(t,e){var r=this,o=this.getRealIndex(e),s=t._dragSource,u=s.model,c=s.content,f=s.dragDef,h=!u||!this.isSourceSameSymbol(u),g=((0,k.isFunction)(c)?f:c)||t.model;return Array.isArray(g)?h&&g.every(function(y,_){return r.canMoveSingleContent(y,o+_)}):h&&this.canMoveSingleContent(g,o)},n.prototype.canMoveSingleContent=function(t,e){return this.model.em.Components.canMove(this.model,t,e).result},n.prototype.addChildAt=function(t,e){var r=t._dragSource,o=r.content,s=this.isTextNode()&&t.isTextable(),u=(0,k.isFunction)(o)?o():o;return Array.isArray(u)?this.addMultipleChildren(u,e,s):this.addSingleChild(u,e,s)},n.prototype.addSingleChild=function(t,e,r){var o,s,u,c,f;return r?f=(c=(u=(s=(o=this.model)===null||o===void 0?void 0:o.getView)===null||s===void 0?void 0:s.call(o))===null||u===void 0?void 0:u.insertComponent)===null||c===void 0?void 0:c.call(u,t,{action:"add-component"}):f=this.model.components().add(t,{at:this.getRealIndex(e),action:"add-component"}),new this.constructor(f)},n.prototype.addMultipleChildren=function(t,e,r){var o=this,s;return t.forEach(function(u,c){s=o.addSingleChild(u,e+c,r)}),s},n.prototype.isSourceSameSymbol=function(t){if(vo(this.model)){var e=ss(this.model),r=ui(e)?e:Xn(e);if(r===t)return!0}return!1},Object.defineProperty(n.prototype,"content",{set:function(t){this._dragSource.content=t},enumerable:!1,configurable:!0}),n}(d0.A);const v0=h0;var zi=function(){return zi=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},zi.apply(this,arguments)},g0=function(){function a(n,t){var e=this;this.em=n,this.canvas=n.Canvas;var r=t||this.canvas.getFrames().map(function(s){return s.getComponent().getEl()}),o=Array.isArray(r)?r:[r];this.el=o[0],this.counter=0,(0,k.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave","handleDragEnd"),o.forEach(function(s){return e.toggleEffects(s,!0)})}return a.prototype.toggleEffects=function(n,t){var e={on:Wt.on,off:Wt.AU},r=t?"on":"off";e[r](n,"dragenter",this.handleDragEnter),e[r](n,"dragover",this.handleDragOver),e[r](n,"drop",this.handleDrop),e[r](n,"dragleave",this.handleDragLeave)},a.prototype.__customTglEff=function(n){var t,e=n?Wt.on:Wt.AU,r=this.el.ownerDocument,o=(t=r.defaultView)===null||t===void 0?void 0:t.frameElement,s=function(u){return{legacyOnStartSort:function(){(0,Wt.on)(o,"pointermove",u.onMove)},legacyOnEnd:function(){(0,Wt.AU)(o,"pointermove",u.onMove)},customTarget:function(c){var f=c.event;return r.elementFromPoint(f.clientX,f.clientY)}}};this.getSorterOptions=n?s:void 0,e(o,"pointerenter",this.handleDragEnter),e(o,"pointermove",this.handleDragOver),e(document,"pointerup",this.handleDrop),e(o,"pointerout",this.handleDragLeave)},a.prototype.startCustom=function(){this.__customTglEff(!0)},a.prototype.endCustom=function(n){this.over?this.endDrop(n):this.__customTglEff(!1)},a.prototype.endDrop=function(n,t){var e=this,r=e.em,o=e.dragStop;this.counter=0,o&&o(n||!this.over),this.__customTglEff(!1),r.trigger("canvas:dragend",t)},a.prototype.handleDragLeave=function(n){this.updateCounter(-1,n)},a.prototype.updateCounter=function(n,t){this.counter+=n,this.counter===0&&this.endDrop(!0,t)},a.prototype.handleDragEnter=function(n){var t=this,e,r,o,s=this,u=s.em,c=s.canvas,f=n.dataTransfer,h=u.get("dragSource");if(!(!(h!=null&&h.content)&&!c.getConfig().allowExternalDrop)&&(this.updateCounter(1,n),!this.over)){this.over=!0;var g=u.Utils,y=(h==null?void 0:h.content)||"<br>",_;if(u.stopDefault(),u.inAbsoluteMode()){var b=u.Components.getWrapper(),x=b.append({})[0],T=u.Commands.run("core:component-drag",{event:n,guidesInfo:1,center:1,target:x,onEnd:function(_t,xt,ut){var q=ut.cancelled,nt;if(!q&&y){nt=b.append(y)[0];var H=c.getOffset(),V=x.getStyle(),U=V.top,B=V.left,tt=V.position,A=(0,Wt.Xy)(_t.target),yt=parseInt("".concat(parseFloat(B)+A.x-H.left),10),gt=parseInt("".concat(parseFloat(U)+A.y-H.top),10);nt.addStyle({left:yt+"px",top:gt+"px",position:tt})}t.handleDragEnd(nt,f),x.remove()}});_=function(_t){return T.stop(n,{cancel:_t})},this.setAbsoluteDragContent=function(_t){return y=_t}}else{var I=new g.ComponentSorter({em:u,treeClass:v0,containerContext:{container:this.el,containerSel:"*",itemSel:"*",pfx:"gjs-",placeholderElement:c.getPlacerEl(),document:this.el.ownerDocument},dragBehavior:{dragDirection:aa.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnEndMove:this.handleDragEnd}}),z=(e=this.getSorterOptions)===null||e===void 0?void 0:e.call(this,I);z&&(I.eventHandlers.legacyOnStartSort=z.legacyOnStart,I.eventHandlers.legacyOnEnd=z.legacyOnEnd,I.containerContext.customTarget=z.customTarget);var F=this.getTempDropModel(y),W=(r=F.view)===null||r===void 0?void 0:r.el,ct=W?[{element:W,dragSource:h}]:[];I.startSort(ct),this.sorter=I,this.draggedNode=(o=I.sourceNodes)===null||o===void 0?void 0:o[0],_=function(_t){_t?I.cancelDrag():I.endDrag()}}this.dragStop=_,u.trigger("canvas:dragenter",f,y)}},a.prototype.getTempDropModel=function(n){var t,e=this.em.Components.getComponents(),r={avoidChildren:1,avoidStore:1,avoidUpdateStyle:1},o=e.add(n,zi(zi({},r),{temporary:!0})),s=e.remove(o,zi(zi({},r),{temporary:!0}));return s=s instanceof Array?s[0]:s,(t=s.view)===null||t===void 0||t.$el.data("model",s),s},a.prototype.handleDragEnd=function(n,t){var e=this.em;this.over=!1,n&&(e.set("dragResult",n),e.trigger("canvas:drop",t,n)),e.runDefault({preserveSelected:1})},a.prototype.handleDragOver=function(n){n.preventDefault(),this.em.trigger("canvas:dragover",n)},a.prototype.handleDrop=function(n){var t;n.preventDefault();var e=n.dataTransfer,r=this.getContentByData(e).content;this.draggedNode&&(this.draggedNode.content=r),(t=this.setAbsoluteDragContent)===null||t===void 0||t.call(this,r),this.endDrop(!r,n)},a.prototype.getContentByData=function(n){var t=this.em,e=n&&n.types,r=n&&n.files||[],o=t.get("dragSource"),s=n&&n.getData("text");if(r.length){s=[];for(var u=0;u<r.length;u++){var c=r[u],f=c.type.split("/")[0];f=="image"&&s.push({type:f,file:c,attributes:{alt:c.name}})}}else if(o!=null&&o.content)s=o.content;else if((0,k.indexOf)(e,"text/html")>=0)s=n&&n.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,k.indexOf)(e,"text/uri-list")>=0)s={type:"link",attributes:{href:s},content:s};else if((0,k.indexOf)(e,"text/json")>=0){var h=n&&n.getData("text/json");h&&(s=JSON.parse(h))}else e.length===1&&e[0]==="text/plain"&&(s="<div>".concat(s,"</div>"));var g={content:s};return t.trigger("canvas:dragdata",n,g),g},a}();const y0=g0;var m0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mn=function(){return Mn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Mn.apply(this,arguments)},_0=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},w0=function(a){m0(n,a);function n(t,e){var r=a.call(this,{model:t})||this;r.dragging=!1,r.loaded=!1,r.lastMaxHeight=0,r.tools={},(0,k.bindAll)(r,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var o=r.el;r.module._config=Mn(Mn({},r.config||{}),{frameView:r}),r.frameWrapView=e,r.showGlobalTools=(0,k.debounce)(r.showGlobalTools.bind(r),50);var s=r.getCanvasModel();return r.listenTo(t,"change:head",r.updateHead),r.listenTo(s,"change:styles",r.renderStyles),t.view=r,(0,Pt.setViewEl)(o,r),r}return Object.defineProperty(n.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),n.prototype.getBoxRect=function(){var t=this,e=t.el,r=t.module,o=r.getCanvasView(),s=r.getCoords(),u=e.getBoundingClientRect(),c=o.getCanvasOffset(),f=o.getViewportDelta(),h=r.getZoomMultiplier(),g=(u.x-c.left-f.x-s.x)*h,y=(u.y-c.top-f.y-s.y)*h,_=u.width*h,b=u.height*h;return{x:g,y,width:_,height:b}},n.prototype.updateHead=function(){var t=this.model,e=this.getHead(),r=[],o=[],s=t.head,u=t.previous("head"),c=function(h){return h===void 0&&(h={}),Object.keys(h).sort().map(function(g){return"[".concat(g,'="').concat(h[g],'"]')}).join("")},f=function(h,g,y){h.forEach(function(_){var b=_.tag,x=_.attributes,T=g.some(function(I){return I.tag===b&&c(I.attributes)===c(x)});!T&&y.push(_)})};f(s,u,o),f(u,s,r),r.forEach(function(h){var g,y=e.querySelector("".concat(h.tag).concat(c(h.attributes)));(g=y==null?void 0:y.parentNode)===null||g===void 0||g.removeChild(y)}),(0,Wt.af)(e,o)},n.prototype.getEl=function(){return this.el},n.prototype.getCanvasModel=function(){var t;return(t=this===null||this===void 0?void 0:this.em.Canvas)===null||t===void 0?void 0:t.getModel()},n.prototype.getWindow=function(){return this.getEl().contentWindow},n.prototype.getDoc=function(){return this.getEl().contentDocument},n.prototype.getHead=function(){return this.getDoc().querySelector("head")},n.prototype.getBody=function(){return this.getDoc().querySelector("body")},n.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},n.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,Wt.a_)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},n.prototype.getToolsEl=function(){var t;return(t=this.frameWrapView)===null||t===void 0?void 0:t.elTools},n.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},n.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},n.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},n.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},n.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},n.prototype.getOffsetRect=function(){var t=this.el,e=this.getBody(),r=e.scrollTop,o=e.scrollLeft,s=t.offsetHeight,u=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:s,width:u,scrollTop:r,scrollLeft:o,scrollBottom:r+s,scrollRight:o+u}},n.prototype._getTool=function(t){var e=this.tools,r=this.getToolsEl();return e[t]||(e[t]=r.querySelector(t)),e[t]},n.prototype.remove=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._toggleEffects(!1),this.tools={},(t=this.wrapper)===null||t===void 0||t.remove(),jn.prototype.remove.apply(this,e),this},n.prototype.startAutoscroll=function(){var t=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout(function(){t._toggleAutoscrollFx(!0),requestAnimationFrame(t.autoscroll)},0)},n.prototype.autoscroll=function(){if(this.dragging){var t=this.lastClientY,e=this.em.Canvas,r=this.getWindow(),o=r.pageYOffset,s=t||0,u=e.getConfig().autoscrollLimit,c=this.getRect().height-u,f=o;if(s<u&&(f-=u-s),s>c&&(f+=s-c),!(0,k.isUndefined)(t)&&f!==o&&f>0&&f<this.lastMaxHeight){var h=this.getGlobalToolsEl();h.style.opacity="0",this.showGlobalTools(),r.scrollTo(0,f),e.spots.refreshDbn()}requestAnimationFrame(this.autoscroll)}},n.prototype.updateClientY=function(t){t.preventDefault(),this.lastClientY=(0,Wt.G2)(t).clientY*this.em.getZoomDecimal()},n.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},n.prototype.stopAutoscroll=function(){this.dragging&&this._toggleAutoscrollFx(!1)},n.prototype._toggleAutoscrollFx=function(t){this.dragging=t;var e=this.getWindow(),r=t?"on":"off",o={on:Wt.on,off:Wt.AU};o[r](e,"mousemove dragover",this.updateClientY),o[r](e,"mouseup",this.stopAutoscroll)},n.prototype.render=function(){var t=this,e=t.$el,r=t.ppfx,o=t.em;return e.attr({class:"".concat(r,"frame")}),this.renderScripts(),o.trigger("frame:render",this),this},n.prototype.renderScripts=function(){var t=this,e=this,r=e.el,o=e.model,s=e.em,u="frame:load",c={el:r,model:o,view:this},f=this.getCanvasModel(),h=function(g){var y;if(g.length>0){var _=g.shift(),b=(0,Wt.a_)("script",Mn({type:"text/javascript"},(0,k.isString)(_)?{src:_}:_));(y=r.contentDocument)===null||y===void 0||y.head.appendChild(b),b.hasAttribute("nomodule")&&"noModule"in HTMLScriptElement.prototype?h(g):b.onerror=b.onload=h.bind(null,g)}else s==null||s.trigger(il.frameLoadHead,c),t.renderBody(),s==null||s.trigger(il.frameLoadBody,c),s==null||s.trigger(u,c)};r.onload=function(){var g=t.config.frameContent;if(g){var y=t.getDoc();y.open(),y.write(g),y.close()}c.window=t.getWindow(),s==null||s.trigger("".concat(u,":before"),c),s==null||s.trigger(il.frameLoad,c),t.renderHead(),h(_0([],f.get("scripts"),!0))}},n.prototype.renderStyles=function(t){t===void 0&&(t={});var e=this.getHead(),r=this.getCanvasModel(),o=function(g){return g===void 0&&(g=[]),g.map(function(y){return{tag:"link",attributes:Mn({rel:"stylesheet"},(0,k.isString)(y)?{href:y}:y)}})},s=o(t.prev||r.previous("styles")),u=o(r==null?void 0:r.get("styles")),c=[],f=[],h=function(g,y,_){g.forEach(function(b){var x=b.attributes.href,T=y.some(function(I){return I.attributes.href===x});!T&&_.push(b)})};h(u,s,f),h(s,u,c),c.forEach(function(g){var y,_=e.querySelector('link[href="'.concat(g.attributes.href,'"]'));(y=_==null?void 0:_.parentNode)===null||y===void 0||y.removeChild(_)}),(0,Wt.af)(e,f)},n.prototype.renderHead=function(){var t,e=this,r=e.model,o=e.em,s=r.root,u=(t=o==null?void 0:o.Components)===null||t===void 0?void 0:t.getType(ra).view;u&&(this.headView=new u({el:this.getHead(),model:s.head,config:Mn(Mn({},s.config),{frameView:this})}).render())},n.prototype.renderBody=function(){var t=this,e,r,o,s=this,u=s.config,c=s.em,f=s.model,h=s.ppfx,g=this.getDoc(),y=this.getBody(),_=this.getWindow(),b=f.hasAutoHeight(),x=c.config;_._isEditor=!0,this.renderStyles({prev:[]});var T="#ffca6f";(0,Wt.BC)(y,`<style>
      `.concat(x.baseCss||u.frameStyle||"",`

      `).concat(b?"body { overflow: hidden }":"",`

      [data-gjs-type="wrapper"] {
        `).concat(b?"":"min-height: 100vh;",`
        padding-top: 0.001em;
      }

      .`).concat(h,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(h,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(h,`selected-parent {
        outline: 2px solid `).concat(T,` !important
      }

      .`).concat(h,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(h,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(h,`no-pointer {
        pointer-events: none;
      }

      .`).concat(h,`pointer-init {
        pointer-events: initial;
      }

      .`).concat(h,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(h,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(h,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(h,`is__grabbing,
      .`).concat(h,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(x.canvasCss||"",`
      `).concat(x.protectedCss||"",`
    </style>`));var I=f.root,z=(((e=c==null?void 0:c.Components)===null||e===void 0?void 0:e.getType("wrapper"))||{}).view;z&&(this.wrapper=new z({model:I,config:Mn(Mn({},I.config),{em:c,frameView:this})}).render(),(0,Wt.BC)(y,(r=this.wrapper)===null||r===void 0?void 0:r.el),(0,Wt.BC)(y,new Ch({collection:f.getStyles(),config:Mn(Mn({},c.Css.getConfig()),{frameView:this})}).render().el),(0,Wt.BC)(y,this.getJsContainer()),(0,Wt.on)(y,"click",function(F){var W;return F&&((W=F.target)===null||W===void 0?void 0:W.tagName)=="A"&&F.preventDefault()}),(0,Wt.on)(y,"submit",function(F){return F&&F.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!u.infiniteCanvas}}].forEach(function(F){return F.event.split(" ").forEach(function(W){g.addEventListener(W,function(ct){return t.el.dispatchEvent((0,Wt.yL)(ct,F.class))},F.opts)})}),this._toggleEffects(!0),(0,Pt.hasDnd)(c)&&(this.droppable=new y0(c,(o=this.wrapper)===null||o===void 0?void 0:o.el)),this.loaded=!0,f.trigger("loaded"))},n.prototype._toggleEffects=function(t){var e=t?Wt.on:Wt.AU,r=this.getWindow();r&&e(r,"".concat(Wt.D8," resize"),this._emitUpdate)},n.prototype._emitUpdate=function(){this.model._emitUpdated()},n}(jn);const b0=w0;var Fh=De(5633),C0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ki=function(){return Ki=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ki.apply(this,arguments)},x0=function(a){C0(n,a);function n(t,e){var r=a.call(this,{model:t})||this;return(0,k.bindAll)(r,"onScroll","frameLoaded","updateOffset","remove","startDrag"),Ki(Ki({},t.config),{frameWrapView:r}),r.cv=e,r.frame=new b0(t,r),r.classAnim="".concat(r.ppfx,"frame-wrapper--anim"),r.updateOffset=(0,k.debounce)(r.updateOffset.bind(r),0),r.updateSize=(0,k.debounce)(r.updateSize.bind(r),0),r.listenTo(t,"loaded",r.frameLoaded),r.listenTo(t,"change:x change:y",r.updatePos),r.listenTo(t,"change:width change:height",r.updateSize),r.listenTo(t,"destroy remove",r.remove),r.updatePos(),r.setupDragger(),r}return n.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},n.prototype.setupDragger=function(){var t=this,e=this,r=e.module,o=e.model,s,u,c,f=function(h){r.toggleFramesEvents(h)};this.dragger=new Fh.A({onStart:function(){var h=o.attributes,g=h.x,y=h.y;c=t.em.getZoomMultiplier(),s=g,u=y,f(!1)},onEnd:function(){return f(!0)},setPosition:function(h){o.set({x:s+h.x*c,y:u+h.y*c})}})},n.prototype.startDrag=function(t){var e;t&&((e=this.dragger)===null||e===void 0||e.start(t))},n.prototype.__clear=function(t){var e=this.frame;e&&e.remove(t),(0,Wt.YZ)(this.elTools)},n.prototype.remove=function(t){var e=this;return this.__clear(t),jn.prototype.remove.apply(this,t),["frame","dragger","cv","elTools"].forEach(function(r){return e[r]=0}),this},n.prototype.updateOffset=function(){var t,e=this,r=e.em,o=e.$el,s=e.frame;!r||r.destroyed||(r.runDefault({preserveSelected:1}),o.removeClass(this.classAnim),(t=s==null?void 0:s.model)===null||t===void 0||t._emitUpdated())},n.prototype.updatePos=function(t){var e=this,r=e.model,o=e.el,s=r.attributes,u=s.x,c=s.y,f=o.style;this.frame.rect=void 0,f.left=isNaN(u)?u:"".concat(u,"px"),f.top=isNaN(c)?c:"".concat(c,"px"),t&&this.updateOffset()},n.prototype.updateSize=function(){this.updateDim()},n.prototype.updateDim=function(){var t=this,e=t.em,r=t.el,o=t.$el,s=t.model,u=t.classAnim,c=t.frame;if(c){c.rect=void 0,o.addClass(u);var f=this.__handleSize(),h=f.noChanges,g=f.width,y=f.height;((0,k.isNull)(g)||(0,k.isNull)(y))&&s.set(Ki(Ki({},g?{}:{width:r.offsetWidth}),y?{}:{height:r.offsetHeight}),{silent:1}),e.stopDefault({preserveSelected:1}),h?this.updateOffset():setTimeout(this.updateOffset,350)}},n.prototype.onScroll=function(){var t=this,e=t.frame,r=t.em;r.trigger("frame:scroll",{frame:e,body:e.getBody(),target:e.getWindow()})},n.prototype.frameLoaded=function(){var t=this,e=t.frame;t.config,e.getWindow().onscroll=this.onScroll,this.updateDim()},n.prototype.__handleSize=function(){var t,e,r="px",o=this,s=o.model,u=o.el,c=u.style,f=s.attributes,h=f.width,g=f.height,y=c.width||"",_=c.height||"",b=h||"",x=g||"",T=y==b&&_==x,I=(0,k.isNumber)(b)?"".concat(b).concat(r):b,z=(0,k.isNumber)(x)?"".concat(x).concat(r):x;if(c.width=I,s.hasAutoHeight()){var F=this.frame.el;if(F.contentDocument){var W=F.contentDocument,ct=new ResizeObserver(function(){c.height="".concat(W.body.scrollHeight,"px")});ct.observe(W.body),(t=this.sizeObserver)===null||t===void 0||t.disconnect(),this.sizeObserver=ct}}else c.height=z,(e=this.sizeObserver)===null||e===void 0||e.disconnect(),delete this.sizeObserver;return{noChanges:T,width:h,height:g,newW:b,newH:x}},n.prototype.render=function(){var t=this,e=t.frame,r=t.$el,o=t.ppfx,s=t.cv,u=t.model,c=t.el,f=u.attributes.onRender;this.__clear(),this.__handleSize(),e.render(),r.empty().attr({class:"".concat(o,"frame-wrapper")}).append(`
      <div class="`.concat(o,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(o,`frame-wrapper__name" data-action-move>
          `).concat(u.get("name")||"",`
        </div>
        <div class="`).concat(o,`frame-wrapper__top-r">
          <div class="`).concat(o,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(o,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(o,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(o,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(e.el);var h=(0,Wt.a_)("div",{class:"".concat(o,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(o,`highlighter" data-hl></div>
      <div class="`).concat(o,`badge" data-badge></div>
      <div class="`).concat(o,`placeholder">
        <div class="`).concat(o,`placeholder-int"></div>
      </div>
      <div class="`).concat(o,`ghost"></div>
      <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(o,`resizer"></div>
      <div class="`).concat(o,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(o,`offset-fixed-v"></div>
    `));this.elTools=h;var g=s==null?void 0:s.toolsWrapper;return g&&g.appendChild(h),f&&f({el:c,elTop:c.querySelector("[data-frame-top]"),elRight:c.querySelector("[data-frame-right]"),elBottom:c.querySelector("[data-frame-bottom]"),elLeft:c.querySelector("[data-frame-left]"),frame:u,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},n}(jn);const S0=x0;var O0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),T0=function(a){O0(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,!0)||this;return r.listenTo(r.collection,"reset",r.render),r.canvasView=e.canvasView,r._module=e.module,r}return n.prototype.onRemoveBefore=function(t,e){e===void 0&&(e={}),t.forEach(function(r){return r.remove(e)})},n.prototype.onRender=function(){var t=this,e=t.$el,r=t.ppfx;e.attr({class:"".concat(r,"frames")})},n.prototype.clearItems=function(){var t=this.viewCollection||[];t.forEach(function(e){return e.remove()}),this.viewCollection=[]},n.prototype.renderView=function(t,e){return new S0(t,this.canvasView)},n}(um);const P0=T0;var E0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wl=function(){return wl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},wl.apply(this,arguments)},A0=function(a){E0(n,a);function n(t){var e=a.call(this,{model:t})||this;e.ready=!1,(0,k.bindAll)(e,"clearOff","onKeyPress","onWheel","onPointer");var r=e,o=r.em,s=r.pfx,u=r.ppfx,c=e.module.events;return e.className="".concat(s,"canvas ").concat(u,"no-touch-actions").concat(o.config.customUI?"":" ".concat(s,"canvas-bg")),e.clsUnscale="".concat(s,"unscale"),e._initFrames(),e.listenTo(o,c.refresh,e.clearOff),e.listenTo(o,"component:selected",e.checkSelected),e.listenTo(o,"".concat(c.coords," ").concat(c.zoom),e.updateFrames),e.listenTo(t,"change:frames",e._onFramesUpdate),e.toggleListeners(!0),e}return n.prototype.template=function(){var t=this.pfx;return`
      <div class="`.concat(t,`canvas__frames" data-frames>
        <div class="`).concat(t,`canvas__spots" data-spots></div>
      </div>
      <div id="`).concat(t,'tools" class="').concat(t,`canvas__tools" data-tools></div>
      <style data-canvas-style></style>
    `)},n.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},n.prototype._initFrames=function(){var t=this,e=t.frames,r=t.model,o=t.config,s=t.em,u=r.frames;s.set("readyCanvas",0),u.once("loaded:all",function(){return s.set("readyCanvas",1)}),e==null||e.remove(),this.frames=new P0({collection:u},wl(wl({},o),{canvasView:this}))},n.prototype.checkSelected=function(t,e){var r;e===void 0&&(e={});var o=e.scroll,s=this.em.getCurrentFrame();o&&((r=t.views)===null||r===void 0||r.forEach(function(u){u.frameView===s&&u.scrollIntoView(o)}))},n.prototype.remove=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this.frames)===null||t===void 0||t.remove(),this.frames=void 0,jn.prototype.remove.apply(this,e),this.toggleListeners(!1),this},n.prototype.preventDefault=function(t){var e;t&&(t.preventDefault(),(e=t._parentEvent)===null||e===void 0||e.preventDefault())},n.prototype.toggleListeners=function(t){var e=this,r=e.el,o=e.config,s=t?Wt.on:Wt.AU;s(document,"keypress",this.onKeyPress),s(window,"scroll resize",this.clearOff),s(r,"wheel",this.onWheel,{passive:!o.infiniteCanvas}),s(r,"pointermove",this.onPointer)},n.prototype.screenToWorld=function(t,e){var r=this.module,o=r.getCoords(),s=r.getZoomMultiplier(),u=this.getViewportDelta();return{x:(t-o.x-u.x)*s,y:(e-o.y-u.y)*s}},n.prototype.onPointer=function(t){if(this.config.infiniteCanvas){var e=this.getCanvasOffset(),r=(0,Wt.Xy)(),o={x:t.clientX-e.left+r.x,y:t.clientY-e.top+r.y};if(t._parentEvent){var s=t.target.getBoundingClientRect(),u=this.module.getZoomDecimal();o.x=s.left-e.left+r.x+t.clientX*u,o.y=s.top-e.top+r.y+t.clientY*u}this.model.set({pointerScreen:o,pointer:this.screenToWorld(o.x,o.y)})}},n.prototype.onKeyPress=function(t){var e=this.em,r=(0,Wt.Ch)(t);r===" "&&e.getZoomDecimal()!==1&&!e.Canvas.isInputFocused()&&(this.preventDefault(t),e.Editor.runCommand("core:canvas-move"))},n.prototype.onWheel=function(t){var e=this,r=e.module,o=e.config;if(o.infiniteCanvas){this.preventDefault(t);var s=t.deltaX,u=t.deltaY,c=r.getZoomDecimal(),f=(0,Wt.rp)(t),h=r.getCoords();if(f){var g=c-u*c*.01;r.setZoom(g*100);var y=this.model.getPointerCoords(Nt.x2.Screen),_=this.getCanvasOffset(),b=y.x-_.width/2,x=y.y-_.height/2,T=g/c,I=b-(b-h.x)*T,z=x-(x-h.y)*T;r.setCoords(I,z)}else this.onPointer(t),r.setCoords(h.x-s,h.y-u)}},n.prototype.updateFrames=function(t){var e=this.em,r=this.toolsWrapper,o={preserveSelected:1};this.updateFramesArea(),this.clearOff(),r.style.display="none",e.trigger("canvas:update",t),this.timerZoom&&clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){e.stopDefault(o),e.runDefault(o),r.style.display=""},300)},n.prototype.updateFramesArea=function(){var t=this,e=t.framesArea,r=t.model,o=t.module,s=t.cvStyle,u=t.clsUnscale,c=o.getZoomMultiplier();if(e){var f=r.attributes,h=f.x,g=f.y,y=o.getZoomDecimal();e.style.transform="scale(".concat(y,") translate(").concat(h*c,"px, ").concat(g*c,"px)")}s&&(s.innerHTML=`
        .`.concat(u," { scale: ").concat(c,` }
      `))},n.prototype.fitViewport=function(t){var e,r;t===void 0&&(t={});var o=this,s=o.em,u=o.module,c=o.model,f=this.getCanvasOffset(),h=t.el,g=h&&((e=(0,Pt.getComponentView)(h))===null||e===void 0?void 0:e.frameView),y=g?g.model:t.frame||s.getCurrentFrameModel()||c.frames.at(0),_=y.attributes,b=_.x,x=_.y,T={x:b??0,y:x??0,width:y.width,height:y.height};if(h){var I=this.getElBoxRect(h);T.x=T.x+I.x,T.y=T.y+I.y,T.width=I.width,T.height=I.height}var z=t.ignoreHeight,F=(r=t.gap)!==null&&r!==void 0?r:0,W=(0,k.isNumber)(F),ct=W?F:F.x,_t=W?F:F.y,xt=T.width+ct*2,ut=T.height+_t*2,q=f.width,nt=f.height,H=q/xt,V=nt/ut,U=z?H:Math.min(H,V),B=U*100;u.setZoom(B);var tt=-T.x+(y.width>=q?q/2-xt/2:-ct),A=-T.y+nt/2-ut/2,yt={x:(tt+ct)*U,y:(A+_t)*U};if(z){var gt=u.getZoomMultiplier(),Mt=nt*gt,qt=Mt-nt,ft=qt/2;yt.y=(-T.y+_t)*U-ft/gt}u.setCoords(yt.x,yt.y)},n.prototype.isElInViewport=function(t){var e=(0,Pt.getElement)(t),r=(0,Wt.C8)(e),o=this.getFrameOffset(e),s=r.top,u=r.left;return s>=0&&u>=0&&s<=o.height&&u<=o.width},n.prototype.offset=function(t,e){e===void 0&&(e={});var r=e.noScroll,o=(0,Wt.C8)(t),s=r?{x:0,y:0}:(0,Wt.Xy)(t);return{top:o.top+s.y,left:o.left+s.x,width:o.width,height:o.height}},n.prototype.getRectToScreen=function(t){var e,r,o,s,u=this.module.getZoomDecimal(),c=this.module.getCoords(),f=this.getViewportDelta(),h=((e=t.x)!==null&&e!==void 0?e:0)*u+c.x+f.x||0,g=((r=t.y)!==null&&r!==void 0?r:0)*u+c.y+f.y||0;return{x:h,y:g,width:((o=t.width)!==null&&o!==void 0?o:0)*u,height:((s=t.height)!==null&&s!==void 0?s:0)*u}},n.prototype.getElBoxRect=function(t,e){var r,o,s;e===void 0&&(e={});var u=this.module,c=(0,Wt.C8)(t),f=c.width,h=c.height,g=c.left,y=c.top,_=(r=(0,Pt.getComponentView)(t))===null||r===void 0?void 0:r.frameView,b=_==null?void 0:_.getBoxRect(),x=u.getZoomMultiplier(),T=(o=b==null?void 0:b.x)!==null&&o!==void 0?o:0,I=(s=b==null?void 0:b.y)!==null&&s!==void 0?s:0,z=this.el,F=(0,Wt.Xy)(),W=g+T+(z.scrollLeft+F.x)*x,ct=y+I+(z.scrollTop+F.y)*x,_t={x:W,y:ct,width:f,height:h};return e.local&&(_t.x=g,_t.y=y),e.toScreen?this.getRectToScreen(_t):_t},n.prototype.getViewportRect=function(t){t===void 0&&(t={});var e=this.getCanvasOffset(),r=e.top,o=e.left,s=e.width,u=e.height,c=this.module;if(t.toWorld){var f=c.getZoomMultiplier(),h=c.getCoords(),g=this.getViewportDelta(),y=-h.x-g.x||0,_=-h.y-g.y||0;return{x:y*f,y:_*f,width:s*f,height:u*f}}else return{x:o,y:r,width:s,height:u}},n.prototype.getViewportDelta=function(t){var e=this.module.getZoomMultiplier(),r=this.getCanvasOffset(),o=r.width,s=r.height,u=o*e,c=s*e,f=u-o,h=c-s;return{x:f/2/e,y:h/2/e}},n.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},n.prototype.getFrameOffset=function(t){var e;if(!this.frmOff||t){var r=(e=this.frame)===null||e===void 0?void 0:e.el,o=t==null?void 0:t.ownerDocument.defaultView,s=o?o.frameElement:r;this.frmOff=this.offset(s||r)}return this.frmOff},n.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},n.prototype.getElementPos=function(t,e){e===void 0&&(e={});var r=this.module.getZoomDecimal(),o=this.getFrameOffset(t),s=this.el,u=this.getCanvasOffset(),c=this.offset(t,e),f=e.avoidFrameOffset?0:o.top,h=e.avoidFrameOffset?0:o.left,g=e.avoidFrameZoom?c.top:c.top*r,y=e.avoidFrameZoom?c.left:c.left*r,_=e.avoidFrameOffset?g:g+f-u.top+s.scrollTop,b=e.avoidFrameOffset?y:y+h-u.left+s.scrollLeft,x=e.avoidFrameZoom?c.height:c.height*r,T=e.avoidFrameZoom?c.width:c.width*r;return{top:_,left:b,height:x,width:T,zoom:r,rect:c}},n.prototype.getElementOffsets=function(t){if(!t||(0,Wt.ir)(t))return{};var e={},r=window.getComputedStyle(t),o=this.module.getZoomDecimal(),s=["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"];return s.forEach(function(u){e[u]=parseFloat(r[u])*o}),e},n.prototype.getPosition=function(t){var e;t===void 0&&(t={});var r=(e=this.frame)===null||e===void 0?void 0:e.el.contentDocument;if(!r)return{top:0,left:0,width:0,height:0};var o=r.body,s=this.module.getZoomDecimal(),u=this.getFrameOffset(),c=this.getCanvasOffset(),f=t.noScroll;return{top:u.top+(f?0:o.scrollTop)*s-c.top,left:u.left+(f?0:o.scrollLeft)*s-c.left,width:c.width,height:c.height}},n.prototype.updateScript=function(t){var e=t.model,r=e.getId();if(!t.scriptContainer){t.scriptContainer=(0,Wt.a_)("div",{"data-id":r});var o=this.getJsContainer();o==null||o.appendChild(t.scriptContainer)}t.el.id=r,t.scriptContainer.innerHTML="";var s=document.createElement("script"),u=e.getScriptString(),c=e.get("script-props")?u:`function(){
`.concat(u,`
;}`),f=JSON.stringify(e.__getScriptProps());s.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(r,`');
        if (!item) return;
        var script = (`).concat(c,`).bind(item);
        script(`).concat(f,`);
      }, 1);`),setTimeout(function(){var h=t.scriptContainer;h==null||h.appendChild(s)},0)},n.prototype.getJsContainer=function(t){var e=this.getFrameView(t);return e==null?void 0:e.getJsContainer()},n.prototype.getFrameView=function(t){return(t==null?void 0:t.frameView)||this.em.getCurrentFrame()},n.prototype._renderFrames=function(){if(this.ready){var t=this,e=t.model,r=t.frames,o=t.em,s=t.framesArea,u=e.frames;u.listenToLoad(),r.render();var c=u.at(0),f=c==null?void 0:c.view;o.setCurrentFrame(f),s==null||s.appendChild(r.el),this.frame=f,this.updateFramesArea()}},n.prototype.renderFrames=function(){this._renderFrames()},n.prototype.render=function(){var t=this,e=t.el,r=t.$el,o=t.ppfx,s=t.config,u=t.em;r.html(this.template());var c=r.find("[data-frames]");this.framesArea=c.get(0);var f=r.find("[data-tools]");return this.toolsWrapper=f.get(0),f.append(`
      <div class="`.concat(o,"tools ").concat(o,`tools-gl" style="pointer-events:none">
        <div class="`).concat(o,`placeholder">
          <div class="`).concat(o,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(o,`tools" style="pointer-events:none">
        `).concat(s.extHl?'<div class="'.concat(o,'highlighter-sel"></div>'):"",`
        <div class="`).concat(o,`badge"></div>
        <div class="`).concat(o,`ghost"></div>
        <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(o,`resizer"></div>
        <div class="`).concat(o,`offset-v"></div>
        <div class="`).concat(o,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=e.querySelector("#".concat(o,"tools")),this.hlEl=e.querySelector(".".concat(o,"highlighter")),this.badgeEl=e.querySelector(".".concat(o,"badge")),this.placerEl=e.querySelector(".".concat(o,"placeholder")),this.ghostEl=e.querySelector(".".concat(o,"ghost")),this.toolbarEl=e.querySelector(".".concat(o,"toolbar")),this.resizerEl=e.querySelector(".".concat(o,"resizer")),this.offsetEl=e.querySelector(".".concat(o,"offset-v")),this.fixedOffsetEl=e.querySelector(".".concat(o,"offset-fixed-v")),this.toolsGlobEl=e.querySelector(".".concat(o,"tools-gl")),this.spotsEl=e.querySelector("[data-spots]"),this.cvStyle=e.querySelector("[data-canvas-style]"),this.el.className=(0,Pt.getUiClass)(u,this.className),this.ready=!0,this._renderFrames(),this},n}(jn);const k0=A0;var M0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ii=function(){return ii=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ii.apply(this,arguments)},D0=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},L0=function(a){M0(n,a);function n(t){var e=a.call(this,t,"Canvas",Ay())||this;return e.events=cl,e.framesById={},e.canvas=new em(e),e.spots=new om(e),e.model=e.canvas,e.startAutoscroll=e.startAutoscroll.bind(e),e.stopAutoscroll=e.stopAutoscroll.bind(e),e}return n.prototype.getCanvasView=function(){return this.canvasView},n.prototype.postLoad=function(){this.model.init()},n.prototype.getModel=function(){return this.canvas},n.prototype.getElement=function(){return this.getCanvasView().el},n.prototype.getFrame=function(t){return this.getFrames()[t||0]},n.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.el},n.prototype.getFramesEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.framesArea},n.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.getWindow()},n.prototype.getDocument=function(){var t=this.getFrameEl();return t==null?void 0:t.contentDocument},n.prototype.getBody=function(){var t=this.getDocument();return t==null?void 0:t.body},n.prototype._getLocalEl=function(t,e,r){var o=t,s=e==null?void 0:e.frameView;return o=s?s[r]():o,o},n.prototype.getGlobalToolsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.toolsGlobEl},n.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,"getToolsEl")},n.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,"getHighlighter")},n.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,"getBadgeEl")},n.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},n.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},n.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},n.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},n.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,"getOffsetViewerEl")},n.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},n.prototype.getSpotsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.spotsEl},n.prototype.render=function(){var t;return(t=this.canvasView)===null||t===void 0||t.remove(),this.canvasView=new k0(this.canvas),this.canvasView.render().el},n.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),e=this.offset(this.getElement());return{top:t.top-e.top,left:t.left-e.left}},n.prototype.offset=function(t){return this.getCanvasView().offset(t)},n.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},n.prototype.getElementPos=function(t,e){return this.getCanvasView().getElementPos(t,e)},n.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},n.prototype.getRect=function(){var t,e=(t=this.getCanvasView().getPosition())!==null&&t!==void 0?t:{},r=e.top,o=r===void 0?0:r,s=e.left,u=s===void 0?0:s;return ii(ii({},this.getCanvasView().getCanvasOffset()),{topScroll:o,leftScroll:u})},n.prototype.getTargetToElementDim=function(t,e,r){r===void 0&&(r={});var o=r||{},s=this.getCanvasView().getPosition();if(s){var u=o.elPos||this.getCanvasView().getElementPos(e),c=r.toRight||0,f=o.targetHeight||t.offsetHeight,h=o.targetWidth||t.offsetWidth,g=o.event||null,y=u.top-f,_=u.left;_+=c?u.width:0,_=c?_-h:_;var b=_<s.left?s.left:_,x=y<s.top?s.top:y;x=x>u.top+u.height?u.top+u.height:x;var T={top:x,left:b,elementTop:u.top,elementLeft:u.left,elementWidth:u.width,elementHeight:u.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:s.top,canvasLeft:s.left,canvasWidth:s.width,canvasHeight:s.height};return g&&this.em&&this.em.trigger(g,T),T}},n.prototype.canvasRectOffset=function(t,e,r){var o=this;r===void 0&&(r={});var s=function(c){var f=c.defaultView;return f==null?void 0:f.frameElement},u=function(c,f,h){f===void 0&&(f=1);var g=o.em.getZoomDecimal(),y=f?"top":"left",_=c.ownerDocument,b=r.offset?s(_):{},x=b.offsetTop,T=x===void 0?0:x,I=b.offsetLeft,z=I===void 0?0:I,F=_.body||{},W=F.scrollTop,ct=W===void 0?0:W,_t=F.scrollLeft,xt=_t===void 0?0:_t,ut=f?ct:xt,q=f?T:z;return h[y]-(ut-q)*g};return{top:u(t,1,e),left:u(t,0,e)}},n.prototype.getTargetToElementFixed=function(t,e,r){r===void 0&&(r={});var o=r.pos||this.getElementPos(t,{noScroll:!0}),s=r.canvasOff||this.canvasRectOffset(t,o),u=e.offsetHeight||0,c=e.offsetWidth||0,f=o.left+o.width,h=this.getCanvasView(),g=h.getPosition(),y=h.getFrameOffset(t),_=r.event,b=-u,x=(0,k.isUndefined)(r.left)?o.width-c:r.left;if(x=o.left<-x?-o.left:x,x=f>g.width?x-(f-g.width):x,s.top<u){var T=o.height+u,I=T<y.height;I?b=b+T:b=-s.top<o.height?-s.top:o.height}var z={top:b,left:x,canvasOffsetTop:s.top,canvasOffsetLeft:s.left,elRect:o,canvasOffset:s,canvasRect:g,targetWidth:c,targetHeight:u};return _&&this.em.trigger(_,z),z},n.prototype.getMouseRelativePos=function(t,e){e===void 0&&(e={});var r=e.subWinOffset,o=t.target.ownerDocument,s=o.defaultView||o.parentWindow,u=s.frameElement,c=r?s.pageYOffset:0,f=r?s.pageXOffset:0,h=this.getZoomMultiplier(),g=0,y=0;if(u){var _=u.getBoundingClientRect();g=_.top||0,y=_.left||0}return{y:(t.clientY+g-c)*h,x:(t.clientX+y-f)*h}},n.prototype.getMouseRelativeCanvas=function(t,e){var r,o=this.getZoomDecimal(),s=(r=this.getCanvasView().getPosition(e))!==null&&r!==void 0?r:{},u=s.top,c=u===void 0?0:u,f=s.left,h=f===void 0?0:f;return{y:t.clientY*o+c,x:t.clientX*o+h}},n.prototype.startDrag=function(t){this.em.set("dragSource",t)},n.prototype.endDrag=function(){this.em.set({dragResult:null,dragSource:void 0})},n.prototype.hasFocus=function(){return this.getDocument().hasFocus()},n.prototype.isInputFocused=function(){var t=this.getDocument(),e=this.getFrameEl(),r=D0(["body"],this.config.notTextable,!0),o=e&&document.activeElement===e,s=o?t&&t.activeElement:document.activeElement;return s&&!r.some(function(u){return s.matches(u)})},n.prototype.scrollTo=function(t,e){e===void 0&&(e={});var r=(0,Pt.getElement)(t),o=r&&(0,Pt.getViewEl)(r);o&&o.scrollIntoView(e)},n.prototype.startAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.startAutoscroll()},n.prototype.stopAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.stopAutoscroll()},n.prototype.setZoom=function(t){return this.canvas.set("zoom",typeof t=="string"?parseFloat(t):t),this},n.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},n.prototype.setCoords=function(t,e,r){var o;r===void 0&&(r={});var s=t||t===0,u=e||e===0,c={x:this.canvas.get("x"),y:this.canvas.get("y")};if(s&&(c.x=parseFloat("".concat(t))),u&&(c.y=parseFloat("".concat(e))),r.toWorld){var f=(o=this.canvasView)===null||o===void 0?void 0:o.getViewportDelta();f&&(s&&(c.x=c.x-f.x),u&&(c.y=c.y-f.y))}return this.canvas.set(c),this},n.prototype.getCoords=function(){var t=this.canvas.attributes,e=t.x,r=t.y;return{x:e,y:r}},n.prototype.getPointer=function(t){var e=this.canvas.attributes,r=e.pointer,o=e.pointerScreen;return t?o:r},n.prototype.getZoomDecimal=function(){return this.getZoom()/100},n.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},n.prototype.fitViewport=function(t){var e;(e=this.canvasView)===null||e===void 0||e.fitViewport(t)},n.prototype.toggleFramesEvents=function(t){var e=this.getFramesEl().style;e.pointerEvents=t?"":"none"},n.prototype.getFrames=function(){return this.canvas.frames.map(function(t){return t})},n.prototype.addFrame=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.canvas.frames.add(new _h(this,ii({},t)),e)},n.prototype.getLastDragResult=function(){return this.em.get("dragResult")},n.prototype.addSpot=function(t,e){var r;e===void 0&&(e={});var o=t,s=this.getSpots(o);if(s.length){var u=s[0];return u.set(o),u}var c=o.componentView||((r=o.component)===null||r===void 0?void 0:r.view),f=new Ln.A(this,ii(ii({},o),{id:o.id||"cs_".concat(o.type,"_").concat(c==null?void 0:c.cid),type:o.type||""}));return this.spots.add(f,e),f},n.prototype.getSpots=function(t){return t===void 0&&(t={}),this.spots.where(t.id?{id:t.id}:t)},n.prototype.removeSpots=function(t){t===void 0&&(t={});var e=(0,k.isArray)(t)?t:this.getSpots(t),r=this.spots.remove(e);return r},n.prototype.hasCustomSpot=function(t){var e=this.config.customSpots;return!!(e===!0||e&&t&&e[t])},n.prototype.getWorldRectToScreen=function(t){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.getRectToScreen(t)},n.prototype.refresh=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.events,s=e.canvasView;s==null||s.clearOff(),(t.spots||t.all)&&(this.refreshSpots(),r.trigger("canvas:updateTools")),r.set("canvasOffset",this.getOffset()),r.trigger(o.refresh,t)},n.prototype.refreshSpots=function(){this.spots.refresh()},n.prototype.destroy=function(){var t=this,e;this.canvas.stopListening(),(e=this.canvasView)===null||e===void 0||e.remove(),["model","droppable"].forEach(function(r){return t[r]={}})},n}(dn);const j0=L0;var V0=function(){return{stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]}};const I0=V0;var N0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bl=function(){return bl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},bl.apply(this,arguments)},R0=function(a){N0(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return bl(bl({},a.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){var t=this.content,e=this.parent();return e!=null&&e.is("script")?t:this.__escapeContent(t)},n.prototype.__escapeContent=function(t){return(0,Pt.escapeNodeContent)(t)},n.isComponent=function(t){var e;if(t.nodeType===3)return{type:"textnode",content:(e=t.textContent)!==null&&e!==void 0?e:""}},n}(cr);const Hh=R0;var F0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ic=function(){return Ic=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ic.apply(this,arguments)},H0=function(a){F0(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Ic({},a.prototype.defaults)},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){return"<!--".concat(this.content,"-->")},n.isComponent=function(t){var e;if(t.nodeType==8)return{type:"comment",content:(e=t.textContent)!==null&&e!==void 0?e:""}},n}(Hh);const B0=H0;var U0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cl=function(){return Cl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Cl.apply(this,arguments)},Qu="iframe",W0=function(a){U0(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Cl(Cl({},a.prototype.defaults),{type:Qu,tagName:Qu,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Pt.toLowerCase)(t.tagName)===Qu},n}(cr);const z0=W0;var K0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xl=function(){return xl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},xl.apply(this,arguments)},np='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',G0=function(a){K0(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,e)||this,o=r.get("attributes").src;return o&&(0,Pt.buildBase64UrlFromSvg)((0,k.result)(r,"defaults").src)!==o&&r.set("src",o,{silent:!0}),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return xl(xl({},a.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(np,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(np,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),n.prototype.initToolbar=function(){a.prototype.initToolbar.call(this);var t=this.em;if(t){var e=t.Commands,r="image-editor";if(e.has(r)){for(var o=!1,s=this.get("toolbar"),u=0;u<s.length;u++)if(s[u].command==="image-editor"){o=!0;break}o||(s.push({attributes:{class:"fa fa-pencil"},command:r}),this.set("toolbar",s))}}},n.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this),e=this.getSrcResult();return e&&(t.src=e),t},n.prototype.getSrcResult=function(t){t===void 0&&(t={});var e=this.get(t.fallback?"fallback":"src")||"",r=e;return e&&e.substr(0,4)==="<svg"&&(r=(0,Pt.buildBase64UrlFromSvg)(e)),r},n.prototype.isDefaultSrc=function(){var t=this.get("src"),e=(0,k.result)(this,"defaults").src;return t===e||t===(0,Pt.buildBase64UrlFromSvg)(e)},n.prototype.toJSON=function(t){var e=a.prototype.toJSON.call(this,t),r=e.attributes;return r&&e.src===r.src&&delete e.src,e},n.prototype.parseUri=function(t){var e={},r=function(o){o===void 0&&(o="");for(var s={},u=o.substring(1).split("&"),c=0;c<u.length;c++){var f=u[c].split("="),h=decodeURIComponent(f[0]);h&&(s[h]=decodeURIComponent(f[1]||""))}return s};if((0,Pt.hasWin)())e=document.createElement("a"),e.href=t;else if(typeof URL<"u")try{e=new URL(t)}catch{}return{hostname:e.hostname||"",pathname:e.pathname||"",protocol:e.protocol||"",search:e.search||"",hash:e.hash||"",port:e.port||"",query:r(e.search)}},n.isComponent=function(t){return(0,Pt.toLowerCase)(t.tagName)==="img"},n}(cr);const sf=G0;var $0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Sl=function(){return Sl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Sl.apply(this,arguments)},q0=function(a){$0(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,e)||this;return r.__checkInnerChilds(),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Sl(Sl({},a.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.__checkInnerChilds=function(){var t=this.em.Components.config.disableTextInnerChilds;if(t){var e=function(r){r.isInstanceOf("textnode")||r.set({locked:!0,layerable:!1})};(0,k.isFunction)(t)?this.forEachChild(function(r){t(r)&&e(r)}):this.forEachChild(e)}},n}(cr);const lf=q0;var Y0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ol=function(){return Ol=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ol.apply(this,arguments)},tc="label",X0=function(a){Y0(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Ol(Ol({},a.prototype.defaults),{type:tc,tagName:tc,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Pt.toLowerCase)(t.tagName)===tc},n}(lf);const Z0=X0;var J0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tl=function(){return Tl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Tl.apply(this,arguments)},op="link",Q0=function(a){J0(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Tl(Tl({},a.prototype.defaults),{type:op,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t,e){e===void 0&&(e={});var r;if((0,Pt.toLowerCase)(t.tagName)==="a"){var o=e.textTags||[];r={type:op,editable:!1};var s=t.childNodes,u=s.length;u||delete r.editable,(0,k.forEach)(s,function(c){var f=c.tagName;(c.nodeType==3&&c.textContent.trim()!==""||f&&o.indexOf((0,Pt.toLowerCase)(f))>=0)&&delete r.editable})}return r},n}(lf);const t_=Q0;var e_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pl=function(){return Pl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Pl.apply(this,arguments)},r_=function(a){e_(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,e)||this;return r.get("src")?r.parseFromSrc():r.updateSrc(),r.listenTo(r,"change:address change:zoom change:mapType",r.updateSrc),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){var t=a.prototype.defaults;return Pl(Pl({},t),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:t.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:!0},{type:"select",label:"Map type",name:"mapType",changeProp:!0,options:[{id:"q",label:"Roadmap"},{id:"w",label:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:1,max:20,changeProp:!0}]})},enumerable:!1,configurable:!0}),n.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},n.prototype.getMapUrl=function(){var t=this.get("address"),e=this.get("zoom"),r=this.get("mapType");t=t?"&q="+t:"",e=e?"&z="+e:"",r=r?"&t="+r:"";var o=this.get("mapUrl")+"?"+t+e+r;return o+="&output=embed",o},n.prototype.parseFromSrc=function(){var t=this.parseUri(this.get("src")),e=t.query;e.q&&this.set("address",e.q),e.z&&this.set("zoom",e.z),e.t&&this.set("mapType",e.t)},n.isComponent=function(t){if((0,Pt.toLowerCase)(t.tagName)=="iframe"&&/maps\.google\.com/.test(t.src))return{type:"map",src:t.src}},n}(sf);const n_=r_;var o_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),El=function(){return El=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},El.apply(this,arguments)},ec="script",i_=function(a){o_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return El(El({},a.prototype.defaults),{type:ec,tagName:ec,droppable:!1,draggable:!1,layerable:!1,highlightable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Pt.toLowerCase)(t.tagName)===ec},n}(cr);const a_=i_;var s_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Al=function(){return Al=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Al.apply(this,arguments)},rc="svg",l_=function(a){s_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Al(Al({},a.prototype.defaults),{type:rc,tagName:rc,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),n.prototype.getName=function(){var t=this.get("tagName"),e=this.get("custom-name");return t=t.charAt(0).toUpperCase()+t.slice(1),e||t},n.isComponent=function(t){return(0,Pt.toLowerCase)(t.tagName)===rc},n}(cr);const Bh=l_;var u_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kl=function(){return kl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},kl.apply(this,arguments)},c_=function(a){u_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return kl(kl({},a.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(t,e){return e===void 0&&(e={}),!!e.inSvg},n}(Bh);const f_=c_;var d_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ml=function(){return Ml=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ml.apply(this,arguments)},nc="table",p_=function(a){d_(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,e)||this,o=r.get("components");return!o.length&&o.add({type:"tbody"}),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Ml(Ml({},a.prototype.defaults),{type:nc,tagName:nc,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Pt.toLowerCase)(t.tagName)===nc},n}(cr);const h_=p_;var v_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Dl=function(){return Dl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Dl.apply(this,arguments)},oc="tbody",g_=function(a){v_(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,e)||this,o=r.get("components"),s=r.get("columns"),u=r.get("rows");if(!o.length){for(var c=[];u--;){for(var f=[],h=s;h--;)f.push({type:"cell",classes:["cell"]});c.push({type:"row",classes:["row"],components:f})}o.add(c)}return r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Dl(Dl({},a.prototype.defaults),{type:oc,tagName:oc,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Pt.toLowerCase)(t.tagName)===oc},n}(cr);const uf=g_;var y_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ll=function(){return Ll=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ll.apply(this,arguments)},m_=function(a){y_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Ll(Ll({},a.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return["td","th"].indexOf((0,Pt.toLowerCase)(t.tagName))>=0},n}(cr);const __=m_;var w_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jl=function(){return jl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},jl.apply(this,arguments)},ic="tfoot",b_=function(a){w_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return jl(jl({},a.prototype.defaults),{type:ic,tagName:ic})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Pt.toLowerCase)(t.tagName)===ic},n}(uf);const C_=b_;var x_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vl=function(){return Vl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Vl.apply(this,arguments)},ac="thead",S_=function(a){x_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Vl(Vl({},a.prototype.defaults),{type:ac,tagName:ac})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Pt.toLowerCase)(t.tagName)===ac},n}(uf);const O_=S_;var T_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Il=function(){return Il=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Il.apply(this,arguments)},ip="tr",P_=function(a){T_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Il(Il({},a.prototype.defaults),{tagName:ip,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Pt.toLowerCase)(t.tagName)===ip},n}(cr);const E_=P_;var A_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Nl=function(){return Nl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Nl.apply(this,arguments)},sc="video",Ri="yt",Fi="vi",Hi="ytnc",ap="so",lc=function(a){return a&&a!=="0"},k_=function(a){A_(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,e)||this;return r.get("src")&&r.parseFromSrc(),r.updatePropsFromAttr(),r.updateTraits(),r.on("change:provider",r.updateTraits),r.on("change:videoId change:provider",r.updateSrc),r}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Nl(Nl({},a.prototype.defaults),{type:sc,tagName:sc,videoId:"",void:!1,provider:ap,ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:0,autoplay:!1,controls:!0,color:"",list:"",src:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),n.prototype.updatePropsFromAttr=function(){if(this.get("provider")===ap){var t=this.get("attributes"),e=t.controls,r=t.autoplay,o=t.loop,s={};(0,Pt.isDef)(e)&&(s.controls=!!e),(0,Pt.isDef)(r)&&(s.autoplay=!!r),(0,Pt.isDef)(o)&&(s.loop=!!o),(0,Pt.isEmptyObj)(s)||this.set(s)}},n.prototype.updateTraits=function(){var t=this.em,e=this.get("provider"),r="iframe",o;switch(e){case Ri:case Hi:o=this.getYoutubeTraits();break;case Fi:o=this.getVimeoTraits();break;default:r="video",o=this.getSourceTraits()}this.set({tagName:r},{silent:!0}),this.set({traits:o}),t.get("ready")&&t.trigger("component:toggled")},n.prototype.parseFromSrc=function(){var t=this.get("provider"),e=this.parseUri(this.get("src")),r=e.query;switch(t){case Ri:case Hi:case Fi:this.set("videoId",e.pathname.split("/").pop()),r.list&&this.set("list",r.list),lc(r.autoplay)&&this.set("autoplay",!0),lc(r.loop)&&this.set("loop",!0),parseInt(r.controls)===0&&this.set("controls",!1),lc(r.color)&&this.set("color",r.color),r.rel==="0"&&this.set("rel",0),r.modestbranding==="1"&&this.set("modestbranding",1);break}},n.prototype.updateSrc=function(){var t=this.get("provider"),e="";switch(t){case Ri:e=this.getYoutubeSrc();break;case Hi:e=this.getYoutubeNoCookieSrc();break;case Fi:e=this.getVimeoSrc();break}this.set({src:e})},n.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this),e=this.get("provider");switch(e){case Ri:case Hi:case Fi:break;default:t.loop=!!this.get("loop"),t.autoplay=!!this.get("autoplay"),t.controls=!!this.get("controls")}return t},n.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:Ri,name:"Youtube"},{value:Hi,name:"Youtube (no cookie)"},{value:Fi,name:"Vimeo"}]}},n.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},n.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0}]},n.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},n.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},n.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},n.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},n.prototype.getYoutubeSrc=function(){var t=this.get("videoId"),e=this.get("ytUrl"),r=this.get("list");return e+=t+(t.indexOf("?")<0?"?":""),e+=r?"&list=".concat(r):"",e+=this.get("autoplay")?"&autoplay=1&mute=1":"",e+=this.get("controls")?"":"&controls=0&showinfo=0",e+=this.get("loop")?"&loop=1&playlist=".concat(t):"",e+=this.get("rel")?"":"&rel=0",e+=this.get("modestbranding")?"&modestbranding=1":"",e},n.prototype.getYoutubeNoCookieSrc=function(){var t=this.getYoutubeSrc();return t=t.replace(this.get("ytUrl"),this.get("ytncUrl")),t},n.prototype.getVimeoSrc=function(){var t=this.get("viUrl");return t+=this.get("videoId")+"?",t+=this.get("autoplay")?"&autoplay=1&muted=1":"",t+=this.get("loop")?"&loop=1":"",t+=this.get("controls")?"":"&title=0&portrait=0&badge=0",t+=this.get("color")?"&color="+this.get("color"):"",t},n.isComponent=function(t){var e=t.tagName,r=t.src,o=/youtube\.com\/embed/.test(r),s=/youtube-nocookie\.com\/embed/.test(r),u=/player\.vimeo\.com\/video/.test(r),c=o||s||u;if((0,Pt.toLowerCase)(e)==sc||(0,Pt.toLowerCase)(e)=="iframe"&&c){var f={type:"video"};return r&&(f.src=r),c&&(o?f.provider=Ri:s?f.provider=Hi:u&&(f.provider=Fi)),f}},n}(sf);const M_=k_;var D_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gi=function(){return Gi=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Gi.apply(this,arguments)},L_=function(a){D_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Gi(Gi({},a.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],doctype:"",head:null,docEl:null,stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),n.prototype.preInit=function(){var t,e,r=this,o=r.opt,s=r.attributes,u=(t=this.em)===null||t===void 0?void 0:t.Components,c=(e=u==null?void 0:u.getType(ra))===null||e===void 0?void 0:e.model,f=u==null?void 0:u.getType("default").model;if(c){var h=s.head,g=s.docEl;this.set({head:h&&h instanceof cr?h:new c(Gi({},h),o),docEl:g&&g instanceof cr?g:new f(Gi({tagName:"html"},g),o)},{silent:!0})}},Object.defineProperty(n.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"docEl",{get:function(){return this.get("docEl")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"doctype",{get:function(){return this.attributes.doctype||""},enumerable:!1,configurable:!0}),n.prototype.clone=function(t){var e=a.prototype.clone.call(this,t);return e.set("head",this.get("head").clone(t)),e.set("docEl",this.get("docEl").clone(t)),e},n.prototype.toHTML=function(t){t===void 0&&(t={});var e=this.doctype,r=(0,k.isUndefined)(t.asDocument)?!!e:t.asDocument,o=this,s=o.head,u=o.docEl,c=a.prototype.toHTML.call(this,t),f=r&&(s==null?void 0:s.toHTML(t))||"",h=r&&(0,Wt.kk)(u==null?void 0:u.getAttrToHTML())||"",g=h?" ".concat(h):"";return r?"".concat(e,"<html").concat(g,">").concat(f).concat(c,"</html>"):c},n.prototype.__postAdd=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return!this.__hasUm&&(e==null||e.add(this)),a.prototype.__postAdd.call(this)},n.prototype.__postRemove=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return e==null||e.remove(this),a.prototype.__postRemove.call(this)},n.isComponent=function(){return!1},n}(cr);const j_=L_;var V_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),I_=function(a){V_(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.compView=nr,t}return n.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var e=this.collection;this.listenTo(e,"add",this.addTo),this.listenTo(e,"reset",this.resetChildren),this.listenTo(e,"remove",this.removeChildren)},n.prototype.removeChildren=function(t,e,r){var o=this;r===void 0&&(r={}),t.views.forEach(function(u){if(u){var c=u.childrenView,f=u.scriptContainer;c&&c.stopListening(),(0,Wt.YZ)(f),u.remove.apply(u)}});var s=t.components();s.forEach(function(u){return o.removeChildren(u,e,r)})},n.prototype.addTo=function(t){this.addToCollection(t,null,this.collection.indexOf(t))},n.prototype.addToCollection=function(t,e,r){for(var o=this,s=o.config,u=o.opts,c=o.em,f=s.frameView,h=(f==null?void 0:f.model)&&t.getView(f.model),g=u.componentTypes||(c==null?void 0:c.Components.getTypes()),y=t.get("type")||"default",_=this.compView,b=0;b<g.length;b++)if(g[b].id==y){_=g[b].view;break}var x=h||new _({model:t,config:s,componentTypes:g}),T;try{T=x.render().el}catch(W){T=document.createTextNode(""),c.logError(W)}if(e)e.appendChild(T);else{var I=this.parentEl,z=I.childNodes;if((0,k.isUndefined)(r))I.appendChild(T);else{var F=z.length==r;F&&r--,F||!z.length?I.appendChild(T):I.insertBefore(T,z[r])}}return t.opt.temporary||c==null||c.trigger("component:mount",t),T},n.prototype.resetChildren=function(t,e){var r=this;e===void 0&&(e={});var o=e.previousModels;e.skipDomReset||(this.parentEl.innerHTML=""),o==null||o.forEach(function(s){return r.removeChildren(s,r.collection)}),t.each(function(s){return r.addToCollection(s)})},n.prototype.render=function(t){var e=this,r=this.el,o=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each(function(s){return e.addToCollection(s,o)}),r.innerHTML="",r.appendChild(o),this},n}(Nt.Ss);const Uh=I_;var N_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yn=function(){return Yn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Yn.apply(this,arguments)},R_=function(a){N_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.className=function(){return this.getClasses()},n.prototype.tagName=function(){return this.model.get("tagName")},n.prototype.preinitialize=function(t){t===void 0&&(t={}),this.opts=t},n.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,r=t.config||{},o=r.em,s=e.opt||{},u=this,c=u.$el,f=u.el;this.opts=t,this.modelOpt=s,this.config=r,this.em=o,this.pfx=r.stylePrefix||"",this.ppfx=r.pStylePrefix||"",this.attr=e.get("attributes"),this.classe=this.attr.class||[],this.listenTo(e,"change:style",this.updateStyle),this.listenTo(e,"change:attributes",this.renderAttributes),this.listenTo(e,"change:highlightable",this.updateHighlight),this.listenTo(e,"change:status change:locked",this.updateStatus),this.listenTo(e,"change:script rerender",this.reset),this.listenTo(e,"change:content",this.updateContent),this.listenTo(e,"change",this.handleChange),this.listenTo(e,"active",this.onActive),this.listenTo(e,"disable",this.onDisable),c.data("model",e),(0,Pt.setViewEl)(f,this),e.view=this,this.frameView&&e.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=Yn(Yn({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!s.temporary&&this.init(this._clbObj())},Object.defineProperty(n.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"createDoc",{get:function(){var t,e,r=((t=this.frameView)===null||t===void 0?void 0:t.getDoc())||document;return!((e=this.opts.config)===null||e===void 0)&&e.useFrameDoc?r:document},enumerable:!1,configurable:!0}),n.prototype.__isDraggable=function(){var t=this,e=t.model,r=t.config,o=e.attributes.draggable;return r.draggableComponents&&o},n.prototype._clbObj=function(){var t=this,e=t.em,r=t.model,o=t.el;return{editor:e==null?void 0:e.getEditor(),model:r,el:o}},n.prototype.init=function(t){},n.prototype.removed=function(t){},n.prototype.onRender=function(t){},n.prototype.onActive=function(t){},n.prototype.onDisable=function(t){},n.prototype.remove=function(){var t;a.prototype.remove.call(this);var e=this,r=e.model,o=e.$el,s=r.views,u=this.frameView||{};return r.components().forEach(function(c){var f=c.getView(u.model);f==null||f.remove()}),(t=this.childrenView)===null||t===void 0||t.remove(),s.splice(s.indexOf(this),1),this.removed(this._clbObj()),o.data({model:"",collection:"",view:""}),this},n.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault();var e=this.em.getSelectedAll(),r=e.includes(this.model)?e:[this.model];this.em.Commands.run("tlb-move",{target:r,event:t})},n.prototype.initClasses=function(){var t=this.model,e=t.classes,r="change:classes";e instanceof Wo&&(this.stopListening(t,r,this.initClasses),this.listenTo(t,r,this.initClasses),this.listenTo(e,"add remove change reset",this.updateClasses),e.length&&this.importClasses())},n.prototype.initComponents=function(t){t===void 0&&(t={});var e=this,r=e.model,o=e.$el,s=e.childrenView,u="change:components",c=r.get("components"),f=[r,u,this.initComponents];c instanceof ls&&(o.data("collection",c),s&&s.remove(),this.stopListening.apply(this,f),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,f))},n.prototype.handleChange=function(){var t=this.model,e=(0,k.keys)(t.changed);if(!(e.length===1&&e[0]==="status")){t.emitUpdate();for(var r in t.changed)t.emitUpdate(r)}},n.prototype.importClasses=function(){var t=this,e=t.em,r=t.model,o=e.Selectors;o&&r.classes.forEach(function(s){return o.add(s.getName())})},n.prototype.updateStatus=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.el,s=e.ppfx,u=e.model,c=r==null?void 0:r.Canvas,f=c==null?void 0:c.config.extHl,h=u.get("status"),g="".concat(s,"selected"),y="".concat(g,"-parent"),_="".concat(s,"freezed"),b="".concat(s,"hovered"),x="".concat(s,"no-pointer"),T="".concat(s,"pointer-init"),I=[g,y,_,b,x],z=f&&!t.noExtHl?"":g;this.$el.removeClass(I.join(" "));var F=o.getAttribute("class")||"",W=[F],ct=!(c!=null&&c.hasCustomSpot(Ln.F.Select)),_t=!(c!=null&&c.hasCustomSpot(Ln.F.Target));switch(h){case"selected":ct&&W.push(z);break;case"selected-parent":_t&&W.push(y);break;case"freezed":W.push(_);break;case"freezed-selected":W.push(_),ct&&W.push(z);break;case"hovered":!t.avoidHover&&W.push(b);break}(0,k.isBoolean)(u.locked)&&W.push(u.locked?x:T);var xt=W.filter(Boolean).join(" ");xt&&o.setAttribute("class",xt)},n.prototype.updateHighlight=function(){var t=this.model,e=t.get("textable"),r=t.get("highlightable")&&(e||!t.isChildOf("text"));this.setAttribute("data-gjs-highlightable",r?!0:"")},n.prototype.updateStyle=function(t,e,r){r===void 0&&(r={});var o=this,s=o.model,u=o.em;if(Wa(u)&&!r.inline){var c=this.__cmpStyleOpts,f=s.getStyle(Yn({inline:!0},c));!(0,k.isEmpty)(f)&&s.setStyle(f,c)}else this.setAttribute("style",s.styleToString(r))},n.prototype.updateStyles=function(){this.updateStyle()},n.prototype.updateClasses=function(){var t=this.model.classes.pluck("name").join(" ");this.setAttribute("class",t),this.updateStatus(),this.onAttrUpdate()},n.prototype.setAttribute=function(t,e){var r=this.$el;e?r.attr(t,e):r.removeAttr(t)},n.prototype.getClasses=function(){return this.model.getClasses().join(" ")},n.prototype.updateAttributes=function(){var t=[],e=this,r=e.model,o=e.$el,s=e.el,u=r.attributes,c=u.textable,f=u.type,h=Yn(Yn({id:r.getId(),"data-gjs-type":f||"default"},this.__isDraggable()&&{draggable:!0}),c&&{contenteditable:"false"});(0,k.each)(s.attributes,function(y){return t.push(y.nodeName)}),t.forEach(function(y){return o.removeAttr(y)}),this.updateStyle(),this.updateHighlight();var g=Yn(Yn({},h),r.getAttributes());(0,k.keys)(g).forEach(function(y){return g[y]===!1&&delete g[y]}),o.attr(g)},n.prototype.updateContent=function(){var t=this.model.content,e=this.model.components().length;this.getChildrenContainer().innerHTML=e?"":t},n.prototype.prevDef=function(t){t.preventDefault()},n.prototype.updateScript=function(){var t=this,e=t.model,r=t.em;e.get("script")&&(r==null||r.Canvas.getCanvasView().updateScript(this))},n.prototype.getChildrenContainer=function(){var t=this.el;return typeof this.getChildrenSelector=="function"?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},n.prototype.getOffsetRect=function(){var t={top:0,left:0,bottom:0,right:0},e=this.el,r=0,o=0,s=function(u){var c=u.offsetParent;c?(r+=c.offsetTop,o+=c.offsetLeft,s(c)):(t.top=e.offsetTop+r,t.left=e.offsetLeft+o,t.bottom=t.top+e.offsetHeight,t.right=t.left+e.offsetWidth)};return s(e),t},n.prototype.isInViewport=function(){var t=this,e=t.el,r=t.em,o=t.frameView,s=r.Canvas.getCanvasView(),u=s.getElBoxRect(e,{local:!0}),c=o.el,f=c.clientHeight,h=c.clientWidth,g=u.y,y=u.x,_=g+u.height,b=y+u.width,x=g>=0&&g<f,T=_>0&&_<f,I=b>=0&&b<h,z=y>0&&y<=h,F=(x||T)&&(I||z);return F},n.prototype.scrollIntoView=function(t){var e;t===void 0&&(t={});var r=this.isInViewport();if(!r||t.force){var o=this.el;if(t.behavior!=="smooth"){var s=this.getOffsetRect();(e=o.ownerDocument.defaultView)===null||e===void 0||e.scrollTo(0,s.top)}else o.scrollIntoView(Yn({behavior:"smooth",block:"nearest"},t))}},n.prototype.reset=function(){var t=this.el;this.el="",this._ensureElement(),this._setData(),(0,Wt.bG)(t,this.el),this.render()},n.prototype._setData=function(){var t=this.model,e=t.components(),r=this;this.$el.data({model:t,collection:e,view:r})},n.prototype._createElement=function(t){return this.createDoc.createElement(t)},n.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),e=this.childrenView||new Uh({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});e.render(t),this.childrenView=e;for(var r=Array.prototype.slice.call(e.el.childNodes),o=0,s=r.length;o<s;o++)t.appendChild(r.shift())},n.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},n.prototype.onAttrUpdate=function(){},n.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary?this:(this.renderChildren(),this.updateScript(),(0,Pt.setViewEl)(this.el,this),this.postRender(),this)},n.prototype.postRender=function(){this.modelOpt.temporary||this.onRender(this._clbObj())},n.getEvents=function(){return(0,k.result)(this.prototype,"events")},n}(Nt.Ss);const nr=R_;var F_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),H_=function(a){F_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._setAttributes=function(){},n.prototype.renderAttributes=function(){},n.prototype.updateStatus=function(){},n.prototype.updateClasses=function(){},n.prototype.setAttribute=function(){},n.prototype.updateAttributes=function(){},n.prototype.initClasses=function(){},n.prototype.initComponents=function(){},n.prototype.delegateEvents=function(){return this},n.prototype._createElement=function(){return document.createTextNode("")},n.prototype.render=function(){var t=this,e=t.model,r=t.el;return e.opt.temporary?this:(r.textContent=e.content,this)},n}(nr);const Wh=H_;var B_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),U_=function(a){B_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._createElement=function(){return document.createComment(this.model.content)},n}(Wh);const W_=U_;var z_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),K_=function(a){z_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},n.prototype.updateSrc=function(){var t=(0,Wt.I6)(this.el,"iframe")[0];t&&(0,Wt.X6)(t,{src:this.__getSrc()})},n.prototype.render=function(){a.prototype.render.call(this);var t=(0,Wt.a_)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(t),this},n.prototype.__getSrc=function(){return this.model.getAttributes().src||""},n}(nr);const G_=K_;var $_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),q_=function(a){$_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"img"},n.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},n.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var t=this,e=t.model,r=t.em,o=e.get("file");if(o&&r){var s=r.Assets.FileUploader();s==null||s.uploadFile({dataTransfer:{files:[o]}},function(u){var c=u&&u.data&&u.data[0],f=c&&((0,k.isString)(c)?c:c.src);f&&e.set({src:f})}),e.set("file","")}}},n.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},n.prototype.updateClasses=function(){a.prototype.updateClasses.call(this);var t=this,e=t.el,r=t.classEmpty,o=t.model,s=o.getSrcResult()&&!o.isDefaultSrc(),u=s?"remove":"add";e.classList[u](r)},n.prototype.onActive=function(t){t==null||t.stopPropagation();var e=this,r=e.em,o=e.model,s=r==null?void 0:r.Assets;s&&o.get("editable")&&s.open({select:function(u,c){o.set({src:u.getSrc()}),c&&s.close()},target:o,types:["image"],accept:"image/*"})},n.prototype.onError=function(){var t=this.model.getSrcResult({fallback:!0});t&&(this.el.src=t)},n.prototype.onLoad=function(){this.em.Canvas.refresh({all:!0})},n.prototype.noDrag=function(t){return t.preventDefault(),!1},n.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this,e=t.$el,r=t.model,o=e.attr("class")||"";return!r.get("src")&&e.attr("class","".concat(o," ").concat(this.classEmpty).trim()),this.postRender(),this},n}(nr);const cf=q_;var Y_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Za=function(){return Za=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Za.apply(this,arguments)},Xs=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{f(e.next(h))}catch(g){s(g)}}function c(h){try{f(e.throw(h))}catch(g){s(g)}}function f(h){h.done?o(h.value):r(h.value).then(u,c)}f((e=e.apply(a,n||[])).next())})},Zs=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(e=1,r&&(o=f[0]&2?r.return:f[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,f[1])).done)return o;switch(r=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=n.call(a,t)}catch(h){f=[6,h],r=0}finally{e=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},X_=function(a){Y_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),(0,k.bindAll)(this,"disableEditing","onDisable");var e=this.model,r=this.em;this.listenTo(e,"focus",this.onActive),this.listenTo(e,"change:content",this.updateContentText),this.listenTo(e,"sync:content",this.syncContent),this.rte=r==null?void 0:r.RichTextEditor},n.prototype.updateContentText=function(t,e,r){r===void 0&&(r={}),!r.fromDisable&&this.disableEditing()},n.prototype.canActivate=function(){var t=this,e=t.model,r=t.rteEnabled,o=t.em,s=o==null?void 0:o.getEditing(),u=s===e,c=!0,f=!1,h;if((r||!e.get("editable")||u||(f=e.isChildOf("text")))&&(c=!1,f&&!e.get("textable"))){for(var g=e.parent();g&&!g.isInstanceOf("text");)g=g.parent();g&&g.get("editable")?h=g:c=!0}return{result:c,delegate:h}},n.prototype.onActive=function(t){return Xs(this,void 0,void 0,function(){var e,r,o,s,u,c,f,h,g,y,_;return Zs(this,function(b){switch(b.label){case 0:return e=this,r=e.rte,o=e.em,s=this.canActivate(),u=s.result,c=s.delegate,u?((_=t==null?void 0:t.stopPropagation)===null||_===void 0||_.call(t),f=this,[4,this.getContent()]):(c&&((y=t==null?void 0:t.stopPropagation)===null||y===void 0||y.call(t),o.setSelected(c),c.trigger("active",t)),[2]);case 1:if(f.lastContent=b.sent(),!r)return[3,5];b.label=2;case 2:return b.trys.push([2,4,,5]),h=this,[4,r.enable(this,this.activeRte,{event:t})];case 3:return h.activeRte=b.sent(),[3,5];case 4:return g=b.sent(),o.logError(g),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},n.prototype.onDisable=function(t){this.disableEditing(t)},n.prototype.disableEditing=function(){return Xs(this,arguments,void 0,function(t){var e,r,o,s,u,c,f,h;return t===void 0&&(t={}),Zs(this,function(g){switch(g.label){case 0:if(e=this,r=e.model,o=e.rte,s=e.activeRte,u=e.em,c=r&&r.get("editable"),!o)return[3,8];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,o.disable(this,s,t)];case 2:return g.sent(),[3,4];case 3:return f=g.sent(),u.logError(f),[3,4];case 4:return h=c,h?[4,this.getContent()]:[3,6];case 5:h=g.sent()!==this.lastContent,g.label=6;case 6:return h?[4,this.syncContent(t)]:[3,8];case 7:g.sent(),this.lastContent="",g.label=8;case 8:return this.toggleEvents(),[2]}})})},n.prototype.getContent=function(){return Xs(this,void 0,void 0,function(){var t,e,r,o;return Zs(this,function(s){switch(s.label){case 0:return t=this,e=t.rte,r=t.activeRte,o="",e?[4,e.getContent(this,r)]:[3,2];case 1:o=s.sent(),s.label=2;case 2:return[2,o]}})})},n.prototype.syncContent=function(){return Xs(this,arguments,void 0,function(t){var e,r,o,s,u,c,f;return t===void 0&&(t={}),Zs(this,function(h){switch(h.label){case 0:return e=this,r=e.model,o=e.rte,s=e.rteEnabled,!s&&!t.force?[2]:[4,this.getContent()];case 1:return u=h.sent(),c=r.components(),f=Za({fromDisable:1},t),r.set("content","",f),o!=null&&o.customRte&&!o.customRte.parseContent?(c.length&&c.reset(void 0,Za(Za({},t),{keepIds:Wi(c)})),r.set("content",u,f)):c.resetFromString(u,t),[2]}})})},n.prototype.insertComponent=function(t,e){var r;e===void 0&&(e={});var o=this,s=o.model,u=o.el,c=u.ownerDocument,f=c.getSelection();if(f!=null&&f.rangeCount){var h=f.getRangeAt(0),g=h.startContainer,y=h.startOffset,_=(0,Pt.getComponentModel)(g),b=[];if(_&&(!((r=_.is)===null||r===void 0)&&r.call(_,"textnode"))){var x=_.collection;x.forEach(function(z){if(z===_){var F="textnode",W=e.useDomContent?g.textContent||"":z.content;b.push({type:F,content:W.slice(0,y)}),b.push(t),b.push({type:F,content:W.slice(y)})}else b.push(z)});var T=b.filter(Boolean),I=T.indexOf(t);return x.reset(T,e),x.at(I)}}return s.append(t,e)},n.prototype.onInput=function(){var t=this.em,e="component",r=["".concat(e,":update"),"".concat(e,":input")].join(" ");t&&t.trigger(r,this.model)},n.prototype.disablePropagation=function(t){t.stopPropagation()},n.prototype.toggleEvents=function(t){var e=this,r=e.em,o=e.model,s=e.$el,u={on:Wt.on,off:Wt.AU},c=t?"on":"off";r.setEditing(t?this:!1),this.rteEnabled=!!t;var f=[this.el.ownerDocument,document];if(u.off(f,"mousedown",this.onDisable),u[c](f,"mousedown",this.onDisable),r[c]("toolbar:run:before",this.onDisable),o&&(o[c]("removed",this.onDisable),o.trigger("rte:".concat(t?"enable":"disable"))),s==null||s.off("mousedown",this.disablePropagation),s&&s[c]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var h=this.el;h;)h.draggable=!t,h=h.parentNode,h&&h.tagName=="BODY"&&(h=0)},n}(nr);const zh=X_;var Z_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),J_=function(a){Z_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.render=function(){return a.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},n}(zh);const Kh=J_;var Q_=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tw=function(a){Q_(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Kh);const ew=tw;var rw=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nw=function(a){rw(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.events=function(){return{}},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.classEmpty=this.ppfx+"plh-map"},n.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},n.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement("iframe");t.src=this.model.get("src"),t.frameBorder="0",t.style.height="100%",t.style.width="100%",t.className=this.ppfx+"no-pointer",this.iframe=t}return this.iframe},n.prototype.render=function(){return a.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},n}(cf);const ow=nw;var iw=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),aw=function(a){iw(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"script"},n.prototype.events=function(){return{}},n}(nr);const sw=aw;var lw=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),uw=function(a){lw(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._createElement=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},n}(nr);const sp=uw;var cw=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fw=function(a){cw(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(nr);const dw=fw;var pw=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hw=function(a){pw(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(nr);const vw=hw;var gw=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yw=function(a){gw(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(nr);const mw=yw;var _w=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ww=function(a){_w(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(nr);const bw=ww;var Cw=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xw=function(a){Cw(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(nr);const Sw=xw;var Ow=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tw=function(a){Ow(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return{}},n}(nr);const Pw=Tw;var Ew=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Aw=function(a){Ew(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.events=function(){return{}},n.prototype.initialize=function(){nr.prototype.initialize.apply(this,arguments);var t=this.model,e=["loop","autoplay","controls","color","rel","modestbranding","poster"],r=e.map(function(o){return"change:".concat(o)}).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,r,this.updateVideo)},n.prototype.updateProvider=function(){var t=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(t))},n.prototype.updateSrc=function(){var t=this,e=t.model,r=t.videoEl;if(r){var o=e.get("provider"),s=e.get("src");switch(o){case"yt":s=e.getYoutubeSrc();break;case"ytnc":s=e.getYoutubeNoCookieSrc();break;case"vi":s=e.getVimeoSrc();break}r.src=s}},n.prototype.updateVideo=function(){var t=this,e=t.model,r=t.videoEl,o=e.get("provider");switch(o){case"yt":case"ytnc":case"vi":e.trigger("change:videoId");break;default:if(r){var s=r;s.loop=e.get("loop"),s.autoplay=e.get("autoplay"),s.controls=e.get("controls"),s.poster=e.get("poster")}}},n.prototype.renderByProvider=function(t){var e;switch(t){case"yt":e=this.renderYoutube();break;case"ytnc":e=this.renderYoutubeNoCookie();break;case"vi":e=this.renderVimeo();break;default:e=this.renderSource()}return this.videoEl=e,e},n.prototype.renderSource=function(){var t=document.createElement("video");return t.src=this.model.get("src"),this.initVideoEl(t),t},n.prototype.renderYoutube=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.renderYoutubeNoCookie=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.renderVimeo=function(){var t=document.createElement("iframe");return t.src=this.model.getVimeoSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.initVideoEl=function(t){t.className=this.ppfx+"no-pointer",t.style.height="100%",t.style.width="100%"},n.prototype.render=function(){nr.prototype.render.apply(this),this.updateClasses();var t=this.model.get("provider");return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},n}(cf);const kw=Aw;var Mw=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Dw=function(a){Mw(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n}(nr);const Lw=Dw;var jw=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rl=function(){return Rl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Rl.apply(this,arguments)},Vw=function(a){jw(n,a);function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=a.apply(this,t)||this;r.refreshDbn=(0,k.debounce)(function(){return r.refresh()},0);var o=r.events;return r.on(o.update,r.onUpdate),r.on(o.updateInside,r.onUpdateDeep),r}return n.prototype.removeChildren=function(t,e,r){var o;r===void 0&&(r={}),a.prototype.removeChildren.call(this,t,e,r),(o=On(t))===null||o===void 0||o.forEach(function(s){return of(s,{skipRefs:!0})}),this.__trgEvent(this.events.symbolMainRemove,{component:t})},n.prototype.onAdd=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.prototype.onAdd.apply(this,t);var r=t[0];this.__trgEvent(this.events.symbolMainAdd,{component:r})},n.prototype.onUpdate=function(t){this.__trgEvent(this.events.symbolMainUpdate,t)},n.prototype.onUpdateDeep=function(t){this.__trgEvent(this.events.symbolMainUpdateDeep,t)},n.prototype.refresh=function(){var t=this,e=t.em,r=t.events;e.trigger(r.symbol)},n.prototype.__trgEvent=function(t,e,r){r===void 0&&(r=!1);var o=this,s=o.em,u=o.events,c=r?u.symbolInstance:u.symbolMain;s.trigger(t,e),s.trigger(c,Rl(Rl({},e),{event:t})),this.refreshDbn()},n}(ls);const Iw=Vw;var Nw=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fl=function(){return Fl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Fl.apply(this,arguments)},Rw=function(a){Nw(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Fl(Fl({},a.prototype.defaults),{type:Zn,path:"",defaultValue:""})},enumerable:!1,configurable:!0}),n.prototype.getDataValue=function(){var t=this.attributes,e=t.path,r=t.defaultValue;return this.em.DataSources.getValue(e,r)},n.prototype.getInnerHTML=function(){return this.getDataValue()},n.isComponent=function(t){return(0,Pt.toLowerCase)(t.tagName)===Zn},n}(cr);const Fw=Rw;var Hw=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bw=function(a){Hw(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t){var e=this;t===void 0&&(t={}),a.prototype.initialize.call(this,t),this.dynamicVariableListener=new vu({model:this,em:this.em,dataVariable:this.model,updateValueFromDataVariable:function(){return e.postRender()}})},n.prototype.postRender=function(){var t=this,e=t.model,r=t.el,o=t.em,s=e.attributes,u=s.path,c=s.defaultValue;r.innerHTML=o.DataSources.getValue(u,c),a.prototype.postRender.call(this)},n}(nr);const Uw=Bw;var Ww=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zw=function(a){Ww(n,a);function n(t,e){var r=this,o=t.condition,s=t.ifTrue,u=t.ifFalse,c=new cs(o,s,u,{em:e.em}),f=c.getDataValue(),h={type:Kn,components:f};return r=a.call(this,h,e)||this,r.componentDefinition=t,r.dataCondition=c,r.dataCondition.onValueChange=r.handleConditionChange.bind(r),r}return n.prototype.handleConditionChange=function(){this.dataCondition.reevaluate();var t=this.dataCondition.getDataValue();this.components().reset(),this.components().add(t)},n.isComponent=function(t){return(0,Pt.toLowerCase)(t.tagName)===Kn},n.prototype.toJSON=function(){return this.dataCondition.toJSON()},n}(cr);const Kw=zw;var Gw=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$w=function(a){Gw(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(nr);const qw=$w;var Yw=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tr=function(){return Tr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Tr.apply(this,arguments)},Xw=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Zw=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},$i;(function(a){a[a.InvalidSource=0]="InvalidSource",a[a.SourceReject=1]="SourceReject",a[a.TargetReject=2]="TargetReject"})($i||($i={}));var Jw=function(a){Yw(n,a);function n(t){var e=a.call(this,t,"DomComponents",new ls(void 0,{em:t}),Sr.I,I0())||this;e.componentTypes=[{id:Kn,model:Kw,view:qw},{id:Zn,model:Fw,view:Uw},{id:"cell",model:__,view:vw},{id:"row",model:E_,view:Sw},{id:"table",model:h_,view:Pw},{id:"thead",model:O_,view:bw},{id:"tbody",model:uf,view:dw},{id:"tfoot",model:C_,view:mw},{id:"map",model:n_,view:ow},{id:"link",model:t_,view:Kh},{id:"label",model:Z0,view:ew},{id:"video",model:M_,view:kw},{id:"image",model:sf,view:cf},{id:"script",model:a_,view:sw},{id:"svg-in",model:f_,view:sp},{id:"svg",model:Bh,view:sp},{id:"iframe",model:z0,view:G_},{id:"comment",model:B0,view:W_},{id:"textnode",model:Hh,view:Wh},{id:ra,model:f0,view:nr},{id:"wrapper",model:j_,view:Lw},{id:"text",model:lf,view:zh},{id:"default",model:cr,view:nr}],e.componentsById={},e.Component=cr,e.Components=ls,e.ComponentView=nr,e.ComponentsView=Uh,e.storageKey="components",e.keySymbols="symbols",e.events=Sr.I;var r=e.config;e.symbols=new Iw([],{em:t,config:r,domc:e}),t&&(e.config.components=t.config.components||e.config.components);var o=e.config.pStylePrefix;if(o&&(e.config.stylePrefix=o+e.config.stylePrefix),t){t.get("Parser").compTypes=e.componentTypes,t.on("change:componentHovered",e.componentHovered,e);var s=t.get("selected");t.listenTo(s,"add",function(u,c,f){return e.selectAdd(s.getComponent(u),f)}),t.listenTo(s,"remove",function(u,c,f){return e.selectRemove(s.getComponent(u),f)})}return e}return n.prototype.postLoad=function(){var t=this,e=t.em,r=t.symbols,o=e.UndoManager;o.add(r)},n.prototype.load=function(t){var e=this,r=this.loadProjectData(t,{onResult:function(o){var s=e.getWrapper();if(s||(e.em.Pages.add({},{select:!0}),s=e.getWrapper()),(0,k.isArray)(o))o.length&&s.components(o);else{var u=o.components,c=u===void 0?[]:u,f=Xw(o,["components"]);s.set(f),s.components(c)}}});return this.symbols.reset(t[this.keySymbols]||[]),r},n.prototype.store=function(){var t;return t={},t[this.keySymbols]=this.symbols,t},n.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),e=t==null?void 0:t.getMainFrame();return e==null?void 0:e.getComponent()},n.prototype.getWrapper=function(){return this.getComponent()},n.prototype.getComponents=function(){var t=this.getWrapper();return t==null?void 0:t.components()},n.prototype.addComponent=function(t,e){return e===void 0&&(e={}),this.getComponents().add(t,e)},n.prototype.render=function(){var t;return(t=this.componentView)===null||t===void 0?void 0:t.render().el},n.prototype.clear=function(t){t===void 0&&(t={});var e=this.getComponents();return e==null||e.filter(Boolean).forEach(function(r){return r.remove(t)}),this},n.prototype.setComponents=function(t,e){e===void 0&&(e={}),this.clear(e).addComponent(t,e)},n.prototype.addType=function(t,e){var r=this.em,o=e.model,s=o===void 0?{}:o,u=e.view,c=u===void 0?{}:u,f=e.isComponent,h=e.extend,g=e.extendView,y=e.extendFn,_=y===void 0?[]:y,b=e.extendFnView,x=b===void 0?[]:b,T=e.block,I=this.getType(t),z=this.getType(h),F=this.getType(g),W=z||I||this.getType("default"),ct=W.model,_t=F?F.view:W.view,xt=function(U,B,tt){return U.reduce(function(A,yt){var gt=B[yt],Mt=tt.prototype[yt];return gt&&Mt&&(A[yt]=function(){for(var qt=[],ft=0;ft<arguments.length;ft++)qt[ft]=arguments[ft];Mt.bind(this).apply(void 0,qt),gt.bind(this).apply(void 0,qt)}),A},{})};if(typeof s=="object"){var ut={defaults:s.defaults};delete s.defaults;var q=new Set(ct.typeExtends);q.add(ct.getDefaults().type),e.model=ct.extend(Tr(Tr({},s),xt(_,s,ct)),{typeExtends:q,isComponent:I&&!z&&!f?ct.isComponent:f||function(){return 0}}),Object.defineProperty(e.model.prototype,"defaults",{get:function(){return Tr(Tr({},(0,k.result)(ct.prototype,"defaults")||{}),(0,k.result)(ut,"defaults")||{})}})}if(typeof c=="object"&&(e.view=_t.extend(Tr(Tr({},c),xt(x,c,_t)))),I?(I.model=e.model,I.view=e.view):(e.id=t,this.componentTypes.unshift(e)),T){var nt={id:t,label:t,content:{type:t}},H=T===!0?nt:Tr(Tr({},nt),T);r.Blocks.add(H.id||t,H)}var V="component:type:".concat(I?"update":"add");return r==null||r.trigger(V,I||e),this},n.prototype.getType=function(t){for(var e=this.componentTypes,r=0;r<e.length;r++){var o=e[r].id;if(o==t)return e[r]}},n.prototype.removeType=function(t){var e=this.componentTypes,r=this.getType(t);if(r){var o=e.indexOf(r);return e.splice(o,1),r}},n.prototype.getTypes=function(){return this.componentTypes},n.prototype.selectAdd=function(t,e){var r=this;e===void 0&&(e={}),t&&(t.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(o){return r.em.trigger(o,t,e)}))},n.prototype.selectRemove=function(t,e){var r=this;e===void 0&&(e={}),t&&(this.em,t.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(o){return r.em.trigger(o,t,e)}))},n.prototype.componentHovered=function(){var t=this.em,e=t.get("componentHovered"),r=t.previous("componentHovered"),o="hovered";r&&r.get("status")==o&&r.set({status:"",state:""}),e&&(0,k.isEmpty)(e.get("status"))&&e.set("status",o)},n.prototype.getShallowWrapper=function(){var t=this,e=t.shallow,r=t.em;if(!e&&r){var o=r.shallow;if(!o)return;var s=o.Components;if(s.componentTypes=this.componentTypes,e=s.getWrapper(),e){var u=[sl,Vc].join(" ");e.on(u,(0,k.debounce)(function(){return e==null?void 0:e.components("")},100))}this.shallow=e}return e},n.prototype.isComponent=function(t){return(0,Pt.isComponent)(t)},n.prototype.addSymbol=function(t){if(!((0,k.isSymbol)(t)&&!di(t))){var e=t.clone({symbol:!0});return ui(e)&&this.symbols.add(e),this.em.trigger("component:toggled"),e}},n.prototype.getSymbols=function(){return Zw([],this.symbols.models,!0)},n.prototype.detachSymbol=function(t){pl(t)&&of(t)},n.prototype.getSymbolInfo=function(t,e){e===void 0&&(e={});var r=ui(t),o=Xn(t),s=!!o,u=On(r?t:o)||[],c=o||(r?t:void 0),f=ci(t,{changed:e.withChanges}),h=r||s,g=h&&di(t);return{isSymbol:h,isMain:r,isInstance:s,isRoot:g,main:c,instances:u,relatives:f||[]}},n.prototype.canMove=function(t,e,r){var o={result:!1,reason:$i.InvalidSource,target:t,source:null};if(!e||!t)return o;if(vo(t)&&e instanceof cr&&vo(e)){var s=ss(t),u=ui(s)?s:Xn(s),c=ss(e),f=ui(c)?c:Xn(c),h=u===f,g=s!==c;if(h&&g)return Tr(Tr({},o),{reason:$i.TargetReject})}var y=(0,Pt.isComponent)(e)?e:null;if(!y){var _=this.getShallowWrapper();y=(_==null?void 0:_.append(e)[0])||null}if(o.source=y,!y)return o;var b=y.get("draggable");if((0,k.isFunction)(b))b=!!b(y,t,r);else{var x=t.getEl();b=(0,k.isArray)(b)?b.join(","):b,b=(0,k.isString)(b)?x==null?void 0:x.matches(b):b}if(!b)return Tr(Tr({},o),{reason:$i.SourceReject});var T=t.get("droppable");if((0,k.isFunction)(T))T=!!T(y,t,r);else if(T===!1&&t.isInstanceOf("text")&&y.get("textable"))T=!0;else{var x=y.getEl();T=(0,k.isArray)(T)?T.join(","):T,T=(0,k.isString)(T)?x==null?void 0:x.matches(T):T}var I=[t].concat(t.parents()).indexOf(y)>-1;return!T||I?Tr(Tr({},o),{reason:$i.TargetReject}):Tr(Tr({},o),{result:!0})},n.prototype.allById=function(){return this.componentsById},n.prototype.getById=function(t){return this.componentsById[t]||null},n.prototype.destroy=function(){var t,e=this.allById();Object.keys(e).forEach(function(r){return e[r]&&e[r].remove()}),(t=this.componentView)===null||t===void 0||t.remove(),[this.em,this.componentsById,this.componentView].forEach(function(r){return{}})},n}(yo);const Qw=Jw;var tb=function(){return{stylePrefix:"css-",rules:[]}};const eb=tb;var rb=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nb=Number.MAX_VALUE,ob=function(a){var n=/(-?\d*\.?\d+)\w{0,}/.exec(a);return n?n[0]:""},ib=function(a){rb(n,a);function n(){var t=a.call(this)||this;return(0,k.bindAll)(t,"sortRules"),t.compCls=[],t.ids=[],t}return n.prototype.buildFromModel=function(t,e){var r=this;e===void 0&&(e={});var o="",s=this.em,u=s&&s.getConfig().avoidInlineStyle,c=t.styleToString(),f=t.classes;this.ids.push("#".concat(t.getId())),f.forEach(function(g){return r.compCls.push(g.getFullName())}),!u&&c&&(o="#".concat(t.getId(),"{").concat(c,"}"));var h=t.components();return h.forEach(function(g){return o+=r.buildFromModel(g,e)}),o},n.prototype.build=function(t,e){var r=this;e===void 0&&(e={});var o=e.json,s=e.em,u=e.cssc||(s==null?void 0:s.Css);this.em=s,this.compCls=[],this.ids=[],this.model=t;var c=[],f=t?this.buildFromModel(t,e):"",h=(0,k.isUndefined)(e.clearStyles)&&s?s.getConfig().clearStyles:e.clearStyles;if(u){var g=e.rules||u.getAll(),y={},_=[];e.onlyMatched&&t&&(0,Pt.hasWin)()&&(g=this.matchedRules(t,g)),g.forEach(function(b){var x=b.getAtRule();if(x){var T=y[x];T?T.push(b):y[x]=[b];return}var I=r.buildFromRule(b,_,e);o?c.push(I):f+=I}),this.sortMediaObject(y).forEach(function(b){var x="",T=b.key,I=b.value;I.forEach(function(z){var F=r.buildFromRule(z,_,e);z.get("singleAtRule")?f+="".concat(T,"{").concat(F,"}"):x+=F,o&&c.push(F)}),x&&(f+="".concat(T,"{").concat(x,"}"))}),s&&h&&g.remove&&g.remove(_)}return o?c.filter(function(b){return b}):f},n.prototype.buildFromRule=function(t,e,r){var o=this,s;r===void 0&&(r={});var u="",c=this.model,f=t.selectorsToString({skipAdd:1}),h=t.get("selectorsAdd"),g=t.get("singleAtRule"),y;if((s=t.get("selectors"))===null||s===void 0||s.forEach(function(b){var x=b.getFullName();(o.compCls.indexOf(x)>=0||o.ids.indexOf(x)>=0||r.keepUnusedStyles)&&(y=1)}),f&&y||h||g||!c){var _=t.getDeclaration({body:1});_&&(r.json?u=t:u+=_)}else e.push(t);return u},n.prototype.matchedRules=function(t,e){var r=this,o=t.getEl(),s=[];return e.forEach(function(u){try{u.selectorsToString().split(",").some(function(c){return o==null?void 0:o.matches(r.__cleanSelector(c))})&&s.push(u)}catch{}}),t.components().forEach(function(u){s=s.concat(r.matchedRules(u,e))}),s=s.filter(function(u,c){return s.indexOf(u)===c}),s},n.prototype.getQueryLength=function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?parseFloat(e[1]):nb},n.prototype.sortMediaObject=function(t){var e=this;t===void 0&&(t={});var r=[];return(0,k.each)(t,function(o,s){return r.push({key:s,value:o})}),r.sort(function(o,s){var u=[o.key,s.key].every(function(h){return h.indexOf("min-width")!==-1}),c=u?o.key:s.key,f=u?s.key:o.key;return e.getQueryLength(c)-e.getQueryLength(f)})},n.prototype.sortRules=function(t,e){var r=function(c){return c.get("mediaText")||""},o=[r(t),r(e)].every(function(c){return c.indexOf("min-width")!==-1}),s=r(o?t:e),u=r(o?e:t);return this.getQueryLength(s)-this.getQueryLength(u)},n.prototype.__cleanSelector=function(t){return t.split(" ").map(function(e){return e.split(":")[0]}).join(" ")},n}(Nt.Kx);const ab=ib;var sb=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ja=function(){return Ja=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ja.apply(this,arguments)},lb=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},uc=((0,Pt.hasWin)()?window:{}).CSS,ub=function(a){sb(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t)||this;return r.views=[],r.dynamicVariableListeners={},r.config=t||{},r.opt=e,r.em=e.em,r.ensureSelectors(null,null,{}),r.on("change",r.__onChange),r.setStyle(r.get("style")),r}return n.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},n.prototype.__onChange=function(t,e){var r=this.em,o=this.changedAttributes();o&&!(0,Pt.isEmptyObj)(o)&&(r==null||r.changesUp(e))},n.prototype.clone=function(){var t=Ja({},this.opt),e=Ja({},this.attributes);return e.selectors=this.get("selectors").map(function(r){return r.clone()}),new this.constructor(e,t)},n.prototype.ensureSelectors=function(t,e,r){var o=this.em,s=o==null?void 0:o.Selectors,u=[this,"change:selectors",this.ensureSelectors],c=this.getSelectors();if(this.stopListening.apply(this,u),c.models&&(c=lb([],c.models,!0)),c=(0,k.isString)(c)?[c]:c,Array.isArray(c)){var f=c.filter(function(h){return h}).map(function(h){return s?s.add(h):h});c=new Wo(f)}this.set("selectors",c,r),this.listenTo.apply(this,u)},n.prototype.getAtRule=function(){var t=this.get("atRuleType"),e=this.get("mediaText"),r=t?"@".concat(t):e?"@media":"";return r+(e&&r?" ".concat(e):"")},n.prototype.selectorsToString=function(t){t===void 0&&(t={});var e=[],r=this.get("state"),o=this.get("selectorsAdd"),s={escape:function(f){return uc&&uc.escape?uc.escape(f):f}},u=this.getSelectors().getFullString(0,s),c=r&&!t.skipState?":".concat(r):"";return u&&e.push("".concat(u).concat(c)),o&&!t.skipAdd&&e.push(o),e.join(", ")},n.prototype.getDeclaration=function(t){t===void 0&&(t={});var e="",r=this.attributes.important,o=this.selectorsToString(t),s=this.styleToString(Ja({important:r},t)),u=this.get("singleAtRule");return(o||u)&&(s||t.allowEmpty)&&(e=u?s:"".concat(o,"{").concat(s,"}")),e},n.prototype.getDevice=function(){var t=this.em,e=this.attributes,r=e.atRuleType,o=e.mediaText,s=(t==null?void 0:t.Devices.getDevices())||[],u=s.filter(function(c){return c.getWidthMedia()===""})[0];return r!=="media"||!o?u||null:s.filter(function(c){return c.getWidthMedia()===ob(o)})[0]||null},n.prototype.getState=function(){var t=this.em,e=this.get("state"),r=(t==null?void 0:t.Selectors.getStates())||[];return r.filter(function(o){return o.getName()===e})[0]||null},n.prototype.getComponent=function(){var t,e=this.getSelectors(),r=e.length==1&&e.at(0),o=r&&r.isId()&&r.get("name");return o&&((t=this.em)===null||t===void 0?void 0:t.Components.getById(o))||null},n.prototype.toCSS=function(t){t===void 0&&(t={});var e="",r=this.getAtRule(),o=this.getDeclaration(t);return(o||t.allowEmpty)&&(e=o),r&&e&&(e="".concat(r,"{").concat(e,"}")),e},n.prototype.toJSON=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=Nt.Kx.prototype.toJSON.apply(this,e);if(!((t=this.em)===null||t===void 0)&&t.getConfig().avoidDefaults){var s=this.defaults();(0,k.forEach)(s,function(u,c){o[c]===u&&delete o[c]}),delete o.style.__p,(0,k.isEmpty)(o.selectors)&&delete o.selectors,(0,k.isEmpty)(o.style)&&delete o.style}return o},n.prototype.compare=function(t,e,r,o){var s;o===void 0&&(o={});var u=e||"",c=r||"",f=o.selectorsAdd||"",h=o.atRuleType||"",g=!(0,k.isArray)(t)&&!t.models?[t]:t.models||t;c&&!h&&(h="media");var y=g.map(function(T){return T.getFullName()}),_=(s=this.get("selectors"))===null||s===void 0?void 0:s.map(function(T){return T.getFullName()}),b=y.slice().sort(),x=_.slice().sort();return!(y.length!==_.length||!b.every(function(T,I){return T===x[I]})||this.get("state")!==u||this.get("mediaText")!==c||this.get("selectorsAdd")!==f||this.get("atRuleType")!==h)},n}(Eh);const Gh=ub;var cb=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$h=function(a){cb(n,a);function n(t,e){var r=a.call(this,t)||this;return r.editor=e==null?void 0:e.em,setTimeout(function(){r.on("remove",r.onRemove),r.on("add",r.onAdd)}),r}return n.prototype.toJSON=function(t){var e=Nt.pM.prototype.toJSON.call(this,t);return e.filter(function(r){return r.style&&!r.shallow})},n.prototype.onAdd=function(t,e,r){t.ensureSelectors(t,e,r)},n.prototype.onRemove=function(t){var e=this.editor;e.stopListening(t),e.UndoManager.remove(t)},n.prototype.add=function(t,e){return e===void 0&&(e={}),typeof t=="string"&&(t=this.editor.get("Parser").parseCss(t)),e.em=this.editor,Nt.pM.prototype.add.apply(this,[t,e])},n}(Nt.pM);const fb=$h;$h.prototype.model=Gh;var db=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ai=function(){return ai=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ai.apply(this,arguments)},pb=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},hb=function(a){db(n,a);function n(t){var e=a.call(this,t,"CssComposer",null,{},eb())||this;e.Selectors=Wo,e.storageKey="styles";var r=e.config,o=r.pStylePrefix;return o&&(r.stylePrefix=o+r.stylePrefix),r.rules=e.em.config.style||r.rules||"",e.rules=new fb([],r),e}return n.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},n.prototype.postLoad=function(){this.em.UndoManager.add(this.getAll())},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},n.prototype.add=function(t,e,r,o,s){o===void 0&&(o={}),s===void 0&&(s={});var u=e||"",c=r||"",f=ai({},o),h=this.get(t,u,c,f);return h&&h.config&&!h.config.singleAtRule||(f.state=u,f.mediaText=c,f.selectors=[],c&&!f.atRuleType&&(f.atRuleType="media"),h=new Gh(f,this.config),h.get("selectors").add(t,s),this.rules.add(h,s)),h},n.prototype.get=function(t,e,r,o){var s=t;if((0,k.isString)(t)){var u=this.em.Selectors,c=t.split(",")[0].trim(),f=this.em.Parser.parserCss.checkNode({selectors:c})[0];s=u.get(f.selectors)}return this.rules.find(function(h){return h.compare(s,e,r,o)})||null},n.prototype.getAll=function(){return this.rules},n.prototype.addCollection=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=this.em,s=[];(0,k.isString)(t)&&(t=o.Parser.parseCss(t));for(var u=t instanceof Array?t:[t],c=0,f=u.length;c<f;c++){var h=u[c]||{};if(h.selectors){var g=o==null?void 0:o.Selectors;g||console.warn("Selector Manager not found");for(var y=h.selectors,_=y instanceof Array?y:[y],b=[],x=0,T=_.length;x<T;x++){var I=g.add(_[x]);b.push(I)}var z=this.get(b,h.state,h.mediaText,h),F=this.add(b,h.state,h.mediaText,h,e),W=!z||!e.avoidUpdateStyle,ct=h.style||{};if((0,Pt.isObject)(r)&&F.set(r,e),W){var _t=e.extend?ai(ai({},F.get("style")),ct):ct;F.setStyle(_t,e)}s.push(F)}}return s},n.prototype.addRules=function(t){return this.addCollection(t)},n.prototype.setRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=r.atRuleType,s=r.atRuleParams,u=this.em.Parser.parserCss.checkNode({selectors:t,style:e})[0],c=u.state,f=u.selectorsAdd,h=this.em.Selectors,g=h.add(u.selectors),y=this.add(g,c,s,{selectorsAdd:f,atRule:o});return r.addStyles?y.addStyle(e,r):y.setStyle(e,r),y},n.prototype.getRule=function(t,e){e===void 0&&(e={});var r=this.em,o=r.Selectors,s=r.Parser.parserCss.checkNode({selectors:t})[0],u=o.get(s.selectors),c=s.state,f=s.selectorsAdd,h=e.atRuleType,g=e.atRuleParams;return u?this.get(u,c,g,{selectorsAdd:f,atRuleType:h}):void 0},n.prototype.getRules=function(t){var e=this.getAll();if(!t)return pb([],e.models,!0);var r={sort:!0},o=(0,k.isString)(t)?t.split(",").map(function(u){return u.trim()}):t,s=e.filter(function(u){return o.indexOf(u.getSelectors().getFullString(null,r))>=0});return s},n.prototype.setIdRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=r.addOpts,s=o===void 0?{}:o,u=r.mediaText,c=r.state||"",f=(0,k.isUndefined)(u)?this.em.getCurrentMedia():u,h=this.em.Selectors,g=h.add({name:t,type:Xr.TYPE_ID},s),y=this.add(g,c,f,{},s);return y.setStyle(e,ai(ai({},r),s)),y},n.prototype.getIdRule=function(t,e){e===void 0&&(e={});var r=e.mediaText,o=e.state||"",s=(0,k.isUndefined)(r)?this.em.getCurrentMedia():r,u=this.em.Selectors.get(t,Xr.TYPE_ID);return u&&this.get(u,o,s)},n.prototype.setClassRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=r.state||"",s=r.mediaText||this.em.getCurrentMedia(),u=this.em.Selectors,c=u.add({name:t,type:Xr.TYPE_CLASS}),f=this.add(c,o,s);return f.setStyle(e,r),f},n.prototype.getClassRule=function(t,e){e===void 0&&(e={});var r=e.state||"",o=e.mediaText||this.em.getCurrentMedia(),s=this.em.Selectors.get(t,Xr.TYPE_CLASS);return s&&this.get(s,r,o)},n.prototype.remove=function(t,e){var r=(0,k.isString)(t)?this.getRules(t):t,o=this.getAll().remove(r,e);return(0,k.isArray)(o)?o:[o]},n.prototype.clear=function(t){return t===void 0&&(t={}),this.getAll().reset([],t),this},n.prototype.getComponentRules=function(t,e){e===void 0&&(e={});var r=e.state,o=e.mediaText,s=e.current;s&&(r=this.em.get("state")||"",o=this.em.getCurrentMedia());var u=t.getId(),c=this.getAll().filter(function(f){return!(0,k.isUndefined)(r)&&f.get("state")!==r||!(0,k.isUndefined)(o)&&f.get("mediaText")!==o?!1:f.getSelectorsString()==="#".concat(u)});return c},n.prototype.render=function(){var t;return(t=this.rulesView)===null||t===void 0||t.remove(),this.rulesView=new Ch({collection:this.rules,config:this.config}),this.rulesView.render().el},n.prototype.checkId=function(t,e){e===void 0&&(e={});var r=e.idMap,o=r===void 0?{}:r,s=[];if(!Object.keys(o).length)return s;var u=Array.isArray(t)?t:[t];return u.forEach(function(c){var f=c.selectors;if(f&&f.length==1){var h=f[0];if((0,k.isString)(h)){if(h[0]==="#"){var g=h.substring(1),y=o[g];g&&y&&(f[0]="#".concat(y),s.push(c))}}else if(h.name&&h.type===Xr.TYPE_ID){var y=o[h.name];y&&(h.name=y,s.push(c))}}}),s},n.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),(t=this.rulesView)===null||t===void 0||t.remove()},n}(yo);const vb=hb;var gb=function(){return{appendTo:"",blocks:[],appendOnClick:!1,custom:!1}};const yb=gb;var mb=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_b=function(a){mb(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{},dragDef:{}}},Object.defineProperty(n.prototype,"category",{get:function(){var t=this.get("category");return t instanceof fs?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),n.prototype.getId=function(){return this.id},n.prototype.getLabel=function(){return this.get("label")},n.prototype.getMedia=function(){return this.get("media")},n.prototype.getContent=function(){return this.get("content")},n.prototype.getDragDef=function(){return this.get("dragDef")},n.prototype.getCategoryLabel=function(){var t=this.get("category");return(0,k.isFunction)(t==null?void 0:t.get)?t.get("label"):t!=null&&t.label?t==null?void 0:t.label:t},n}(Nt.Kx);const qh=_b;var wb=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yh=function(a){wb(n,a);function n(t,e){var r=a.call(this,t)||this;return r.em=e.em,r.on("add",r.handleAdd),r}return n.prototype.getCategories=function(){return this.em.Blocks.getCategories()},n.prototype.handleAdd=function(t){this.initCategory(t)},n}(Ih);const Js=Yh;Yh.prototype.model=qh;var Qa;(function(a){a.add="block:add",a.remove="block:remove",a.removeBefore="block:remove:before",a.update="block:update",a.dragStart="block:drag:start",a.drag="block:drag",a.dragEnd="block:drag:stop",a.categoryUpdate="block:category:update",a.custom="block:custom",a.all="block"})(Qa||(Qa={}));var bb=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cb=function(a){bb(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t)||this,o=r.model;return r.em=e.em,r.config=e,r.endDrag=r.endDrag.bind(r),r.ppfx=e.pStylePrefix||"",r.listenTo(o,"destroy remove",r.remove),r.listenTo(o,"change",r.render),r}return n.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.handleClick=function(t){var e=this,r=e.config,o=e.model,s=e.em,u=o.get("onClick")||r.appendOnClick;if(s.trigger("block:click",o,t),u){if((0,k.isFunction)(u))return u(o,s==null?void 0:s.getEditor(),{event:t})}else return;var c=r.getSorter(),f=o.get("content"),h=s.getSelected();c.setDropContent(f);var g,y,_;if(h)if(y=c.validTarget(h.getEl(),f),y.valid)g=h;else{var b=h.parent();b&&(y=c.validTarget(b.getEl(),f),y.valid&&(g=b,_=b.components().indexOf(h)+1))}if(!g){var x=s.getWrapper();y=c.validTarget(x.getEl(),f),y.valid&&(g=x)}var T=g&&g.append(f,{at:_})[0];T&&s.setSelected(T,{scroll:1})},n.prototype.startDrag=function(t){var e=this,r=e.config,o=e.em,s=e.model,u=s.get("disable");if(!(t.button!==0||!r.getSorter||this.el.draggable||u)){o.refreshCanvas();var c=r.getSorter();c.__currentBlock=s,c.setDragHelper(this.el,t),c.setDropContent(this.model.get("content")),c.startSort([this.el]),(0,Wt.on)(document,"mouseup",this.endDrag)}},n.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},n.prototype.handleDrag=function(t){this.__getModule().__drag(t)},n.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},n.prototype.endDrag=function(){(0,Wt.AU)(document,"mouseup",this.endDrag);var t=this.config.getSorter();t.cancelDrag()},n.prototype.render=function(){var t,e=this,r=e.em,o=e.el,s=e.$el,u=e.ppfx,c=e.model,f=c.get("disable"),h=c.get("attributes")||{},g=h.class||"",y="".concat(u,"block"),_=r&&r.t("blockManager.labels.".concat(c.id))||c.get("label"),b=c.get("render"),x=c.get("media"),T=f?"".concat(y,"--disable"):"".concat(u,"four-color-h");s.attr(h),o.className="".concat(g," ").concat(y," ").concat(u,"one-bg ").concat(T).trim(),o.innerHTML=`
      `.concat(x?'<div class="'.concat(y,'__media">').concat(x,"</div>"):"",`
      <div class="`).concat(y,'-label">').concat(_,`</div>
    `),o.title=h.title||((t=o.textContent)===null||t===void 0?void 0:t.trim()),o.setAttribute("draggable","".concat(!!((0,Pt.hasDnd)(r)&&!f)));var I=b&&b({el:o,model:c,className:y,prefix:u});return I&&(o.innerHTML=I),this},n}(Nt.Ss);const xb=Cb;var Sb=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ob=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Tb=function(a){Sb(n,a);function n(t,e,r){var o=a.call(this,t)||this;o.config=e;var s=e.pStylePrefix||"";return o.em=e.em,o.catName=r,o.pfx=s,o.caretR="fa fa-caret-right",o.caretD="fa fa-caret-down",o.iconClass="".concat(s,"caret-icon"),o.activeClass="".concat(s,"open"),o.className="".concat(s).concat(r,"-category"),o.listenTo(o.model,"change:open",o.updateVisibility),o.model.view=o,o}return n.prototype.events=function(){return{"click [data-title]":"toggle"}},n.prototype.template=function(t){var e=t.pfx,r=t.label,o=t.catName;return cn(lp||(lp=Ob([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `])),e,e,r,e,o)},n.prototype.attributes=function(){return this.model.get("attributes")||{}},n.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},n.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getTypeEl().style.display=""},n.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getTypeEl().style.display="none"},n.prototype.toggle=function(){var t=this.model;t.set("open",!t.get("open"))},n.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},n.prototype.getTypeEl=function(){return this.typeEl||(this.typeEl=this.el.querySelector(".".concat(this.pfx).concat(this.catName,"s-c"))),this.typeEl},n.prototype.append=function(t){this.getTypeEl().appendChild(t)},n.prototype.render=function(){var t=this,e=t.em,r=t.el,o=t.$el,s=t.model,u=t.pfx,c=t.catName,f=e.t("".concat(c,"Manager.categories.").concat(s.id))||s.get("label");return r.innerHTML=this.template({pfx:u,label:f,catName:c}),o.addClass(this.className),o.css({order:s.get("order")}),this.updateVisibility(),this},n}(Nt.Ss);const Xh=Tb;var lp,Pb=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hl=function(){return Hl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Hl.apply(this,arguments)},Eb=function(a){Pb(n,a);function n(t,e){var r=a.call(this,t)||this;r.renderedCategories=new Map,(0,k.bindAll)(r,"getSorter","onDrag","onDrop","onMove"),r.config=e||{},r.categories=t.categories||"";var o=r.config.pStylePrefix||"";r.ppfx=o,r.noCatClass="".concat(o,"blocks-no-cat"),r.blockContClass="".concat(o,"blocks-c"),r.catsClass="".concat(o,"block-categories");var s=r.collection;return r.listenTo(s,"add",r.addTo),r.listenTo(s,"reset",r.render),r.em=r.config.em,r.em&&(r.config.getSorter=r.getSorter),r}return n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.updateConfig=function(t){t===void 0&&(t={}),this.config=Hl(Hl({},this.config),t)},n.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var e=t.Utils,r=t.Canvas;this.sorter=new e.Sorter({container:r.getBody(),placer:r.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:r.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:t,canvasRelative:1})}return this.sorter}},n.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},n.prototype.onMove=function(t){this.__getModule().__drag(t)},n.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},n.prototype.addTo=function(t){this.add(t)},n.prototype.add=function(t,e){var r=this,o=r.config,s=r.renderedCategories,u=t.get("attributes"),c=new xb({model:t,attributes:u},o),f=c.render().el,h=t.parent.initCategory(t);if(h&&this.categories&&!o.ignoreCategories){var g=h.getId(),y=this.getCategoriesEl(),_=s.get(g);!_&&y&&(_=new Xh({model:h},o,"block").render(),s.set(g,_),y.appendChild(_.el)),_==null||_.append(f);return}e?e.appendChild(f):this.append(f)},n.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},n.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},n.prototype.append=function(t){var e=this.getBlocksEl();e&&e.appendChild(t)},n.prototype.render=function(){var t=this,e=this.ppfx,r=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(s){return t.add(s,r)}),this.append(r);var o="".concat(this.blockContClass,"s ").concat(e,"one-bg ").concat(e,"two-color");return this.$el.addClass(o),this.rendered=!0,this},n}(Nt.Ss);const up=Eb;var Ab=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ho=function(){return Ho=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ho.apply(this,arguments)},kb=function(a){Ab(n,a);function n(t){var e,r=a.call(this,t,"BlockManager",new Js(((e=t.config.blockManager)===null||e===void 0?void 0:e.blocks)||[],{em:t}),Qa,yb())||this;return r.events=Qa,r.Block=qh,r.Blocks=Js,r.Category=fs,r.Categories=hl,r.storageKey="",r.blocks=r.all,r.blocksVisible=new Js(r.blocks.models,{em:t}),r.categories=new hl([],{em:t,events:{update:Qa.categoryUpdate}}),r.blocks.on("add",function(o){return r.blocksVisible.add(o)}),r.blocks.on("remove",function(o){return r.blocksVisible.remove(o)}),r.blocks.on("reset",function(o){return r.blocksVisible.reset(o.models)}),r.__onAllEvent=(0,k.debounce)(function(){return r.__trgCustom()},0),r}return n.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:e.container,dragStart:function(r,o){return t.startDrag(r,o)},drag:function(r){return t.__drag(r)},dragStop:function(r){return t.endDrag(r)}}},n.prototype.__startDrag=function(t,e){var r=this,o=r.em,s=r.events,u=r.blocks,c=t.getContent?t.getContent():t;this._dragBlock=t,o.set({dragResult:null,dragSource:{content:c,dragDef:t.getDragDef()}}),[o,u].map(function(f){return f.trigger(s.dragStart,t,e)})},n.prototype.__drag=function(t){var e=this,r=e.em,o=e.events,s=e.blocks,u=this._dragBlock;[r,s].map(function(c){return c.trigger(o.drag,u,t)})},n.prototype.__endDrag=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.events,s=e.blocks,u=this._dragBlock,c=t.component||r.get("dragResult");if(delete this._dragBlock,c&&u){var f="activeOnRender",h=c.get&&c.get(f),g=u.get("activate")||h,y=u.get("select"),_=(0,k.isArray)(c)?c[0]:c;(y||g&&y!==!1)&&r.setSelected(_),g&&(_.trigger("active"),h&&_.unset(f)),u.get("resetId")&&_.onAll(function(b){return b.resetId()})}r.set({dragResult:null,dragSource:void 0}),u&&[r,s].map(function(b){return b.trigger(o.dragEnd,c,u)})},n.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(t){return t.view}).filter(Boolean)},n.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=Ho(Ho({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(){return this._bhv||{}},n.prototype.startDrag=function(t,e){this.__startDrag(t,e),this.__getFrameViews().forEach(function(r){var o;return(o=r.droppable)===null||o===void 0?void 0:o.startCustom()})},n.prototype.endDrag=function(t){this.__getFrameViews().forEach(function(e){var r;return(r=e.droppable)===null||r===void 0?void 0:r.endCustom(t)}),this.__endDrag()},n.prototype.postRender=function(){var t=this,e=t.categories,r=t.config,o=t.em,s=this.blocksVisible;this.blocksView=new up({collection:s,categories:e},Ho(Ho({},r),{em:o})),this.__appendTo(s.models),this.__trgCustom()},n.prototype.add=function(t,e,r){r===void 0&&(r={});var o=e||{};return o.id=t,this.blocks.add(o,r)},n.prototype.get=function(t){return this.blocks.get(t)},n.prototype.getAll=function(){return this.blocks},n.prototype.getAllVisible=function(){return this.blocksVisible},n.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},n.prototype.getCategories=function(){return this.categories},n.prototype.getContainer=function(){var t;return(t=this.blocksView)===null||t===void 0?void 0:t.el},n.prototype.getDragBlock=function(){return this._dragBlock},n.prototype.getBlocksByCategory=function(t){return Vh(t||this.getAll().models)},n.prototype.render=function(t,e){e===void 0&&(e={});var r=this,o=r.categories,s=r.config,u=r.em,c=t||this.getAll().models;if(e.external){var f=new Js(c,{em:u});return new up({collection:f,categories:o},Ho(Ho({em:u},s),e)).render().el}return this.blocksView&&(this.blocksView.updateConfig(e),this.blocksView.collection.reset(c),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},n.prototype.destroy=function(){var t,e=[this.blocks,this.blocksVisible,this.categories];e.map(function(r){return r.stopListening()}),e.map(function(r){return r.reset()}),(t=this.blocksView)===null||t===void 0||t.remove()},n}(yo);const Mb=kb;var Db=function(){return{stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1}};const Lb=Db;var jb=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zh=function(a){jb(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{name:"",label:""}},n.prototype.getName=function(){return this.get("name")},n.prototype.getLabel=function(){return this.get("label")||this.getName()},n}(Nt.Kx);const cc=Zh;Zh.prototype.idAttribute="name";var Vb=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ib=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},cp="contentEditable",Nb=function(a){Vb(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this,r=t.config||{};return e.config=r,e.module=t.module,e.coll=t.coll||null,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.em=r.em,e.listenTo(e.model,"change:active",e.updateStatus),e}return n.prototype.template=function(){var t=this,e=t.pfx,r=t.model,o=t.config,s=r.get("label")||"";return cn(fp||(fp=Ib([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),e,e,e,s,e,e,o.iconTagRemove)},n.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},n.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},n.prototype.startEditTag=function(){var t=this.em,e=this.getInputEl();e[cp]="true",e.focus(),t==null||t.setEditing(!0)},n.prototype.endEditTag=function(){var t=this,e=t.model,r=t.em,o=this.getInputEl(),s=o.textContent||"",u=r==null?void 0:r.Selectors;o[cp]="false",r==null||r.setEditing(!1),u&&u.rename(e,s)!==e&&(o.innerText=e.getLabel())},n.prototype.changeStatus=function(){var t=this.model;t.set("active",!t.getActive())},n.prototype.removeTag=function(){this.module.removeSelected(this.model)},n.prototype.updateStatus=function(){var t=this,e=t.model,r=t.$el,o=t.config,s=o.iconTagOn,u=o.iconTagOff,c=r.find("[data-tag-status]");e.get("active")?(c.html(s),r.removeClass("opac50")):(c.html(u),r.addClass("opac50"))},n.prototype.render=function(){var t=this,e=t.pfx,r=t.ppfx,o=t.$el,s=t.model,u="".concat(e,"tag"),c=["".concat(u," ").concat(r,"three-bg")];return s.get("protected")&&c.push("".concat(u,"-protected")),o.html(this.template()),o.attr("class",c.join(" ")),this.updateStatus(),this},n}(Nt.Ss);const Rb=Nb;var fp,Fb=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ha=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Hb=function(a){Fb(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.className=e.pfx+"tags",e.stateInputId=e.pfx+"states",e.stateInputC=e.pfx+"input-c",e.states=e.config.states||[];var r=e.config.em,o=e.collection;e.target=r;var s=r.Selectors;e.module=s,e.em=r,e.componentChanged=(0,k.debounce)(e.componentChanged.bind(e),0),e.checkSync=(0,k.debounce)(e.checkSync.bind(e),0);var u=Sr.I.update,c="".concat(u,":classes"),f="component:toggled ".concat(c),h="".concat(c," ").concat(u,":attributes:id change:state");return e.listenTo(r,f,e.componentChanged),e.listenTo(r,"styleManager:update",e.componentChanged),e.listenTo(r,h,e.__handleStateChange),e.listenTo(r,"styleable:change change:device",e.checkSync),e.listenTo(o,"add",e.addNew),e.listenTo(o,"reset",e.renderClasses),e.listenTo(o,"remove",e.tagRemoved),e.listenTo(s.getAll(),s.events.state,(0,k.debounce)(function(){return e.renderStates()},0)),e.delegateEvents(),e}return n.prototype.template=function(t){var e=t.labelInfo,r=t.labelHead,o=t.iconSync,s=t.iconAdd,u=t.pfx,c=t.ppfx;return cn(dp||(dp=Ha([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),u,u,u,u,r,u,u,u,c,c,c,u,c,c,u,c,u,u,u,u,u,s,u,u,o,u,u,e,u)},n.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},n.prototype.syncStyle=function(){var t=this.em,e=this.getTarget(),r=t.Css,o={noDisabled:1},s=this.getCommonSelectors({opts:o}),u=t.get("state"),c=t.getCurrentMedia(),f=[],h=r.get(s,u,c)||r.add(s,u,c),g;this.getTargets().forEach(function(y){var _=r.getIdRule(y.getId(),{state:u,mediaText:c});g=_.getStyle(),_.setStyle({}),f.push(_)}),g&&h.addStyle(g),t.trigger("component:toggled"),t.trigger("component:sync-style",{component:e,selectors:s,mediaText:c,rule:h,ruleComponents:f,state:u})},n.prototype.tagRemoved=function(t){this.updateStateVis()},n.prototype.addNew=function(t){this.addToClasses(t)},n.prototype.startNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:"none"}),(e=this.$input)===null||e===void 0||e.show().focus()},n.prototype.endNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:""}),(e=this.$input)===null||e===void 0||e.hide().val("")},n.prototype.onInputKeyUp=function(t){var e;t.keyCode===13?(t.preventDefault(),this.addNewTag((e=this.$input)===null||e===void 0?void 0:e.val())):t.keyCode===27&&this.endNewTag()},n.prototype.checkStates=function(){var t=this.em.getState(),e=this.getStates();e&&e.val(t)},n.prototype.componentChanged=function(t){var e=t===void 0?{}:t,r=e.targets;this.updateSelection(r)},n.prototype.updateSelection=function(t){var e=t||this.getTargets();e=(0,k.isArray)(e)?e:[e];var r=[];return e&&e.length&&(r=this.getCommonSelectors({targets:e}),this.checkSync({validSelectors:r})),this.collection.reset(r),this.updateStateVis(e),this.module.__trgCustom(),r},n.prototype.getCommonSelectors=function(t){var e=t===void 0?{}:t,r=e.targets,o=e.opts,s=o===void 0?{}:o,u=r||this.getTargets();return this.module.__getCommonSelectors(u,s)},n.prototype._commonSelectors=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this.module).__common.apply(t,e)},n.prototype.checkSync=function(){var t=this,e=t.$btnSyncEl,r=t.config,o=t.collection,s=this.getTarget(),u;if(s&&r.componentFirst&&o.length){var c=s.getStyle();u=!(0,k.isEmpty)(c)}e&&e[u?"show":"hide"]()},n.prototype.getTarget=function(){return this.target.getSelected()},n.prototype.getTargets=function(){return this.target.getSelectedAll()},n.prototype.updateStateVis=function(t){var e=this.em,r=e&&e.getConfig().avoidInlineStyle,o=this.collection.length||r?"":"none";this.getStatesC().css("display",o),this.updateSelector(t)},n.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},n.prototype.updateSelector=function(t){var e=this,r=this.el.querySelector("[data-selected]"),o=[],s=t||this.getTargets();s=(0,k.isArray)(s)?s:[s],s.forEach(function(u){return o.push(e.__getName(u))}),r&&(r.innerHTML=o.join(", ")),this.checkStates()},n.prototype.__getName=function(t){var e=this,r=e.pfx,o=e.config,s=e.em,u=o.selectedName,c=o.componentFirst,f;if((0,k.isString)(t))f=cn(pp||(pp=Ha(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),r,t);else{var h=t==null?void 0:t.getSelectors();if(!h)return"";var g=h.getStyleable(),y=s.get("state"),_=t.getId?cn(hp||(hp=Ha(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),r,t.getName(),r,t.getId()):"";f=this.collection.getFullString(g),f=f?cn(vp||(vp=Ha(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),r,f):t.get("selectorsAdd")||_,f=c&&_?_:f,f+=y?cn(gp||(gp=Ha(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),r,y):"",f=u?u({result:f,state:y,target:t}):f}return f&&'<span class="'.concat(r,'sel">').concat(f,"</span>")},n.prototype.stateChanged=function(t){var e=this.em,r=t.target.value;e.set("state",r)},n.prototype.addNewTag=function(t){var e=t.trim();e&&(this.module.addSelected({label:e}),this.endNewTag())},n.prototype.addToClasses=function(t,e){var r=e,o=this.getClasses(),s=new Rb({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return r?r.appendChild(s):o.append(s),s},n.prototype.renderClasses=function(){var t=this,e=document.createDocumentFragment(),r=this.getClasses();r.empty(),this.collection.each(function(o){return t.addToClasses(o,e)}),r.append(e)},n.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},n.prototype.getStates=function(){if(!this.$states){var t=this.$el.find("[data-states]");this.$states=t[0]&&t}return this.$states},n.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},n.prototype.renderStates=function(){var t=this,e=t.module,r=t.em,o=r.t("selectorManager.emptyState"),s=e.getStates().map(function(c){var f=r.t("selectorManager.states.".concat(c.id))||c.getLabel()||c.id;return'<option value="'.concat(c.id,'">').concat(f,"</option>")}).join(""),u=this.getStates();u&&u.html('<option value="">'.concat(o,"</option>").concat(s)),this.checkStates()},n.prototype.render=function(){var t=this,e=t.em,r=t.pfx,o=t.ppfx,s=t.config,u=t.$el,c=t.el,f=s.render,h=s.iconSync,g=s.iconAdd,y={iconSync:h,iconAdd:g,labelHead:e.t("selectorManager.label"),labelInfo:e.t("selectorManager.selected"),ppfx:o,pfx:r,el:c};u.html(this.template(y));var _=f&&f(y);return _&&_!==c&&u.empty().append(_),this.$input=u.find("[data-input]"),this.$addBtn=u.find("[data-add]"),this.$classes=u.find("#"+r+"tags-c"),this.$btnSyncEl=u.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),u.attr("class","".concat(this.className," ").concat(o,"one-bg ").concat(o,"two-color")),this},n}(Nt.Ss);const Bb=Hb;var dp,pp,hp,vp,gp,Ub=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ts=function(){return ts=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ts.apply(this,arguments)},fc=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},yp=function(a){return(0,k.isString)(a)&&a[0]=="#"},mp=function(a){return(0,k.isString)(a)&&a[0]=="."},Jh="selector",ds="".concat(Jh,":"),Wb="".concat(ds,"add"),zb="".concat(ds,"update"),Qh="".concat(ds,"remove"),Kb="".concat(Qh,":before"),Gb="".concat(ds,"custom"),tv="".concat(ds,"state"),$b={all:Jh,update:zb,add:Wb,remove:Qh,removeBefore:Kb,state:tv,custom:Gb},qb=function(a){Ub(n,a);function n(t){var e=a.call(this,t,"SelectorManager",new Wo([]),$b,Lb(),{skipListen:!0})||this;e.Selector=Xr,e.Selectors=Wo,e.storageKey="",(0,k.bindAll)(e,"__updateSelectedByComponents");var r=e.config,o=r.pStylePrefix;o&&(r.stylePrefix=o+r.stylePrefix),e.all=new Wo(r.selectors),e.selected=new Wo([],{em:t,config:r}),e.states=new Nt.pM(r.states.map(function(c){return new cc(c)}),{model:cc}),e.model=new Nt.Kx({cFirst:r.componentFirst,_undo:!0}),e.__update=(0,k.debounce)(function(){return e.__trgCustom()},0),e.__initListen({collections:[e.states,e.selected],propagate:[{entity:e.states,event:e.events.state}]}),t.on("change:state",function(c,f){return t.trigger(tv,f)}),e.model.on("change:cFirst",function(c,f){return t.trigger("selector:type",f)});var s="".concat(Sr.I.update,":classes");t.on("component:toggled ".concat(s),e.__updateSelectedByComponents);var u="component:toggled ".concat(s," change:device styleManager:update selector:state selector:type style:target");return e.model.listenTo(t,u,function(){return e.__update()}),e}return n.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},n.prototype.getAll=function(t){return t===void 0&&(t={}),this.all?t.array?fc([],this.all.models,!0):this.all:[]},n.prototype.__customData=function(t){return t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},n.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},n.prototype.select=function(t,e){e===void 0&&(e={});var r=Array.isArray(t)?t:[t],o=this.em.Styles.select(r,e);this.selected.reset(this.__getCommonSelectors(o));var s=this.selectorTags,u=o.filter(function(c){return c}).map(function(c){return(0,Pt.isComponent)(c)||(0,Pt.isRule)(c)&&!c.get("selectorsAdd")?c:c.getSelectorsString()});return s&&s.componentChanged({targets:u}),this},n.prototype.addSelector=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=ts({},e);(0,k.isObject)(t)?o=t:o.name=t,yp(o.name)?(o.name=o.name.substr(1),o.type=Xr.TYPE_ID):mp(o.name)&&(o.name=o.name.substr(1)),o.label&&!o.name&&(o.name=this.escapeName(o.label));var s=o.name,u=this.getConfig(),c=this,f=c.all,h=c.em,g=s?this.get(s,o.type):f.where(o)[0];if(!g){var y=o instanceof Xr?o:new Xr(o,ts(ts({},r),{config:u,em:h}));return f.add(y,r)}return g},n.prototype.getSelector=function(t,e){return e===void 0&&(e=Xr.TYPE_CLASS),yp(t)?(t=t.substr(1),e=Xr.TYPE_ID):mp(t)&&(t=t.substr(1)),this.all.where({name:t,type:e})[0]},n.prototype.add=function(t,e){var r=this;e===void 0&&(e={});var o=(0,k.isString)(t)?{}:e;return(0,k.isArray)(t)?t.map(function(s){return r.addSelector(s,e,o)}):this.addSelector(t,e,o)},n.prototype.addClass=function(t){var e=this,r=[];return(0,k.isString)(t)&&(t=t.trim().split(" ")),t.forEach(function(o){return r.push(e.addSelector(o))}),r},n.prototype.get=function(t,e){var r=this;if((0,k.isArray)(t)){var o=[],s=t.map(function(u){return r.getSelector(u)}).filter(Boolean);return s.forEach(function(u){return o.indexOf(u)<0&&o.push(u)}),o}else return this.getSelector(t,e)},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.rename=function(t,e,r){var o=this.escapeName(e),s=this.get(o);return s||t.set({name:o,label:e},r)},n.prototype.setState=function(t){return this.em.setState(t),this},n.prototype.getState=function(){return this.em.getState()},n.prototype.getStates=function(){return fc([],this.states.models,!0)},n.prototype.setStates=function(t,e){return this.states.reset(t.map(function(r){return new cc(r)}),e)},n.prototype.getSelected=function(){return this.__getCommon()},n.prototype.getSelectedAll=function(){return fc([],this.selected.models,!0)},n.prototype.addSelected=function(t){var e=this.add(t);this.em.getSelectedAll().forEach(function(r){r.getSelectors().add(e)})},n.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach(function(e){!t.get("protected")&&e&&e.getSelectors().remove(t)})},n.prototype.duplicateSelected=function(t,e){var r=this;e===void 0&&(e={});var o=this.em,s=this.getSelected();if(!(s.indexOf(t)<0)){var u=this.getState(),c=o.getCurrentMedia(),f=o.Css.get(s,u,c),h=f==null?void 0:f.getStyle();if(o.getSelectedAll().forEach(function(y){var _=y.getSelectors();if(_.includes(t)){var b=e.suffix||" copy",x=t.getLabel(),T=r.addSelector("".concat(x).concat(b)),I=_.indexOf(t);_.remove(t),_.add(T,{at:I})}}),h){var g=o.Css.add(this.getSelected(),u,c);g.setStyle(h)}}},n.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},n.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},n.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},n.prototype.escapeName=function(t){var e=this.getConfig().escapeName;return e?e(t):Xr.escapeName(t)},n.prototype.render=function(t){var e=this.selectorTags,r=this.getConfig(),o=e==null?void 0:e.el;return this.selected.reset(t),this.selectorTags=new Bb({el:o,collection:this.selected,module:this,config:r}),this.selectorTags.render().el},n.prototype.destroy=function(){var t=this,e=t.selectorTags,r=t.model;r.stopListening(),this.__update.cancel(),this.__destroy(),e==null||e.remove(),this.selectorTags=void 0},n.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},n.prototype.__getCommonSelectors=function(t,e){e===void 0&&(e={});var r=t.map(function(o){return o.getSelectors&&o.getSelectors().getValid(e)}).filter(Boolean);return this.__common.apply(this,r)},n.prototype.__common=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?e.length===1?e[0]:e.length===2?e[0].filter(function(o){return e[1].indexOf(o)>=0}):e.slice(1).reduce(function(o,s){return t.__common(o,s)},e[0]):[]},n.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},n}(yo);const Yb=qb;var Xb=function(){return{textTags:["br","b","i","u","a","ul","ol"],textTypes:["text","textnode","comment"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,allowUnsafeAttrValue:!1,keepEmptyTextNodes:!1}}};const Zb=Xb;var Wn,xn={STYLE_RULE:1,CHARSET_RULE:2,IMPORT_RULE:3,MEDIA_RULE:4,FONT_FACE_RULE:5,PAGE_RULE:6,KEYFRAMES_RULE:7,KEYFRAME_RULE:8,NAMESPACE_RULE:10,COUNTER_STYLE_RULE:11,SUPPORTS_RULE:12,DOCUMENT_RULE:13,FONT_FEATURE_VALUES_RULE:14,VIEWPORT_RULE:15,REGION_STYLE_RULE:16},na=(Wn={},Wn[xn.MEDIA_RULE]="media",Wn[xn.FONT_FACE_RULE]="font-face",Wn[xn.PAGE_RULE]="page",Wn[xn.KEYFRAMES_RULE]="keyframes",Wn[xn.COUNTER_STYLE_RULE]="counter-style",Wn[xn.SUPPORTS_RULE]="supports",Wn[xn.DOCUMENT_RULE]="document",Wn[xn.FONT_FEATURE_VALUES_RULE]="font-feature-values",Wn[xn.VIEWPORT_RULE]="viewport",Wn),ev=(0,k.keys)(na),ff=[xn.FONT_FACE_RULE,xn.PAGE_RULE,xn.COUNTER_STYLE_RULE,xn.VIEWPORT_RULE],Jb=ev.filter(function(a){return ff.indexOf(Number(a))<0}).map(function(a){return na[a]}).concat(["container","layer"]),Qb=ff.map(function(a){return na[a]}),rv=function(a){a===void 0&&(a="");for(var n=[],t=[],e=a.split(","),r=0,o=e.length;r<o;r++){var s=e[r].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(s)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(s)){var u=s.split(".").filter(Boolean);t.push(u)}else n.push(s)}return{result:t,add:n}},tC=function(a){for(var n=a.style,t={},e=0,r=n.length;e<r;e++){var o=n[e],s=n.getPropertyValue(o),u=n.getPropertyPriority(o);t[o]="".concat(s).concat(u?" !".concat(u):"")}return t},_p=function(a){var n=a.conditionText||a.media&&a.media.mediaText||a.name||a.selectorText||"";return n.trim()},Nc=function(a,n,t){n===void 0&&(n={}),t===void 0&&(t={});var e={},r=a.length,o=a[r-1],s=o?o.split(/:(.+)/):[],u=s[1],c=t.atRule,f=t.selectorsAdd,h=t.mediaText,g=Qb.indexOf(c)>=0;return g&&(e.singleAtRule=!0),c&&(e.atRuleType=c),f&&(e.selectorsAdd=f),h&&(e.mediaText=h),u&&(a[r-1]=s[0],e.state=u,s.splice(s.length-1,1)),e.selectors=a,e.style=n,e},wp=function(a){var n=a.cssText,t=n===void 0?"":n;return Jb.find(function(e){return t.indexOf("@".concat(e))===0})},nv=function(a){for(var n=[],t=a.cssRules||[],e=0,r=t.length;e<r;e++){var o=t[e],s=o.type,u=!1,c="",f="",h=o.selectorText||o.keyText||"",g=ff.indexOf(s)>=0;if(g)u=!0,c=na[s],f=_p(o);else if(ev.indexOf("".concat(s))>=0||!s&&wp(o)){var y=nv(o),_=na[s]||wp(o);f=_p(o);for(var b=0,x=y.length;b<x;b++){var T=y[b];f&&(T.mediaText=f),T.atRuleType=_}n=n.concat(y)}if(!(!h&&!g)){for(var I=tC(o),z=rv(h),F=z.add,W=z.result,ct=void 0,_t=0,xt=W.length;_t<xt;_t++){var ut=Nc(W[_t],I,{atRule:na[s]});n.push(ut),ct=ut}if(F.length){var q=F.join(", ");if(ct)ct.selectorsAdd=q;else{var ut={selectors:[],selectorsAdd:q,style:I};u&&(ut.singleAtRule=u),c&&(ut.atRuleType=c),f&&(ut.mediaText=f),n.push(ut)}}}}return n};const eC=function(a){var n=document.createElement("style");n.innerHTML=a,document.head.appendChild(n);var t=n.sheet;return document.head.removeChild(n),t?nv(t):[]};var rC=function(a,n){return n===void 0&&(n={}),{parse:function(t){var e=this,r=[],o=n.parserCss,s=a==null?void 0:a.Editor,u=o?o(t,s):eC(t);return u.forEach(function(c){return r=r.concat(e.checkNode(c))}),a==null||a.trigger("parse:css",{input:t,output:r,nodes:u}),r},checkNode:function(t){var e=t.selectors,r=t.style,o=[t];if((0,k.isString)(e)){var s=[],u=t,c=rv(e),f=c.result,h=c.add.join(", "),g={atRule:u.atRule,mediaText:u.params};if(f.length?f.forEach(function(_){s.push(Nc(_,r,g))}):s.push(Nc([],r,g)),h){var y=s[s.length-1];y.selectorsAdd=h}o=s}return o}}};const nC=rC;var oC=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),iC=function(a){oC(n,a);function n(t){var e=a.call(this,t,"Parser",Zb())||this,r=e.config;return e.parserCss=nC(t,r),e.parserHtml=Sh(t,r),e}return n.prototype.parseHtml=function(t,e){e===void 0&&(e={});var r=this,o=r.em,s=r.parserHtml;return s.compTypes=o.Components.getTypes()||[],s.parse(t,this.parserCss,e)},n.prototype.parseCss=function(t){return this.parserCss.parse(t)},n.prototype.destroy=function(){},n}(dn);const aC=iC;var sC=function(){return{id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(a){return a},onLoad:function(a){return a},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(a){return a},onLoad:function(a){return a}}}}};const lC=sC;var bp=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{f(e.next(h))}catch(g){s(g)}}function c(h){try{f(e.throw(h))}catch(g){s(g)}}function f(h){h.done?o(h.value):r(h.value).then(u,c)}f((e=e.apply(a,n||[])).next())})},Cp=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(e=1,r&&(o=f[0]&2?r.return:f[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,f[1])).done)return o;switch(r=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=n.call(a,t)}catch(h){f=[6,h],r=0}finally{e=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},uC=function(){function a(){}return a.prototype.store=function(n){return bp(this,arguments,void 0,function(t,e){return e===void 0&&(e={}),Cp(this,function(r){return this.hasLocal(e,!0)&&localStorage.setItem(e.key,JSON.stringify(t)),[2,t]})})},a.prototype.load=function(){return bp(this,arguments,void 0,function(n){var t;return n===void 0&&(n={}),Cp(this,function(e){return t={},this.hasLocal(n,!0)&&(t=JSON.parse(localStorage.getItem(n.key)||"{}")),[2,t]})})},a.prototype.hasLocal=function(n,t){if(n===void 0&&(n={}),n.checkLocal&&(!(0,Pt.hasWin)()||!localStorage)){if(t)throw new Error("localStorage not available");return!1}return!0},a}();const cC=uC;function pi(a){"@babel/helpers - typeof";return pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pi(a)}function fC(a){var n=this.constructor;return this.then(function(t){return n.resolve(a()).then(function(){return t})},function(t){return n.resolve(a()).then(function(){return n.reject(t)})})}const dC=fC;function pC(a){var n=this;return new n(function(t,e){if(!(a&&typeof a.length<"u"))return e(new TypeError(pi(a)+" "+a+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(a);if(r.length===0)return t([]);var o=r.length;function s(c,f){if(f&&(pi(f)==="object"||typeof f=="function")){var h=f.then;if(typeof h=="function"){h.call(f,function(g){s(c,g)},function(g){r[c]={status:"rejected",reason:g},--o===0&&t(r)});return}}r[c]={status:"fulfilled",value:f},--o===0&&t(r)}for(var u=0;u<r.length;u++)s(u,r[u])})}const hC=pC;function ov(a,n){this.name="AggregateError",this.errors=a,this.message=n||""}ov.prototype=Error.prototype;function vC(a){var n=this;return new n(function(t,e){if(!(a&&typeof a.length<"u"))return e(new TypeError("Promise.any accepts an array"));var r=Array.prototype.slice.call(a);if(r.length===0)return e();for(var o=[],s=0;s<r.length;s++)try{n.resolve(r[s]).then(t).catch(function(u){o.push(u),o.length===r.length&&e(new ov(o,"All promises were rejected"))})}catch(u){e(u)}})}const gC=vC;var yC=setTimeout;function iv(a){return!!(a&&typeof a.length<"u")}function mC(){}function _C(a,n){return function(){a.apply(n,arguments)}}function Qe(a){if(!(this instanceof Qe))throw new TypeError("Promises must be constructed via new");if(typeof a!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],sv(a,this)}function av(a,n){for(;a._state===3;)a=a._value;if(a._state===0){a._deferreds.push(n);return}a._handled=!0,Qe._immediateFn(function(){var t=a._state===1?n.onFulfilled:n.onRejected;if(t===null){(a._state===1?Rc:us)(n.promise,a._value);return}var e;try{e=t(a._value)}catch(r){us(n.promise,r);return}Rc(n.promise,e)})}function Rc(a,n){try{if(n===a)throw new TypeError("A promise cannot be resolved with itself.");if(n&&(pi(n)==="object"||typeof n=="function")){var t=n.then;if(n instanceof Qe){a._state=3,a._value=n,Fc(a);return}else if(typeof t=="function"){sv(_C(t,n),a);return}}a._state=1,a._value=n,Fc(a)}catch(e){us(a,e)}}function us(a,n){a._state=2,a._value=n,Fc(a)}function Fc(a){a._state===2&&a._deferreds.length===0&&Qe._immediateFn(function(){a._handled||Qe._unhandledRejectionFn(a._value)});for(var n=0,t=a._deferreds.length;n<t;n++)av(a,a._deferreds[n]);a._deferreds=null}function wC(a,n,t){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof n=="function"?n:null,this.promise=t}function sv(a,n){var t=!1;try{a(function(e){t||(t=!0,Rc(n,e))},function(e){t||(t=!0,us(n,e))})}catch(e){if(t)return;t=!0,us(n,e)}}Qe.prototype.catch=function(a){return this.then(null,a)};Qe.prototype.then=function(a,n){var t=new this.constructor(mC);return av(this,new wC(a,n,t)),t};Qe.prototype.finally=dC;Qe.all=function(a){return new Qe(function(n,t){if(!iv(a))return t(new TypeError("Promise.all accepts an array"));var e=Array.prototype.slice.call(a);if(e.length===0)return n([]);var r=e.length;function o(u,c){try{if(c&&(pi(c)==="object"||typeof c=="function")){var f=c.then;if(typeof f=="function"){f.call(c,function(h){o(u,h)},t);return}}e[u]=c,--r===0&&n(e)}catch(h){t(h)}}for(var s=0;s<e.length;s++)o(s,e[s])})};Qe.any=gC;Qe.allSettled=hC;Qe.resolve=function(a){return a&&pi(a)==="object"&&a.constructor===Qe?a:new Qe(function(n){n(a)})};Qe.reject=function(a){return new Qe(function(n,t){t(a)})};Qe.race=function(a){return new Qe(function(n,t){if(!iv(a))return t(new TypeError("Promise.race accepts an array"));for(var e=0,r=a.length;e<r;e++)Qe.resolve(a[e]).then(n,t)})};Qe._immediateFn=typeof setImmediate=="function"&&function(a){setImmediate(a)}||function(a){yC(a,0)};Qe._unhandledRejectionFn=function(n){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",n)};const Hc=Qe;(0,Pt.hasWin)()&&(window.Promise=window.Promise||Hc);const lv=typeof fetch=="function"?fetch.bind():function(a,n){return new Hc(function(t,e){var r=new XMLHttpRequest;r.open(n.method||"get",a),r.withCredentials=n.credentials=="include";for(var o in n.headers||{})r.setRequestHeader(o,n.headers[o]);r.onload=function(s){return t({status:r.status,statusText:r.statusText,text:function(){return Hc.resolve(r.responseText)}})},r.onerror=e,r.upload&&n.onProgress&&(r.upload.onprogress=n.onProgress),n.body?r.send(n.body):r.send()})};var Bl=function(){return Bl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Bl.apply(this,arguments)},xp=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{f(e.next(h))}catch(g){s(g)}}function c(h){try{f(e.throw(h))}catch(g){s(g)}}function f(h){h.done?o(h.value):r(h.value).then(u,c)}f((e=e.apply(a,n||[])).next())})},Sp=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(e=1,r&&(o=f[0]&2?r.return:f[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,f[1])).done)return o;switch(r=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=n.call(a,t)}catch(h){f=[6,h],r=0}finally{e=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},bC=function(){function a(){}return a.prototype.store=function(n){return xp(this,arguments,void 0,function(t,e){return e===void 0&&(e={}),Sp(this,function(r){switch(r.label){case 0:return[4,this.request(e.urlStore,this.__props(e,t),e)];case 1:return[2,r.sent()]}})})},a.prototype.load=function(){return xp(this,arguments,void 0,function(n){return n===void 0&&(n={}),Sp(this,function(t){switch(t.label){case 0:return[4,this.request(n.urlLoad,this.__props(n),n)];case 1:return[2,t.sent()]}})})},a.prototype.request=function(n,t,e){return t===void 0&&(t={}),e===void 0&&(e={}),lv(n,t).then(function(r){var o=r.text(),s=(r.status/200|0)===1;return s?o:o.then(Promise.reject)}).then(function(r){var o=r&&(0,k.isString)(r);return e.contentTypeJson&&o?JSON.parse(r):r})},a.prototype.__props=function(n,t){n===void 0&&(n={});var e=n.contentTypeJson,r=n.headers||{},o=n.fetchOptions||{},s="X-Requested-With",u="Content-Type",c;if((0,k.isUndefined)(r[s])&&(r[s]="XMLHttpRequest"),(0,k.isUndefined)(r[u])&&e&&(r[u]="application/json; charset=utf-8"),t)if(e)c=JSON.stringify(t);else{c=new FormData;for(var f in t)c.append(f,t[f])}var h={method:c?"POST":"GET",credentials:n.credentials,headers:r,body:c};return Bl(Bl({},h),(0,k.isFunction)(o)?o(h):o)},a}();const CC=bC;var Bc;(function(a){a.start="storage:start",a.startStore="storage:start:store",a.startLoad="storage:start:load",a.load="storage:load",a.store="storage:store",a.after="storage:after",a.afterStore="storage:after:store",a.afterLoad="storage:after:load",a.end="storage:end",a.endStore="storage:end:store",a.endLoad="storage:end:load",a.error="storage:error",a.errorStore="storage:error:store",a.errorLoad="storage:error:load"})(Bc||(Bc={}));const $r=Bc;var xC=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qi=function(){return qi=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},qi.apply(this,arguments)},dc=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{f(e.next(h))}catch(g){s(g)}}function c(h){try{f(e.throw(h))}catch(g){s(g)}}function f(h){h.done?o(h.value):r(h.value).then(u,c)}f((e=e.apply(a,n||[])).next())})},pc=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(e=1,r&&(o=f[0]&2?r.return:f[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,f[1])).done)return o;switch(r=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=n.call(a,t)}catch(h){f=[6,h],r=0}finally{e=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Qs="local",Op="remote",SC=function(a){xC(n,a);function n(t){var e=a.call(this,t,"StorageManager",lC())||this;e.storages={},e.events=$r;var r=e.config;return r._disable&&(r.type=void 0),e.storages={},e.add(Qs,new cC),e.add(Op,new CC),e.setCurrent(r.type),e}return n.prototype.isAutosave=function(){return!!this.config.autosave},n.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},n.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},n.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},n.prototype.add=function(t,e){return this.storages[t]=e,this},n.prototype.get=function(t){return this.storages[t]},n.prototype.getStorages=function(){return this.storages},n.prototype.getCurrent=function(){return this.config.currentStorage},n.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},n.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},n.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},n.prototype.store=function(t){return dc(this,arguments,void 0,function(e,r){var o,s,u,c,f,h;return r===void 0&&(r={}),pc(this,function(g){switch(g.label){case 0:o=this.getCurrentStorage(),s=qi(qi({},this.getCurrentOptions()),r),u=this.getRecoveryStorage(),c=this.getCurrentOptions(Qs),g.label=1;case 1:return g.trys.push([1,5,,9]),[4,this.__exec(o,s,e)];case 2:return g.sent(),f=u,f?[4,this.__exec(u,c,{})]:[3,4];case 3:f=g.sent(),g.label=4;case 4:return[3,9];case 5:return h=g.sent(),u?[4,this.__exec(u,c,e)]:[3,7];case 6:return g.sent(),[3,8];case 7:throw h;case 8:return[3,9];case 9:return[2,e]}})})},n.prototype.load=function(){return dc(this,arguments,void 0,function(t){var e,r,o,s,u;return t===void 0&&(t={}),pc(this,function(c){switch(c.label){case 0:return e=this.getCurrentStorage(),r=qi(qi({},this.getCurrentOptions()),t),o=this.getRecoveryStorage(),o?[4,this.__exec(o,this.getCurrentOptions(Qs))]:[3,5];case 1:if(u=c.sent(),(0,k.isEmpty)(u))return[3,5];c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return c.sent(),s=u,[3,5];case 4:return c.sent(),[3,5];case 5:return s?[3,7]:[4,this.__exec(e,r)];case 6:s=c.sent(),c.label=7;case 7:return[2,s||{}]}})})},n.prototype.__askRecovery=function(){var t=this.em,e=this.getRecovery();return new Promise(function(r,o){(0,k.isFunction)(e)?e(r,o,t==null?void 0:t.getEditor()):confirm(t==null?void 0:t.t("storageManager.recover"))?r(null):o()})},n.prototype.getRecovery=function(){return this.config.recovery},n.prototype.getRecoveryStorage=function(){var t=this.getRecovery();return t&&this.getCurrent()===Op&&this.get(Qs)},n.prototype.__exec=function(t,e,r){return dc(this,void 0,void 0,function(){var o,s,u,c,f,h,g,y,_,b,x,T,I,z;return pc(this,function(F){switch(F.label){case 0:if(o=r?"store":"load",s=this.getConfig(),u=s.onStore,c=s.onLoad,!t)return[2,r||{}];this.onStart(o,r),F.label=1;case 1:return F.trys.push([1,14,,15]),h=(z=this.em)===null||z===void 0?void 0:z.getEditor(),g=void 0,r?(_=u,_?[4,u(r,h)]:[3,3]):[3,7];case 2:_=F.sent(),F.label=3;case 3:return y=_||r,b=e.onStore,b?[4,e.onStore(y,h)]:[3,5];case 4:b=F.sent(),F.label=5;case 5:return y=b||y,[4,t.store(y,e)];case 6:return g=F.sent(),f=r,[3,13];case 7:return[4,t.load(e)];case 8:return g=F.sent(),f=this.__clearKeys(g),x=e.onLoad,x?[4,e.onLoad(f,h)]:[3,10];case 9:x=F.sent(),F.label=10;case 10:return f=x||f,T=c,T?[4,c(f,h)]:[3,12];case 11:T=F.sent(),F.label=12;case 12:f=T||f,F.label=13;case 13:return this.onAfter(o,f,g),this.onEnd(o,f,g),[3,15];case 14:throw I=F.sent(),this.onError(o,I),I;case 15:return[2,f]}})})},n.prototype.__clearKeys=function(t){t===void 0&&(t={});var e=this.getConfig(),r=new RegExp("^".concat(e.id)),o={};for(var s in t){var u=s.replace(r,"");o[u]=t[s]}return o},n.prototype.getCurrentOptions=function(t){var e=this.getConfig(),r=t||this.getCurrent();return e.options[r]||{}},n.prototype.onStart=function(t,e){var r=this.em;if(r){var o=t==="load"?$r.startLoad:$r.startStore;r.trigger($r.start,t,e),r.trigger(o,e)}},n.prototype.onAfter=function(t,e,r){var o=this.em;if(o){var s=t==="load"?$r.afterLoad:$r.afterStore;o.trigger($r.after),o.trigger(s,e,r);var u=t==="load"?$r.load:$r.store;o.trigger(u,e,r)}},n.prototype.onEnd=function(t,e,r){var o=this.em;if(o){var s=t==="load"?$r.endLoad:$r.endStore;o.trigger($r.end,t,e,r),o.trigger(s,e,r)}},n.prototype.onError=function(t,e){var r=this.em;if(r){var o=t==="load"?$r.errorLoad:$r.errorStore;r.trigger($r.error,e,t),r.trigger(o,e),this.onEnd(t,e)}},n.prototype.canAutoload=function(){var t=this.getCurrentStorage();return!!t&&!!this.config.autoload},n.prototype.destroy=function(){this.storages={}},n}(dn);const OC=SC;var TC=function(){return{stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1}};const PC=TC;var EC=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),es=function(){return es=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},es.apply(this,arguments)},uv=function(a){EC(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.events={},e.appendInput=!0;var r=t.config,o=r===void 0?{}:r,s=e,u=s.model,c=s.eventCapture,f=u.target,h=u.attributes.type;e.config=o,e.em=o.em,e.pfx=o.stylePrefix||"",e.ppfx=o.pStylePrefix||"",e.target=f,e.className=e.pfx+"trait",e.clsField="".concat(e.ppfx,"field ").concat(e.ppfx,"field-").concat(h);var g=[["change:value",e.onValueChange],["remove",e.removeView]];return g.forEach(function(y){var _=y[0],b=y[1];u.off(_,b),e.listenTo(u,_,b)}),u.view=e,e.listenTo(u,"change:label",e.render),e.listenTo(u,"change:placeholder",e.rerender),e.events={},c.forEach(function(y){return e.events[y]="onChange"}),e.delegateEvents(),e.init(),e}return n.prototype.attributes=function(){return this.model.get("attributes")||{}},n.prototype.templateLabel=function(t){var e=this.ppfx,r=this.getLabel();return'<div class="'.concat(e,'label" title="').concat(r,'">').concat(r,"</div>")},n.prototype.templateInput=function(t){var e=this.clsField;return'<div class="'.concat(e,'" data-input></div>')},n.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},n.prototype.removeView=function(){this.remove(),this.removed()},n.prototype.init=function(){},n.prototype.removed=function(){},n.prototype.onRender=function(t){},n.prototype.onUpdate=function(t){},n.prototype.onEvent=function(t){},n.prototype.onChange=function(t){var e=this.getInputElem();e&&!(0,k.isUndefined)(e.value)&&this.model.set("value",e.value),this.onEvent(es(es({},this.getClbOpts()),{event:t}))},n.prototype.getValueForTarget=function(){return this.model.get("value")},n.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.value=t)},n.prototype.onValueChange=function(t,e,r){r===void 0&&(r={});var o=this.model,s=this.getValueForTarget();r.fromTarget?(this.setInputValue(s),this.postUpdate()):o.setValue(s,r)},n.prototype.renderLabel=function(){var t=this,e=t.$el,r=t.target,o=this.getLabel(),s=this.templateLabel(r);this.createLabel&&(s=this.createLabel({label:o,component:r,trait:this})||""),e.find("[data-label]").append(s)},n.prototype.getLabel=function(){var t=this.em,e=this.model.attributes,r=e.label,o=e.name;return t.t("traitManager.traits.labels.".concat(o))||(0,Pt.capitalize)(r||o).replace(/-/g," ")},n.prototype.getComponent=function(){return this.target},n.prototype.getInputEl=function(){if(!this.$input){var t=this,e=t.em,r=t.model,o=r,s=r.attributes.name,u=o.get("placeholder")||o.get("default")||"",c=o.get("type")||"text",f=o.get("min"),h=o.get("max"),g=this.getModelValue(),y=(0,Pr.default)('<input type="'.concat(c,'">')),_=e.t("traitManager.traits.attributes.".concat(s))||{};y.attr(es({placeholder:u},_)),(0,k.isUndefined)(g)||(o.set({value:g},{silent:!0}),y.prop("value",g)),f&&y.prop("min",f),h&&y.prop("max",h),this.$input=y}return this.$input.get(0)},n.prototype.getInputElem=function(){var t=this,e=t.input,r=t.$input;return e||r&&r.get&&r.get(0)||this.getElInput()},n.prototype.getModelValue=function(){return this.model.getValue()},n.prototype.getElInput=function(){return this.elInput},n.prototype.renderField=function(){var t=this,e=t.$el,r=t.appendInput,o=t.model,s=e.find("[data-input]"),u=s[s.length-1],c=o.el;c||(c=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,k.isString)(c)?(u.innerHTML=c,this.elInput=u.firstChild):(r?u.appendChild(c):u.insertBefore(c,u.firstChild),this.elInput=c),o.el=this.elInput},n.prototype.hasLabel=function(){var t=this.model.attributes.label;return!this.noLabel&&t!==!1},n.prototype.rerender=function(){delete this.model.el,this.render()},n.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},n.prototype.render=function(){var t=this,e=t.$el,r=t.pfx,o=t.ppfx,s=t.model,u=s.attributes,c=u.type,f=u.id,h=this.hasLabel&&this.hasLabel(),g="".concat(r,"trait");delete this.$input;var y='<div class="'.concat(g," ").concat(g,"--").concat(c,`">
      `).concat(h?'<div class="'.concat(o,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(o,"field-wrp ").concat(o,"field-wrp--").concat(c,`" data-input>
        `).concat(this.templateInput?(0,k.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return e.empty().append(y),h&&this.renderLabel(),this.renderField(),this.el.className="".concat(g,"__wrp ").concat(g,"__wrp-").concat(f),this.postUpdate(),this.onRender(this.getClbOpts()),this},n}(Nt.Ss);const go=uv;uv.prototype.eventCapture=["change"];var AC=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cv=function(a){AC(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){return""},n.prototype.onChange=function(){this.handleClick()},n.prototype.handleClick=function(){this.model.runCommand()},n.prototype.renderLabel=function(){this.model.get("label")&&go.prototype.renderLabel.apply(this)},n.prototype.getInputEl=function(){var t=this,e=t.model,r=t.ppfx,o=e.props(),s=o.labelButton,u=o.text,c=o.full,f=s||u,h="".concat(r,"btn"),g='<button type="button" class="'.concat(h,"-prim").concat(c?" ".concat(h,"--full"):"",'">').concat(f,"</button>");return g},n}(go);const kC=cv;cv.prototype.eventCapture=["click button"];var MC=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),DC=function(a){MC(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.appendInput=!1,t}return n.prototype.templateInput=function(){var t=this,e=t.ppfx,r=t.clsField;return'<label class="'.concat(r,`" data-input>
    <i class="`).concat(e,`chk-icon"></i>
  </label>`)},n.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},n.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.checked=!!t)},n.prototype.getInputEl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=!this.$input,o=go.prototype.getInputEl.apply(this,t);if(r){var s=void 0,u=void 0,c=this,f=c.model,h=c.target,g=f.attributes.valueFalse,y=f.getName();f.changeProp?(s=h.get(y),u=s):(u=h.get("attributes")[y],s=!!(u||u==="")),!(0,k.isUndefined)(g)&&u===g&&(s=!1),o.checked=s}return o},n}(go);const LC=DC;function jC(a,n){if(!(0,Pt.hasWin)())return;var t={beforeShow:_,move:_,change:_,show:_,hide:_,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},e=[],r=!!/msie/i.exec(window.navigator.userAgent),o=function(){function R(St,vt){return!!~(""+St).indexOf(vt)}var et=document.createElement("div"),D=et.style;return D.cssText="background-color:rgba(0,0,0,.5)",R(D.backgroundColor,"rgba")||R(D.backgroundColor,"hsla")}(),s=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),u=function(){var R="";if(r)for(var et=1;et<=6;et++)R+="<div class='sp-"+et+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",R,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function c(R,et,D,St){for(var vt=[],Lt=0;Lt<R.length;Lt++){var Xt=R[Lt];if(Xt){var Yt=V(Xt),Ut=Yt.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";Ut+=V.equals(et,Xt)?" sp-thumb-active":"";var ae=Yt.toString(St.preferredFormat||"rgb"),Se=o?"background-color:"+Yt.toRgbString():"filter:"+Yt.toFilter();vt.push('<span title="'+ae+'" data-color="'+Yt.toRgbString()+'" class="'+Ut+'"><span class="sp-thumb-inner" style="'+Se+';"></span></span>')}else{var Ae="sp-clear-display";vt.push(a("<div />").append(a('<span data-color="" style="background-color:transparent;" class="'+Ae+'"></span>').attr("title",St.noColorSelectedText)).html())}}return"<div class='sp-cf "+D+"'>"+vt.join("")+"</div>"}function f(){for(var R=0;R<e.length;R++)e[R]&&e[R].hide()}function h(R,et){var D=a.extend({},t,R);return D.callbacks={move:x(D.move,et),change:x(D.change,et),show:x(D.show,et),hide:x(D.hide,et),beforeShow:x(D.beforeShow,et)},D}function g(R,et){var D=h(et,R),St=D.flat,vt=D.showSelectionPalette,Lt=D.localStorageKey,Xt=D.theme,Yt=D.callbacks,Ut=I(_n,10),ae=!1,Se=!1,Ae=!0,Te=0,Ye=0,fr=0,j=0,J=0,st=0,Tt=0,Bt=0,ce=0,_e=0,Be=1,tr=[],Ue=[],pn={},We=D.selectionPalette.slice(0),Dr=D.maxSelectionSize,Jr="sp-dragging",Le=null,er=R.ownerDocument;er.body;var ke=a(R),Er=!1,ve=a(u,er).addClass(Xt),Qr=ve.find(".sp-picker-container"),Fr=ve.find(".sp-color"),or=ve.find(".sp-dragger"),ir=ve.find(".sp-hue"),Lr=ve.find(".sp-slider"),je=ve.find(".sp-alpha-inner"),te=ve.find(".sp-alpha"),gr=ve.find(".sp-alpha-handle"),Ke=ve.find(".sp-input"),yr=ve.find(".sp-palette"),Ee=ve.find(".sp-initial"),Re=ve.find(".sp-cancel"),tn=ve.find(".sp-clear"),hn=ve.find(".sp-choose"),Dt=ve.find(".sp-palette-toggle"),de=ke.is("input"),vn=de&&ke.attr("type")==="color"&&z(),M=de&&!St,Y=M?a(s).addClass(Xt).addClass(D.className).addClass(D.replacerClassName):a([]),Ct=M?Y:ke,jt=Y.find(".sp-preview-inner"),Vt=D.color||de&&ke.val(),xe=!1,Pe=D.preferredFormat,ze=!D.showButtons||D.clickoutFiresChange,Ve=!Vt,en=D.allowEmpty&&!vn;function mo(){if(D.showPaletteOnly&&(D.showPalette=!0),Dt.text(D.showPaletteOnly?D.togglePaletteMoreText:D.togglePaletteLessText),D.palette){tr=D.palette.slice(0),Ue=a.isArray(tr[0])?tr:[tr],pn={};for(var ue=0;ue<Ue.length;ue++)for(var le=0;le<Ue[ue].length;le++){var Me=V(Ue[ue][le]).toRgbString();pn[Me]=!0}}ve.toggleClass("sp-flat",St),ve.toggleClass("sp-input-disabled",!D.showInput),ve.toggleClass("sp-alpha-enabled",D.showAlpha),ve.toggleClass("sp-clear-enabled",en),ve.toggleClass("sp-buttons-disabled",!D.showButtons),ve.toggleClass("sp-palette-buttons-disabled",!D.togglePaletteOnly),ve.toggleClass("sp-palette-disabled",!D.showPalette),ve.toggleClass("sp-palette-only",D.showPaletteOnly),ve.toggleClass("sp-initial-disabled",!D.showInitial),ve.addClass(D.className).addClass(D.containerClassName),_n()}function Jn(){if(r&&ve.find("*:not(input)").attr("unselectable","on"),mo(),M&&ke.after(Y).hide(),en||tn.hide(),St)ke.after(ve).hide();else{var ue=D.appendTo==="parent"?ke.parent():a(D.appendTo);ue.length!==1&&(ue=a("body")),ue.append(ve)}Qn(),Ct.bind("click.spectrum touchstart.spectrum",function(ye){Er||bo(),ye.stopPropagation(),a(ye.target).is("input")||ye.preventDefault()}),(ke.is(":disabled")||D.disabled===!0)&&Pn(),ve.click(b),Ke.change(Vn),Ke.bind("paste",function(){setTimeout(Vn,1)}),Ke.keydown(function(ye){ye.keyCode==13&&Vn()}),Re.text(D.cancelText),Re.bind("click.spectrum",function(ye){ye.stopPropagation(),ye.preventDefault(),In(),gn()}),tn.attr("title",D.clearText),tn.bind("click.spectrum",function(ye){ye.stopPropagation(),ye.preventDefault(),Ve=!0,Nn(),St&&mn(!0)}),hn.text(D.chooseText),hn.bind("click.spectrum",function(ye){ye.stopPropagation(),ye.preventDefault(),r&&Ke.is(":focus")&&Ke.trigger("change"),gi()&&(mn(!0),gn())}),Dt.text(D.showPaletteOnly?D.togglePaletteMoreText:D.togglePaletteLessText),Dt.bind("click.spectrum",function(ye){ye.stopPropagation(),ye.preventDefault(),D.showPaletteOnly=!D.showPaletteOnly,!D.showPaletteOnly&&!St&&ve.css("left","-="+(Qr.outerWidth(!0)+5)),mo()}),T(te,function(ye,Ge,sr){Be=ye/J,Ve=!1,sr.shiftKey&&(Be=Math.round(Be*10)/10),Nn()},eo,Gn),T(ir,function(ye,Ge){Bt=parseFloat(Ge/j),Ve=!1,D.showAlpha||(Be=1),Nn()},eo,Gn),T(Fr,function(ye,Ge,sr){if(!sr.shiftKey)Le=null;else if(!Le){var Vr=ce*Te,En=Ye-_e*Ye,Hr=Math.abs(ye-Vr)>Math.abs(Ge-En);Le=Hr?"x":"y"}var Br=!Le||Le==="x",rn=!Le||Le==="y";Br&&(ce=parseFloat(ye/Te)),rn&&(_e=parseFloat((Ye-Ge)/Ye)),Ve=!1,D.showAlpha||(Be=1),Nn()},eo,Gn),Vt?(jr(Vt),yn(),Pe=D.preferredFormat||V(Vt).getFormat(),to(Vt)):yn(),St&&ar();function le(ye){return ye.data&&ye.data.ignore?(jr(a(ye.target).closest(".sp-thumb-el").data("color")),Nn()):(jr(a(ye.target).closest(".sp-thumb-el").data("color")),Nn(),D.hideAfterPaletteSelect&&(mn(!0),gn())),!1}var Me=r?"mousedown.spectrum":"click.spectrum touchstart.spectrum";yr.delegate(".sp-thumb-el",Me,le),Ee.delegate(".sp-thumb-el:nth-child(1)",Me,{ignore:!0},le)}function Qn(){if(Lt&&window.localStorage){try{var ue=window.localStorage[Lt].split(",#");ue.length>1&&(delete window.localStorage[Lt],a.each(ue,function(le,Me){to(Me)}))}catch{}try{We=window.localStorage[Lt].split(";")}catch{}}}function to(ue){if(vt){var le=V(ue).toRgbString();if(!pn[le]&&a.inArray(le,We)===-1)for(We.push(le);We.length>Dr;)We.shift();if(Lt&&window.localStorage)try{window.localStorage[Lt]=We.join(";")}catch{}}}function Ko(){var ue=[];if(D.showPalette)for(var le=0;le<We.length;le++){var Me=V(We[le]).toRgbString();pn[Me]||ue.push(We[le])}return ue.reverse().slice(0,D.maxSelectionSize)}function _o(){var ue=pr(),le=a.map(Ue,function(Me,ye){return c(Me,ue,"sp-palette-row sp-palette-row-"+ye,D)});Qn(),We&&le.push(c(Ko(),ue,"sp-palette-row sp-palette-row-selection",D)),yr.html(le.join(""))}function wo(){if(D.showInitial){var ue=xe,le=pr();Ee.html(c([ue,le],le,"sp-palette-row-initial",D))}}function eo(){(Ye<=0||Te<=0||j<=0)&&_n(),Se=!0,ve.addClass(Jr),Le=null,ke.trigger("dragstart.spectrum",[pr()])}function Gn(){Se=!1,ve.removeClass(Jr),ke.trigger("dragstop.spectrum",[pr()])}function Vn(){var ue=Ke.val();if((ue===null||ue==="")&&en)jr(null),mn(!0);else{var le=V(ue);le.isValid()?(jr(le),mn(!0)):Ke.addClass("sp-validation-error")}}function bo(){ae?gn():ar()}function ar(){var ue=a.Event("beforeShow.spectrum");if(ae){_n();return}if(ke.trigger("beforeShow.spectrum",[pr()]),!(Yt.beforeShow(pr())===!1||ue.isDefaultPrevented())){f(),ae=!0;var le=a(er);le.bind("keydown.spectrum",dr),le.bind("click.spectrum",Go),a(window).bind("resize.spectrum",Ut),Y.addClass("sp-active"),ve.removeClass("sp-hidden"),_n(),yn(),xe=pr(),wo(),Yt.show(xe),ke.trigger("show.spectrum",[xe])}}function dr(ue){ue.keyCode===27&&gn()}function Go(ue){ue.button!=2&&(Se||(ze?mn(!0):In(),gn()))}function gn(){!ae||St||(ae=!1,a(er).unbind("keydown.spectrum",dr),a(er).unbind("click.spectrum",Go),a(window).unbind("resize.spectrum",Ut),Y.removeClass("sp-active"),ve.addClass("sp-hidden"),Yt.hide(pr()),ke.trigger("hide.spectrum",[pr()]))}function In(){jr(xe,!0)}function jr(ue,le){if(V.equals(ue,pr())){yn();return}var Me,ye;!ue&&en?Ve=!0:(Ve=!1,Ae=!ue,Me=V(ue),ye=Me.toHsv(),Bt=ye.h%360/360,ce=ye.s,_e=ye.v,Be=ye.a),yn(),Me&&Me.isValid()&&!le&&(Pe=D.preferredFormat||Me.getFormat())}function pr(ue){return ue=ue||{},en&&Ve?null:V.fromRatio({h:Bt,s:ce,v:_e,a:Math.round(Be*100)/100},{format:ue.format||Pe})}function gi(){return!Ke.hasClass("sp-validation-error")}function Nn(){yn(),Yt.move(pr()),ke.trigger("move.spectrum",[pr()])}function yn(){Ke.removeClass("sp-validation-error"),ro();var ue=V.fromRatio({h:Bt,s:1,v:1});Fr.css("background-color",ue.toHexString());var le=Pe;Be<1&&!(Be===0&&le==="name")&&(le==="hex"||le==="hex3"||le==="hex6"||le==="name")&&(le="rgb");var Me=pr({format:le}),ye="";if(jt.removeClass("sp-clear-display"),jt.css("background-color","transparent"),!Me&&en)jt.addClass("sp-clear-display");else{var Ge=Me.toHexString(),sr=Me.toRgbString();if(o||Me.alpha===1?jt.css("background-color",sr):(jt.css("background-color","transparent"),jt.css("filter",Me.toFilter())),D.showAlpha){var Vr=Me.toRgb();Vr.a=0;var En=V(Vr).toRgbString(),Hr="linear-gradient(left, "+En+", "+Ge+")";r?je.css("filter",V(En).toFilter({gradientType:1},Ge)):(je.css("background","-webkit-"+Hr),je.css("background","-moz-"+Hr),je.css("background","-ms-"+Hr),je.css("background","linear-gradient(to right, "+En+", "+Ge+")"))}ye=Me.toString(le)}D.showInput&&Ke.val(ye),D.showPalette&&_o(),wo()}function ro(){var ue=ce,le=_e;if(en&&Ve)gr.hide(),Lr.hide(),or.hide();else{gr.show(),Lr.show(),or.show();var Me=ue*Te,ye=Ye-le*Ye;Me=Math.max(-fr,Math.min(Te-fr,Me-fr)),ye=Math.max(-fr,Math.min(Ye-fr,ye-fr)),or.css({top:ye+"px",left:Me+"px"});var Ge=Be*J;gr.css({left:Ge-st/2+"px"});var sr=Bt*j;Lr.css({top:sr-Tt+"px"})}}function mn(ue){var le=pr(),Me="",ye=Ae?!0:!V.equals(le,xe);le&&(Me=le.toString(Pe),!ae&&to(le)),de&&ke.val(Me),ue&&ye&&(Yt.change(le),ke.trigger("change",[le]))}function _n(){ae&&(Te=Fr.width(),Ye=Fr.height(),fr=or.height(),ir.width(),j=ir.height(),Tt=Lr.height(),J=te.width(),st=gr.width(),St||(ve.css("position","absolute"),D.offset?ve.offset(D.offset):ve.offset(y(ve,Ct))),ro(),D.showPalette&&_o(),ke.trigger("reflow.spectrum"))}function $o(){ke.show(),Ct.unbind("click.spectrum touchstart.spectrum"),ve.remove(),Y.remove(),e[Rn.id]=null}function Co(ue,le){if(ue===n)return a.extend({},D);if(le===n)return D[ue];D[ue]=le,ue==="preferredFormat"&&(Pe=D.preferredFormat),mo()}function no(){Er=!1,ke.attr("disabled",!1),Ct.removeClass("sp-disabled")}function Pn(){gn(),Er=!0,ke.attr("disabled",!0),Ct.addClass("sp-disabled")}function oo(ue){D.offset=ue,_n()}Jn();var Rn={show:ar,hide:gn,toggle:bo,reflow:_n,option:Co,enable:no,disable:Pn,offset:oo,set:function(ue){jr(ue),mn()},get:pr,destroy:$o,container:ve};return Rn.id=e.push(Rn)-1,Rn}function y(R,et){for(var D=et[0],St=R[0],vt=St.parentElement,Lt=D.getBoundingClientRect(),Xt=St.offsetWidth,Yt=St.offsetHeight,Ut={top:0,left:0,width:D.offsetWidth,height:D.offsetHeight};D&&(Ut.top+=D.offsetTop-D.scrollTop,Ut.left+=D.offsetLeft-D.scrollLeft,!(D===vt||!vt.contains(D.offsetParent)));)D=D.offsetParent;return Lt.right+Xt>window.innerWidth-window.scrollX&&Lt.right-Xt>0&&(Ut.left-=Xt-Ut.width),Lt.bottom+Yt<window.innerHeight-window.scrollY?Ut.top+=Ut.height:Ut.top-=Yt,Ut}function _(){}function b(R){R.stopPropagation()}function x(R,et){var D=Array.prototype.slice,St=D.call(arguments,2);return function(){return R.apply(et,St.concat(D.call(arguments)))}}function T(R,et,D,St){et=et||function(){},D=D||function(){},St=St||function(){};var vt=document,Lt=!1,Xt={},Yt=0,Ut=0,ae="ontouchstart"in window,Se={};Se.selectstart=Ae,Se.dragstart=Ae,Se["touchmove mousemove"]=Te,Se["touchend mouseup"]=fr;function Ae(j){j.stopPropagation&&j.stopPropagation(),j.preventDefault&&j.preventDefault(),j.returnValue=!1}function Te(j){if(Lt){if(r&&vt.documentMode<9&&!j.button)return fr();var J=j&&j.touches&&j.touches[0],st=J&&J.pageX||j.pageX,Tt=J&&J.pageY||j.pageY,Bt=Math.max(0,Math.min(st-Xt.left,Ut)),ce=Math.max(0,Math.min(Tt-Xt.top,Yt));ae&&Ae(j),et.apply(R,[Bt,ce,j])}}function Ye(j){var J=j.which?j.which==3:j.button==2;!J&&!Lt&&D.apply(R,arguments)!==!1&&(Lt=!0,Yt=a(R).height(),Ut=a(R).width(),Xt=a(R).offset(),a(vt).bind(Se),a(vt.body).addClass("sp-dragging"),Te(j),Ae(j))}function fr(){Lt&&(a(vt).unbind(Se),a(vt.body).removeClass("sp-dragging"),setTimeout(function(){St.apply(R,arguments)},0)),Lt=!1}a(R).bind("touchstart mousedown",Ye)}function I(R,et,D){var St;return function(){var vt=this,Lt=arguments,Xt=function(){St=null,R.apply(vt,Lt)};St||(St=setTimeout(Xt,et))}}function z(){return a.fn.spectrum.inputTypeColorSupport()}var F="spectrum.id";a.fn.spectrum=function(R,et){if(typeof R=="string"){var D=this,St=Array.prototype.slice.call(arguments,1);return this.each(function(){var vt=e[a(this).data(F)];if(vt){var Lt=vt[R];if(!Lt)throw new Error("Spectrum: no such method: '"+R+"'");R=="get"?D=vt.get():R=="container"?D=vt.container:R=="option"?D=vt.option.apply(vt,St):R=="destroy"?(vt.destroy(),a(this).removeData(F)):Lt.apply(vt,St)}}),D}return this.spectrum("destroy").each(function(){var vt=a.extend({},R,a(this).data()),Lt=g(this,vt);a(this).data(F,Lt.id)})},a.fn.spectrum.load=!0,a.fn.spectrum.loadOpts={},a.fn.spectrum.draggable=T,a.fn.spectrum.defaults=t,a.fn.spectrum.inputTypeColorSupport=function R(){if(typeof R._cachedResult>"u"){var et=a("<input type='color'/>")[0];R._cachedResult=et.type==="color"&&et.value!==""}return R._cachedResult},a.spectrum={},a.spectrum.localization={},a.spectrum.palettes={},a.fn.spectrum.processNativeColorInputs=function(){var R=a("input[type=color]");R.length&&!z()&&R.spectrum({preferredFormat:"hex6"})};var W=/^[\s,#]+/,ct=/\s+$/,_t=0,xt=Math,ut=xt.round,q=xt.min,nt=xt.max,H=xt.random,V=function(R,et){if(R=R||"",et=et||{},R instanceof V)return R;if(!(this instanceof V))return new V(R,et);var D=U(R);this._originalInput=R,this._r=D.r,this._g=D.g,this._b=D.b,this._a=D.a,this._roundA=ut(100*this._a)/100,this._format=et.format||D.format,this._gradientType=et.gradientType,this._r<1&&(this._r=ut(this._r)),this._g<1&&(this._g=ut(this._g)),this._b<1&&(this._b=ut(this._b)),this._ok=D.ok,this._tc_id=_t++};V.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var R=this.toRgb();return(R.r*299+R.g*587+R.b*114)/1e3},setAlpha:function(R){return this._a=ie(R),this._roundA=ut(100*this._a)/100,this},toHsv:function(){var R=yt(this._r,this._g,this._b);return{h:R.h*360,s:R.s,v:R.v,a:this._a}},toHsvString:function(){var R=yt(this._r,this._g,this._b),et=ut(R.h*360),D=ut(R.s*100),St=ut(R.v*100);return this._a==1?"hsv("+et+", "+D+"%, "+St+"%)":"hsva("+et+", "+D+"%, "+St+"%, "+this._roundA+")"},toHsl:function(){var R=tt(this._r,this._g,this._b);return{h:R.h*360,s:R.s,l:R.l,a:this._a}},toHslString:function(){var R=tt(this._r,this._g,this._b),et=ut(R.h*360),D=ut(R.s*100),St=ut(R.l*100);return this._a==1?"hsl("+et+", "+D+"%, "+St+"%)":"hsla("+et+", "+D+"%, "+St+"%, "+this._roundA+")"},toHex:function(R){return Mt(this._r,this._g,this._b,R)},toHexString:function(R){return"#"+this.toHex(R)},toHex8:function(){return qt(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:ut(this._r),g:ut(this._g),b:ut(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+ut(this._r)+", "+ut(this._g)+", "+ut(this._b)+")":"rgba("+ut(this._r)+", "+ut(this._g)+", "+ut(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:ut(P(this._r,255)*100)+"%",g:ut(P(this._g,255)*100)+"%",b:ut(P(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+ut(P(this._r,255)*100)+"%, "+ut(P(this._g,255)*100)+"%, "+ut(P(this._b,255)*100)+"%)":"rgba("+ut(P(this._r,255)*100)+"%, "+ut(P(this._g,255)*100)+"%, "+ut(P(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:oe[Mt(this._r,this._g,this._b,!0)]||!1},toFilter:function(R){var et="#"+qt(this._r,this._g,this._b,this._a),D=et,St=this._gradientType?"GradientType = 1, ":"";if(R){var vt=V(R);D=vt.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+St+"startColorstr="+et+",endColorstr="+D+")"},toString:function(R){var et=!!R;R=R||this._format;var D=!1,St=this._a<1&&this._a>=0,vt=!et&&St&&(R==="hex"||R==="hex6"||R==="hex3"||R==="name");return vt?R==="name"&&this._a===0?this.toName():this.toRgbString():(R==="rgb"&&(D=this.toRgbString()),R==="prgb"&&(D=this.toPercentageRgbString()),(R==="hex"||R==="hex6")&&(D=this.toHexString()),R==="hex3"&&(D=this.toHexString(!0)),R==="hex8"&&(D=this.toHex8String()),R==="name"&&(D=this.toName()),R==="hsl"&&(D=this.toHslString()),R==="hsv"&&(D=this.toHsvString()),D||this.toHexString())},_applyModification:function(R,et){var D=R.apply(null,[this].concat([].slice.call(et)));return this._r=D._r,this._g=D._g,this._b=D._b,this.setAlpha(D._a),this},lighten:function(){return this._applyModification(Et,arguments)},brighten:function(){return this._applyModification(Qt,arguments)},darken:function(){return this._applyModification(re,arguments)},desaturate:function(){return this._applyModification(ft,arguments)},saturate:function(){return this._applyModification(At,arguments)},greyscale:function(){return this._applyModification(Ht,arguments)},spin:function(){return this._applyModification($t,arguments)},_applyCombination:function(R,et){return R.apply(null,[this].concat([].slice.call(et)))},analogous:function(){return this._applyCombination(bt,arguments)},complement:function(){return this._applyCombination(zt,arguments)},monochromatic:function(){return this._applyCombination(Zt,arguments)},splitcomplement:function(){return this._applyCombination(rt,arguments)},triad:function(){return this._applyCombination(se,arguments)},tetrad:function(){return this._applyCombination(me,arguments)}},V.fromRatio=function(R,et){if(typeof R=="object"){var D={};for(var St in R)R.hasOwnProperty(St)&&(St==="a"?D[St]=R[St]:D[St]=dt(R[St]));R=D}return V(R,et)};function U(R){var et={r:0,g:0,b:0},D=1,St=!1,vt=!1;return typeof R=="string"&&(R=ge(R)),typeof R=="object"&&(R.hasOwnProperty("r")&&R.hasOwnProperty("g")&&R.hasOwnProperty("b")?(et=B(R.r,R.g,R.b),St=!0,vt=String(R.r).substr(-1)==="%"?"prgb":"rgb"):R.hasOwnProperty("h")&&R.hasOwnProperty("s")&&R.hasOwnProperty("v")?(R.s=dt(R.s),R.v=dt(R.v),et=gt(R.h,R.s,R.v),St=!0,vt="hsv"):R.hasOwnProperty("h")&&R.hasOwnProperty("s")&&R.hasOwnProperty("l")&&(R.s=dt(R.s),R.l=dt(R.l),et=A(R.h,R.s,R.l),St=!0,vt="hsl"),R.hasOwnProperty("a")&&(D=R.a)),D=ie(D),{ok:St,format:R.format||vt,r:q(255,nt(et.r,0)),g:q(255,nt(et.g,0)),b:q(255,nt(et.b,0)),a:D}}function B(R,et,D){return{r:P(R,255)*255,g:P(et,255)*255,b:P(D,255)*255}}function tt(R,et,D){R=P(R,255),et=P(et,255),D=P(D,255);var St=nt(R,et,D),vt=q(R,et,D),Lt,Xt,Yt=(St+vt)/2;if(St==vt)Lt=Xt=0;else{var Ut=St-vt;switch(Xt=Yt>.5?Ut/(2-St-vt):Ut/(St+vt),St){case R:Lt=(et-D)/Ut+(et<D?6:0);break;case et:Lt=(D-R)/Ut+2;break;case D:Lt=(R-et)/Ut+4;break}Lt/=6}return{h:Lt,s:Xt,l:Yt}}function A(R,et,D){var St,vt,Lt;R=P(R,360),et=P(et,100),D=P(D,100);function Xt(ae,Se,Ae){return Ae<0&&(Ae+=1),Ae>1&&(Ae-=1),Ae<1/6?ae+(Se-ae)*6*Ae:Ae<1/2?Se:Ae<2/3?ae+(Se-ae)*(2/3-Ae)*6:ae}if(et===0)St=vt=Lt=D;else{var Yt=D<.5?D*(1+et):D+et-D*et,Ut=2*D-Yt;St=Xt(Ut,Yt,R+1/3),vt=Xt(Ut,Yt,R),Lt=Xt(Ut,Yt,R-1/3)}return{r:St*255,g:vt*255,b:Lt*255}}function yt(R,et,D){R=P(R,255),et=P(et,255),D=P(D,255);var St=nt(R,et,D),vt=q(R,et,D),Lt,Xt,Yt=St,Ut=St-vt;if(Xt=St===0?0:Ut/St,St==vt)Lt=0;else{switch(St){case R:Lt=(et-D)/Ut+(et<D?6:0);break;case et:Lt=(D-R)/Ut+2;break;case D:Lt=(R-et)/Ut+4;break}Lt/=6}return{h:Lt,s:Xt,v:Yt}}function gt(R,et,D){R=P(R,360)*6,et=P(et,100),D=P(D,100);var St=xt.floor(R),vt=R-St,Lt=D*(1-et),Xt=D*(1-vt*et),Yt=D*(1-(1-vt)*et),Ut=St%6,ae=[D,Xt,Lt,Lt,Yt,D][Ut],Se=[Yt,D,D,Xt,Lt,Lt][Ut],Ae=[Lt,Lt,Yt,D,D,Xt][Ut];return{r:ae*255,g:Se*255,b:Ae*255}}function Mt(R,et,D,St){var vt=[K(ut(R).toString(16)),K(ut(et).toString(16)),K(ut(D).toString(16))];return St&&vt[0].charAt(0)==vt[0].charAt(1)&&vt[1].charAt(0)==vt[1].charAt(1)&&vt[2].charAt(0)==vt[2].charAt(1)?vt[0].charAt(0)+vt[1].charAt(0)+vt[2].charAt(0):vt.join("")}function qt(R,et,D,St){var vt=[K(it(St)),K(ut(R).toString(16)),K(ut(et).toString(16)),K(ut(D).toString(16))];return vt.join("")}V.equals=function(R,et){return!R||!et?!1:V(R).toRgbString()==V(et).toRgbString()},V.random=function(){return V.fromRatio({r:H(),g:H(),b:H()})};function ft(R,et){et=et===0?0:et||10;var D=V(R).toHsl();return D.s-=et/100,D.s=N(D.s),V(D)}function At(R,et){et=et===0?0:et||10;var D=V(R).toHsl();return D.s+=et/100,D.s=N(D.s),V(D)}function Ht(R){return V(R).desaturate(100)}function Et(R,et){et=et===0?0:et||10;var D=V(R).toHsl();return D.l+=et/100,D.l=N(D.l),V(D)}function Qt(R,et){et=et===0?0:et||10;var D=V(R).toRgb();return D.r=nt(0,q(255,D.r-ut(255*-(et/100)))),D.g=nt(0,q(255,D.g-ut(255*-(et/100)))),D.b=nt(0,q(255,D.b-ut(255*-(et/100)))),V(D)}function re(R,et){et=et===0?0:et||10;var D=V(R).toHsl();return D.l-=et/100,D.l=N(D.l),V(D)}function $t(R,et){var D=V(R).toHsl(),St=(ut(D.h)+et)%360;return D.h=St<0?360+St:St,V(D)}function zt(R){var et=V(R).toHsl();return et.h=(et.h+180)%360,V(et)}function se(R){var et=V(R).toHsl(),D=et.h;return[V(R),V({h:(D+120)%360,s:et.s,l:et.l}),V({h:(D+240)%360,s:et.s,l:et.l})]}function me(R){var et=V(R).toHsl(),D=et.h;return[V(R),V({h:(D+90)%360,s:et.s,l:et.l}),V({h:(D+180)%360,s:et.s,l:et.l}),V({h:(D+270)%360,s:et.s,l:et.l})]}function rt(R){var et=V(R).toHsl(),D=et.h;return[V(R),V({h:(D+72)%360,s:et.s,l:et.l}),V({h:(D+216)%360,s:et.s,l:et.l})]}function bt(R,et,D){et=et||6,D=D||30;var St=V(R).toHsl(),vt=360/D,Lt=[V(R)];for(St.h=(St.h-(vt*et>>1)+720)%360;--et;)St.h=(St.h+vt)%360,Lt.push(V(St));return Lt}function Zt(R,et){et=et||6;for(var D=V(R).toHsv(),St=D.h,vt=D.s,Lt=D.v,Xt=[],Yt=1/et;et--;)Xt.push(V({h:St,s:vt,v:Lt})),Lt=(Lt+Yt)%1;return Xt}V.mix=function(R,et,D){D=D===0?0:D||50;var St=V(R).toRgb(),vt=V(et).toRgb(),Lt=D/100,Xt=Lt*2-1,Yt=vt.a-St.a,Ut;Xt*Yt==-1?Ut=Xt:Ut=(Xt+Yt)/(1+Xt*Yt),Ut=(Ut+1)/2;var ae=1-Ut,Se={r:vt.r*Ut+St.r*ae,g:vt.g*Ut+St.g*ae,b:vt.b*Ut+St.b*ae,a:vt.a*Lt+St.a*(1-Lt)};return V(Se)},V.readability=function(R,et){var D=V(R),St=V(et),vt=D.toRgb(),Lt=St.toRgb(),Xt=D.getBrightness(),Yt=St.getBrightness(),Ut=Math.max(vt.r,Lt.r)-Math.min(vt.r,Lt.r)+Math.max(vt.g,Lt.g)-Math.min(vt.g,Lt.g)+Math.max(vt.b,Lt.b)-Math.min(vt.b,Lt.b);return{brightness:Math.abs(Xt-Yt),color:Ut}},V.isReadable=function(R,et){var D=V.readability(R,et);return D.brightness>125&&D.color>500},V.mostReadable=function(R,et){for(var D=null,St=0,vt=!1,Lt=0;Lt<et.length;Lt++){var Xt=V.readability(R,et[Lt]),Yt=Xt.brightness>125&&Xt.color>500,Ut=3*(Xt.brightness/125)+Xt.color/500;(Yt&&!vt||Yt&&vt&&Ut>St||!Yt&&!vt&&Ut>St)&&(vt=Yt,St=Ut,D=V(et[Lt]))}return D};var Rt=V.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},oe=V.hexNames=he(Rt);function he(R){var et={};for(var D in R)R.hasOwnProperty(D)&&(et[R[D]]=D);return et}function ie(R){return R=parseFloat(R),(isNaN(R)||R<0||R>1)&&(R=1),R}function P(R,et){at(R)&&(R="100%");var D=mt(R);return R=q(et,nt(0,parseFloat(R))),D&&(R=parseInt(R*et,10)/100),xt.abs(R-et)<1e-6?1:R%et/parseFloat(et)}function N(R){return q(1,nt(0,R))}function $(R){return parseInt(R,16)}function at(R){return typeof R=="string"&&R.indexOf(".")!=-1&&parseFloat(R)===1}function mt(R){return typeof R=="string"&&R.indexOf("%")!=-1}function K(R){return R.length==1?"0"+R:""+R}function dt(R){return R<=1&&(R=R*100+"%"),R}function it(R){return Math.round(parseFloat(R)*255).toString(16)}function ne(R){return $(R)/255}var we=function(){var R="[-\\+]?\\d+%?",et="[-\\+]?\\d*\\.\\d+%?",D="(?:"+et+")|(?:"+R+")",St="[\\s|\\(]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",vt="[\\s|\\(]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?";return{rgb:new RegExp("rgb"+St),rgba:new RegExp("rgba"+vt),hsl:new RegExp("hsl"+St),hsla:new RegExp("hsla"+vt),hsv:new RegExp("hsv"+St),hsva:new RegExp("hsva"+vt),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ge(R){R=R.replace(W,"").replace(ct,"").toLowerCase();var et=!1;if(Rt[R])R=Rt[R],et=!0;else if(R=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var D;return(D=we.rgb.exec(R))?{r:D[1],g:D[2],b:D[3]}:(D=we.rgba.exec(R))?{r:D[1],g:D[2],b:D[3],a:D[4]}:(D=we.hsl.exec(R))?{h:D[1],s:D[2],l:D[3]}:(D=we.hsla.exec(R))?{h:D[1],s:D[2],l:D[3],a:D[4]}:(D=we.hsv.exec(R))?{h:D[1],s:D[2],v:D[3]}:(D=we.hsva.exec(R))?{h:D[1],s:D[2],v:D[3],a:D[4]}:(D=we.hex8.exec(R))?{a:ne(D[1]),r:$(D[2]),g:$(D[3]),b:$(D[4]),format:et?"name":"hex8"}:(D=we.hex6.exec(R))?{r:$(D[1]),g:$(D[2]),b:$(D[3]),format:et?"name":"hex"}:(D=we.hex3.exec(R))?{r:$(D[1]+""+D[1]),g:$(D[2]+""+D[2]),b:$(D[3]+""+D[3]),format:et?"name":"hex"}:!1}window.tinycolor=V,a(function(){a.fn.spectrum.load&&a.fn.spectrum.processNativeColorInputs()})}var VC=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fv=function(a){VC(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this,r=t.ppfx||"";return e.opts=t,e.ppfx=r,e.em=t.target||{},!t.onChange&&e.listenTo(e.model,"change:value",e.handleModelChange),e}return n.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},n.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.elementUpdated=function(){this.model.trigger("el:change")},n.prototype.setValue=function(t,e){var r=this.model,o=t||r.get("defaults"),s=this.getInputEl();s&&(s.value=o)},n.prototype.handleModelChange=function(t,e,r){this.setValue(e,r)},n.prototype.handleChange=function(t){t.stopPropagation();var e=this.getInputEl().value;this.__onInputChange(e),this.elementUpdated()},n.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},n.prototype.getInputEl=function(){if(!this.inputEl){var t=this,e=t.model,r=t.opts,o=r.type||"text",s=e.get("placeholder")||e.get("defaults")||e.get("default")||"";this.inputEl=(0,Pr.default)('<input type="'.concat(o,'" placeholder="').concat(s,'">'))}return this.inputEl.get(0)},n.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},n}(Nt.Ss);const Ul=fv;fv.prototype.events={change:"handleChange"};var IC=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rs=function(){return rs=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},rs.apply(this,arguments)};Pr.default&&jC(Pr.default);var tl=function(a){var n=a.getFormat()==="name"&&a.toName(),t=a.getAlpha()==1?a.toHexString():a.toRgbString();return n||t.replace(/ /g,"")},NC=function(a){IC(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.template=function(){var t=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(t,`field-colorp">
        <div class="`).concat(t,`field-colorp-c" data-colorp-c>
          <div class="`).concat(t,`checker-bg"></div>
        </div>
      </div>
    `)},n.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.remove=function(){return a.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},n.prototype.handleChange=function(t){t.stopPropagation();var e=t.target.value;(0,k.isUndefined)(e)||this.__onInputChange(e)},n.prototype.__onInputChange=function(t){var e=this,r=e.model,o=e.opts,s=o.onChange,u=t,c=this.getColorEl();if(c){c.spectrum("set",u);var f=c.spectrum("get"),h=u&&tl(f);h&&(u=h)}s?s(u):r.set({value:u},{fromInput:1})},n.prototype.setValue=function(t,e){e===void 0&&(e={});var r=this.model,o=(0,k.isUndefined)(e.def)?r.get("defaults"):e.def,s=(0,k.isUndefined)(t)?(0,k.isUndefined)(o)?"":o:t,u=this.getInputEl(),c=this.getColorEl(),f=s!="none"?s:"";u.value=s,c.get(0).style.backgroundColor=f,(e.fromTarget||e.fromInput&&!e.avoidStore)&&(c.spectrum("set",f),this.noneColor=s=="none",this.movedColor=f)},n.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this,r=e.em,o=e.model,s=e.opts,u=this.ppfx,c=s.onChange,f=(0,Pr.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),h=f.get(0).style,g=r&&r.getConfig&&r.getConfig().colorPicker||{};this.movedColor="";var y=!1,_;this.$el.find("[data-colorp-c]").append(f);var b=function(x,T){T===void 0&&(T=!0),c?c(x,!T):(T&&o.setValueFromInput(0,!1),o.setValueFromInput(x,T))};f.spectrum(rs(rs(rs({color:o.getValue()||!1,containerClassName:"".concat(u,"one-bg ").concat(u,"two-color ").concat(u,"editor-sp"),maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"⨯",palette:[]},g),o.get("colorPicker")||{}),{move:function(x){var T=tl(x);t.movedColor=T,h.backgroundColor=T,b(T,!1)},change:function(x){y=!0;var T=tl(x);h.backgroundColor=T,b(T),t.noneColor=!1},show:function(x){y=!1,t.movedColor="",_=c?o.getValue({noDefault:!0}):tl(x)},hide:function(){!y&&(_||c)&&(t.noneColor&&(_=""),h.backgroundColor=_,f.spectrum("set",_),b(_,!1))}})),r&&r.on&&this.listenTo(r,"component:selected",function(){t.movedColor&&b(t.movedColor),y=!0,t.movedColor="",f.spectrum("hide")}),this.colorEl=f}return this.colorEl},n.prototype.render=function(){return Ul.prototype.render.call(this),this.getColorEl(),this},n}(Ul);const dv=NC;var RC=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),FC=function(a){RC(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){return""},n.prototype.getInputEl=function(){if(!this.input){var t=this.model,e=this.getModelValue(),r=new dv({model:t,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}),o=r.render();o.setValue(e,{fromTarget:1}),this.input=o.el}return this.input},n}(go);const HC=FC;var BC=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pv=function(a){BC(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;return(0,k.bindAll)(e,"moveIncrement","upIncrement"),e.doc=document,e.listenTo(e.model,"change:unit",e.handleModelChange),e}return n.prototype.template=function(){var t=this.ppfx;return`
      <span class="`.concat(t,`input-holder"></span>
      <span class="`).concat(t,`field-units"></span>
      <div class="`).concat(t,`field-arrows" data-arrows>
        <div class="`).concat(t,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(t,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},n.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},n.prototype.setValue=function(t,e){var r=e||{},o=this.validateInputValue(t,{deepCheck:1}),s={value:o.value,unit:""};(o.unit||o.force)&&(s.unit=o.unit),this.model.set(s,r),r.silent&&this.handleModelChange()},n.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},n.prototype.handleUnitChange=function(t){t.stopPropagation();var e=this.getUnitEl().value;this.model.set("unit",e),this.elementUpdated()},n.prototype.handleKeyDown=function(t){t.key==="ArrowUp"&&(t.preventDefault(),this.upArrowClick()),t.key==="ArrowDown"&&(t.preventDefault(),this.downArrowClick())},n.prototype.elementUpdated=function(){this.model.trigger("el:change")},n.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get("value");var e=this.getUnitEl();e&&(e.value=t.get("unit")||"")},n.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,e=t.get("units")||[];if(e.length){var r=['<option value="" disabled hidden>-</option>'];e.forEach(function(s){var u=s==t.get("unit")?"selected":"";r.push("<option ".concat(u,">").concat(s,"</option>"))});var o=document.createElement("div");o.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(r.join(""),"</select>"),this.unitEl=o.firstChild}}return this.unitEl},n.prototype.upArrowClick=function(){var t=this.model,e=t.get("step"),r=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(r+e)),this.elementUpdated()},n.prototype.downArrowClick=function(){var t=this.model,e=t.get("step"),r=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(r-e)),this.elementUpdated()},n.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var e=this.model.get("value")||0;e=this.normalizeValue(e),this.current={y:t.pageY,val:e},(0,Wt.on)(this.doc,"mousemove",this.moveIncrement),(0,Wt.on)(this.doc,"mouseup",this.upIncrement)},n.prototype.moveIncrement=function(t){this.moved=!0;var e=this.model,r=e.get("step"),o=this.current,s=this.normalizeValue(o.val+(o.y-t.pageY)*r),u=this.validateInputValue(s),c=u.value,f=u.unit;return this.prValue=c,e.set({value:c,unit:f},{avoidStore:1}),!1},n.prototype.upIncrement=function(){var t=this.model,e=t.get("step");if((0,Wt.AU)(this.doc,"mouseup",this.upIncrement),(0,Wt.AU)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var r=this.prValue-e;t.set("value",r,{avoidStore:1}).set("value",r+e),this.elementUpdated()}},n.prototype.normalizeValue=function(t,e){e===void 0&&(e=0);var r=this.model,o=r.get("step"),s=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var u=o.toString().split(".")[1];s=u?u.length:0}return s?parseFloat(t.toFixed(s)):t},n.prototype.validateInputValue=function(t,e){e===void 0&&(e={});var r=0,o=e||{},s=this.model,u="",c=(0,k.isUndefined)(t)?u:t,f=e.units||s.get("units")||[],h=s.get("unit")||f.length&&f[0]||"",g=(0,k.isUndefined)(e.max)?s.get("max"):e.max,y=(0,k.isUndefined)(e.min)?s.get("min"):e.min,_=!!s.get("limitlessMax"),b=!!s.get("limitlessMin");if(o.deepCheck){var x=s.get("fixedValues")||[];if(c===""&&(h=""),c){var T=new RegExp("^"+x.join("|"),"g");if(x.length&&T.test(c))c=c.match(T)[0],h="",r=1;else{var I=c+"";c+="",c=parseFloat(c.replace(",",".")),c=isNaN(c)?u:c;var z=I.replace(c,"");(0,k.indexOf)(f,z)>=0&&(h=z)}}}return!_&&!(0,k.isUndefined)(g)&&g!==""&&(c=c>g?g:c),!b&&!(0,k.isUndefined)(y)&&y!==""&&(c=c<y?y:c),{force:r,value:c,unit:h}},n.prototype.render=function(){Ul.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},n}(Ul);const hv=pv;pv.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var UC=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),WC=function(a){UC(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getValueForTarget=function(){var t=this.model,e=t.attributes,r=e.value,o=e.unit;return!(0,k.isUndefined)(r)&&r!==""?r+o:t.get("default")},n.prototype.getInputEl=function(){if(!this.input){var t=this,e=t.ppfx,r=t.model,o=this.getModelValue(),s=new hv({contClass:"".concat(e,"field-int"),type:"number",model:r,ppfx:e});s.render(),this.$input=s.inputEl,this.$unit=s.unitEl,r.set("value",o,{fromTarget:!0}),this.$input.val(o),this.input=s.el}return this.input},n}(go);const zC=WC;var KC=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),GC=function(a){KC(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.rerender),e}return n.prototype.templateInput=function(){var t=this,e=t.ppfx,r=t.clsField;return'<div class="'.concat(r,`">
      <div data-input></div>
      <div class="`).concat(e,`sel-arrow">
        <div class="`).concat(e,`d-s-arrow"></div>
      </div>
    </div>`)},n.prototype.getInputEl=function(){if(!this.$input){var t=this,e=t.model,r=t.em,o=e.get("name"),s=e.get("options")||[],u=[],c="<select>";s.forEach(function(g){var y="",_,b,x;(0,k.isString)(g)?(_=g,b=g):(_=g.name||g.label||g.value,b="".concat((0,k.isUndefined)(g.value)?g.id:g.value).replace(/"/g,"&quot;"),x=g.style?g.style.replace(/"/g,"&quot;"):"",y+=x?' style="'.concat(x,'"'):"");var T=r.t("traitManager.traits.options.".concat(o,".").concat(b))||_;c+='<option value="'.concat(b,'"').concat(y,">").concat(T,"</option>"),u.push(b)}),c+="</select>",this.$input=(0,Pr.default)(c);var f=e.getTargetValue(),h=u.indexOf(f)>=0?f:e.get("default");!(0,k.isUndefined)(h)&&this.$input.val(h)}return this.$input.get(0)},n}(go);const $C=GC;var qC=De(91),YC=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tp="data-categories",Pp="data-no-categories",vv=function(a){YC(n,a);function n(t,e){var r=a.call(this,t)||this;r.reuseView=!0,r.renderedCategories=new Map,r.itemsView=e;var o=t.config||{};r.config=o;var s=t.editor;r.em=s;var u=o.pStylePrefix||"";return r.ppfx=u,r.pfx=u+o.stylePrefix||"",r.className="".concat(r.pfx,"traits"),r.traitContClass="".concat(u,"traits-c"),r.classNoCat="".concat(u,"traits-empty-c"),r.catsClass="".concat(u,"trait-categories"),r.collection=new ml([],{em:s}),r.listenTo(s,"component:toggled",r.updatedCollection),r.updatedCollection(),r}return n.prototype.updatedCollection=function(){var t=this,e=t.ppfx,r=t.em,o=r.getSelected();this.el.className="".concat(this.traitContClass,"s ").concat(e,"one-bg ").concat(e,"two-color"),this.collection=(o==null?void 0:o.traits)||new ml([],{em:r}),this.render()},n.prototype.add=function(t,e){var r=this,o=r.config,s=r.renderedCategories,u=this.itemView,c=t.get(this.itemType);this.itemsView&&this.itemsView[c]&&(u=this.itemsView[c]);var f=new u({config:o,model:t,attributes:t.get("attributes")}),h=f.render().el,g=t.parent.initCategory(t);if(g){var y=g.getId(),_=this.getCategoriesEl(),b=s.get(y);!b&&_&&(b=new Xh({model:g},o,"trait").render(),s.set(y,b),_.appendChild(b.el)),b==null||b.append(h);return}e?e.appendChild(h):this.append(h)},n.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector("[".concat(Tp,"]"))),this.catsEl},n.prototype.getTraitsEl=function(){return this.traitsEl||(this.traitsEl=this.el.querySelector("[".concat(Pp,"]"))),this.traitsEl},n.prototype.append=function(t){var e=this.getTraitsEl();e==null||e.appendChild(t)},n.prototype.render=function(){var t=this,e=this,r=e.el,o=e.ppfx,s=e.catsClass,u=e.traitContClass,c=e.classNoCat,f=document.createDocumentFragment();delete this.catsEl,delete this.traitsEl,this.renderedCategories=new Map,r.innerHTML=`
      <div class="`.concat(s,'" ').concat(Tp,`></div>
      <div class="`).concat(c," ").concat(u,'" ').concat(Pp,`></div>
    `),this.collection.forEach(function(g){return t.add(g,f)}),this.append(f);var h="".concat(u,"s ").concat(o,"one-bg ").concat(o,"two-color");return this.$el.addClass(h),this.rendered=!0,this},n}(qC.A);const Ep=vv;vv.prototype.itemView=go;var XC=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ZC=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},JC=function(a){XC(n,a);function n(t){var e=a.call(this,t,"TraitManager",PC())||this;e.TraitsView=Ep,e.events=vl,e.state=new Nt.Kx({traits:[]}),e.types={text:go,number:zC,select:$C,checkbox:LC,color:HC,button:kC};var r=e,o=r.state,s=r.config,u=r.events,c=s.pStylePrefix;c&&(s.stylePrefix="".concat(c).concat(s.stylePrefix)),(0,k.bindAll)(e,"__onSelect");var f=(0,k.debounce)(function(){return e.__upSel()},0),h=(0,k.debounce)(function(){return e.__onUp()},0);return o.listenTo(t,"component:toggled",f),o.listenTo(t,u.value,h),o.on("change:traits",e.__onSelect),e.debounced=[f,h],e}return n.prototype.select=function(t){var e=(t==null?void 0:t.getTraits())||[];this.state.set({component:t,traits:e}),this.__trgCustom()},n.prototype.getCategories=function(){var t,e=this.getComponent(),r=((t=e==null?void 0:e.traits.categories)===null||t===void 0?void 0:t.models)||[];return ZC([],r,!0)},n.prototype.getTraits=function(){return this.getCurrent()},n.prototype.getTraitsByCategory=function(t){return Vh(t||this.getTraits())},n.prototype.getComponent=function(){return this.state.attributes.component},n.prototype.addType=function(t,e){var r=this.getType("text");this.types[t]=r.extend(e)},n.prototype.getType=function(t){return this.getTypes()[t]},n.prototype.getTypes=function(){return this.types},n.prototype.getTraitsViewer=function(){return this.view},n.prototype.getCurrent=function(){return this.state.get("traits")||[]},n.prototype.render=function(){var t=this.view,e=this.em;return t=new Ep({el:t==null?void 0:t.el,collection:[],editor:e,config:this.getConfig()},this.getTypes()),this.view=t,t.el},n.prototype.postRender=function(){this.__appendTo()},n.prototype.__onSelect=function(){var t=this,e=t.em,r=t.events,o=t.state,s=o.attributes,u=s.component,c=s.traits;e.trigger(r.select,{component:u,traits:c})},n.prototype.__trgCustom=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.events,s=e.__ctn;this.__ctn=s||t.container,r.trigger(o.custom,this.__customData())},n.prototype.__customData=function(){return{container:this.__ctn}},n.prototype.__upSel=function(){this.select(this.em.getSelected())},n.prototype.__onUp=function(){this.select(this.getComponent())},n}(dn);const QC=JC;var tx=function(){return{stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}}};const ex=tx;var rx=De(3253),nx=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ox=function(a){nx(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t._dropAreaConfig={ratio:.4,minUndroppableDimension:3,maxUndroppableDimension:20},t}return Object.defineProperty(n.prototype,"view",{get:function(){return this.model.viewLayer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"element",{get:function(){var t;return(t=this.model.viewLayer)===null||t===void 0?void 0:t.el},enumerable:!1,configurable:!0}),n}(rx.h);const ix=ox;var ax=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),sx=function(a){ax(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.items=[],e.opt=t;var r=t.config||{};e.config=r,e.module=t.module,e.parentView=t.parentView;var o=r.stylePrefix||"";r.pStylePrefix;var s=e.collection;e.listenTo(s,"add",e.addTo),e.listenTo(s,"reset resetNavigator",e.render),e.listenTo(s,"remove",e.removeChildren),e.className="".concat(o,"layers");var u=r.em;if(r.sortable&&!e.opt.sorter){var c=u.Utils,f=r.sortContainer||e.el,h=e.createPlaceholder(o);e.opt.sorter=new c.ComponentSorter({em:u,treeClass:ix,containerContext:{container:f,containerSel:".".concat(e.className),itemSel:".".concat(o,"layer"),pfx:r.pStylePrefix,document,placeholderElement:h},dragBehavior:{dragDirection:aa.A.Vertical,nested:!0}})}return e.$el.data("collection",s),t.parent&&e.$el.data("model",t.parent),e}return n.prototype.createPlaceholder=function(t){var e=document.createElement("div"),r=document.createElement("div");return this.el.parentNode,e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",r.className=t+"placeholder-int",e.appendChild(r),e},n.prototype.removeChildren=function(t){var e=t.viewLayer;e&&(e.remove(),delete t.viewLayer)},n.prototype.addTo=function(t){this.addToCollection(t,null,this.collection.indexOf(t))},n.prototype.addToCollection=function(t,e,r){var o=this,s=o.parentView,u=o.opt,c=o.config,f=o.el,h=u.ItemView,g=u.opened,y=u.module,_=u.level,b=u.sorter,x=t.viewLayer||new h({ItemView:h,level:_,model:t,parentView:s,config:c,sorter:b,opened:g,module:y}),T=x.render().el;if(e)e.appendChild(T);else{var I=f,z=I.childNodes;if((0,k.isUndefined)(r))I.appendChild(T);else{var F=z.length==r;F&&r--,F||!z.length?I.appendChild(T):I.insertBefore(T,z[r])}}return this.items.push(x),T},n.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Nt.Ss.prototype.remove.apply(this,t),this.items.map(function(r){return r.remove()}),this},n.prototype.render=function(){var t=this,e=this,r=e.el,o=e.module,s=document.createDocumentFragment();return r.innerHTML="",this.collection.map(function(u){return o.__getLayerFromComponent(u)}).forEach(function(u){return t.addToCollection(u,s)}),r.appendChild(s),r.className=this.className,this},n}(Nt.Ss);const lx=sx;var hc=De(5301),ux=function(){return{stylePrefix:"com-",defaults:{},strict:!0}};const cx=ux;var fx=De(8351),dx=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wl=function(){return Wl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Wl.apply(this,arguments)},Ap=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},kp=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],gv={preserveSelected:1},yv=function(a){return function(n){return a.trigger("".concat(af,":start"),n)}},mv=function(a){return function(n){return a.trigger(af,n)}},_v=function(a,n,t){return t===void 0&&(t={}),function(e,r,o){setTimeout(function(){n.forEach(function(s){return s.set("status",s.get("selectable")?"selected":"")}),a.setSelected(n),n[0].emitUpdate()}),a.trigger("".concat(af,":end"),o),setTimeout(function(){return a.runDefault(gv)}),(t.altMode||o.cancelled)&&a.set("_cmpDrag",1)}},px=function(a){dx(n,a);function n(t){var e=a.call(this,t,"Commands",cx())||this;e.CommandAbstract=hc.default,e.defaultCommands={},e.commands={},e.active={},e.events=fx.A;var r=e.config,o=r.pStylePrefix,s=e.defaultCommands;o&&(r.stylePrefix=o+r.stylePrefix),Object.keys(r.defaults).forEach(function(c){var f=r.defaults[c];f.id&&e.add(f.id,f)}),s["tlb-delete"]={run:function(c){return c.runCommand("core:component-delete")}},s["tlb-clone"]={run:function(c){c.runCommand("core:copy"),c.runCommand("core:paste",{action:"clone-component"})}},s["tlb-move"]={run:function(c,f,h){var g;h===void 0&&(h={});var y=c.getModel(),_=h.event,b=h.target,x=Array.isArray(b)?b:b?[b]:Ap([],c.getSelectedAll(),!0),T=x.map(function(H){var V,U;return((U=(V=H.delegate)===null||V===void 0?void 0:V.move)===null||U===void 0?void 0:U.call(V,H))||H}).filter(Boolean),I=T[T.length-1],z=(_==null?void 0:_.type)==="dragstart",F=["absolute","translate"];if(!(I!=null&&I.get("draggable")))return y.logWarning("The element is not draggable");var W=I.get("dmode")||y.get("dmode"),ct=function(){return y.stopDefault(gv)},_t=(0,k.includes)(F,W);T.forEach(function(H){return H.trigger("disable",{fromMove:!0})}),z?setTimeout(ct,0):ct();var xt=yv(y),ut=mv(y),q=_v(y,T,{altMode:_t});if(_t)c.runCommand("core:component-drag",{guidesInfo:1,mode:W,target:I,onStart:xt,onDrag:ut,onEnd:q,event:_});else{z&&_.dataTransfer.setDragImage((g=I.view)===null||g===void 0?void 0:g.el,0,0);var nt=c.Commands.get("move-comp");nt.onStart=xt,nt.onDrag=ut,nt.onEndMoveFromModel=q,nt.initSorterFromModels(T)}T.filter(function(H){return H.get("selectable")}).forEach(function(H){return H.set("status","freezed-selected")})}},s["core:undo"]=function(c){return c.UndoManager.undo()},s["core:redo"]=function(c){return c.UndoManager.redo()},kp.forEach(function(c){var f=c[2],h=De(585)("./".concat(c[1])).default,g="core:".concat(c[0]);s[g]=h,f&&(s[f]=h,["run","stop"].forEach(function(y){t.on("".concat(y,":").concat(f),function(){for(var _=[],b=0;b<arguments.length;b++)_[b]=arguments[b];return t.trigger.apply(t,Ap(["".concat(y,":").concat(g)],_,!1))})}))}),r.model=t.Canvas;for(var u in s)e.add(u,s[u]);return e}return n.prototype.add=function(t,e){var r=(0,k.isFunction)(e)?{run:e}:e;return r.stop||(r.noStop=!0),delete r.initialize,r.id=t,this.commands[t]=hc.default.extend(r),this},n.prototype.get=function(t){var e=this.commands[t];return(0,k.isFunction)(e)?(e=new e(this.config),this.commands[t]=e):e||this.em.logWarning("'".concat(t,"' command not found")),e},n.prototype.extend=function(t,e){e===void 0&&(e={});var r=this.get(t);if(r){var o=Wl(Wl({},r.constructor.prototype),e);this.add(t,o);var s=kp.filter(function(u){return"core:".concat(u[0])===t&&u[2]})[0];s&&this.add(s[2],o)}return this},n.prototype.has=function(t){return!!this.commands[t]},n.prototype.getAll=function(){return this.commands},n.prototype.run=function(t,e){return e===void 0&&(e={}),this.runCommand(this.get(t),e)},n.prototype.stop=function(t,e){return e===void 0&&(e={}),this.stopCommand(this.get(t),e)},n.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},n.prototype.getActive=function(){return this.active},n.prototype.runCommand=function(t,e){e===void 0&&(e={});var r;if(t&&t.run){var o=this,s=o.em,u=o.config,c=t.id,f=s.Editor;(!this.isActive(c)||e.force||!u.strict)&&(r=f&&t.callRun(f,e),c&&t.stop&&!t.noStop&&!e.abort&&(this.active[c]=r))}return r},n.prototype.stopCommand=function(t,e){e===void 0&&(e={});var r;if(t&&t.run){var o=this,s=o.em,u=o.config,c=t.id,f=s.Editor;(this.isActive(c)||e.force||!u.strict)&&(c&&delete this.active[c],r=t.callStop(f,e))}return r},n.prototype.create=function(t){t.stop||(t.noStop=!0);var e=hc.default.extend(t);return new e(this.config)},n.prototype.__onRun=function(t,e){var r=this,o=r.em,s=r.events;o.on("".concat(s.runCommand).concat(t),e)},n.prototype.__onStop=function(t,e){var r=this,o=r.em,s=r.events;o.on("".concat(s.stopCommand).concat(t),e)},n.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},n}(dn);const hx=px;var vx=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Uc=function(){return Uc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Uc.apply(this,arguments)},Mp="contentEditable",el="data-toggle-move",gx=function(a){vx(n,a);function n(t){var e=a.call(this,t)||this;(0,k.bindAll)(e,"__render"),e.opt=t,e.module=t.module,e.config=t.config||{},e.sorter=t.sorter||"",e.parentView=t.parentView;var r=e,o=r.model,s=r.pfx,u=r.ppfx,c=o.get("type")||"default";return e.className="".concat(s,"layer ").concat(s,"layer__t-").concat(c," no-select ").concat(u,"two-color"),e.inputNameCls="".concat(u,"layer-name"),e.clsTitleC="".concat(s,"layer-title-c"),e.clsTitle="".concat(s,"layer-title"),e.clsCaret="".concat(s,"layer-caret"),e.clsCount="".concat(s,"layer-count"),e.clsMove="".concat(s,"layer-move"),e.clsChildren="".concat(s,"layer-children"),e.clsNoChild="".concat(s,"layer-no-chld"),e.clsEdit="".concat(e.inputNameCls,"--edit"),e.clsNoEdit="".concat(e.inputNameCls,"--no-edit"),e.initComponent(),e}return n.prototype.events=function(){var t;return t={},t["mousedown [".concat(el,"]")]="startSort",t["touchstart [".concat(el,"]")]="startSort",t["click [data-toggle-visible]"]="toggleVisibility",t["click [data-toggle-open]"]="toggleOpening",t["click [data-toggle-select]"]="handleSelect",t["mouseover [data-toggle-select]"]="handleHover",t["mouseout [data-toggle-select]"]="handleHoverOut",t["dblclick [data-name]"]="handleEdit",t["keydown [data-name]"]="handleEditKey",t["focusout [data-name]"]="handleEditEnd",t},n.prototype.template=function(t){var e=this,r=e.pfx,o=e.ppfx,s=e.config,u=e.clsNoEdit,c=e.module,f=e.opt,h=e.em,g=s.hidable,y=c.getComponents(t).length,_=y?"":this.clsNoChild,b="".concat(this.clsTitle," ").concat(_),x="".concat(this.clsTitleC),T="".concat(this.inputNameCls," ").concat(u," ").concat(o,"no-app"),I=f.level||0,z="".concat(I*10,"px"),F=t.getName(),W=t.getIcon(),ct="".concat(r,"layer"),_t=(h==null?void 0:h.getConfig()).icons,xt=_t,ut=xt.move,q=xt.eye,nt=xt.eyeOff,H=xt.chevron;return`
      <div class="`.concat(r,"layer-item ").concat(o,`one-bg" data-toggle-select>
        <div class="`).concat(r,`layer-item-left">
          `).concat(g?'<i class="'.concat(r,`layer-vis" data-toggle-visible>
                <i class="`).concat(r,'layer-vis-on">').concat(q,`</i>
                <i class="`).concat(r,'layer-vis-off">').concat(nt,`</i>
              </i>`):"",`
          <div class="`).concat(x,`">
            <div class="`).concat(b,'" style="padding-left: ').concat(z,`">
              <div class="`).concat(r,'layer-title-inn" title="').concat(F,`">
                <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(H,`</i>
                  `).concat(W?'<span class="'.concat(ct,'__icon">').concat(W,"</span>"):"",`
                <span class="`).concat(T,'" data-name>').concat(F,`</span>
              </div>
            </div>
          </div>
        </div>
        <div class="`).concat(r,`layer-item-right">
          <div class="`).concat(this.clsCount,'" data-count>').concat(y||"",`</div>
          <div class="`).concat(this.clsMove,'" ').concat(el,">").concat(ut||"",`</div>
        </div>
      </div>
      <div class="`).concat(this.clsChildren,`"></div>
    `)},Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),n.prototype.initComponent=function(){var t=this,e=this,r=e.model,o=e.config,s=o.onInit,u=r.components();this.listenTo(u,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["change:draggable",this.updateMove],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(c){return t.listenTo(r,c[0],c[1])}),this.$el.data("model",r),this.$el.data("collection",u),r.viewLayer=this,s.bind(this)({component:r,render:this.__render,listenTo:this.listenTo})},n.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},n.prototype.getVisibilityEl=function(){return this.getItemContainer().find("[data-toggle-visible]")},n.prototype.updateVisibility=function(){var t=this,e=t.pfx,r=t.model,o=t.module,s="".concat(e,"layer-hidden"),u=!o.isVisible(r),c=u?"addClass":"removeClass";this.$el[c](s),this.getVisibilityEl()[c]("".concat(e,"layer-off"))},n.prototype.updateMove=function(){var t=this,e=t.model,r=t.config,o=this.getItemContainer().find("[".concat(el,"]"))[0];if(o){var s=e.get("draggable")&&r.sortable;o.style.display=s?"":"none"}},n.prototype.toggleVisibility=function(t){t==null||t.stopImmediatePropagation();var e=this,r=e.module,o=e.model;r.setVisible(o,!r.isVisible(o))},n.prototype.handleEdit=function(t){t==null||t.stopPropagation();var e=this,r=e.em,o=e.$el,s=e.clsNoEdit,u=e.clsEdit,c=this.getInputName();c[Mp]="true",c.focus(),document.execCommand("selectAll",!1),r.setEditing(!0),o.find(".".concat(this.inputNameCls)).removeClass(s).addClass(u)},n.prototype.handleEditKey=function(t){t.stopPropagation(),((0,Wt.v$)(t)||(0,Wt.Ci)(t))&&this.handleEditEnd(t)},n.prototype.handleEditEnd=function(t){t==null||t.stopPropagation();var e=this,r=e.em,o=e.$el,s=e.clsNoEdit,u=e.clsEdit,c=e.model,f=this.getInputName(),h=f.textContent;f.scrollLeft=0,f[Mp]="false",c.setName(h),r.setEditing(!1),o.find(".".concat(this.inputNameCls)).addClass(s).removeClass(u),this.updateName()},n.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},n.prototype.updateOpening=function(){var t=this,e=t.$el,r=t.model,o=t.pfx,s="open",u="".concat(o,"layer-open"),c=this.getCaret();this.module.isOpen(r)?(e.addClass(s),c.addClass(u)):(e.removeClass(s),c.removeClass(u))},n.prototype.toggleOpening=function(t){var e=this,r=e.model,o=e.module;t==null||t.stopImmediatePropagation(),r.get("components").length&&o.setOpen(r,!o.isOpen(r))},n.prototype.handleSelect=function(t){t==null||t.stopPropagation();var e=this,r=e.module,o=e.model;r.setLayerData(o,{selected:!0},{event:t})},n.prototype.handleHover=function(t){t==null||t.stopPropagation();var e=this,r=e.module,o=e.model;r.setLayerData(o,{hovered:!0})},n.prototype.handleHoverOut=function(t){t==null||t.stopPropagation();var e=this,r=e.module,o=e.model;r.setLayerData(o,{hovered:!1})},n.prototype.startSort=function(t){var e,r,o;t.stopPropagation();var s=this,u=s.em,c=s.sorter,f=s.model;if(!(t.button&&t.button!==0)&&c){var h=((r=(e=f.delegate)===null||e===void 0?void 0:e.move)===null||r===void 0?void 0:r.call(e,f))||f;c.eventHandlers=Uc({legacyOnStartSort:yv(u),legacyOnMoveClb:mv(u),legacyOnEndMove:_v(u,[h])},c.eventHandlers);var g=((o=h.viewLayer)===null||o===void 0?void 0:o.el)||t.target;c.startSort([{element:g}])}},n.prototype.updateStatus=function(){nr.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},n.prototype.getItemContainer=function(){return this.$el.children("[data-toggle-select]")},n.prototype.checkChildren=function(){var t=this,e=t.model,r=t.clsNoChild,o=t.module,s=o.getComponents(e).length,u=this.getItemContainer(),c=u.find(".".concat(this.clsTitle)),f=u.find("[data-count]");c[s?"removeClass":"addClass"](r),f.html("".concat(s||"")),!s&&o.setOpen(e,!1)},n.prototype.getCaret=function(){return(!this.caret||!this.caret.length)&&(this.caret=this.getItemContainer().find(".".concat(this.clsCaret))),this.caret},n.prototype.setRoot=function(t){var e,r=(0,k.isString)(t)?(e=this.em.getWrapper())===null||e===void 0?void 0:e.find(t)[0]:t;r&&(this.stopListening(),this.model=r,this.initComponent(),this._rendered&&this.render())},n.prototype.updateLayerable=function(){var t=this.parentView,e=t||this;e.render()},n.prototype.__clearItems=function(){var t;(t=this.items)===null||t===void 0||t.remove()},n.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Nt.Ss.prototype.remove.apply(this,t),delete this.model.viewLayer,this.__clearItems(),this},n.prototype.render=function(){var t=this,e=t.model,r=t.config,o=t.pfx,s=t.ppfx,u=t.opt,c=t.sorter;this.__clearItems();var f=u.opened,h=u.module,g=u.ItemView,y=!h.__isLayerable(e),_=this.$el.empty(),b=u.level+1;delete this.inputName,this.items=new lx({ItemView:g,collection:e.get("components"),config:r,sorter:c,opened:f,parentView:this,parent:e,level:b,module:h});var x=this.items.render().$el;return!r.showWrapper&&b===1?_.append(x):(_.html(this.template(e)),_.find(".".concat(this.clsChildren)).append(x)),!h.isVisible(e)&&(this.className+=" ".concat(o,"hide")),y&&(this.className+=" ".concat(s,"hidden")),_.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.updateMove(),this.__render(),this._rendered=!0,this},n.prototype.__render=function(){var t=this,e=t.model,r=t.config,o=t.el,s=r.onRender,u={component:e,el:o};s.bind(this)(u),this.em.trigger("layer:render",u)},n}(Nt.Ss);const yx=gx;var mx=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wc=function(){return Wc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Wc.apply(this,arguments)},wv="layer",df="".concat(wv,":"),bv="".concat(df,"root"),Cv="".concat(df,"component"),_x="".concat(df,"custom"),wx={all:wv,root:bv,component:Cv,custom:_x},vc={mediaText:""},bx=["open","status","locked","custom-name","components","classes"].map(function(a){return"".concat(Sr.I.update,":").concat(a)}).join(" "),Cx=function(a){return a===void 0&&(a={}),(a.display||"").trim().indexOf("none")===0},xx=function(a){mx(n,a);function n(t){var e=a.call(this,t,"LayerManager",ex())||this;return e.events=wx,(0,k.bindAll)(e,"componentChanged","__onRootChange","__onComponent"),e.model=new zo.A(e,{opened:{}}),e.config.stylePrefix=e.config.pStylePrefix,e}return n.prototype.onLoad=function(){var t=this,e=this,r=e.em,o=e.config,s=e.model;s.listenTo(r,"component:selected",this.componentChanged),s.on("change:root",this.__onRootChange),s.listenTo(r,bx,this.__onComponent),this.componentChanged(),s.listenToOnce(r,"load",function(){t.setRoot(o.root),t.__appendTo()})},n.prototype.setRoot=function(t){var e=this.em.getWrapper(),r=(0,Pt.isComponent)(t)?t:e;t&&(0,k.isString)(t)&&(0,Pt.hasWin)()&&(r=e.find(t)[0]||e);var o=this.__getLayerFromComponent(r);return this.model.set("root",o),o},n.prototype.getRoot=function(){return this.model.get("root")},n.prototype.getComponents=function(t){var e=this;return t.components().map(function(r){return e.__getLayerFromComponent(r)}).filter(function(r){return e.__isLayerable(r)})},n.prototype.setOpen=function(t,e){t.set("open",e)},n.prototype.isOpen=function(t){return!!t.get("open")},n.prototype.setVisible=function(t,e){var r="__prev-display",o=t.getStyle(vc),s=o.display;if(e){var u=t.get(r);delete o.display,u&&(o.display=u,t.unset(r))}else s&&t.set(r,s),o.display="none";t.setStyle(o,vc),this.updateLayer(t),this.em.trigger("component:toggled")},n.prototype.isVisible=function(t){return!Cx(t.getStyle(vc))},n.prototype.setLocked=function(t,e){t.set("locked",e)},n.prototype.isLocked=function(t){return!!t.get("locked")},n.prototype.setName=function(t,e){t.set("custom-name",e)},n.prototype.getName=function(t){return t.getName()},n.prototype.getLayerData=function(t){var e=t.get("status");return{name:t.getName(),open:this.isOpen(t),selected:e==="selected",hovered:e==="hovered",visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},n.prototype.setLayerData=function(t,e,r){var o;r===void 0&&(r={});var s=this,u=s.em,c=s.config,f=e.open,h=e.selected,g=e.hovered,y=e.visible,_=e.locked,b=e.name,x=Wc({fromLayers:!0},r);if((0,Pt.isDef)(f)&&this.setOpen(t,f),(0,Pt.isDef)(h))if(h){u.setSelected(t,x);var T=c.scrollCanvas;T&&((o=t.views)===null||o===void 0||o.forEach(function(I){return I.scrollIntoView(T)}))}else u.removeSelected(t,x);(0,Pt.isDef)(g)&&c.showHover&&(g?u.setHovered(t,x):u.setHovered(null,x)),(0,Pt.isDef)(y)&&y!==this.isVisible(t)&&this.setVisible(t,y),(0,Pt.isDef)(_)&&this.setLocked(t,_),(0,Pt.isDef)(b)&&this.setName(t,b)},n.prototype.componentChanged=function(t,e){var r;if(e===void 0&&(e={}),!e.fromLayers){var o=this,s=o.em,u=o.config,c=u.scrollLayers,f=this.model.get("opened"),h=s.getSelected(),g=h==null?void 0:h.parent();for(var y in f)f[y].set("open",!1),delete f[y];for(;g;)g.set("open",!0),f[g.cid]=g,g=g.parent();if(h&&c){var _=(r=h.viewLayer)===null||r===void 0?void 0:r.el;_==null||_.scrollIntoView(c)}}},n.prototype.getAll=function(){return this.view},n.prototype.render=function(){var t,e,r=this,o=r.config,s=r.model,u=yx.extend(o.extend);return this.view=new u({el:(t=this.view)===null||t===void 0?void 0:t.el,ItemView:u,level:0,config:o,opened:s.get("opened"),model:this.getRoot(),module:this}),(e=this.view)===null||e===void 0?void 0:e.render().el},n.prototype.destroy=function(){var t;(t=this.view)===null||t===void 0||t.remove()},n.prototype.__onRootChange=function(){var t,e=this.getRoot();(t=this.view)===null||t===void 0||t.setRoot(e),this.em.trigger(bv,e),this.__trgCustom()},n.prototype.__getLayerFromComponent=function(t){var e,r;return((r=(e=t.delegate)===null||e===void 0?void 0:e.layer)===null||r===void 0?void 0:r.call(e,t))||t},n.prototype.__onComponent=function(t){this.updateLayer(t)},n.prototype.__isLayerable=function(t){var e=t.tagName,r=this.config.hideTextnode,o=!r||!t.isInstanceOf("textnode")&&e!=="br";return o&&t.get("layerable")},n.prototype.__trgCustom=function(t){var e=this,r=e.__ctn,o=e.em,s=e.events;this.__ctn=r||(t==null?void 0:t.container),o.trigger(s.custom,{container:this.__ctn,root:this.getRoot()})},n.prototype.updateLayer=function(t,e){this.em.trigger(Cv,t,e)},n}(dn);const Sx=xx;var Ox=function(){return{assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,multiUploadSuffix:"[]",autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""}};const Tx=Ox;var Px=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xv=function(a){Px(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.getDefaults=function(){return(0,k.result)(this.prototype,"defaults")},n.prototype.defaults=function(){return{type:"",src:""}},n.prototype.getType=function(){return this.get("type")},n.prototype.getSrc=function(){return this.get("src")},n.prototype.getFilename=function(){return this.get("src").split("/").pop().split("?").shift()},n.prototype.getExtension=function(){return this.getFilename().split(".").pop()},n}(Nt.Kx);const zc=xv;xv.prototype.idAttribute="src";var Ex=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zl=function(){return zl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},zl.apply(this,arguments)},Ax=function(a){Ex(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return zl(zl({},zc.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},n}(zc);const kx=Ax;var Mx=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Dx=function(a){Mx(n,a);function n(t){var e=a.call(this,t)||this;e.options=t,e.collection=t.collection;var r=t.config||{};e.config=r,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.em=r.em,e.className=e.pfx+"asset",e.listenTo(e.model,"destroy remove",e.remove),e.model.view=e;var o=e.init&&e.init.bind(e);return o&&o(t),e}return n.prototype.__getBhv=function(){var t=this.em,e=t==null?void 0:t.Assets;return(e==null?void 0:e.__getBehaviour())||{}},n.prototype.template=function(t,e){var r=this.pfx;return`
      <div class="`.concat(r,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(r,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(r,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},n.prototype.updateTarget=function(t){t&&t.set&&(t.set("attributes",(0,k.clone)(t.get("attributes"))),t.set("src",this.model.get("src")))},n.prototype.getPreview=function(){return""},n.prototype.getInfo=function(){return""},n.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},n}(Nt.Ss);const Lx=Dx;var jx=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Dp=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Sv=function(a){jx(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getPreview=function(){var t=this,e=t.pfx,r=t.ppfx,o=t.model,s=o.get("src");return cn(Lp||(Lp=Dp([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),e,s,e,r)},n.prototype.getInfo=function(){var t=this,e=t.pfx,r=t.model,o=r.get("name"),s=r.get("width"),u=r.get("height"),c=r.get("unitDim"),f=s&&u?"".concat(s,"x").concat(u).concat(c):"";return o=o||r.getFilename(),cn(jp||(jp=Dp([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),e,o,e,f)},n.prototype.init=function(t){var e=this.pfx;this.className+=" ".concat(e,"asset-image")},n.prototype.onClick=function(){var t=this,e=t.model,r=t.pfx,o=this.__getBhv().select,s=this.config.onClick,u=this.collection;u.trigger("deselectAll"),this.$el.addClass(r+"highlight"),(0,k.isFunction)(o)?o(e,!1):(0,k.isFunction)(s)?s(e):this.updateTarget(u.target)},n.prototype.onDblClick=function(){var t=this,e=t.em,r=t.model,o=this.__getBhv().select,s=this.config.onDblClick,u=this.collection,c=u.target,f=u.onSelect;(0,k.isFunction)(o)?o(r,!0):(0,k.isFunction)(s)?s(r):(this.updateTarget(c),e==null||e.Modal.close()),(0,k.isFunction)(f)&&f(r)},n.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},n}(Lx);const Vx=Sv;Sv.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var Lp,jp,Kl=function(){return Kl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Kl.apply(this,arguments)},Ix={types:[],initialize:function(a,n){var t=this;n===void 0&&(n={});var e=n.em;this.em=e,this.opts=n,this.model=function(o,s){o===void 0&&(o={}),s===void 0&&(s={});var u,c,f;if(o&&o.type){var h=t.getBaseType();f=t.getType(o.type),u=f?f.model:h.model,c=f?f.view:h.view}else{var g=t.recognizeType(o);f=g.type,u=f.model,c=f.view,o=g.attributes}var y=new u(o,Kl(Kl({},s),{em:e}));return y.typeView=c,t.model.prototype=u.prototype,y};var r=this.init&&this.init.bind(this);r&&r()},recognizeType:function(a){for(var n=this.getTypes(),t=0;t<n.length;t++){var e=n[t],r=e.isType(a);if(r=typeof r=="boolean"&&r?{type:e.id}:r,r)return{type:e,attributes:r}}return{type:this.getBaseType(),attributes:a}},getBaseType:function(){var a=this.getTypes();return a[a.length-1]},getTypes:function(){return this.types},getType:function(a){for(var n=this.getTypes(),t=0;t<n.length;t++){var e=n[t];if(e.id===a)return e}},addType:function(a,n){var t=this.getType(a),e=this.getBaseType(),r=t?t.model:e.model,o=t?t.view:e.view,s=n.model,u=n.view,c=n.isType;s=s instanceof Nt.Kx||(0,k.isFunction)(s)?s:r.extend(s||{}),u=u instanceof Nt.Ss||(0,k.isFunction)(u)?u:o.extend(u||{}),this.extendViewApi&&!n.model&&!n.view&&(u=u.extend(n)),t?(t.model=s,t.view=u,t.isType=c||t.isType):(n.id=a,n.model=s,n.view=u,n.isType=c||function(f){if(f&&f.type==a)return!0},this.getTypes().unshift(n))}};const Ov=Ix;var Nx=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rx=Nt.pM.extend(Ov),Tv=function(a){Nx(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Rx);const gc=Tv;Tv.prototype.types=[{id:"image",model:kx,view:Vx,isType:function(a){return typeof a=="string"?{type:"image",src:a}:a}}];var Kc;(function(a){a.add="asset:add",a.remove="asset:remove",a.removeBefore="asset:remove:before",a.update="asset:update",a.open="asset:open",a.close="asset:close",a.uploadStart="asset:upload:start",a.uploadEnd="asset:upload:end",a.uploadError="asset:upload:error",a.uploadResponse="asset:upload:response",a.custom="asset:custom",a.all="asset"})(Kc||(Kc={}));const Vp=Kc;var Fx=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pv=function(a){Fx(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t,e.config=t.config,e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.em=e.config.em;var r=e.collection;return e.listenTo(r,"reset",e.renderAssets),e.listenTo(r,"add",e.addToAsset),e.listenTo(r,"remove",e.removedAsset),e.listenTo(r,"deselectAll",e.deselectAll),e}return n.prototype.template=function(t){var e=t.pfx,r=t.ppfx,o=t.em,s="";return this.config.showUrlInput&&(s=`
          <form class="`.concat(e,`add-asset">
            <div class="`).concat(r,"field ").concat(e,`add-field">
              <input placeholder="`).concat(o==null?void 0:o.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(r,'btn-prim">').concat(o==null?void 0:o.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(e,`assets-cont">
      <div class="`).concat(e,`assets-header">
        `).concat(s,`
      </div>
      <div class="`).concat(e,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},n.prototype.handleSubmit=function(t){t.preventDefault();var e=this.getAddInput(),r=e&&e.value.trim(),o=this.config.handleAdd;if(r){e.value="";var s=this.getAssetsEl();s&&(s.scrollTop=0),o?o.bind(this)(r):this.options.globalCollection.add(r,{at:0})}},n.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},n.prototype.getAddInput=function(){return(!this.inputUrl||!this.inputUrl.value)&&(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},n.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},n.prototype.addToAsset=function(t){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(t)},n.prototype.addAsset=function(t,e){e===void 0&&(e=null);var r=e,o=this.collection,s=this.config,u=new t.typeView({model:t,collection:o,config:s}).render().el;if(r)r.appendChild(u);else{var c=this.getAssetsEl();c&&c.insertBefore(u,c.firstChild)}return u},n.prototype.toggleNoAssets=function(t){t===void 0&&(t=!1);var e=this.$el.find(".".concat(this.pfx,"assets"));if(t)e.empty();else{var r=this.config.noAssets;r&&e.append(r)}},n.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},n.prototype.renderAssets=function(){var t=this,e=document.createDocumentFragment(),r=this.$el.find(".".concat(this.pfx,"assets"));r.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(o){return t.addAsset(o,e)}),r.append(e)},n.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},n}(Nt.Ss);const Hx=Pv;Pv.prototype.events={submit:"handleSubmit"};var Bx=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ux=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Wx=function(a){Bx(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t;var r=t.config||{};e.module=t.module,e.config=r,e.em=e.config.em,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.target=e.options.globalCollection||{},e.uploadId=e.pfx+"uploadFile",e.disabled=r.disableUpload!==void 0?r.disableUpload:!r.upload&&!r.embedAsBase64,e.multiUpload=r.multiUpload!==void 0?r.multiUpload:!0;var o=r.uploadFile;return o?e.uploadFile=o.bind(e):!r.upload&&r.embedAsBase64&&(e.uploadFile=n.embedAsBase64),e.delegateEvents(),e}return n.prototype.template=function(t){var e=t.pfx,r=t.title,o=t.uploadId,s=t.disabled,u=t.multiUpload;return cn(Ip||(Ip=Ux([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),e,r,o,s?"disabled":"",u?"multiple":"")},n.prototype.events=function(){return{"change [data-input]":"uploadFile"}},n.prototype.onUploadStart=function(){var t=this.module;t==null||t.__propEv(t.events.uploadStart)},n.prototype.onUploadEnd=function(t){var e=this,r=e.$el,o=e.module;o==null||o.__propEv(o.events.uploadEnd,t);var s=r.find("input");s&&s.val("")},n.prototype.onUploadError=function(t){var e=this.module;console.error(t),this.onUploadEnd(t),e==null||e.__propEv(e.events.uploadError,t)},n.prototype.onUploadResponse=function(t,e){var r=this,o=r.module,s=r.config,u=r.target,c;try{c=typeof t=="string"?JSON.parse(t):t}catch{c=t}o==null||o.__propEv(o.events.uploadResponse,c),s.autoAdd&&u&&u.add(c.data,{at:0}),this.onUploadEnd(t),e==null||e(c)},n.prototype.uploadFile=function(t,e){var r=this,o=t.dataTransfer?t.dataTransfer.files:t.target.files,s=this.config,u=s.beforeUpload,c=u&&u(o);if(c!==!1){var f=new FormData,h=s.params,g=s.customFetch,y=s.fetchOptions;for(var _ in h)f.append(_,h[_]);if(this.multiUpload)for(var b=0;b<o.length;b++)f.append("".concat(s.uploadName).concat(s.multiUploadSuffix),o[b]);else o.length&&f.append(s.uploadName,o[0]);var x=s.upload,T=s.headers,I="X-Requested-With";if(typeof T[I]>"u"&&(T[I]="XMLHttpRequest"),x){this.onUploadStart();var z={method:"post",credentials:s.credentials||"include",headers:T,body:f},F=(y==null?void 0:y(z))||z,W=g?g(x,F):lv(x,F).then(function(ct){return(ct.status/200|0)==1?ct.text():ct.text().then(function(_t){return Promise.reject(_t)})});return W.then(function(ct){return r.onUploadResponse(ct,e)}).catch(function(ct){return r.onUploadError(ct)})}}},n.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var e=this.uploadForm;"draggable"in e&&(this.uploadForm.ondragover=function(){return e.className=t.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return e.className="",!1},this.uploadForm.ondrop=function(r){e.className="",r.preventDefault(),t.uploadFile(r)})}},n.prototype.initDropzone=function(t){var e=this,r=0,o=this.config,s=t.model,u=t.el,c=s.Editor,f=s.Canvas.getBody(),h=this.ppfx,g="".concat(h,"dropzone-active"),y="".concat(h,"dropzone"),_=function(){u.className=u.className.replace(g,"").trim(),r=0},b=function(){return r||(u.className+=" ".concat(g),r=1),!1},x=function(){return _(),!1},T=function(I){if(_(),I.preventDefault(),I.stopPropagation(),e.uploadFile(I),o.openAssetsOnDrop&&c){var z=c.getSelected();c.runCommand("open-assets",{target:z,onSelect:function(){c.Modal.close(),c.AssetManager.setTarget(null)}})}return!1};t.$el.append('<div class="'.concat(y,'">').concat(o.dropzoneContent,"</div>")),_(),"draggable"in u&&[u,f].forEach(function(I){I.ondragover=b,I.ondragleave=x,I.ondrop=T})},n.prototype.render=function(){var t=this,e=t.$el,r=t.pfx,o=t.em;return e.html(this.template({title:o&&o.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:r})),this.initDrop(),e.attr("class",r+"file-uploader"),this},n.embedAsBase64=function(t,e){var r=this,o=t.dataTransfer?t.dataTransfer.files:t.target.files,s={data:[]};if(!FileReader){this.onUploadError(new Error("Unsupported platform, FileReader is not defined"));return}for(var u=[],c=/^(.+)\/(.+)$/,f=function(_){var b=new Promise(function(x,T){var I=new FileReader;I.addEventListener("load",function(z){var F,W=_.name,ct=c.exec(_.type);if(ct?F=ct[1]:F=_.type,F==="image"){var _t={src:I.result,name:W,type:F,height:0,width:0},xt=new Image;xt.addEventListener("error",function(ut){T(ut)}),xt.addEventListener("load",function(){_t.height=xt.height,_t.width=xt.width,x(_t)}),xt.src=_t.src}else x(F?{src:I.result,name:W,type:F}:I.result)}),I.addEventListener("error",function(z){T(z)}),I.addEventListener("abort",function(z){T("Aborted")}),I.readAsDataURL(_)});u.push(b)},h=0,g=o;h<g.length;h++){var y=g[h];f(y)}return Promise.all(u).then(function(_){s.data=_,r.onUploadResponse(s,e)},function(_){r.onUploadError(_)})},n}(Nt.Ss);const zx=Wx;var Ip,Kx=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yi=function(){return Yi=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Yi.apply(this,arguments)},Np=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Ba="open-assets",Gx=function(a){Kx(n,a);function n(t){var e=a.call(this,t,"AssetManager",new gc([],t),Vp,Tx())||this;e.storageKey="assets",e.Asset=zc,e.Assets=gc,e.events=Vp;var r=e,o=r.all,s=r.config;e.assetsVis=new gc([]);var u=s.pStylePrefix;return u&&(s.stylePrefix="".concat(u).concat(s.stylePrefix)),o.on("add",function(c){return e.getAllVisible().add(c)}),o.on("remove",function(c){return e.getAllVisible().remove(c)}),e.__onAllEvent=(0,k.debounce)(function(){return e.__trgCustom()},0),e}return n.prototype.open=function(t){t===void 0&&(t={});var e=this.em.Commands;e.run(Ba,Yi({types:["image"],select:function(){}},t))},n.prototype.close=function(){var t=this.em.Commands;t.stop(Ba)},n.prototype.isOpen=function(){var t=this.em.Commands;return!!(t!=null&&t.isActive(Ba))},n.prototype.add=function(t,e){return e===void 0&&(e={}),typeof e.at>"u"&&(e.at=0),this.all.add(t,e)},n.prototype.get=function(t){return this.all.where({src:t})[0]||null},n.prototype.getAll=function(){return this.all},n.prototype.getAllVisible=function(){return this.assetsVis},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){return this.loadProjectData(t)},n.prototype.getContainer=function(){var t,e=this.__getBehaviour();return e.container||((t=this.am)===null||t===void 0?void 0:t.el)},n.prototype.getAssetsEl=function(){var t;return(t=this.am)===null||t===void 0?void 0:t.el.querySelector("[data-el=assets]")},n.prototype.render=function(t){if(!this.getConfig().custom){var e=t||this.getAll().models;if(!this.am){var r=this.__viewParams();r.fu=this.FileUploader(),this.am=new Hx(Yi({},r)),this.am.render()}return this.assetsVis.reset(e),this.getContainer()}},n.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},n.prototype.addType=function(t,e){this.getAll().addType(t,e)},n.prototype.getType=function(t){return this.getAll().getType(t)},n.prototype.getTypes=function(){return this.getAll().getTypes()},n.prototype.AssetsView=function(){return this.am},n.prototype.FileUploader=function(){return this.fu||(this.fu=new zx(this.__viewParams())),this.fu},n.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var e=this,r=e.em,o=e.events;r.Commands.__onRun(Ba,function(){return t.__propEv(o.open)}),r.Commands.__onStop(Ba,function(){return t.__propEv(o.close)})},n.prototype.postRender=function(t){var e;this.config.dropzone&&((e=this.fu)===null||e===void 0||e.initDropzone(t))},n.prototype.setTarget=function(t){this.assetsVis.target=t},n.prototype.onSelect=function(t){this.assetsVis.onSelect=t},n.prototype.onClick=function(t){this.config.onClick=t},n.prototype.onDblClick=function(t){this.config.onDblClick=t},n.prototype.__propEv=function(t){for(var e,r,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];(e=this.em).trigger.apply(e,Np([t],o,!1)),(r=this.getAll()).trigger.apply(r,Np([t],o,!1))},n.prototype.__trgCustom=function(){var t=this.__getBehaviour(),e=this.getConfig().custom;!t.container&&!e.open||this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:e.types||[],container:e.container,close:function(){return t.close()},remove:function(r,o){return t.remove(r,o)},select:function(r,o){var s=t.add(r);(0,k.isFunction)(e.select)&&e.select(s,o)},options:e.options||{}}},n.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=Yi(Yi({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(t){return this._bhv||{}},n.prototype.destroy=function(){var t,e;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(t=this.fu)===null||t===void 0||t.remove(),(e=this.am)===null||e===void 0||e.remove(),this._bhv={}},n}(yo);const $x=Gx;var qx=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yx=function(a){qx(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t,e)||this,o=e.em,s={};r.em=o,t.frames||(s.component=t.component,s.styles=t.styles,["component","styles"].map(function(f){return r.unset(f)}));var u=t.frames||[s],c=new wh(o.Canvas,u);return c.page=r,r.set("frames",c),!r.getId()&&r.set("id",o==null?void 0:o.Pages._createId()),o==null||o.UndoManager.add(c),r}return n.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},n.prototype.onRemove=function(){this.getFrames().reset()},n.prototype.getFrames=function(){return this.get("frames")},n.prototype.getId=function(){return this.id},n.prototype.getName=function(){return this.get("name")},n.prototype.setName=function(t){return this.set({name:t})},n.prototype.getAllFrames=function(){return this.getFrames().models||[]},n.prototype.getMainFrame=function(){return this.getFrames().at(0)},n.prototype.getMainComponent=function(){var t=this.getMainFrame();return t==null?void 0:t.getComponent()},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=Nt.Kx.prototype.toJSON.call(this,t),r=(0,k.result)(this,"defaults");return(0,k.forEach)(e,function(o,s){s.indexOf("_")===0&&delete e[s]}),(0,k.forEach)(r,function(o,s){e[s]===o&&delete e[s]}),e},n}(Nt.Kx);const Gc=Yx;var Xx=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gl=function(){return Gl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Gl.apply(this,arguments)},Zx=function(a){Xx(n,a);function n(t,e){var r=a.call(this,t)||this;return r.on("reset",r.onReset),r.on("remove",r.onRemove),r.model=function(o,s){return s===void 0&&(s={}),new Gc(o,Gl(Gl({},s),{em:e}))},r}return n.prototype.onReset=function(t,e){var r=this,o;(o=e==null?void 0:e.previousModels)===null||o===void 0||o.map(function(s){return r.onRemove(s,r,e)})},n.prototype.onRemove=function(t,e,r){r===void 0&&(r={}),!r.fromUndo&&(t==null||t.onRemove())},n}(Nt.pM);const Jx=Zx;var Qx=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tS=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Rp="change:selected",Fp="main",eS=function(a){Qx(n,a);function n(t){var e=a.call(this,t,"PageManager",new Jx([],t),Ac)||this;e.events=Ac,e.storageKey="pages",(0,k.bindAll)(e,"_onPageChange");var r=new zo.A(e,{_undo:!0});return e.model=r,e.pages.on("reset",function(o){return o.at(0)&&e.select(o.at(0))}),e.pages.on("all",e.__onChange,e),r.on(Rp,e._onPageChange),e}return Object.defineProperty(n.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),n.prototype.getAll=function(){return tS([],this.all.models,!0)},n.prototype.__onChange=function(t,e,r,o){var s=this,u=s.em,c=s.events,f=o||r;u.trigger(c.all,{event:t,page:e,options:f})},n.prototype.onLoad=function(){var t,e=this,r=e.pages,o=e.config,s=e.em,u={silent:!0},c=((t=o.pages)===null||t===void 0?void 0:t.map(function(h){return new Gc(h,{em:s,config:o})}))||[];r.add(c,u);var f=r.length?this._initPage():this.add({type:Fp},u);f&&this.select(f,u)},n.prototype._onPageChange=function(t,e,r){var o=this,s=o.em,u=o.events,c=s.Layers,f=e.getMainComponent();c&&f&&c.setRoot(f),s.trigger(u.select,e,t.previous("selected")),this.__onChange(Rp,e,r)},n.prototype.postLoad=function(){var t=this,e=t.em,r=t.model,o=t.pages,s=e.UndoManager;s.add(r),s.add(o),o.on("add remove reset change",function(u,c,f){return e.changesUp(f||c)})},n.prototype.add=function(t,e){var r=this;e===void 0&&(e={});var o=this,s=o.em,u=o.events;t.id=t.id||this._createId();var c=function(){var f=r.pages.add(new Gc(t,{em:r.em,config:r.config}),e);return e.select&&r.select(f),f};return!e.silent&&s.trigger(u.addBefore,t,c,e),e.abort?void 0:c()},n.prototype.remove=function(t,e){var r=this;e===void 0&&(e={});var o=this,s=o.em,u=o.events,c=(0,k.isString)(t)?this.get(t):t,f=function(){return c&&r.pages.remove(c,e),c};return!e.silent&&s.trigger(u.removeBefore,c,f,e),!e.abort&&f()},n.prototype.get=function(t){return this.pages.filter(function(e){return e.get(e.idAttribute)===t})[0]},n.prototype.getMain=function(){var t=this.pages;return t.filter(function(e){return e.get("type")===Fp})[0]||t.at(0)},n.prototype.getAllWrappers=function(){var t=this.getAll();return(0,k.unique)((0,k.flatten)(t.map(function(e){return e.getAllFrames().map(function(r){return r.getComponent()})})))},n.prototype.select=function(t,e){e===void 0&&(e={});var r=this,o=r.em,s=r.model,u=r.events,c=(0,k.isString)(t)?this.get(t):t;return c&&(o.trigger(u.selectBefore,c,e),s.set("selected",c,e)),this},n.prototype.getSelected=function(){return this.model.get("selected")},n.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(e){return t[e]=0})},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){var e=this.loadProjectData(t,{all:this.pages,reset:!0});return this.pages.forEach(function(r){return r.getFrames().initRefs()}),e},n.prototype._initPage=function(){return this.get(this.config.selected)||this.getMain()},n.prototype._createId=function(){var t=this.getAll(),e=t.length+16,r=this.getAllMap(),o;do o=(0,Pt.createId)(e);while(r[o]);return o},n}(yo);const rS=eS;var yc={placeholder:"eg. Text here"};const nS={assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",categories:{},traits:{labels:{},attributes:{id:yc,alt:yc,title:yc,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}};var oS=function(){return{locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:nS},messagesAdd:void 0}};const iS=oS;var $c;(function(a){a.add="i18n:add",a.update="i18n:update",a.locale="i18n:locale"})($c||($c={}));const aS=$c;var sS=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lS=function(a){sS(n,a);function n(t){var e=a.call(this,t,"I18n",iS())||this;e.events=aS;var r=e.config.messagesAdd;return r&&e.addMessages(r),e.config.detectLocale&&(e.config.locale=e._localLang()),e}return n.prototype.setLocale=function(t){var e=this,r=e.em,o=e.config,s=e.events;return r.trigger(s.locale,{value:t,valuePrev:o.locale}),o.locale=t,this},n.prototype.getLocale=function(){return this.config.locale},n.prototype.getMessages=function(t,e){e===void 0&&(e={});var r=this.config.messages;return t&&!r[t]&&this._debug("'".concat(t,"' i18n lang not found"),e),t?r[t]:r},n.prototype.setMessages=function(t){var e=this,r=e.em,o=e.config,s=e.events;return o.messages=t,r.trigger(s.update,t),this},n.prototype.addMessages=function(t){var e=this,r=e.em,o=e.events,s=e.config,u=s.messages;return r.trigger(o.add,t),this.setMessages((0,Pt.deepMerge)(u,t)),this},n.prototype.t=function(t,e){e===void 0&&(e={});var r=this.config,o=e.params||{},s=e.l||this.getLocale(),u=e.lFlb||r.localeFallback,c=this._getMsg(t,s,e);return c||(c=this._getMsg(t,u,e)),!c&&this._debug("'".concat(t,"' i18n key not found in '").concat(s,"' lang"),e),c=c&&(0,k.isString)(c)?this._addParams(c,o):c,c},n.prototype._localLang=function(){var t=(0,Pt.hasWin)()&&window.navigator||{},e=t.language||t.userLanguage;return e?e.split("-")[0]:"en"},n.prototype._addParams=function(t,e){var r=new RegExp("{([\\w\\d-]*)}","g");return t.replace(r,function(o,s){return e[s]||""}).trim()},n.prototype._getMsg=function(t,e,r){r===void 0&&(r={});var o=this.getMessages(e,r);if(o){var s=o[t];return!s&&t.indexOf(".")>0&&(s=t.split(".").reduce(function(u,c){if(!(0,k.isUndefined)(u))return u[c]},o)),s}},n.prototype._debug=function(t,e){e===void 0&&(e={});var r=this,o=r.em,s=r.config;(e.debug||s.debug)&&o&&o.logWarning(t)},n.prototype.destroy=function(){},n}(dn);const uS=lS;var si=function(){return si=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},si.apply(this,arguments)},cS=function(a,n){n===void 0&&(n={});var t=n.prefix||"",e=document.createElement("i");return e.className=t+"resizer-h "+t+"resizer-h-"+a,e.setAttribute("data-"+t+"handler",a),e},fS=function(a,n){var t=window,e=a.getBoundingClientRect();return{left:e.left+t.pageXOffset,top:e.top+t.pageYOffset,width:e.width,height:e.height}},dS=function(){function a(n){n===void 0&&(n={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=si({},this.defOpts),this.setOptions(n),(0,k.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return a.prototype.getConfig=function(){return this.opts},a.prototype.setOptions=function(n,t){n===void 0&&(n={}),this.opts=si(si({},t?this.defOpts:this.opts),n),this.setup()},a.prototype.setup=function(){var n=this.opts,t=n.prefix||"",e=n.appendTo||document.body,r=this.container;for(r||(r=document.createElement("div"),r.className="".concat(t,"resizer-c"),e.appendChild(r),this.container=r);r.firstChild;)r.removeChild(r.firstChild);var o={};["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(c){return o[c]=n[c]?cS(c,n):null});for(var s in o){var u=o[s];u&&r.appendChild(u)}this.handlers=o,this.mousePosFetcher=n.mousePosFetcher,this.updateTarget=n.updateTarget,this.posFetcher=n.posFetcher,this.onStart=n.onStart,this.onMove=n.onMove,this.onEnd=n.onEnd,this.onUpdateContainer=n.onUpdateContainer},a.prototype.toggleFrames=function(n){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");(0,k.each)(t,function(e){return e.style.pointerEvents=n?"none":""})}},a.prototype.isHandler=function(n){var t=this.handlers;for(var e in t)if(t[e]===n)return!0;return!1},a.prototype.getFocusedEl=function(){return this.el},a.prototype.getParentEl=function(){var n;return(n=this.el)===null||n===void 0?void 0:n.parentElement},a.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},a.prototype.getElementPos=function(n,t){t===void 0&&(t={});var e=this.posFetcher;return e?e(n,t):fS(n)},a.prototype.focus=function(n){n&&n===this.el||(this.el=n,this.updateContainer({forceShow:!0}),(0,Wt.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},a.prototype.blur=function(){this.container.style.display="none",this.el&&((0,Wt.AU)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},a.prototype.start=function(n){var t=n;if(t.button===0){t.preventDefault(),t.stopPropagation();var e=this.el,r=this.getParentEl(),o=this,s=this.opts||{},u=this.mousePosFetcher,c="data-"+s.prefix+"handler",f=this.getElementPos(e,{avoidFrameZoom:!0,avoidFrameOffset:!0}),h=this.getElementPos(r),g=t.target;this.handlerAttr=g.getAttribute(c),this.clickedHandler=g,this.startDim={t:f.top,l:f.left,w:f.width,h:f.height},this.rectDim={t:f.top,l:f.left,w:f.width,h:f.height},this.startPos=u?u(t):{x:t.clientX,y:t.clientY},this.parentDim={t:h.top,l:h.left,w:h.width,h:h.height};var y=this.getDocumentEl();this.docs=y,(0,Wt.on)(y,"pointermove",this.move),(0,Wt.on)(y,"keydown",this.handleKeyDown),(0,Wt.on)(y,"pointerup",this.stop),(0,k.isFunction)(this.onStart)&&this.onStart(t,{docs:y,config:s,el:e,resizer:o}),this.toggleFrames(!0),this.move(t)}},a.prototype.move=function(n){var t=n,e=this.onMove,r=this.mousePosFetcher,o=r?r(t):{x:t.clientX,y:t.clientY};this.currentPos=o,this.delta={x:o.x-this.startPos.x,y:o.y-this.startPos.y},this.keys={shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey},this.rectDim=this.calc(this),this.updateRect(!1),e&&e(t)},a.prototype.stop=function(n){var t=this.el,e=this.opts,r=this.docs||this.getDocumentEl();(0,Wt.AU)(r,"pointermove",this.move),(0,Wt.AU)(r,"keydown",this.handleKeyDown),(0,Wt.AU)(r,"pointerup",this.stop),this.updateRect(!0),this.toggleFrames(),(0,k.isFunction)(this.onEnd)&&this.onEnd(n,{docs:r,config:e,el:t,resizer:this}),delete this.docs},a.prototype.updateRect=function(n){var t=this.el,e=this,r=this.opts,o=this.rectDim,s=this.updateTarget,u=this.getSelectedHandler(),c=r.unitHeight,f=r.unitWidth,h=r.keyWidth,g=r.keyHeight;if((0,k.isFunction)(s))s(t,o,{store:n,selectedHandler:u,resizer:e,config:r});else{var y=t.style;y[h]=o.w+f,y[g]=o.h+c}this.updateContainer()},a.prototype.updateContainer=function(n){var t;n===void 0&&(n={});var e=this,r=e.opts,o=e.container,s=e.el,u=o.style;!r.avoidContainerUpdate&&s&&n.forceShow&&(u.display="block"),(t=this.onUpdateContainer)===null||t===void 0||t.call(this,{el:o,resizer:this,opts:si(si({},r),n)})},a.prototype.getSelectedHandler=function(){var n=this.handlers;if(this.selectedHandler){for(var t in n)if(n[t]===this.selectedHandler)return t}},a.prototype.handleKeyDown=function(n){n.keyCode===27&&(this.rectDim=this.startDim,this.stop(n))},a.prototype.handleMouseDown=function(n){var t=n.target;this.isHandler(t)?(this.selectedHandler=t,this.start(n)):t!==this.el&&(delete this.selectedHandler,this.blur())},a.prototype.calc=function(n){var t,e=this.opts||{},r=e.step,o=this.startDim,s=e.minDim,u=e.maxDim,c=n.delta.x,f=n.delta.y,h=this.parentDim.w,g=this.parentDim.h,y=this.opts.unitWidth,_=this.opts.unitHeight,b=y==="%"?o.w/100*h:o.w,x=_==="%"?o.h/100*g:o.h,T={t:o.t,l:o.l,w:b,h:x};if(n){var I=n.handlerAttr;~I.indexOf("r")&&(t=y==="%"?(0,Pt.normalizeFloat)((b+c*r)/h*100,.01):(0,Pt.normalizeFloat)(b+c*r,r),t=Math.max(s,t),u&&(t=Math.min(u,t)),T.w=t),~I.indexOf("b")&&(t=_==="%"?(0,Pt.normalizeFloat)((x+f*r)/g*100,.01):(0,Pt.normalizeFloat)(x+f*r,r),t=Math.max(s,t),u&&(t=Math.min(u,t)),T.h=t),~I.indexOf("l")&&(t=y==="%"?(0,Pt.normalizeFloat)((b-c*r)/h*100,.01):(0,Pt.normalizeFloat)(b-c*r,r),t=Math.max(s,t),u&&(t=Math.min(u,t)),T.w=t),~I.indexOf("t")&&(t=_==="%"?(0,Pt.normalizeFloat)((x-f*r)/g*100,.01):(0,Pt.normalizeFloat)(x-f*r,r),t=Math.max(s,t),u&&(t=Math.min(u,t)),T.h=t);var z=e.ratioDefault?!n.keys.shift:n.keys.shift;if(I.indexOf("c")<0&&z){var F=o.w/o.h;T.w/T.h>F?T.h=Math.round(T.w/F):T.w=Math.round(T.h*F)}~I.indexOf("l")&&(T.l+=o.w-T.w),~I.indexOf("t")&&(T.t+=o.h-T.h);for(var W in T){var ct=W;T[ct]=parseInt("".concat(T[ct]),10)}return T}},a}();const pS=dS;var Cn=function(){return Cn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Cn.apply(this,arguments)};function hS(a,n,t){for(var e={index:0,placement:"before"},r=0,o=0,s=0,u=0,c=0,f=0,h=0,g,y=0,_=a.length;y<_;y++){g=a[y];var b=g.top,x=g.left,T=g.height,I=g.width;if(s=x+I,h=b+T,c=x+I/2,f=b+T/2,!(o&&x>o||u&&f>=u||r&&s<r))if(e.index=y,!g.dir)t<h&&(u=h),n<c?(o=c,e.placement="before"):(r=c,e.placement="after");else if(t<f){e.placement="before";break}else e.placement="after"}return e}function Hp(a){var n=a.getBoundingClientRect();return{top:n.top+document.body.scrollTop,left:n.left+document.body.scrollLeft}}function pf(a,n){return Pt.matches.call(a,n)}function vS(a,n){var t=qc(a),e=qc(n),r=e.filter(function(c){return t.includes(c)}),o=r[0];if(!o)return a.model.index()-n.model.index();var s=e[e.indexOf(o)-1],u=t[t.indexOf(o)-1];return u.index()-s.index()}function qc(a){return a?[a].concat(qc(a.parent())):[]}function gS(a,n){if(a)for(var t=a.parentNode;t&&t.nodeType===1;){if(pf(t,n))return t;t=t.parentNode}}function yS(a,n){if((0,Wt.ir)(a))return!1;var t=a.style||{},e=(0,Pr.default)(a),r=(0,Pr.default)(n);if(t.overflow&&t.overflow!=="visible")return!1;var o=e.css("float");return o&&o!=="none"||r.css("display")==="flex"&&r.css("flex-direction")!=="column"||!mS(t.position)?!1:_S(a)||wS(e)}function mS(a){switch(a){case"static":case"relative":case"":return!0;default:return!1}}function _S(a){var n=["TR","TBODY","THEAD","TFOOT"];return n.includes(a.tagName)}function wS(a){var n=a.css("display"),t=["block","list-item","table","flex","grid"];return t.includes(n)}function bS(a){var n={containerContext:{container:"",placeholderElement:"",containerSel:"*",itemSel:"*",pfx:"",document},positionOptions:{borderOffset:10,relative:!1,windowMargin:0,offsetTop:0,offsetLeft:0,scale:1,canvasRelative:!1},dragBehavior:{dragDirection:aa.A.Vertical,nested:!1,selectOnEnd:!0},eventHandlers:{}},t=Cn(Cn(Cn({},n),a),{containerContext:Cn(Cn({},n.containerContext),a.containerContext),positionOptions:Cn(Cn({},n.positionOptions),a.positionOptions),dragBehavior:Cn(Cn({},n.dragBehavior),a.dragBehavior),eventHandlers:Cn(Cn({},n.eventHandlers),a.eventHandlers)});return t}var Ev=function(){function a(n){this.timeout=null,this.threshold=n}return a.prototype.updateArgs=function(n){this.lastArgs=n},a.prototype.execute=function(n){var t=this;this.timeout||(this.timeout=setTimeout(function(){t.lastArgs&&n(t.lastArgs),t.timeout=null},this.threshold))},a.prototype.clearTimeout=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),delete this.lastArgs},a}(),Yc=function(){return Yc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Yc.apply(this,arguments)},CS=function(){function a(n){this.top=n.top,this.left=n.left,this.height=n.height,this.width=n.width,this.offsets=n.offsets,this.dir=n.dir}return a.prototype.calculateDimensionDifference=function(n){var t=n.top-this.top,e=n.left-this.left;return{topDifference:t,leftDifference:e}},a.prototype.adjustDimensions=function(n){return this.top+=n.topDifference,this.left+=n.leftDifference,this},a.prototype.determinePlacement=function(n,t){var e=this.left+this.width/2,r=this.top+this.height/2;return this.dir?t<r?"before":"after":n<e?"before":"after"},a.prototype.equals=function(n){return n?this.top===n.top&&this.left===n.left&&this.height===n.height&&this.width===n.width&&this.dir===n.dir&&JSON.stringify(this.offsets)===JSON.stringify(n.offsets):!1},a.prototype.clone=function(){return new a({top:this.top,left:this.left,height:this.height,width:this.width,offsets:Yc({},this.offsets),dir:this.dir})},a.prototype.getDropArea=function(n){var t=this.clone(),e=this.adjustDropDimension(this.width,this.left,n),r=e.newSize,o=e.newPosition;t.width=r,t.left=o;var s=this.adjustDropDimension(this.height,this.top,n),u=s.newSize,c=s.newPosition;return t.height=u,t.top=c,t},a.prototype.adjustDropDimension=function(n,t,e){var r=e.ratio,o=e.minUndroppableDimension,s=e.maxUndroppableDimension,u=n*(1-r)/2;u=Math.max(u,o),u=Math.min(u,s);var c=n-u*2,f=t+u;return{newSize:c,newPosition:f}},a.prototype.isWithinBounds=function(n,t){return n>=this.left&&n<=this.left+this.width&&t>=this.top&&t<=this.top+this.height},a}();const xS=CS;var SS=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$l=function(){return $l=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},$l.apply(this,arguments)},OS=function(a){SS(n,a);function n(t){var e=a.call(this)||this;return e.sourceNodes=[],e.containerOffset={top:0,left:0},e.moveThreshold=20,e.treeClass=t.treeClass,e.em=t.em,e.containerContext=t.containerContext,e.positionOptions=t.positionOptions,e.dragDirection=t.dragDirection,e.eventHandlers=t.eventHandlers,(0,k.bindAll)(e,"endDrag","cancelDrag","recalculateTargetOnScroll","startSort","onDragStart","onMove"),e.restLastMoveData(),e.rateLimiter=new Ev(e.moveThreshold),e}return n.prototype.startSort=function(t){this.sourceNodes=t,this.bindDragEventHandlers()},n.prototype.bindDragEventHandlers=function(){(0,Wt.on)(this.containerContext.container,"dragstart",this.onDragStart),(0,Wt.on)(this.containerContext.container,"mousemove dragover",this.onMove),(0,Wt.on)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},n.prototype.recalculateTargetOnScroll=function(){var t=this.lastMoveData.mouseEvent;t&&this.onMove(t)},n.prototype.onMove=function(t){this.rateLimiter.updateArgs(t),this.rateLimiter.execute(this.handleMove.bind(this))},n.prototype.handleMove=function(t){var e,r,o,s,u,c;this.adjustForScroll();var f=this.lastMoveData.targetNode;(r=(e=this.eventHandlers).onMouseMove)===null||r===void 0||r.call(e,t);var h=this.getMousePositionRelativeToContainer(t.clientX,t.clientY),g=h.mouseXRelative,y=h.mouseYRelative,_=this.getTargetNode(t),b=!(_!=null&&_.equals(f));if(b&&((s=(o=this.eventHandlers).onTargetChange)===null||s===void 0||s.call(o,f,_)),!_){this.triggerLegacyOnMoveCallback(t,0),this.triggerMoveEvent(g,y),this.restLastMoveData();return}var x=this.getDropPosition(_,g,y),T=x.index,I=x.placement,z=x.placeholderDimensions,F=!z.equals(this.lastMoveData.placeholderDimensions)||I!==this.lastMoveData.placement;F&&((c=(u=this.eventHandlers).onPlaceholderPositionChange)===null||c===void 0||c.call(u,z,I)),this.lastMoveData=$l($l({},this.lastMoveData),{targetNode:_,mouseEvent:t,index:T,placement:I,placeholderDimensions:z}),this.triggerMoveEvent(g,y),this.triggerLegacyOnMoveCallback(t,T)},n.prototype.adjustForScroll=function(){var t,e,r=this.lastMoveData.targetNode;if(r!=null&&r.element){var o=this.getDim(r==null?void 0:r.element),s=(t=r.nodeDimensions)===null||t===void 0?void 0:t.calculateDimensionDifference(o);s&&r.adjustDimensions(s)}var u=this.lastMoveData.hoveredNode;if(u!=null&&u.element){var o=this.getDim(u==null?void 0:u.element),s=(e=u.nodeDimensions)===null||e===void 0?void 0:e.calculateDimensionDifference(o);s&&u.adjustDimensions(s)}},n.prototype.restLastMoveData=function(){this.lastMoveData={targetNode:void 0,index:void 0,placement:void 0,mouseEvent:void 0}},n.prototype.triggerLegacyOnMoveCallback=function(t,e){var r,o,s,u,c=(r=this.sourceNodes[0])===null||r===void 0?void 0:r.model;(s=(o=this.eventHandlers).legacyOnMoveClb)===null||s===void 0||s.call(o,{event:t,target:c,parent:(u=this.lastMoveData.targetNode)===null||u===void 0?void 0:u.model,index:e})},n.prototype.triggerMoveEvent=function(t,e){var r,o=this.lastMoveData,s=o.targetNode,u=o.placement,c=o.index,f=c?c+(u==="after"?-1:0):0;this.em.trigger("sorter:drag",{target:(s==null?void 0:s.element)||null,targetModel:(r=this.lastMoveData.targetNode)===null||r===void 0?void 0:r.model,sourceModel:this.sourceNodes[0].model,dims:(s==null?void 0:s.childrenDimensions)||[],pos:{index:f,indexEl:f,placement:u},x:t,y:e})},n.prototype.getDropPosition=function(t,e,r){var o,s=t.nodeDimensions,u=t.childrenDimensions,c=t.getChildren(),f=c&&c.length>0;s=s||this.getDim(t.element),t.nodeDimensions=s,u=u||this.getChildrenDim(t),t.childrenDimensions=u;var h=s.clone(),g=0,y="inside";return f&&(o=hS(u,e,r),g=o.index,y=o.placement,h=u[g].clone(),g=g+(y=="after"?1:0)),{index:g,placement:y,placeholderDimensions:h}},n.prototype.getTargetNode=function(t){var e;this.cacheContainerPosition(this.containerContext.container);var r=this.getMousePositionRelativeToContainer(t.clientX,t.clientY),o=r.mouseXRelative,s=r.mouseYRelative,u=this.getMouseTargetElement(t),c=this.getFirstElementWithAModel(u);if(c){var f=(e=(0,Pr.default)(c))===null||e===void 0?void 0:e.data("model");if(f){var h=this.getOrCreateHoveredNode(f),g=this.getDropPosition(h,o,s).index,y=this.getValidParent(h,g,o,s);return this.getOrReuseTargetNode(y)}}},n.prototype.getOrCreateHoveredNode=function(t){var e=this.lastMoveData.hoveredNode,r=new this.treeClass(t),o=r.equals(e)?e:r;return this.lastMoveData.hoveredNode=o,o},n.prototype.getOrReuseTargetNode=function(t){var e=this.lastMoveData.targetNode;return t!=null&&t.equals(e)?e:t},n.prototype.getMouseTargetElement=function(t){var e=this.containerContext.customTarget,r=this.containerContext.document.elementFromPoint(t.clientX,t.clientY),o=e?e({event:t}):r;return o},n.prototype.onDragStart=function(t){this.eventHandlers.onDragStart&&this.eventHandlers.onDragStart(t)},n.prototype.endDrag=function(){this.dropDragged()},n.prototype.cancelDrag=function(){var t,e,r=this.lastMoveData.targetNode;(e=(t=this.eventHandlers).onTargetChange)===null||e===void 0||e.call(t,r,void 0),this.finalizeMove()},n.prototype.finalizeMove=function(){var t,e,r,o;this.cleanupEventListeners(),this.triggerOnDragEndEvent(),(e=(t=this.eventHandlers).onEnd)===null||e===void 0||e.call(t),(o=(r=this.eventHandlers).legacyOnEnd)===null||o===void 0||o.call(r),this.restLastMoveData(),this.rateLimiter.clearTimeout()},n.prototype.dropDragged=function(){var t,e,r=this.lastMoveData,o=r.targetNode,s=r.index;(e=(t=this.eventHandlers).onDrop)===null||e===void 0||e.call(t,o,this.sourceNodes,s),this.finalizeMove()},n.prototype.triggerOnDragEndEvent=function(){var t=this.lastMoveData.targetNode,e=this.sourceNodes[0];this.em.trigger("sorter:drag:end",{targetCollection:t?t.getChildren():null,modelToDrop:e==null?void 0:e.model,warns:[""],validResult:{result:!0,src:this.sourceNodes.map(function(r){return r.element}),srcModel:e==null?void 0:e.model,trg:t==null?void 0:t.element,trgModel:t==null?void 0:t.model,draggable:!0,droppable:!0},dst:t==null?void 0:t.element,srcEl:e==null?void 0:e.element})},n.prototype.getFirstElementWithAModel=function(t){for(var e=function(r){return(0,Pr.default)(r).data("model")!==void 0};t&&this.containerContext.container.contains(t);){if(e(t))return t;t=t.parentElement}return null},n.prototype.getValidParent=function(t,e,r,o){if(t){var s=this.lastMoveData.targetNode,u=t.equals(s);if(t.nodeDimensions=u?s.nodeDimensions:this.getDim(t.element),!t.isWithinDropBounds(r,o))return this.handleParentTraversal(t,r,o);var c=u&&e===this.lastMoveData.index;if(c)return s;var f=this.sourceNodes.some(function(h){return t.canMove(h,e)});return this.triggerDragValidation(f,t),f?t:this.handleParentTraversal(t,r,o)}},n.prototype.handleParentTraversal=function(t,e,r){var o=t.getParent();if(o){var s=this.getIndexInParent(o,t,t.nodeDimensions,e,r);return this.getValidParent(o,s,e,r)}},n.prototype.getIndexInParent=function(t,e,r,o,s){var u=t==null?void 0:t.indexOfChild(e);return r.dir=this.getDirection(e.element,t.element),u=u+(r.determinePlacement(o,s)=="after"?1:0),u},n.prototype.triggerDragValidation=function(t,e){var r=this.sourceNodes[0];return this.em.trigger("sorter:drag:validation",{valid:t,src:r==null?void 0:r.element,srcModel:r==null?void 0:r.model,trg:e.element,trgModel:e.model}),r},n.prototype.cleanupEventListeners=function(){var t=this.containerContext.container;(0,Wt.AU)(t,"dragstart",this.onDragStart),(0,Wt.AU)(t,"mousemove dragover",this.onMove),(0,Wt.AU)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},n.prototype.getDirection=function(t,e){var r;return this.dragDirection===aa.A.Vertical?r=!0:this.dragDirection===aa.A.Horizontal?r=!1:r=yS(t,e),r},n.prototype.getChildrenDim=function(t){var e=this,r=[],o=t.element;if(!o)return[];var s=t.getChildren();return!s||s.length===0?[]:((0,k.each)(s,function(u,c){var f=u.element;if(f&&!(!(0,Wt.ir)(f)&&!pf(f,e.containerContext.itemSel))){var h=e.getDim(f);h.dir=e.getDirection(f,o),r.push(h)}}),r)},n.prototype.getMousePositionRelativeToContainer=function(t,e){var r=e-this.containerOffset.top+this.containerContext.container.scrollTop,o=t-this.containerOffset.left+this.containerContext.container.scrollLeft;if(this.positionOptions.canvasRelative){var s=this.em.Canvas.getMouseRelativeCanvas({clientX:t,clientY:e},{noScroll:1});o=s.x,r=s.y}return{mouseXRelative:o,mouseYRelative:r}},n.prototype.cacheContainerPosition=function(t){var e=Hp(t),r=this.positionOptions.windowMargin?Math.abs(e.top):e.top,o=this.positionOptions.windowMargin?Math.abs(e.left):e.left;this.containerOffset={top:r,left:o}},n.prototype.getDim=function(t){var e=this.em,r=this.positionOptions.relative,o=this.positionOptions.windowMargin,s=e==null?void 0:e.Canvas,u=s?s.getElementOffsets(t):{},c,f,h,g;if(this.positionOptions.canvasRelative&&this.em){var y=s.getElementPos(t,{noScroll:1});c=y.top,f=y.left,h=y.height,g=y.width}else{var _=Hp(t);c=r?t.offsetTop:_.top-(o?-1:1)*this.containerOffset.top,f=r?t.offsetLeft:_.left-(o?-1:1)*this.containerOffset.left,h=t.offsetHeight,g=t.offsetWidth}return new xS({top:c,left:f,height:h,width:g,offsets:u})},n}(Nt.Ss),TS=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),PS=function(a){TS(n,a);function n(t){var e=a.call(this)||this;return e.pfx=t.pfx||"",e.allowNesting=t.allowNesting||!1,e.container=t.container,e.setElement(t.el),e.offset={top:t.offset.top||0,left:t.offset.left||0},e.moveLimiter=new Ev(100),e}return n.prototype.show=function(){this.el.style.display="block"},n.prototype.hide=function(){this.moveLimiter.clearTimeout(),this.el.style.display="none"},n.prototype.move=function(t,e){var r=this,o={elementDimension:t,placement:e};this.moveLimiter.updateArgs(o),this.moveLimiter.execute(function(s){var u=s.elementDimension,c=s.placement;r._move(u,c)})},n.prototype._move=function(t,e){var r=0,o="px",s=0,u=0,c="",f="";this.setOrientationForDimension(t);var h=t.top,g=t.left,y=t.height,_=t.width,b=t.dir,x=t.offsets;if(e==="inside"){if(this.setOrientation("horizontal"),!this.allowNesting){this.hide();return}var T=5,I=(x==null?void 0:x.paddingTop)||T,z=(x==null?void 0:x.paddingLeft)||T,F=(x==null?void 0:x.borderTopWidth)||0,W=(x==null?void 0:x.borderLeftWidth)||0,ct=(x==null?void 0:x.borderRightWidth)||0,_t=W+ct;s=h+I+F,u=g+z+W,c=Math.max(_-z*2-_t,1)+"px",f="auto"}else b?(c=_+o,f="auto",s=e==="before"?h-r:h+y-r,u=g):(c="auto",f=y-r*2+o,s=h+r,u=e==="before"?g-r:g+_-r,this.setOrientation("vertical"));this.updateStyles(s,u,c,f),this.adjustOffset()},n.prototype.setOrientationForDimension=function(t){this.el.classList.remove("vertical"),this.el.classList.add("horizontal"),t&&!t.dir&&this.setOrientation("vertical")},n.prototype.setOrientation=function(t){this.el.classList.remove("horizontal"),this.el.classList.remove("vertical"),this.el.classList.add(t)},n.prototype.updateStyles=function(t,e,r,o){this.el.style.top=t+"px",this.el.style.left=e+"px",r&&(this.el.style.width=r),o&&(this.el.style.height=o)},n.prototype.adjustOffset=function(){this.$el.css("top","+="+this.offset.top+"px"),this.$el.css("left","+="+this.offset.left+"px")},n}(Nt.Ss),Xi=function(){return Xi=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Xi.apply(this,arguments)},ES=function(){function a(n){var t=bS(n);(0,k.bindAll)(this,"startSort","cancelDrag","recalculateTargetOnScroll","rollback","updateOffset","handlePlaceholderMove","finalizeMove"),this.containerContext=t.containerContext,this.positionOptions=t.positionOptions,this.dragBehavior=t.dragBehavior,this.eventHandlers=Xi(Xi({},t.eventHandlers),{onPlaceholderPositionChange:this.handlePlaceholderMove,onEnd:this.finalizeMove}),this.em=n.em,this.treeClass=n.treeClass,this.updateOffset(),this.em.on(this.em.Canvas.events.refresh,this.updateOffset),this.placeholder=this.createPlaceholder(),this.dropLocationDeterminer=new OS({em:this.em,treeClass:this.treeClass,containerContext:this.containerContext,positionOptions:this.positionOptions,dragDirection:this.dragBehavior.dragDirection,eventHandlers:this.eventHandlers})}return a.prototype.startSort=function(n){var t=this,e,r,o,s,u,c,f,h=n.filter(function(x){return!!x.dragSource||t.findValidSourceElement(x.element)}),g=h.map(function(x){var T;return{model:(T=(0,Pr.default)(x.element))===null||T===void 0?void 0:T.data("model"),content:x.dragSource}}),y=g.sort(function(x,T){return vS(x.model,T.model)}),_=y.map(function(x){return new t.treeClass(x.model,x.content)});this.sourceNodes=_,this.dropLocationDeterminer.startSort(_),this.bindDragEventHandlers(),(r=(e=this.eventHandlers).onStartSort)===null||r===void 0||r.call(e,this.sourceNodes,this.containerContext.container);var b=(o=this.sourceNodes[0])===null||o===void 0?void 0:o.model;(u=(s=this.eventHandlers).legacyOnStartSort)===null||u===void 0||u.call(s,{sorter:this,target:b,parent:b&&((c=b.parent)===null||c===void 0?void 0:c.call(b)),index:b&&((f=b.index)===null||f===void 0?void 0:f.call(b))}),this.em.trigger("sorter:drag:start",n[0],g[0])},a.prototype.recalculateTargetOnScroll=function(){this.dropLocationDeterminer.recalculateTargetOnScroll()},a.prototype.cancelDrag=function(){this.triggerNullOnEndMove(!0),this.dropLocationDeterminer.cancelDrag()},a.prototype.endDrag=function(){this.dropLocationDeterminer.endDrag()},a.prototype.handlePlaceholderMove=function(n,t){this.ensurePlaceholderElement(),this.updatePlaceholderPosition(n,t)},a.prototype.createPlaceholder=function(){return new PS({container:this.containerContext.container,allowNesting:this.dragBehavior.nested,pfx:this.containerContext.pfx,el:this.containerContext.placeholderElement,offset:{top:this.positionOptions.offsetTop,left:this.positionOptions.offsetLeft}})},a.prototype.ensurePlaceholderElement=function(){var n=this.placeholder.el,t=this.containerContext.container;n.ownerDocument.contains(n)||t.append(this.placeholder.el)},a.prototype.updateOffset=function(){var n,t=((n=this.em)===null||n===void 0?void 0:n.get("canvasOffset"))||{};this.positionOptions.offsetTop=t.top,this.positionOptions.offsetLeft=t.left},a.prototype.findValidSourceElement=function(n){return n&&!pf(n,"".concat(this.containerContext.itemSel,", ").concat(this.containerContext.containerSel))&&(n=gS(n,this.containerContext.itemSel)),n},a.prototype.bindDragEventHandlers=function(){(0,Wt.on)(this.containerContext.document,"keydown",this.rollback)},a.prototype.updatePlaceholderPosition=function(n,t){this.placeholder.move(n,t)},a.prototype.cleanupEventListeners=function(){(0,Wt.AU)(this.containerContext.document,"keydown",this.rollback)},a.prototype.finalizeMove=function(){this.cleanupEventListeners(),this.placeholder.hide(),delete this.sourceNodes},a.prototype.rollback=function(n){(0,Wt.AU)(this.containerContext.document,"keydown",this.rollback);var t="Escape";n.key===t&&this.cancelDrag()},a.prototype.triggerNullOnEndMove=function(n){var t,e,r,o,s,u=(t=this.sourceNodes)===null||t===void 0?void 0:t[0].model,c={target:u,parent:u&&((e=u.parent)===null||e===void 0?void 0:e.call(u)),index:u&&((r=u.index)===null||r===void 0?void 0:r.call(u))};(s=(o=this.eventHandlers).legacyOnEndMove)===null||s===void 0||s.call(o,null,this,Xi(Xi({},c),{cancelled:n}))},a}();const Av=ES;var AS=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zi=function(){return Zi=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Zi.apply(this,arguments)},kS=Ln.F.Target,mc={id:"sorter-target",type:kS},MS=function(a){AS(n,a);function n(t){var e=t.em,r=t.treeClass,o=t.containerContext,s=t.dragBehavior,u=t.positionOptions,c=u===void 0?{}:u,f=t.eventHandlers,h=f===void 0?{}:f,g=a.call(this,{em:e,treeClass:r,containerContext:o,positionOptions:c,dragBehavior:s,eventHandlers:Zi(Zi({},h),{onStartSort:function(y,_){var b;(b=h.onStartSort)===null||b===void 0||b.call(h,y,_),g.onStartSort()},onDrop:function(y,_,b){var x;(x=h.onDrop)===null||x===void 0||x.call(h,y,_,b),g.onDrop(y,_,b)},onTargetChange:function(y,_){var b;(b=h.onTargetChange)===null||b===void 0||b.call(h,y,_),g.onTargetChange(y,_)},onMouseMove:function(y){var _;(_=h.onMouseMove)===null||_===void 0||_.call(h,y),g.onMouseMove(y)}})})||this;return g.targetIsText=!1,g.onMouseMove=function(y){var _,b=g.targetIsText&&((_=g.sourceNodes)===null||_===void 0?void 0:_.some(function(x){return x.isTextable()}));b&&g.updateTextViewCursorPosition(y)},g.onDrop=function(y,_,b){var x=typeof b=="number"?b:-1;if(y&&_.length>0){var T=g.handleNodeAddition(y,_,x);T.length===0&&g.triggerNullOnEndMove(!1)}else g.triggerNullOnEndMove(!0);y==null||y.restNodeState(),g.placeholder.hide()},g.onTargetChange=function(y,_){var b;y==null||y.restNodeState();var x=g.em.Canvas;if(!_){g.placeholder.hide(),x.removeSpots(mc);return}_==null||_.setSelectedParentState(),g.targetIsText=_.isTextNode();var T=g.targetIsText&&((b=g.sourceNodes)===null||b===void 0?void 0:b.some(function(W){return W.isTextable()}));T?(_.setContentEditable(!0),g.placeholder.hide()):g.placeholder.show();var I=Ln.F.Select,z=Ln.F.Hover,F=Ln.F.Spacing;[I,z,F].forEach(function(W){return x.removeSpots({type:W})}),x.addSpot(Zi(Zi({},mc),{component:_.model}))},(0,k.bindAll)(g,"handleScrollEvent"),g}return n.prototype.onStartSort=function(){this.em.clearSelection(),this.setAutoCanvasScroll(!0)},n.prototype.bindDragEventHandlers=function(){this.em.on("frame:scroll",this.handleScrollEvent),a.prototype.bindDragEventHandlers.call(this)},n.prototype.cleanupEventListeners=function(){this.em.off("frame:scroll",this.handleScrollEvent),a.prototype.cleanupEventListeners.call(this)},n.prototype.handleScrollEvent=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=(t=e==null?void 0:e[0])===null||t===void 0?void 0:t.frame,s=this.em.Canvas.getCanvasView().frame===o;s&&this.recalculateTargetOnScroll()},n.prototype.handleNodeAddition=function(t,e,r){var o=this;return e.reduce(function(s,u){if(!t.canMove(u,r))return s;if(o.isPositionChanged(t,u,r)){var c=o.moveNode(t,u,r),f=c.index,h=c.addedNode;s.push(h),r=f}return r++,s},[])},n.prototype.isPositionChanged=function(t,e,r){var o=e.getParent(),s=o?o.indexOfChild(e):-1;(o==null?void 0:o.model.cid)===t.model.cid&&s<r&&r--;var u=(o==null?void 0:o.model.cid)===t.model.cid,c=s===r,f=this.targetIsText&&e.isTextable();return!(u&&c&&!f)},n.prototype.moveNode=function(t,e,r){var o=e.getParent();if(o){var s=o.indexOfChild(e);o.removeChildAt(s,{temporary:!0}),o.model.cid===t.model.cid&&s<r&&r--}var u=t.addChildAt(e,r,{action:"move-component"});return this.triggerEndMoveEvent(u),{addedNode:u,index:r}},n.prototype.triggerEndMoveEvent=function(t){var e,r,o,s,u,c;(r=(e=this.eventHandlers).legacyOnEndMove)===null||r===void 0||r.call(e,t.model,this,{target:t.model,parent:t.model&&((s=(o=t.model).parent)===null||s===void 0?void 0:s.call(o)),index:t.model&&((c=(u=t.model).index)===null||c===void 0?void 0:c.call(u))})},n.prototype.finalizeMove=function(){var t,e;(t=this.em)===null||t===void 0||t.Canvas.removeSpots(mc),(e=this.sourceNodes)===null||e===void 0||e.forEach(function(r){return r.restNodeState()}),this.setAutoCanvasScroll(!1),a.prototype.finalizeMove.call(this)},n.prototype.updateTextViewCursorPosition=function(t){var e=this.em;if(e){var r=e.Canvas,o=r.getDocument(),s=null,u=(0,Wt.G2)(t);if(o.caretPositionFromPoint){var c=o.caretPositionFromPoint(u.clientX,u.clientY);c&&(s=o.createRange(),s.setStart(c.offsetNode,c.offset))}else o.caretRangeFromPoint?s=o.caretRangeFromPoint(u.clientX,u.clientY):t.rangeParent&&(s=o.createRange(),s.setStart(t.rangeParent,t.rangeOffset));var f=r.getWindow().getSelection();r.getFrameEl().focus(),f==null||f.removeAllRanges(),s&&(f==null||f.addRange(s))}},n.prototype.setAutoCanvasScroll=function(t){var e=this.em,r=e==null?void 0:e.Canvas;r&&(t?r.startAutoscroll():r.stopAutoscroll())},n}(Av);const Bp=MS;var DS=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ql=function(){return ql=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ql.apply(this,arguments)},LS=function(a){DS(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{values:{}}},n.prototype.initialize=function(){var t=this.collection;this.prop=t==null?void 0:t.prop},n.prototype.getId=function(){return this.cid},n.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},n.prototype.getValues=function(t){t===void 0&&(t={});var e=this.get("values");return t.camelCase?Object.keys(e).reduce(function(r,o){return r[(0,Pt.camelCase)(o)]=e[o],r},{}):e},n.prototype.getLabel=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.getLayerLabel(this)},n.prototype.isSelected=function(){var t;return((t=this.prop)===null||t===void 0?void 0:t.getSelectedLayer())===this},n.prototype.select=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.selectLayer(this)},n.prototype.remove=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.removeLayer(this)},n.prototype.move=function(t){var e;return(e=this.prop)===null||e===void 0?void 0:e.moveLayer(this,t)},n.prototype.getStylePreview=function(t){var e;return t===void 0&&(t={}),(e=this.prop)===null||e===void 0?void 0:e.getStylePreview(this,t)},n.prototype.hasPreview=function(){var t;return!!(!((t=this.prop)===null||t===void 0)&&t.get("preview"))},n.prototype.upValues=function(t){return t===void 0&&(t={}),this.set("values",ql(ql({},this.getValues()),t))},n}(Nt.Kx);const za=LS;var jS=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kv=function(a){jS(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t,e){e===void 0&&(e={}),this.prop=e.prop},n}(Nt.pM);const ll=kv;kv.prototype.model=za;var VS=De(3161),IS=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),NS=function(a){IS(n,a);function n(t){return a.call(this,t)||this}return n.prototype.getChildren=function(){return this.model instanceof ll?this.model.models.map(function(t){return new n(t)}):null},n.prototype.getParent=function(){var t=this.model instanceof za?this.model.collection:null;return t?new n(t):null},n.prototype.addChildAt=function(t,e){if(this.model instanceof za)throw Error("Cannot add a layer model to another layer model");var r=this.model.add(t.model,{at:e});return new n(r)},n.prototype.removeChildAt=function(t){if(this.model instanceof za)throw Error("Cannot remove a layer model from another layer model");var e=this.model.at(t);e&&this.model.remove(e)},n.prototype.indexOfChild=function(t){return!(t.model instanceof za)||!(this.model instanceof ll)?-1:this.model.indexOf(t.model)},n.prototype.canMove=function(t,e){return this.model instanceof ll&&!!t.model},Object.defineProperty(n.prototype,"view",{get:function(){return this.model.view},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"element",{get:function(){var t;return(t=this.view)===null||t===void 0?void 0:t.el},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),n}(VS.$),RS=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xc=function(){return Xc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Xc.apply(this,arguments)},FS=function(a){RS(n,a);function n(t){var e=t.em,r=t.containerContext,o=t.dragBehavior,s=t.positionOptions,u=s===void 0?{}:s,c=t.eventHandlers,f=c===void 0?{}:c,h=a.call(this,{em:e,treeClass:NS,containerContext:r,positionOptions:u,dragBehavior:o,eventHandlers:Xc({onStartSort:function(g,y){var _;(_=f.onStartSort)===null||_===void 0||_.call(f,g,y),h.onLayerStartSort(g)},onDrop:function(g,y,_){var b;(b=f.onDrop)===null||b===void 0||b.call(f,g,y,_),h.onLayerDrop(g,y,_)},onEnd:function(){h.placeholder.hide()}},f)})||this;return h.onLayerStartSort=function(g){h.em.clearSelection();var y=g[0];h.em.trigger("sorter:drag:start",y==null?void 0:y.element,y==null?void 0:y.model),h.placeholder.show()},h.onLayerDrop=function(g,y,_){if(g){_=typeof _=="number"?_:-1;for(var b=0;b<y.length;b++){var x=y[b];if(g.canMove(x,b)){var T=x.getParent(),I=-1;T&&(I=T.indexOfChild(x),T.removeChildAt(I)),_=I<_?_-1:_,g.addChildAt(x,_)}}h.placeholder.hide()}},h}return n}(Av);const HS=FS;var BS=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zc=function(){return Zc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Zc.apply(this,arguments)},US=function(a){BS(n,a);function n(t){var e=a.call(this,t,"Utils")||this;return e.Sorter=Bp,e.Resizer=pS,e.Dragger=Fh.A,e.ComponentSorter=Bp,e.StyleManagerSorter=HS,e.helpers=Zc({},Pt),e}return n.prototype.destroy=function(){},n}(dn);const WS=US;var fn,Tn={},Yr={16:!1,18:!1,17:!1,91:!1},Mv="all",hi={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},Dv={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},hf=function(a){return Dv[a]||a.toUpperCase().charCodeAt(0)},sa=[];for(fn=1;fn<20;fn++)Dv["f"+fn]=111+fn;function ns(a,n){for(var t=a.length;t--;)if(a[t]===n)return t;return-1}function zS(a,n){if(a.length!=n.length)return!1;for(var t=0;t<a.length;t++)if(a[t]!==n[t])return!1;return!0}var KS={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function GS(a){for(fn in Yr)Yr[fn]=a[KS[fn]]}function $S(a){var n,t,e,r,o,s;if(n=a.keyCode,ns(sa,n)==-1&&sa.push(n),(n==93||n==224)&&(n=91),n in Yr){Yr[n]=!0;for(e in hi)hi[e]==n&&(Zr[e]=!0);return}if(GS(a),!!Zr.filter.call(this,a)&&n in Tn){for(s=vf(),r=0;r<Tn[n].length;r++)if(t=Tn[n][r],t.scope==s||t.scope=="all"){o=t.mods.length>0;for(e in Yr)(!Yr[e]&&ns(t.mods,+e)>-1||Yr[e]&&ns(t.mods,+e)==-1)&&(o=!1);(t.mods.length==0&&!Yr[16]&&!Yr[18]&&!Yr[17]&&!Yr[91]||o)&&t.method(a,t)===!1&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble&&(a.cancelBubble=!0))}}}function qS(a){var n=a.keyCode,t,e=ns(sa,n);if(e>=0&&sa.splice(e,1),(n==93||n==224)&&(n=91),n in Yr){Yr[n]=!1;for(t in hi)hi[t]==n&&(Zr[t]=!1)}}function YS(){for(fn in Yr)Yr[fn]=!1;for(fn in hi)Zr[fn]=!1}function Zr(a,n,t){var e,r;e=Lv(a),t===void 0&&(t=n,n="all");for(var o=0;o<e.length;o++)r=[],a=e[o].split("+"),a.length>1&&(r=jv(a),a=[a[a.length-1]]),a=a[0],a=hf(a),a in Tn||(Tn[a]=[]),Tn[a].push({shortcut:e[o],scope:n,method:t,key:e[o],mods:r})}function XS(a,n){var t,e,r=[],o,s,u;for(t=Lv(a),s=0;s<t.length;s++){if(e=t[s].split("+"),e.length>1&&(r=jv(e)),a=e[e.length-1],a=hf(a),n===void 0&&(n=vf()),!Tn[a])return;for(o=0;o<Tn[a].length;o++)u=Tn[a][o],u.scope===n&&zS(u.mods,r)&&(Tn[a][o]={})}}function ZS(a){return typeof a=="string"&&(a=hf(a)),ns(sa,a)!=-1}function JS(){return sa.slice(0)}function QS(a){var n=(a.target||a.srcElement).tagName;return!(n=="INPUT"||n=="SELECT"||n=="TEXTAREA")}for(fn in hi)Zr[fn]=!1;function tO(a){Mv=a||"all"}function vf(){return Mv||"all"}function eO(a){var n,t,e;for(n in Tn)for(t=Tn[n],e=0;e<t.length;)t[e].scope===a?t.splice(e,1):e++}function Lv(a){var n;return a=a.replace(/\s/g,""),n=a.split(","),n[n.length-1]==""&&(n[n.length-2]+=","),n}function jv(a){for(var n=a.slice(0,a.length-1),t=0;t<n.length;t++)n[t]=hi[n[t]];return n}function _c(a,n,t){a.addEventListener?a.addEventListener(n,t,!1):a.attachEvent&&a.attachEvent("on"+n,function(){t(window.event)})}Zr.setScope=tO;Zr.getScope=vf;Zr.deleteScope=eO;Zr.filter=QS;Zr.isPressed=ZS;Zr.getPressedKeyCodes=JS;Zr.unbind=XS;Zr.handlers=Tn;Zr.init=function(a){_c(a.document,"keydown",function(n){$S(n)}),_c(a.document,"keyup",qS),_c(a,"focus",YS)};const Ka=Zr;var rO=function(){return{defaults:{"core:undo":{keys:"⌘+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"⌘+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"⌘+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"⌘+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}}};const nO=rO;var oO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Up=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))};(0,Pt.hasWin)()&&Ka.init(window);var iO=function(a){oO(n,a);function n(t){var e=a.call(this,t,"Keymaps",nO())||this;return e.keymaster=Ka,e.keymaps={},e}return n.prototype.onLoad=function(){var t=this.config.defaults;for(var e in t){var r=t[e];this.add(e,r.keys,r.handler,r.opts||{})}},n.prototype.add=function(t,e,r,o){o===void 0&&(o={});var s=this.em,u=s.Commands,c=s.getEditor(),f=s.Canvas,h={id:t,keys:e,handler:r},g=this.keymaps[t];return g&&this.remove(t),this.keymaps[t]=h,Ka(e,function(y,_){var b={event:y,h:_},x=(0,k.isString)(r)?u.get(r):r,T=!s.isEditing()&&!c.Canvas.isInputFocused();if(T||o.force){o.prevent&&f.getCanvasView().preventDefault(y),(0,k.isFunction)(x)?x(c,0,b):u.runCommand(x,b);var I=[t,_.shortcut,y];s.trigger.apply(s,Up(["keymap:emit"],I,!1)),s.trigger.apply(s,Up(["keymap:emit:".concat(t)],I,!1))}},void 0),s.trigger("keymap:add",h),h},n.prototype.get=function(t){return this.keymaps[t]},n.prototype.getAll=function(){return this.keymaps},n.prototype.remove=function(t){var e=this.em,r=this.get(t);if(r)return delete this.keymaps[t],r.keys.split(", ").forEach(function(o){Ka.unbind(o.trim())}),e==null||e.trigger("keymap:remove",r),r},n.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach(function(e){return t.remove(e)}),Ka.handlers={},this},n.prototype.destroy=function(){this.removeAll(),this.keymaps={}},n}(dn);const aO=iO;var sO=function(){return{stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}}};const lO=sO;var uO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cO=function(a){uO(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},n.prototype.open=function(){this.set("open",!0)},n.prototype.close=function(){this.set("open",!1)},n}(zo.A);const fO=cO;var dO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yl=function(){return Yl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Yl.apply(this,arguments)},pO=function(a){dO(n,a);function n(t){var e=a.call(this,t)||this,r=e.model;return e.listenTo(r,"change:open",e.updateOpen),e.listenTo(r,"change:title",e.updateTitle),e.listenTo(r,"change:content",e.updateContent),e}return n.prototype.template=function(t){var e=t.pfx,r=t.ppfx,o=t.content,s=t.title;return'<div class="'.concat(e,"dialog ").concat(r,"one-bg ").concat(r,`two-color">
      <div class="`).concat(e,`header">
        <div class="`).concat(e,'title">').concat(s,`</div>
        <div class="`).concat(e,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(e,`content">
        <div id="`).concat(e,'c">').concat(o,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(e,'collector" style="display: none"></div>')},n.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},n.prototype.onClick=function(t){var e=this.config.backdrop;e&&t.target===this.el&&this.hide()},n.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},n.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},n.prototype.getTitle=function(t){return t===void 0&&(t={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),t.$?this.$title:this.$title.get(0)},n.prototype.updateContent=function(){var t=this.getContent(),e=t.children(),r=this.getCollector(),o=this.model.get("content");e.length&&r.append(e),t.empty().append(o)},n.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get("title"))},n.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},n.prototype.hide=function(){this.model.close()},n.prototype.show=function(){this.model.open()},n.prototype.updateAttr=function(t){var e=this,r=e.pfx,o=e.$el,s=e.el,u=[].slice.call(s.attributes).map(function(c){return c.name});o.removeAttr(u.join(" ")),o.attr(Yl(Yl({},t||{}),{class:"".concat(r,"container ").concat(t&&t.class||"").trim()}))},n.prototype.render=function(){var t=this.$el,e=this.model.toJSON();return e.pfx=this.pfx,e.ppfx=this.ppfx,t.html(this.template(e)),this.updateAttr(),this.updateOpen(),this},n}(jn);const hO=pO;var vO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gO=function(a){vO(n,a);function n(t){var e=a.call(this,t,"Modal",lO())||this;return e.model=new fO(e),e.model.on("change:open",function(r,o){t.trigger("modal:".concat(o?"open":"close"))}),e.model.on("change",(0,k.debounce)(function(){var r=e._evData(),o=e.config.custom;(0,k.isFunction)(o)&&o(r),t.trigger("modal",r)},0)),e}return n.prototype._evData=function(){var t=this,e=this.getTitle(),r=this.getContent(),o=this.model.attributes,s=o.open,u=o.attributes;return{open:s,attributes:u,title:(0,k.isString)(e)?(0,Wt.GZ)(e):e,content:(0,k.isString)(r)?(0,Wt.GZ)(r):r.get?r.get(0):r,close:function(){t.close()}}},n.prototype.postRender=function(t){var e=t.model.config.el||t.el,r=this.render();r&&(e==null||e.appendChild(r))},n.prototype.open=function(t){t===void 0&&(t={});var e=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set("attributes",e),this.model.open(),this.modal&&this.modal.updateAttr(e),this},n.prototype.close=function(){return this.model.close(),this},n.prototype.onceClose=function(t){return this.em.once("modal:close",t),this},n.prototype.onceOpen=function(t){return this.em.once("modal:open",t),this},n.prototype.isOpen=function(){return!!this.model.get("open")},n.prototype.setTitle=function(t){return this.model.set("title",t),this},n.prototype.getTitle=function(){return this.model.get("title")},n.prototype.setContent=function(t){return this.model.set("content"," "),this.model.set("content",t),this},n.prototype.getContent=function(){return this.model.get("content")},n.prototype.getContentEl=function(){var t;return(t=this.modal)===null||t===void 0?void 0:t.getContent().get(0)},n.prototype.getModel=function(){return this.model},n.prototype.render=function(){var t;if(!this.config.custom){var e=hO.extend(this.config.extend),r=this.modal&&this.modal.el;return this.modal=new e({el:r,model:this.model,config:this.config}),(t=this.modal)===null||t===void 0?void 0:t.render().el}},n.prototype.destroy=function(){var t;(t=this.modal)===null||t===void 0||t.remove()},n}(dn);const yO=gO;var Wp="sw-visibility",zp="export-template",Kp="open-sm",Gp="open-tm",$p="open-layers",qp="open-blocks",wc="fullscreen",bc="preview",mO=function(){return{stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:Wp,className:"fa fa-square-o",command:"core:component-outline",context:Wp,attributes:{title:"View components"}},{id:bc,className:"fa fa-eye",command:bc,context:bc,attributes:{title:"Preview"}},{id:wc,className:"fa fa-arrows-alt",command:wc,context:wc,attributes:{title:"Fullscreen"}},{id:zp,className:"fa fa-code",command:zp,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:Kp,className:"fa fa-paint-brush",command:Kp,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:Gp,className:"fa fa-cog",command:Gp,togglable:!1,attributes:{title:"Settings"}},{id:$p,className:"fa fa-bars",command:$p,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:qp,className:"fa fa-th-large",command:qp,togglable:!1,attributes:{title:"Open Blocks"}}]}]}};const _O=mO;var wO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bO=function(a){wO(n,a);function n(t,e){var r=a.call(this,t,e)||this;return r.get("buttons").length&&r.set("buttons",new Nv(r.module,r.get("buttons"))),r}return n.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(n.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this.get("active")},set:function(t){this.set("active",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),n}(zo.A);const Vv=bO;var CO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Iv=function(a){CO(n,a);function n(t,e){return a.call(this,t,e,Vv)||this}return n.prototype.deactivateAllExceptOne=function(t,e){this.forEach(function(r,o){r!==t&&(r.set("active",!1),e&&r.get("buttons").length&&r.get("buttons").deactivateAllExceptOne(t,e))})},n.prototype.deactivateAll=function(t,e){var r=t||"";this.forEach(function(o){o.get("context")==r&&o!==e&&o.set("active",!1,{fromCollection:!0})})},n.prototype.disableAllButtons=function(t){var e=t||"";this.forEach(function(r,o){r.get("context")==e&&r.set("disable",!0)})},n.prototype.disableAllButtonsExceptOne=function(t,e){this.forEach(function(r,o){r!==t&&(r.set("disable",!0),e&&r.get("buttons").length&&r.get("buttons").disableAllButtonsExceptOne(t,e))})},n}(pu);const Nv=Iv;Iv.prototype.model=Vv;var xO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),SO=function(a){xO(n,a);function n(t,e){var r=a.call(this,t,e)||this,o=r.get("buttons")||[];return r.buttons=new Nv(t,o),r}return n.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(n.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(t){this.set("buttons",t)},enumerable:!1,configurable:!0}),n}(zo.A);const Rv=SO;var OO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fv=function(a){OO(n,a);function n(t,e){return a.call(this,t,e,Rv)||this}return n}(pu);const TO=Fv;Fv.prototype.model=Rv;var PO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ji=function(){return Ji=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ji.apply(this,arguments)},EO=function(a){PO(n,a);function n(t){var e=a.call(this,t)||this,r=e,o=r.model,s=r.em,u=r.pfx,c=r.ppfx,f=o.className,h=o.attributes,g=h.command,y=h.listen;if(e.id=u+o.get("id"),e.activeCls="".concat(u,"active ").concat(c,"four-color"),e.disableCls="".concat(c,"disabled"),e.btnsVisCls="".concat(u,"visible"),e.className=u+"btn"+(f?" "+f:""),e.listenTo(o,"change",e.render),e.listenTo(o,"change:active updateActive",e.updateActive),e.listenTo(o,"checkActive",e.checkActive),e.listenTo(o,"change:bntsVis",e.updateBtnsVis),e.listenTo(o,"change:attributes",e.updateAttributes),e.listenTo(o,"change:className",e.updateClassName),e.listenTo(o,"change:disable",e.updateDisable),s&&(0,k.isString)(g)&&y){var _={fromListen:!0};e.listenTo(s,"run:".concat(g),function(){return o.set("active",!0,_)}),e.listenTo(s,"stop:".concat(g),function(){return o.set("active",!1,_)})}return s&&s.get&&(e.commands=s.get("Commands")),e}return n.prototype.tagName=function(){return this.model.get("tagName")},n.prototype.events=function(){return{click:"clicked"}},n.prototype.updateClassName=function(){var t=this,e=t.model,r=t.pfx,o=e.className,s=e.get("attributes").class,u="".concat(s||""," ").concat(r,"btn ").concat(o||"");this.$el.attr("class",u.trim())},n.prototype.updateAttributes=function(){var t=this,e=t.em,r=t.model,o=t.$el,s=r.get("attributes")||{},u=e&&e.t&&e.t("panels.buttons.titles.".concat(r.id));o.attr(s),u&&o.attr({title:u}),this.updateClassName()},n.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},n.prototype.updateActive=function(t,e,r){var o;r===void 0&&(r={});var s=this,u=s.model,c=s.commands,f=s.$el,h=s.activeCls,g=r.fromCollection,y=r.fromListen,_=u.get("context"),b=u.get("options"),x=u.command,T={};x&&(c&&(0,k.isString)(x)?T=c.get(x)||{}:(0,k.isFunction)(x)?T=c.create({run:x}):x!==null&&(0,k.isObject)(x)&&(T=c.create(x)),u.active?(!g&&((o=u.collection)===null||o===void 0||o.deactivateAll(_,u)),u.set("active",!0,{silent:!0}).trigger("checkActive"),!y&&c.runCommand(T,Ji(Ji({},b),{sender:u})),T.noStop&&u.set("active",!1)):(f.removeClass(h),!y&&c.stopCommand(T,Ji(Ji({},b),{sender:u,force:1}))))},n.prototype.updateDisable=function(){var t=this,e=t.disableCls,r=t.model,o=r.disable;this.$el[o?"addClass":"removeClass"](e)},n.prototype.checkActive=function(){var t=this,e=t.model,r=t.$el,o=t.activeCls;e.active?r.addClass(o):r.removeClass(o)},n.prototype.clicked=function(){var t=this.model;t.get("bntsVis")||t.disable||!t.command||this.toggleActive()},n.prototype.toggleActive=function(){var t=this,e=t.model,r=t.em,o=e.active,s=e.togglable;o&&!s||(e.active=!o,o?e.runDefaultCommand&&r.runDefault():e.stopDefaultCommand&&r.stopDefault())},n.prototype.render=function(){var t=this.model,e=t.get("label"),r=this.$el;return!t.get("el")&&r.empty(),this.updateAttributes(),e&&r.append(e),this.checkActive(),this.updateDisable(),this},n}(jn);const AO=EO;var kO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),MO=function(a){kO(n,a);function n(t){var e=a.call(this,{collection:t})||this;return e.listenTo(e.collection,"add",e.addTo),e.listenTo(e.collection,"reset remove",e.render),e.className=e.pfx+"buttons",e}return n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){var r=e||null,o=t.get("el"),s=new AO({el:o,model:t}),u=s.render().el;return r?r.appendChild(u):this.$el.append(u),u},n.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(r){return t.addToCollection(r,e)}),this.$el.append(e),this.$el.attr("class",(0,k.result)(this,"className")),this},n}(jn);const DO=MO;var LO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jc=function(){return Jc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Jc.apply(this,arguments)},jO=function(a){LO(n,a);function n(t){var e=a.call(this,{model:t,el:t.get("el")})||this;return e.className=e.pfx+"panel",e.id=e.pfx+t.get("id"),e.listenTo(t,"change:appendContent",e.appendContent),e.listenTo(t,"change:content",e.updateContent),e.listenTo(t,"change:visible",e.toggleVisible),t.view=e,e}return n.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},n.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},n.prototype.toggleVisible=function(){if(!this.model.get("visible")){this.$el.addClass("".concat(this.ppfx,"hidden"));return}this.$el.removeClass("".concat(this.ppfx,"hidden"))},n.prototype.attributes=function(){return this.model.get("attributes")},n.prototype.initResize=function(){var t=this.em,e=t==null?void 0:t.Editor,r=this.model.get("resizable");if(e&&r){var o=r===!0?[!0,!0,!0,!0]:r,s=o.length,u=void 0,c=void 0,f=void 0,h=!1;if(s==2){var g=o;u=g[0],f=g[0],c=g[1],h=g[1]}else if(s==4){var g=o;u=g[0],c=g[1],f=g[2],h=g[3]}var y=new e.Utils.Resizer(Jc({tc:u,cr:c,bc:f,cl:h,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:e.getConfig().stylePrefix,onEnd:function(){t.Canvas.refresh({all:!0})},posFetcher:function(_,b){var x=b.target,T=_.style,I=y.getConfig(),z=I.keyWidth,F=I.keyHeight,W=_.getBoundingClientRect(),ct=x=="container",_t=T[z],xt=T[F],ut=_t&&!ct?parseFloat(_t):W.width,q=xt&&!ct?parseFloat(xt):W.height;return{left:0,top:0,width:ut,height:q}}},r&&typeof r!="boolean"?r:{}));y.blur=function(){},y.focus(this.el)}},n.prototype.render=function(){var t=this.model.buttons,e=this.$el,r=this.ppfx,o="".concat(this.className," ").concat(this.id," ").concat(r,"one-bg ").concat(r,"two-color");if(e.addClass(o),this.toggleVisible(),t.length){var s=new DO(t);e.append(s.render().el)}return e.append(this.model.get("content")),this},n}(jn);const VO=jO;var IO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),NO=function(a){IO(n,a);function n(t){var e=a.call(this,{collection:t})||this;return e.listenTo(t,"add",e.addTo),e.listenTo(t,"reset",e.render),e.listenTo(t,"remove",e.onRemove),e.className=e.pfx+"panels",e}return n.prototype.onRemove=function(t){var e=t.view;e&&e.remove()},n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){var r=e||null,o=t.get("el"),s=new VO(t),u=s.render().el,c=t.get("appendTo");if(!o)if(c){var f=document.querySelector(c);f==null||f.appendChild(u)}else r?r.appendChild(u):this.$el.append(u);return s.initResize(),u},n.prototype.render=function(){var t=this,e=this.$el,r=document.createDocumentFragment();return e.empty(),this.collection.each(function(o){return t.addToCollection(o,r)}),e.append(r),e.attr("class",this.className),this},n}(jn);const RO=NO;var FO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),HO=function(a){FO(n,a);function n(t){var e=a.call(this,t,"Panels",_O())||this;return e.panels=new TO(e,e.config.defaults),e}return n.prototype.getPanels=function(){return this.panels},n.prototype.getPanelsEl=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0?void 0:t.el},n.prototype.addPanel=function(t){return this.panels.add(t)},n.prototype.removePanel=function(t){return this.panels.remove(t)},n.prototype.getPanel=function(t){var e=this.panels.where({id:t});return e.length?e[0]:null},n.prototype.addButton=function(t,e){var r=this.getPanel(t);return r?r.buttons.add(e):null},n.prototype.removeButton=function(t,e){var r=this.getPanel(t);return r&&r.buttons.remove(e)},n.prototype.getButton=function(t,e){var r=this.getPanel(t);if(r){var o=r.buttons.where({id:e});return o.length?o[0]:null}return null},n.prototype.render=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0||t.remove(),this.PanelsViewObj=new RO(this.panels),this.PanelsViewObj.render().el},n.prototype.active=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("active")&&e.trigger("updateActive")})})},n.prototype.disableButtons=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("disable")&&e.trigger("change:disable")})})},n.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},n}(dn);const BO=HO;var UO=function(){return{stylePrefix:"cm-",optsCodeViewer:{}}};const WO=UO;var zO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),KO=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},GO=function(a){zO(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.build=function(t,e){e===void 0&&(e={});var r=e.em,o=KO(e,["em"]),s=o;if(e.cleanId&&r){var u=r.Css.getAll(),c=u.toJSON().map(function(f){var h=f.selectors,g=h&&h.length===1&&h.models[0];return g&&g.isId()&&g.get("name")}).filter(Boolean);s.attributes||(s.attributes=function(f,h){var g=h.id;return g&&g[0]==="i"&&!f.get("script")&&!f.get("script-export")&&!f.get("attributes").id&&c.indexOf(g)<0&&delete h.id,h})}return t.toHTML(s)},n}(Nt.Kx);const $O=GO;var qO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),YO=function(a){qO(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.build=function(t){var e=this,r=t.toJSON();return this.beforeEach(r),(0,k.each)(r,function(o,s){var u=r[s];if(u instanceof Nt.Kx)r[s]=e.build(u);else if(u instanceof Nt.pM){var c=u;r[s]=[],c.length&&c.forEach(function(f,h){r[s][h]=e.build(f)})}}),r},n.prototype.beforeEach=function(t){delete t.status},n}(Nt.Kx);const XO=YO;var ZO=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();function JO(a){var n,t=((n=a.toString().match(/\{([\s\S]*)\}/m))===null||n===void 0?void 0:n[1])||"";return t.replace(/^\s*\/\/.*$/gm,"").trim().length===0}var QO=function(a){ZO(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.mapModel=function(t){var e,r=this,o="",s=t.get("script-export")||t.get("script"),u=t.get("type"),c=t.get("components"),f=t.getId();if(s){var h=t.get("attributes");h=(0,k.extend)({},h,{id:f}),t.set("attributes",h,{silent:!0});var g=t.getScriptString(s),y=t.get("script-props");if(t.get("scriptUpdated")&&!y)this.mapJs[u+"-"+f]={ids:[f],code:g};else{var _=void 0,b=this.mapJs[u];if(y&&(_=t.__getScriptProps()),b)b.ids.push(f),_&&(b.props[f]=_);else{var x={ids:[f],code:g};_&&(x.props=(e={},e[f]=_,e)),this.mapJs[u]=x}}}return c.forEach(function(T){o+=r.mapModel(T)}),o},n.prototype.build=function(t){this.mapJs={},this.mapModel(t);var e="";for(var r in this.mapJs){var o=this.mapJs[r];if(o.code)if(o.props){if(JO(o.code))continue;e+=`
          var props = `.concat(JSON.stringify(o.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(o.code,`.bind(el))(props[el.id]);
          }`)}else{var s="#"+o.ids.join(", #");e+=`
          var items = document.querySelectorAll('`.concat(s,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(o.code,`
}.bind(items[i]))();
          }`)}}return e},n}(Nt.Kx);const t1=QO;var e1=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qc=function(){return Qc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Qc.apply(this,arguments)},os;(0,Pt.hasWin)()&&(os=De(4408),De(8253),De(7389),De(3640));var Hv=function(a){e1(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},n.prototype.init=function(t){return(0,k.bindAll)(this,"onChange"),this.editor=os.fromTextArea(t,Qc({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=t,this.editor.on("change",this.onChange),this},n.prototype.onChange=function(){this.trigger("update",this)},n.prototype.getEditor=function(){return this.editor},n.prototype.getElement=function(){return this.element},n.prototype.setElement=function(t){return this.element=t,this},n.prototype.refresh=function(){return this.getEditor().refresh(),this},n.prototype.focus=function(){return this.getEditor().focus(),this},n.prototype.getContent=function(){var t=this.getEditor();return t&&t.getValue()},n.prototype.setContent=function(t,e){var r=this;e===void 0&&(e={});var o=this.editor;if(o){o.setValue(t);var s=this.get("autoFormat"),u=o.autoFormatRange&&(s===!0||Array.isArray(s)&&s.includes(this.get("codeName")));u&&(os.commands.selectAll(o),o.autoFormatRange(o.getCursor(!0),o.getCursor(!1)),os.commands.goDocStart(o)),!e.noRefresh&&setTimeout(function(){return r.refresh()})}},n}(Nt.Kx);const r1=Hv;Hv.prototype.CodeMirror=os;var n1=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),o1=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},i1=function(a){n1(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.template=function(t){var e=t.pfx,r=t.codeName,o=t.label;return cn(Yp||(Yp=o1([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),e,e,r,e,o,e)},n.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},n.prototype.render=function(){var t,e,r=this,o=r.model,s=r.pfx,u=r.$el,c=o.toJSON(),f=o.get("input")||((e=(t=o).getElement)===null||e===void 0?void 0:e.call(t));return c.pfx=s,u.html(this.template(c)),u.attr("class","".concat(s,"editor-c")),u.find("#".concat(s,"code")).append(f),this},n}(Nt.Ss);const a1=i1;var Yp,s1=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xl=function(){return Xl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Xl.apply(this,arguments)},l1="CodeMirror",u1=function(a){s1(n,a);function n(t){var e=a.call(this,t,"CodeManager",WO())||this;e.EditorView=a1;var r=e.config,o=r.pStylePrefix;return o&&(r.stylePrefix=o+r.stylePrefix),e.generators={},e.viewers={},e.defGenerators={html:new $O,css:new ab,json:new XO,js:new t1},e.defViewers={CodeMirror:new r1},e.loadDefaultGenerators().loadDefaultViewers(),e}return n.prototype.addGenerator=function(t,e){return this.generators[t]=e,this},n.prototype.getGenerator=function(t){return this.generators[t]},n.prototype.getGenerators=function(){return this.generators},n.prototype.addViewer=function(t,e){return this.viewers[t]=e,this},n.prototype.getViewer=function(t){return this.viewers[t]},n.prototype.getViewers=function(){return this.viewers},n.prototype.createViewer=function(t){t===void 0&&(t={});var e=(0,k.isUndefined)(t.type)?l1:t.type,r=this.getViewer(e)&&this.getViewer(e).clone(),o=document.createElement("div"),s=document.createElement("textarea");return o.appendChild(s),r.set(Xl(Xl({},this.config.optsCodeViewer),t)),r.init(s),r.setElement(o),r},n.prototype.updateViewer=function(t,e){t.setContent(e)},n.prototype.getCode=function(t,e,r){r===void 0&&(r={}),r.em=this.em;var o=this.getGenerator(e);return o?o.build(t,r):""},n.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},n.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},n.prototype.destroy=function(){},n}(dn);const c1=u1;var f1=De(4729),d1=De.n(f1),p1=function(){return{maximumStackLength:500,trackSelection:!0}};const h1=p1;var v1=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fo=function(){return fo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},fo.apply(this,arguments)},g1=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},rl=function(a){return a.avoidStore||a.noUndo||a.partial},Xp=function(a){return Object.keys(a.changedAttributes())},nl=new WeakMap,y1=function(a){v1(n,a);function n(t){var e=a.call(this,t,"UndoManager",h1())||this;e.config._disable&&(e.config.maximumStackLength=0);var r=!0;return e.um=new(d1())(fo({track:!0,register:[]},e.config)),e.um.changeUndoType("change",{condition:function(o){var s=o.get("_undo");if(s){var u=o.get("_undoexc");if((0,k.isArray)(u)&&Xp(o).some(function(c){return u.indexOf(c)>=0}))return!1;if((0,k.isBoolean)(s)||(0,k.isArray)(s)&&Xp(o).some(function(c){return s.indexOf(c)>=0}))return!0}return!1},on:function(o,s,u){var c=nl.get(o);c||(c=o.previousAttributes(),nl.set(o,c));var f=u||s||{};if(f.noUndo&&setTimeout(function(){nl.delete(o)}),!rl(f)){var h=o.toJSON({fromUndo:r}),g={object:o,before:c,after:h};return nl.delete(o),(0,k.isEmpty)(h)?void 0:g}}}),e.um.changeUndoType("add",{on:function(o,s,u){if(u===void 0&&(u={}),!(rl(u)||!e.isRegistered(s)))return{object:s,before:void 0,after:o,options:fo(fo({},u),{fromUndo:r})}}}),e.um.changeUndoType("remove",{on:function(o,s,u){if(u===void 0&&(u={}),!(rl(u)||!e.isRegistered(s)))return{object:s,before:o,after:void 0,options:fo(fo({},u),{fromUndo:r})}}}),e.um.changeUndoType("reset",{undo:function(o,s){o.reset(s,{fromUndo:r})},redo:function(o,s,u){o.reset(u,{fromUndo:r})},on:function(o,s){if(s===void 0&&(s={}),!(rl(s)||!e.isRegistered(o)))return{object:o,before:s.previousModels,after:g1([],o.models,!0),options:fo(fo({},s),{fromUndo:r})}}}),e.um.on("undo redo",function(){t.getSelectedAll().map(function(o){return o.trigger("rerender:layer")})}),["undo","redo"].forEach(function(o){return e.um.on(o,function(){return t.trigger(o)})}),e}return n.prototype.postLoad=function(){var t=this,e=t.config,r=t.em;e.trackSelection&&r&&this.add(r.get("selected"))},n.prototype.add=function(t){return this.um.register(t),this},n.prototype.remove=function(t){return this.um.unregister(t),this},n.prototype.removeAll=function(){return this.um.unregisterAll(),this},n.prototype.start=function(){return this.um.startTracking(),this},n.prototype.stop=function(){return this.um.stopTracking(),this},n.prototype.undo=function(t){t===void 0&&(t=!0);var e=this,r=e.em,o=e.um;return!r.isEditing()&&o.undo(t),this},n.prototype.undoAll=function(){return this.um.undoAll(),this},n.prototype.redo=function(t){t===void 0&&(t=!0);var e=this,r=e.em,o=e.um;return!r.isEditing()&&o.redo(t),this},n.prototype.redoAll=function(){return this.um.redoAll(),this},n.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},n.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},n.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},n.prototype.getStack=function(){return this.um.stack},n.prototype.getStackGroup=function(){var t=[],e=[];return this.getStack().forEach(function(r){var o=r.get("magicFusionIndex");e.indexOf(o)<0&&(e.push(o),t.push(r))}),t},n.prototype.skip=function(t){var e=!!this.um.isTracking();e&&this.stop(),t(),e&&this.start()},n.prototype.getGroupedStack=function(){var t={},e=this.getStack(),r=function(o,s){var u=o.attributes,c=u.type,f=u.after,h=u.before,g=u.object,y=u.options,_=y===void 0?{}:y;return{index:s,type:c,after:f,before:h,object:g,options:_}};return e.forEach(function(o,s){var u=o.get("magicFusionIndex"),c=r(o,s);t[u]?t[u].push(c):t[u]=[c]}),Object.keys(t).map(function(o){var s=t[o];return{index:s[s.length-1].index,actions:s,labels:(0,k.unique)(s.reduce(function(u,c){var f,h=(f=c.options)===null||f===void 0?void 0:f.action;return h&&u.push(h),u},[]))}})},n.prototype.goToGroup=function(t){var e=this;if(t){var r=this.getPointer(),o=t.index-r;(0,k.times)(Math.abs(o),function(){e[o<0?"undo":"redo"](!1)})}},n.prototype.getPointer=function(){return this.getStack().pointer},n.prototype.clear=function(){return this.um.clear(),this},n.prototype.getInstance=function(){return this.um},n.prototype.destroy=function(){this.clear().removeAll()},n}(dn);const m1=y1;var _1=function(){return{stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1}};const w1=_1;var Qi=function(){return Qi=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Qi.apply(this,arguments)},Zl;(function(a){a[a.ACTIVE=1]="ACTIVE",a[a.INACTIVE=0]="INACTIVE",a[a.DISABLED=-1]="DISABLED"})(Zl||(Zl={}));var Cc="_rte",fi={ACTIVE:1,INACTIVE:0,DISABLED:-1},ol=function(a,n){n===void 0&&(n="A");var t=a.selection()||{},e=t.anchorNode,r=t.focusNode,o=e==null?void 0:e.parentNode,s=r==null?void 0:r.parentNode;return(o==null?void 0:o.nodeName)==n||(s==null?void 0:s.nodeName)==n},Jl="data-selectme",Ua={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(a){return a.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(a){return a.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(a){return a.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(a){return a.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(a){return a&&a.selection()&&ol(a)?fi.ACTIVE:fi.INACTIVE},result:function(a){ol(a)?a.exec("unlink"):a.insertHTML('<a href="" '.concat(Jl,">").concat(a.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(a){return a!=null&&a.selection()&&ol(a,"SPAN")?fi.DISABLED:fi.INACTIVE},result:function(a){!ol(a,"SPAN")&&a.insertHTML("<span ".concat(Jl,">").concat(a.selection(),"</span>"),{select:!0})}}},b1=function(){function a(n,t,e){e===void 0&&(e={});var r=this;if(this.em=n,this.settings=e,t[Cc])return t[Cc];t[Cc]=this,this.setEl(t),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var o=(e.actions||[]).map(function(h){var g=h;return(0,k.isString)(h)?g=Qi({},Ua[h]):Ua[h.name]&&(g=Qi(Qi({},Ua[h.name]),h)),g}),s=o.length?o:Object.keys(Ua).map(function(h){return Ua[h]});e.classes=Qi({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},e.classes);var u=e.classes,c=e.actionbar;if(this.actionbar=c,this.classes=u,this.actions=s,!c){if(!this.isCustom(e.module)){var f=e.actionbarContainer;c=document.createElement("div"),c.className=u.actionbar,f==null||f.appendChild(c),this.actionbar=c}s.forEach(function(h){return r.addAction(h)})}return e.styleWithCSS&&this.exec("styleWithCSS"),this}return a.prototype.isCustom=function(n){var t=n||this.em.RichTextEditor;return!!(t!=null&&t.config.custom||t!=null&&t.customRte)},a.prototype.destroy=function(){},a.prototype.setEl=function(n){this.el=n,this.doc=n.ownerDocument},a.prototype.updateActiveActions=function(){var n=this,t=this.getActions();t.forEach(function(e){var r=e.update,o=e.btn,s=n.classes,u=s.active,c=s.inactive,f=s.disabled,h=e.state,g=e.name,y=n.doc,_=Zl.INACTIVE;if(o&&(o.className=o.className.replace(u,"").trim(),o.className=o.className.replace(c,"").trim(),o.className=o.className.replace(f,"").trim()),h){var b=h(n,y);if(_=b,o)switch(b){case fi.ACTIVE:o.className+=" ".concat(u);break;case fi.INACTIVE:o.className+=" ".concat(c);break;case fi.DISABLED:o.className+=" ".concat(f);break}}else y.queryCommandSupported(g)&&y.queryCommandState(g)&&(o&&(o.className+=" ".concat(u)),_=Zl.ACTIVE);e.currentState=_,r==null||r(n,e)}),t.length&&this.em.RichTextEditor.__dbdTrgCustom()},a.prototype.enable=function(n){return this.enabled?this:this.__toggleEffects(!0,n)},a.prototype.disable=function(){return this.__toggleEffects(!1)},a.prototype.__toggleEffects=function(n,t){n===void 0&&(n=!1),t===void 0&&(t={});var e=n?Wt.on:Wt.AU,r=this,o=r.el,s=r.doc,u=this.actionbarEl();if(u&&(u.style.display=n?"":"none"),o.contentEditable="".concat(!!n),e(o,"mouseup keyup",this.updateActiveActions),e(s,"keydown",this.__onKeydown),e(s,"paste",this.__onPaste),this.enabled=n,n){var c=t.event;if(this.syncActions(),this.updateActiveActions(),c){var f=null;if(s.caretRangeFromPoint){var h=(0,Wt.G2)(c);f=s.caretRangeFromPoint(h.clientX,h.clientY)}else c.rangeParent&&(f=s.createRange(),f.setStart(c.rangeParent,c.rangeOffset));var g=s.getSelection();g==null||g.removeAllRanges(),f&&(g==null||g.addRange(f))}o.focus()}return this},a.prototype.__onKeydown=function(n){var t=this.em,e=t.RichTextEditor.getConfig().onKeydown;if(e)return e({ev:n,rte:this,editor:t.getEditor()});var r=this.doc,o=["insertOrderedList","insertUnorderedList"];n.key==="Enter"&&!o.some(function(s){return r.queryCommandState(s)})&&(r.execCommand("insertLineBreak"),n.preventDefault())},a.prototype.__onPaste=function(n){var t=this.em,e=t.RichTextEditor.getConfig().onPaste;if(e)return e({ev:n,rte:this,editor:t.getEditor()});var r=n.clipboardData,o=r.getData("text"),s=r.getData("text/html");if(o&&!s){n.preventDefault();var u=o.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,u)}},a.prototype.syncActions=function(){var n=this;this.getActions().forEach(function(t){if(n.actionbar&&(!t.state||t.state&&t.state(n,n.doc)>=0)){var e=t.event||"click",r=t.btn;r&&(r["on".concat(e)]=function(){t.result(n,t),n.updateActiveActions()})}})},a.prototype.addAction=function(n,t){t===void 0&&(t={});var e=t.sync,r=this.actionbarEl();if(r){var o=n.icon,s=n.attributes,u=s===void 0?{}:s,c=document.createElement("span");c.className=this.classes.button,n.btn=c;for(var f in u)c.setAttribute(f,u[f]);typeof o=="string"?c.innerHTML=o:c.appendChild(o),r.appendChild(c)}e&&(this.actions.push(n),this.syncActions())},a.prototype.getActions=function(){return this.actions},a.prototype.selection=function(){return this.doc.getSelection()},a.prototype.exec=function(n,t){this.doc.execCommand(n,!1,t)},a.prototype.actionbarEl=function(){return this.actionbar},a.prototype.insertHTML=function(n,t){var e=t===void 0?{}:t,r=e.select,o=this,s=o.em,u=o.doc,c=o.el,f=u.getSelection();if(f&&f.rangeCount){var h=(0,Pt.getComponentModel)(c)||s.getSelected(),g=u.createElement("div"),y=f.getRangeAt(0);y.deleteContents(),(0,k.isString)(n)?g.innerHTML=n:n&&g.appendChild(n),Array.prototype.slice.call(g.childNodes).forEach(function(_){y.insertNode(_)}),f.removeAllRanges(),f.addRange(y),c.focus(),r&&h&&(h.once("rte:disable",function(){var _=h.find("[".concat(Jl,"]"))[0];_&&(s.setSelected(_),_.removeAttributes(Jl))}),h.trigger("disable"))}},a}();const C1=b1;var x1=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zp=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{f(e.next(h))}catch(g){s(g)}}function c(h){try{f(e.throw(h))}catch(g){s(g)}}function f(h){h.done?o(h.value):r(h.value).then(u,c)}f((e=e.apply(a,n||[])).next())})},Jp=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(e=1,r&&(o=f[0]&2?r.return:f[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,f[1])).done)return o;switch(r=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=n.call(a,t)}catch(h){f=[6,h],r=0}finally{e=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},S1=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},xc="".concat(il.refresh," frame:scroll ").concat(Sr.I.update),O1="rte:enable",T1="rte:disable",P1="rte:custom",E1={enable:O1,disable:T1,custom:P1},A1=function(a){x1(n,a);function n(t){var e=a.call(this,t,"RichTextEditor",w1())||this;e.events=E1;var r=e.config,o=r.pStylePrefix;o&&(r.stylePrefix=o+r.stylePrefix),e.pfx=r.stylePrefix,e.actions=r.actions||[];var s=new Nt.Kx;return e.model=s,s.on("change:currentView",e.__trgCustom,e),e.__dbdTrgCustom=(0,k.debounce)(function(){return e.__trgCustom()},0),e}return n.prototype.onLoad=function(){if((0,Pt.hasWin)()){var t=this.config,e=t.pStylePrefix,r=t.custom,o=(0,Wt.a_)("div",{class:(0,Wt.cx)("".concat(e,"rte-toolbar"),!r&&"".concat(e,"one-bg ").concat(e,"rte-toolbar-ui"))});this.toolbar=o,this.initRte((0,Wt.a_)("div")),(0,Wt.on)(o,"mousedown",function(s){return s.stopPropagation()})}},n.prototype.__trgCustom=function(){var t=this,e=t.model,r=t.em,o=t.events;r.trigger(o.custom,{enabled:!!e.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},n.prototype.destroy=function(){var t,e,r;(t=this.globalRte)===null||t===void 0||t.destroy(),(r=(e=this.customRte)===null||e===void 0?void 0:e.destroy)===null||r===void 0||r.call(e),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,Wt.YZ)(this.toolbar)},n.prototype.postRender=function(t){var e=t.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),e.getToolsEl().appendChild(this.toolbar)},n.prototype.initRte=function(t){var e=this.globalRte,r=this,o=r.em,s=r.pfx,u=r.actionbar,c=r.config,f=this.actions||S1([],c.actions,!0),h={actionbar:"".concat(s,"actionbar"),button:"".concat(s,"action"),active:"".concat(s,"active"),inactive:"".concat(s,"inactive"),disabled:"".concat(s,"disabled")};return e?(e.em=o,e.setEl(t)):(e=new C1(o,t,{classes:h,actions:f,actionbar:u,actionbarContainer:this.toolbar,module:this}),this.globalRte=e),e.actionbar&&(this.actionbar=e.actionbar),e.actions&&(this.actions=e.actions),e},n.prototype.add=function(t,e){var r;e===void 0&&(e={}),e.name=t,(r=this.globalRte)===null||r===void 0||r.addAction(e,{sync:!0})},n.prototype.get=function(t){var e,r;return(e=this.globalRte)===null||e===void 0||e.getActions().forEach(function(o){o.name==t&&(r=o)}),r},n.prototype.getAll=function(){var t;return((t=this.globalRte)===null||t===void 0?void 0:t.getActions())||[]},n.prototype.remove=function(t){var e,r=this.getAll(),o=this.get(t);if(o){var s=o.btn,u=r.indexOf(o);(e=s==null?void 0:s.parentNode)===null||e===void 0||e.removeChild(s),r.splice(u,1)}return o},n.prototype.run=function(t){var e=this.globalRte,r=(0,k.isString)(t)?this.get(t):t;e&&r&&(r.result(e,r),e.updateActiveActions())},n.prototype.getToolbarEl=function(){return this.toolbar},n.prototype.updatePosition=function(){var t=this,e=t.em,r=t.toolbar,o="px",s=e.Canvas,u=r.style,c=s.getTargetToElementFixed(this.lastEl,r,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(f){var h=c[f];(0,Pt.isDef)(h)&&(u[f]=(0,k.isString)(h)?h:(h||0)+o)})},n.prototype.enable=function(t,e){return Zp(this,arguments,void 0,function(r,o,s){var u,c,f,h,g;return s===void 0&&(s={}),Jp(this,function(y){switch(y.label){case 0:return this.lastEl=r.el,u=this,c=u.customRte,f=u.em,h=r.getChildrenContainer(),this.toolbar.style.display="",[4,c?c.enable(h,o):this.initRte(h).enable(s)];case 1:return g=y.sent(),f&&(setTimeout(this.updatePosition.bind(this),0),f.off(xc,this.updatePosition,this),f.on(xc,this.updatePosition,this),f.trigger("rte:enable",r,g)),this.model.set({currentView:r}),[2,g]}})})},n.prototype.getContent=function(t,e){return Zp(this,void 0,void 0,function(){var r;return Jp(this,function(o){switch(o.label){case 0:return r=this.customRte,r&&e&&(0,k.isFunction)(r.getContent)?[4,r.getContent(t.el,e)]:[3,2];case 1:return[2,o.sent()];case 2:return[2,t.getChildrenContainer().innerHTML]}})})},n.prototype.hideToolbar=function(){var t=this.toolbar.style,e="-1000px";t.top=e,t.left=e,t.display="none"},n.prototype.disable=function(t,e,r){r===void 0&&(r={});var o=this.em,s=this.customRte,u=t.getChildrenContainer();s?s.disable(u,e):e&&e.disable(),this.hideToolbar(),o&&(o.off(xc,this.updatePosition,this),!r.fromMove&&o.trigger("rte:disable",t,e)),this.model.unset("currentView")},n}(dn);const k1=A1;var M1=function(){return{sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]}};const D1=M1;var L1=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qr=function(){return qr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},qr.apply(this,arguments)},j1=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Qp=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},gf=function(a){L1(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.getDefaults=function(){return(0,k.result)(this.prototype,"defaults")},n.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.em=e.em;var r=this.getId()||"",o=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(o||r).replace(/ /g,"-"));var s=this.get("property");!this.get("id")&&this.set("id",s),!o&&this.set("name",(0,Pt.capitalize)(s).replace(/-/g," ")),this.on("change",this.__upTargets),n.callInit(this,t,e)},n.prototype.__getParentProp=function(){var t,e;return(e=(t=this.collection)===null||t===void 0?void 0:t.opts)===null||e===void 0?void 0:e.parentProp},n.prototype.__upTargets=function(t,e){var r,o=this;e===void 0&&(e={});var s=this.em,u=s.Styles,c=this.getName(),f=e.__clear,h=f?"":this.__getFullValue(e),g=this.__getParentProp(),y=this.changedAttributes(),_=(0,k.keys)(y).reduce(function(F,W){return F[W]=o.previous(W),F},{}),b=Qp(Qp([],(0,k.keys)(this.__getClearProps()),!0),["__p"],!1),x=(0,k.keys)(y),T=!e.__up&&!g&&(f||b.some(function(F){return x.indexOf(F)>=0})),I=this.get("onChange"),z={property:this,from:_,to:y,value:h,opts:e};u.__trgEv(u.events.propertyUpdate,z),I&&I(z),T&&this.__upTargetsStyle((r={},r[c]=h,r),e)},n.prototype.__upTargetsStyle=function(t,e){var r,o=(r=this.em)===null||r===void 0?void 0:r.get("StyleManager");o==null||o.addStyleTargets(qr(qr({},t),{__p:!!e.avoidStore}),e)},n.prototype._up=function(t,e){e===void 0&&(e={}),e.noTarget&&(e.__up=!0);var r=e.partial,o=j1(e,["partial"]);return t.__p=!!(o.avoidStore||r),this.set(t,qr(qr({},o),{avoidStore:t.__p}))},n.prototype.up=function(t,e){e===void 0&&(e={}),this.set(t,qr(qr({},e),{__up:!0}))},n.prototype.init=function(){},n.prototype.getId=function(){return this.get("id")},n.prototype.getType=function(){return this.get("type")},n.prototype.getName=function(){return this.get("property")},n.prototype.getLabel=function(t){var e;t===void 0&&(t={});var r=t.locale,o=r===void 0?!0:r,s=this.getId(),u=this.get("name")||this.get("label");return o&&((e=this.em)===null||e===void 0?void 0:e.t("styleManager.properties.".concat(s)))||u},n.prototype.getValue=function(t){t===void 0&&(t={});var e=t.noDefault,r=this.get("value");return!this.hasValue()&&!e?this.getDefaultValue():r},n.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent,r=e&&this.getParentTarget(),o=this.get("value");return!(0,k.isUndefined)(o)&&o!==""&&!r},n.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},n.prototype.getStyle=function(t){var e;t===void 0&&(t={});var r=this.getName(),o=t.camelCase?(0,Pt.camelCase)(r):r;return e={},e[o]=this.__getFullValue(t),e},n.prototype.getDefaultValue=function(){var t=this.get("default");return"".concat((0,k.isUndefined)(t)?this.get("defaults"):t)},n.prototype.upValue=function(t,e){e===void 0&&(e={});var r=t===null||t===""?this.__getClearProps():this.__parseValue(t,e);return this._up(r,e)},n.prototype.isVisible=function(){return!!this.get("visible")},n.prototype.clear=function(t){return t===void 0&&(t={}),this._up(this.__getClearProps(),qr(qr({},t),{__clear:!0})),this},n.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},n.prototype.getParent=function(){return this.__getParentProp()},n.prototype.isFull=function(){return!!this.get("full")},n.prototype.__parseValue=function(t,e){return this.parseValue(t,e)},n.prototype.__getClearProps=function(){return{value:""}},n.prototype.setValue=function(t,e,r){e===void 0&&(e=!0),r===void 0&&(r={});var o=this.parseValue(t),s=!e;!s&&this.set({value:void 0},{avoidStore:s,silent:!0}),this.set(o,qr({avoidStore:s},r))},n.prototype.setValueFromInput=function(t,e,r){r===void 0&&(r={}),this.setValue(t,e,qr(qr({},r),{fromInput:1}))},n.prototype.parseValue=function(t,e){e===void 0&&(e={});var r={value:t},o="!important",s=this.get("functionName")||"";if((0,k.isString)(t)&&t.indexOf(o)!==-1&&(r.value=t.replace(o,"").trim(),r.important=!0),!s&&!e.complete)return r;var u=[],c="".concat(r.value).trim(),f=c.indexOf("(")+1,h=s||c.substring(0,f-1);if(h&&(r.functionName=h),!s||c.indexOf("".concat(s,"("))===0){var g=c.lastIndexOf(")");u.push(f),g>=0&&u.push(g),r.value=String.prototype.substring.apply(c,u)}if(e.numeric){var y=parseFloat(r.value);r.unit=r.value.replace(y,""),r.value=y}return r},n.prototype.__getFullValue=function(t){var e=t===void 0?{}:t,r=e.withDefault;return!this.hasValue()&&r?this.getDefaultValue():this.getFullValue()},n.prototype.getFullValue=function(t,e){e===void 0&&(e={});var r=this.get("functionName"),o=this.getDefaultValue(),s=(0,k.isUndefined)(t)?this.get("value"):t,u=!(0,k.isUndefined)(s)&&s!=="";if(s&&o&&s===o)return o;if(r&&u){var c=r==="url"?"'".concat(s.replace(/'|"/g,""),"'"):s;s="".concat(r,"(").concat(c,")")}return u&&this.get("important")&&!e.skipImportant&&(s="".concat(s," !important")),s||""},n.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},n.prototype.getParentTarget=function(){return this.get("parentTarget")||null},n.prototype.__parseFn=function(t){t===void 0&&(t="");var e=t.indexOf("(")+1,r=t.lastIndexOf(")");return{name:t.substring(0,e-1).trim(),value:String.prototype.substring.apply(t,[e,r>=0?r:void 0]).trim()}},n.prototype.__checkVisibility=function(t){var e=t.target,r=t.component,o=t.sectors,s=r||e;if(!s)return!1;var u=this.getId(),c=this.getName(),f=this.get("toRequire"),h=this.get("requires"),g=this.get("requiresParent"),y=s.get("unstylable"),_=s.get("stylable-require"),b=s.get("stylable");if((0,k.isArray)(b)&&(b=b.indexOf(c)>=0),(0,k.isArray)(y)&&(b=y.indexOf(c)<0),f&&(b=!e||_&&(_.indexOf(u)>=0||_.indexOf(c)>=0)),o&&h){var x=(0,k.keys)(h);o.forEach(function(F){F.getProperties().forEach(function(W){if((0,k.includes)(x,W.id)){var ct=h[W.id];b=b&&(0,k.includes)(ct,W.get("value"))}})})}if(g){var T=r&&r.parent(),I=T&&T.getEl();if(I){var z=(0,Pt.hasWin)()?window.getComputedStyle(I):{};(0,k.each)(g,function(F,W){b=b&&z[W]&&(0,k.includes)(F,z[W])})}else b=!1}return!!b},n}(Nt.Kx);const qe=gf;gf.callParentInit=function(a,n,t,e){e===void 0&&(e={}),a.prototype.initialize.apply(n,[t,qr(qr({},e),{skipInit:1})])};gf.callInit=function(a,n,t){t===void 0&&(t={}),!t.skipInit&&a.init(n,t)};var V1=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ta=function(){return ta=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ta.apply(this,arguments)},th=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Bv=function(a){return a==="integer"||a==="number"},I1=function(a){V1(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return ta(ta({},qe.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),qe.callParentInit(qe,this,t,e);var r=this.em,o=new mf(this.get("properties")||[],{em:r,parentProp:this});this.set("properties",o,{silent:!0}),this.listenTo(o,"change",this.__upProperties),qe.callInit(this,t,e)},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),n.prototype.getProperties=function(){return th([],this.get("properties").models,!0)},n.prototype.getProperty=function(t){return this.properties.filter(function(e){return e.getId()===t||e.getName()===t})[0]},n.prototype.getPropertyAt=function(t){return this.get("properties").at(t)},n.prototype.isDetached=function(){return!!this.get("detached")},n.prototype.getValues=function(t){var e=t===void 0?{}:t,r=e.byName;return this.getProperties().reduce(function(o,s){var u=r?s.getName():s.getId();return o[u]="".concat(s.__getFullValue()),o},{})},n.prototype.getSeparator=function(){return this.getSplitSeparator()},n.prototype.getJoin=function(){return this.__getJoin()},n.prototype.getStyleFromProps=function(t){var e;t===void 0&&(t={});var r=this.getName(),o=this.__getJoin(),s=this.get("toStyle"),u=this.getValues(),c={};if(s)c=s(u,{join:o,name:r,property:this});else if(u=this.getValues({byName:!0}),this.isDetached())c=u;else{var f=this.getProperties().map(function(h){return h.__getFullValue({withDefault:1})}).filter(Boolean).join(o);c=(e={},e[r]=f,e)}return this.isDetached()?c[r]="":(c[r]=c[r]||"",c=ta(ta({},c),this.getProperties().reduce(function(h,g){return h[g.getName()]="",h},{}))),t.camelCase?Object.keys(c).reduce(function(h,g){return h[(0,Pt.camelCase)(g)]=c[g],h},{}):c},n.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},n.prototype.__upProperties=function(t,e){if(e===void 0&&(e={}),!(e.__up||e.__clearIn)){var r=this.__getParentProp();if(r)return r.__upProperties(this,e);this.__upTargetsStyleProps(e,t)}},n.prototype.__upTargetsStyleProps=function(t,e){var r;t===void 0&&(t={});var o=this.getStyleFromProps();if(this.isDetached()&&e){var s=e.getName();o=(r={},r[s]=o[s],r)}this.__upTargetsStyle(o,t)},n.prototype._up=function(t,e){return e===void 0&&(e={}),this.__setProperties(this.__getSplitValue(t.value),e),qe.prototype._up.call(this,t,e),this},n.prototype.getStyle=function(t){return this.getStyleFromProps(t)},n.prototype.__getFullValue=function(t){if(t===void 0&&(t={}),this.isDetached()||t.__clear)return"";var e=this.getStyleFromProps()[this.getName()]||"";return Lc(e)},n.prototype.__getJoin=function(){var t=this.get("join");return(0,k.isString)(t)?t:this.get("separator")},n.prototype.__styleHasProps=function(t){t===void 0&&(t={});var e=this.getName(),r=this.getProperties(),o=r.map(function(u){return u.getName()}),s=th([e],o,!0);return s.some(function(u){return!(0,k.isUndefined)(t[u])&&t[u]!==""})},n.prototype.__splitValue=function(t,e){return Lc(t).split(e).map(function(r){return r.trim()}).filter(Boolean)},n.prototype.__splitStyleName=function(t,e,r){var o=t[e];return this.__splitValue(o||"",r)},n.prototype.__getSplitValue=function(t,e){t===void 0&&(t="");var r=e===void 0?{}:e,o=r.byName,s=this.getProperties(),u=s.length===4&&s.every(function(h){return Bv(h.getType())}),c=this.__splitValue(t,this.getSplitSeparator()),f={};return s.forEach(function(h,g){var y=c[g],_=(0,k.isUndefined)(y)?"":y;if(u){var b=c.length;_=c[g]||c[g%b+(b!=1&&b%2?1:0)]||_}var x=o?h.getName():h.getId();f[x]=_||""}),f},n.prototype.__getPropsFromStyle=function(t,e){if(t===void 0&&(t={}),e===void 0&&(e={}),!this.__styleHasProps(t))return null;var r=e.byName,o=this.getName(),s=this.getProperties(),u=this.getSplitSeparator(),c=this.get("fromStyle"),f=c?c(t,{property:this,name:o,separator:u}):{};if(!c){var h=t[o];f=this.__getSplitValue(h||"",{byName:r}),s.forEach(function(g){var y=t[g.getName()],_=r?g.getName():g.getId();!(0,k.isUndefined)(y)&&y!==""&&(f[_]=y)})}return f},n.prototype.__setProperties=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.getProperties().forEach(function(o){var s=t[o.getId()];o.__getFullValue()!==s&&o.upValue(s,e)});var r=(0,k.keys)(t).map(function(o){return t[o]}).join(" ");this.set("value",r,{silent:!0})},n.prototype.clear=function(){var t=this;return this.getProperties().map(function(e){return e.clear({__clearIn:!t.isDetached()})}),qe.prototype.clear.call(this),this},n.prototype.hasValue=function(t){return this.getProperties().some(function(e){return e.hasValue(t)})},n.prototype.getFullValue=function(){return this.__getFullValue()},n.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},n}(qe);const Bi=I1;var N1=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),sn=function(){return sn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},sn.apply(this,arguments)},R1=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},F1=/,(?![^\(]*\))/,H1=/\s(?![^(]*\))/,B1=function(a){N1(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return sn(sn({},Bi.getDefaults()),{layers:[],emptyValue:"unset",layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Bi.callParentInit(Bi,this,t,e);var r=this.get("layers"),o=new ll(r,{prop:this});o.property=this,o.properties=this.get("properties"),this.set("layers",o,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(o,"add remove",this.__upLayers),Bi.callInit(this,t,e)},Object.defineProperty(n.prototype,"layers",{get:function(){return this.get("layers")},enumerable:!1,configurable:!0}),n.prototype.getLayers=function(){return this.layers.models},n.prototype.hasLayers=function(){return this.getLayers().length>0},n.prototype.getLayer=function(t){return t===void 0&&(t=0),this.layers.at(t)||void 0},n.prototype.getSelectedLayer=function(){var t=this.get("selectedLayer");return t&&t.getIndex()>=0?t:void 0},n.prototype.selectLayer=function(t){return this.set("selectedLayer",t,{__select:!0})},n.prototype.selectLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e&&this.selectLayer(e)},n.prototype.moveLayer=function(t,e){e===void 0&&(e=0);var r=this.layers,o=t?t.getIndex():-1;o>=0&&(0,k.isNumber)(e)&&e>=0&&e<r.length&&o!==e&&(this.removeLayer(t),r.add(t,{at:e}))},n.prototype.addLayer=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r={};this.getProperties().forEach(function(s){var u=s.getId(),c=t[u];r[u]=(0,k.isUndefined)(c)?s.getDefaultValue():c});var o=this.layers.push({values:r},e);return o},n.prototype.removeLayer=function(t){return this.layers.remove(t)},n.prototype.removeLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e?this.removeLayer(e):null},n.prototype.getLayerLabel=function(t){var e="";if(t){var r=this.get("layerLabel"),o=t.getValues(),s=t.getIndex();if(r)e=r(t,{index:s,values:o,property:this});else{var u=[];this.getProperties().map(function(c){u.push(o[c.getId()])}),e=u.filter(Boolean).join(" ")}}return e},n.prototype.getStyleFromLayer=function(t,e){var r;e===void 0&&(e={});var o=this.__getJoin(),s=this.__getJoinLayers(),u=this.get("toStyle"),c=this.getName(),f=t.getValues(),h;if(u)h=u(f,{join:o,joinLayers:s,name:c,layer:t,property:this});else{var g=this.getProperties().map(function(y){var _=y.getName(),b=f[y.getId()],x=(0,k.isUndefined)(b)?y.getDefaultValue():b;if(e.number&&Bv(y.getType())){var T=y.parseValue(b,e.number);x="".concat(T.value).concat(T.unit)}return{name:_,value:x}});h=this.isDetached()?g.reduce(function(y,_){return y[_.name]=_.value,y},{}):(r={},r[this.getName()]=g.map(function(y){return y.value}).join(o),r)}return e.camelCase?Object.keys(h).reduce(function(y,_){return y[(0,Pt.camelCase)(_)]=h[_],y},{}):h},n.prototype.getStylePreview=function(t,e){e===void 0&&(e={});var r={},o=this.get("preview");return o&&(r=this.getStyleFromLayer(t,e)),r},n.prototype.getLayerSeparator=function(){var t=this.get("layerSeparator");return(0,k.isString)(t)?new RegExp("".concat(t,"(?![^\\(]*\\))")):t},n.prototype.hasEmptyValue=function(){return!this.hasLayers()&&!!this.attributes.isEmptyValue},n.prototype.__upProperties=function(t,e){var r;e===void 0&&(e={});var o=this.getSelectedLayer();o&&(o.upValues((r={},r[t.getId()]=t.__getFullValue(),r)),!e.__up&&this.__upTargetsStyleProps(e))},n.prototype.__upLayers=function(t,e,r){this.__upTargetsStyleProps(r||e)},n.prototype.__upTargets=function(t,e){if(e===void 0&&(e={}),!e.__select)return qe.prototype.__upTargets.call(this,t,e)},n.prototype.__upTargetsStyleProps=function(t){t===void 0&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(t),t)},n.prototype.__upTargetsStyle=function(t,e){return qe.prototype.__upTargetsStyle.call(this,t,e)},n.prototype.__upSelected=function(t,e){var r=t===void 0?{}:t,o=r.noEvent;e===void 0&&(e={});var s=this.em.Styles,u=this.getSelectedLayer(),c=u==null?void 0:u.getValues();c&&this.getProperties().forEach(function(f){var h,g=(h=c[f.getId()])!==null&&h!==void 0?h:"";f.__getFullValue()!==g&&f.upValue(g,sn(sn({},e),{__up:!0}))}),!o&&s.__trgEv(s.events.layerSelect,{property:this})},n.prototype._up=function(t,e){e===void 0&&(e={});var r=t.__layers,o=r===void 0?[]:r,s=R1(t,["__layers"]);return!this.isDetached()&&this.__setLayers(o),this.__upSelected({noEvent:!0},e),qe.prototype._up.call(this,s,e),this},n.prototype.__setLayers=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var r=this.layers,o=t.map(function(s){return{values:s}});r.length===o.length?o.map(function(s,u){var c;return(c=r.at(u))===null||c===void 0?void 0:c.upValues(s.values)}):r.reset(o),this.set({isEmptyValue:!!e.isEmptyValue}),this.__upSelected({noEvent:!0})},n.prototype.__parseValue=function(t){var e=this,r=this.parseValue(t);return r.__layers=t.split(F1).map(function(o){return o.trim()}).map(function(o){return e.__parseLayer(o)}).filter(Boolean),r},n.prototype.__parseLayer=function(t){var e=this.get("parseLayer"),r=t.split(H1),o=this.getProperties();return e?e({value:t,values:r}):o.reduce(function(s,u,c){var f=r[c];return s[u.getId()]=(0,k.isUndefined)(f)?u.getDefaultValue():f,s},{})},n.prototype.__getLayersFromStyle=function(t){var e=this;if(t===void 0&&(t={}),!this.__styleHasProps(t))return null;if(this.isEmptyValueStyle(t))return[];var r=this.getName(),o=this.getProperties(),s=this.getLayerSeparator(),u=this.attributes.fromStyle,c=u?u(t,{property:this,name:r,separatorLayers:s}):[];if(!u){var f=this.__splitStyleName(t,r,s).map(function(h){return h.split(e.getSplitSeparator())}).map(function(h){var g={};return o.forEach(function(y,_){var b=h[_];g[y.getId()]=(0,k.isUndefined)(b)?y.getDefaultValue():b}),g});o.forEach(function(h){var g=h.getId();e.__splitStyleName(t,h.getName(),s).map(function(y){var _;return _={},_[g]=y||h.getDefaultValue(),_}).forEach(function(y,_){f[_]=f[_]?sn(sn({},f[_]),y):y})}),c=f}return(0,k.isArray)(c)?c:[c]},n.prototype.getStyle=function(t){return t===void 0&&(t={}),this.getStyleFromLayers(t)},n.prototype.getStyleFromLayers=function(t){var e=this;t===void 0&&(t={});var r={},o=this.getName(),s=this.getLayers(),u=this.getProperties(),c=s.map(function(h){return e.getStyleFromLayer(h,t)});if(c.forEach(function(h){(0,k.keys)(h).map(function(g){r[g]||(r[g]=[]),r[g].push(h[g])})}),(0,k.keys)(r).map(function(h){r[h]=r[h].join(e.__getJoinLayers())}),this.isDetached())r[o]="",!s.length&&u.map(function(h){r[h.getName()]=""});else{var f=u.reduce(function(h,g){return h[g.getName()]="",h},{});r[o]=r[o]||"",r=sn(sn({},r),f)}return sn(sn({},r),t.__clear?{}:this.getEmptyValueStyle())},n.prototype.isEmptyValueStyle=function(t){t===void 0&&(t={});var e=this.getEmptyValueStyle({force:!0}),r=(0,k.keys)(e);return!!r.length&&r.every(function(o){return e[o]===t[o]})},n.prototype.getEmptyValueStyle=function(t){t===void 0&&(t={});var e=this.attributes.emptyValue;if(e&&(!this.hasLayers()||t.force)){var r=this.getName(),o=this.getProperties(),s=(0,k.isString)(e)?e:e({property:this});if((0,k.isString)(s)){var u={};return this.isDetached()?o.map(function(c){u[c.getName()]=s}):u[r]=s,u}else return s}else return{}},n.prototype.__getJoinLayers=function(){var t=this.get("layerJoin"),e=this.get("layerSeparator");return t||((0,k.isString)(e)?e:t)},n.prototype.__getFullValue=function(){if(this.get("detached"))return"";var t=this.getStyleFromLayers();return Lc(t[this.getName()])},n.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent,r=e&&this.getParentTarget();return(this.hasLayers()||this.hasEmptyValue())&&!r},n.prototype.clear=function(t){return t===void 0&&(t={}),this.layers.reset(),this.__upTargetsStyleProps(sn(sn({},t),{__clear:!0})),qe.prototype.clear.call(this),this},n.prototype.__canClearProp=function(){return!1},n.prototype.__getLayers=function(){return this.layers},n}(Bi);const U1=B1;var W1=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ql=function(){return Ql=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ql.apply(this,arguments)},z1=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},K1=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Sc="data-clear-style",G1=function(a){W1(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;(0,k.bindAll)(e,"__change","__updateStyle");var r=t.config||{},o=r.em;e.config=r,e.em=o,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.__destroyFn=e.destroy?e.destroy.bind(e):function(){};var s=e.model;s.view=e,e.onValueChange=(0,k.debounce)(e.onValueChange.bind(e),10),e.updateStatus=(0,k.debounce)(e.updateStatus.bind(e),0),e.listenTo(s,"destroy remove",e.remove),e.listenTo(s,"change:visible",e.updateVisibility),e.listenTo(s,"change:name change:className change:full",e.render),e.listenTo(s,"change:value",e.onValueChange),e.listenTo(s,"change:parentTarget",e.updateStatus),e.listenTo(o,"change:device",e.onValueChange);var u=e.init&&e.init.bind(e);return u&&u(),e}return n.prototype.events=function(){var t;return t={change:"inputValueChanged"},t["click [".concat(Sc,"]")]="clear",t},n.prototype.template=function(t){var e=this,r=e.pfx,o=e.ppfx;return`
      <div class="`.concat(r,`label" data-sm-label></div>
      <div class="`).concat(o,`fields" data-sm-fields></div>
    `)},n.prototype.templateLabel=function(t){var e=this,r=e.pfx,o=e.em,s=t.parent,u=t.attributes,c=u.icon,f=c===void 0?"":c,h=u.info,g=h===void 0?"":h,y=o==null?void 0:o.getConfig().icons,_=(y==null?void 0:y.close)||"";return`
      <span class="`.concat(r,"icon ").concat(f,'" title="').concat(g,`">
        `).concat(t.getLabel(),`
      </span>
      `).concat(s?"":'<div class="'.concat(r,'clear" style="display: none" ').concat(Sc,">").concat(_,"</div>"),`
    `)},n.prototype.templateInput=function(t){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(t.getDefaultValue(),`"/>
      </div>
    `)},n.prototype.remove=function(){var t=this;return Nt.Ss.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(e){return t[e]=null}),this.__destroyFn(this._getClbOpts()),this},n.prototype.updateStatus=function(){var t,e=this,r=e.model,o=e.pfx,s=e.ppfx,u=e.config,c="".concat(s,"four-color"),f="".concat(s,"color-warn"),h=this.$el.children(".".concat(o,"label")),g=this.getClearEl(),y=g?g.style:{};h.removeClass("".concat(c," ").concat(f)),y.display="none",r.hasValue({noParent:!0})&&u.highlightChanged?(h.addClass(c),u.clearProperties&&(y.display="")):r.hasValue()&&u.highlightComputed&&h.addClass(f),(t=this.parent)===null||t===void 0||t.updateStatus()},n.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},n.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(Sc,"]"))),this.clearEl},n.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),!this.emit&&this.model.upValue(t.target.value)},n.prototype.onValueChange=function(t,e,r){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},n.prototype.setValue=function(t){var e=this.model,r=(0,k.isUndefined)(t)||t===""?e.getDefaultValue():t;if(this.update)return this.__update(r);this.__setValueInput(r)},n.prototype.__setValueInput=function(t){var e=this.getInputEl();e&&(e.value=t)},n.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},n.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},n.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},n.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},n.prototype.__update=function(t){var e=this.update&&this.update.bind(this);e&&e(Ql(Ql({},this._getClbOpts()),{value:t}))},n.prototype.__change=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.emit&&this.emit.bind(this);r&&r.apply(void 0,K1([this._getClbOpts()],t,!1))},n.prototype.__updateStyle=function(t,e){e===void 0&&(e={});var r=e.complete,o=e.partial;z1(e,["complete","partial"]);var s=this.model,u=r!==!1&&o!==!0;(0,Pt.isObject)(t)?s.__upTargetsStyle(t,{avoidStore:!u}):s.upValue(t,{partial:!u})},n.prototype._getClbOpts=function(){var t=this,e=t.model,r=t.el,o=t.createdEl;return{el:r,createdEl:o,property:e,props:e.attributes,change:this.__change,updateStyle:this.__updateStyle}},n.prototype.render=function(){this.clearCached();var t=this,e=t.pfx,r=t.model,o=t.el,s=t.$el,u=r.getName(),c=r.getType(),f=r.get("className")||"",h="".concat(e,"property"),g=c==="number"?"".concat(e).concat(c," ").concat(e,"integer"):"".concat(e).concat(c);this.createdEl&&this.__destroyFn(this._getClbOpts()),s.empty().append(this.template(r)),s.find("[data-sm-label]").append(this.templateLabel(r));var y=this.create&&this.create.bind(this);this.createdEl=y&&y(this._getClbOpts()),s.find("[data-sm-fields]").append(this.createdEl||this.templateInput(r)),o.className="".concat(h," ").concat(g," ").concat(h,"__").concat(u," ").concat(f).trim(),o.className+=r.isFull()?" ".concat(h,"--full"):"";var _=this.onRender&&this.onRender.bind(this);return _&&_(),this.setValue(r.getValue()),this},n.prototype.onRender=function(){},n}(Nt.Ss);const ho=G1;var $1=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),q1=function(a){$1(n,a);function n(t){var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.properties=[],e.parent=t.parent;var r=e.collection;return e.listenTo(r,"add",e.addTo),e.listenTo(r,"reset",e.render),e}return n.prototype.addTo=function(t,e,r){this.add(t,null,r)},n.prototype.add=function(t,e,r){r===void 0&&(r={});var o=this,s=o.parent,u=o.config,c=e||this.el,f=new t.typeView({model:t,config:u});s&&(f.parent=s),f.render();var h=f.el;this.properties.push(f),(0,Wt.Sc)(c,h,r.at)},n.prototype.remove=function(){return Nt.Ss.prototype.remove.apply(this,arguments),this.clearItems(),this},n.prototype.clearItems=function(){this.properties.forEach(function(t){return t.remove()}),this.properties=[]},n.prototype.render=function(){var t=this,e=this,r=e.$el,o=e.pfx;this.clearItems();var s=document.createDocumentFragment();return this.collection.forEach(function(u){return t.add(u,s)}),r.empty(),r.append(s),r.attr("class","".concat(o,"properties")),this},n}(Nt.Ss);const yf=q1;var Y1=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tu=function(){return tu=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},tu.apply(this,arguments)},X1=function(a){Y1(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){var t=this.pfx;return`
      <div class="`.concat(t,"field ").concat(t,`composite">
        <span id="`).concat(t,`input-holder"></span>
      </div>
    `)},n.prototype.remove=function(){var t;return(t=this.props)===null||t===void 0||t.remove(),ho.prototype.remove.apply(this,arguments),this},n.prototype.onValueChange=function(){},n.prototype.onRender=function(){var t=this.pfx,e=this.model,r=e.get("properties");if(r.length&&!this.props){var o=e.isDetached(),s=new yf({config:tu(tu({},this.config),{highlightComputed:o,highlightChanged:o}),collection:r,parent:this});s.render(),this.$el.find("#".concat(t,"input-holder")).append(s.el),this.props=s}},n.prototype.clearCached=function(){ho.prototype.clearCached.apply(this,arguments),delete this.props},n}(ho);const Ga=X1;var Z1=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),J1=function(a){Z1(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},n.prototype.template=function(){var t=this,e=t.pfx,r=t.ppfx,o=t.em,s=o==null?void 0:o.getConfig().icons,u=(s==null?void 0:s.close)||"",c=(s==null?void 0:s.move)||"";return`
      <div class="`.concat(e,`label-wrp">
        <div id="`).concat(e,'move" class="').concat(r,`no-touch-actions" data-move-layer>
          `).concat(c,`
        </div>
        <div id="`).concat(e,`label" data-label></div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(e,'preview" class="').concat(e,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(e,'close-layer" class="').concat(e,`btn-close" data-close-layer>
          `).concat(u,`
        </div>
      </div>
      <div id="`).concat(e,`inputs" data-properties></div>
    `)},n.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,r=t.config||{};this.em=r.em,this.config=r,this.sorter=t.sorter,this.pfx=r.stylePrefix||"",this.ppfx=r.pStylePrefix||"",this.propertyView=t.propertyView;var o=this.propertyView.model;this.listenTo(e,"destroy remove",this.remove),this.listenTo(e,"change:values",this.updateLabel),this.listenTo(o,"change:selectedLayer",this.updateVisibility),e.view=this,e.set({droppable:0,draggable:1}),this.$el.data("model",e)},n.prototype.initSorter=function(){var t;(t=this.sorter)===null||t===void 0||t.startSort([{element:this.el}])},n.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},n.prototype.select=function(){this.model.select()},n.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},n.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},n.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},n.prototype.updateLabel=function(){var t=this.model,e=t.getLabel();if(this.getLabelEl().innerHTML=e,t.hasPreview()){var r=this.getPreviewEl(),o=t.getStylePreview({number:{min:-3,max:3}}),s=(0,k.keys)(o).map(function(u){return"".concat(u,":").concat(o[u])}).join(";");r.setAttribute("style",s)}},n.prototype.updateVisibility=function(){var t,e=this,r=e.pfx,o=e.model,s=e.propertyView,u=this.getPropertiesWrapper(),c=o.isSelected();u.style.display=c?"":"none",this.$el[c?"addClass":"removeClass"]("".concat(r,"active")),c&&u.appendChild((t=s.props)===null||t===void 0?void 0:t.el)},n.prototype.render=function(){var t=this,e=t.el,r=t.pfx,o=t.model;return e.innerHTML=this.template(),e.className="".concat(r,"layer"),o.hasPreview()&&(e.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},n}(Nt.Ss);const Q1=J1;var tT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),eT=function(a){tT(n,a);function n(t){var e=a.call(this,t)||this,r=e.collection,o=t.config||{},s=o.em,u=o.stylePrefix||"",c=o.pStylePrefix||"";e.config=o,e.pfx=u,e.ppfx=c,e.propertyView=t.propertyView,e.className="".concat(u,"layers ").concat(c,"field"),e.listenTo(r,"add",e.addTo),e.listenTo(r,"reset",e.reset),e.items=[];var f=e.createPlaceholder(o.pStylePrefix);e.$el.append(f);var h=s==null?void 0:s.Utils;return e.sorter=h?new h.StyleManagerSorter({em:s,containerContext:{container:e.el,containerSel:".".concat(u,"layers"),itemSel:".".concat(u,"layer"),pfx:o.pStylePrefix,document,placeholderElement:f},dragBehavior:{dragDirection:aa.A.Vertical,nested:!1}}):void 0,r.view=e,e.$el.data("model",r),e.$el.data("collection",r),e}return n.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},n.prototype.addToCollection=function(t,e,r){var o=e||null,s=this,u=s.propertyView,c=s.config,f=s.sorter,h=s.$el,g=new Q1({model:t,config:c,sorter:f,propertyView:u}),y=g.render().el;if(this.items.push(g),o)o.appendChild(y);else if(typeof r<"u"){var _="before";h.children().length===r&&(r--,_="after"),r<0?h.append(y):h.children().eq(r)[_](y)}else h.append(y);return y},n.prototype.reset=function(t,e){this.clearItems(),this.render()},n.prototype.remove=function(){return this.clearItems(),Nt.Ss.prototype.remove.apply(this,arguments),this},n.prototype.clearItems=function(){this.items.forEach(function(t){return t.remove()}),this.items=[]},n.prototype.render=function(){var t=this,e=this.$el,r=document.createDocumentFragment();return e.empty(),this.collection.forEach(function(o){return t.addToCollection(o,r)}),e.append(r),e.attr("class",this.className),this},n.prototype.createPlaceholder=function(t){var e=document.createElement("div"),r=document.createElement("div");return this.el.parentNode,e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",r.className=t+"placeholder-int",e.appendChild(r),e},n}(Nt.Ss);const rT=eT;var nT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ea=function(){return ea=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ea.apply(this,arguments)},oT=function(a){nT(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return ea(ea({},Ga.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},n.prototype.templateInput=function(){var t=this,e=t.pfx,r=t.em,o=r==null?void 0:r.getConfig().icons,s=(o==null?void 0:o.plus)||"+";return`
      <div class="`.concat(e,"field ").concat(e,`stack">
        <button type="button" id="`).concat(e,`add" data-add-layer>
          `).concat(s,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},n.prototype.init=function(){var t=this.model;this.listenTo(t.layers,"change reset",this.updateStatus),this.listenTo(t,"change:isEmptyValue",this.updateStatus)},n.prototype.addLayer=function(){this.model.addLayer({},{at:0})},n.prototype.setValue=function(){},n.prototype.remove=function(){var t;return(t=this.layersView)===null||t===void 0||t.remove(),Ga.prototype.remove.apply(this,arguments),this},n.prototype.clearCached=function(){Ga.prototype.clearCached.apply(this,arguments),delete this.layersView},n.prototype.onRender=function(){var t=this,e=t.model,r=t.el,o=t.config,s=e.get("properties");if(s.length&&!this.props){var u=new yf({config:ea(ea({},o),{highlightComputed:!1,highlightChanged:!1}),collection:s,parent:this});u.render();var c=new rT({collection:e.layers,config:o,propertyView:this});c.render();var f=r.querySelector("[data-layers-wrapper]");f.appendChild(c.el),this.props=u,this.layersView=c}},n}(Ga);const iT=oT;var aT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),eu=function(){return eu=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},eu.apply(this,arguments)},sT=function(a){aT(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return eu(eu({},ho.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},n.prototype.templateInput=function(){var t,e=this,r=e.pfx,o=e.em,s=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,u=s==null?void 0:s.close;return`
      <div class="`.concat(r,"field ").concat(r,`file">
        <div id='`).concat(r,`input-holder'>
          <div class="`).concat(r,`btn-c">
            <button class="`).concat(r,'btn" id="').concat(r,`images" type="button" data-open-assets>
              `).concat(o.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(r,'preview-box" class="').concat(r,`preview-file" data-preview-box>
          <div id="`).concat(r,'preview-file" class="').concat(r,`preview-file-cnt" data-preview></div>
          <div id="`).concat(r,'close" class="').concat(r,'preview-file-close" data-clear-asset>').concat(u,`</div>
        </div>
      </div>
    `)},n.prototype.__setValueInput=function(t){var e=this,r=e.model,o=e.el,s=r.getDefaultValue(),u=o.querySelector("[data-preview-box]"),c=o.querySelector("[data-preview]");u.style.display=!t||t===s?"none":"",c.style.backgroundImage=t||r.getDefaultValue()},n.prototype.openAssetManager=function(){var t=this,e,r=(e=this.em)===null||e===void 0?void 0:e.Assets;r==null||r.open({select:function(o,s){var u=(0,k.isString)(o)?o:o.get("src");t.model.upValue(u,{partial:!s}),s&&r.close()},types:["image"],accept:"image/*"})},n}(ho);const lT=sT;var uT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cT=function(a){uT(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(t){return""},n.prototype.init=function(){var t=this.model;this.listenTo(t,"change:unit",this.onValueChange),this.listenTo(t,"change:units",this.render)},n.prototype.setValue=function(t){},n.prototype.onRender=function(){var t=this,e=t.ppfx,r=t.model,o=t.el;if(!this.inputInst){var s=r.input;s.ppfx=e,s.render();var u=o.querySelector(".".concat(e,"fields"));u.appendChild(s.el),this.input=s.inputEl.get(0),this.inputInst=s}},n.prototype.clearCached=function(){ho.prototype.clearCached.apply(this,arguments),this.inputInst=null},n}(ho);const po=cT;var fT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dT=function(a){fT(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.setValue=function(t){var e;(e=this.inputInst)===null||e===void 0||e.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},n.prototype.remove=function(){var t=this;po.prototype.remove.apply(this,arguments);var e=this.inputInst;return e&&e.remove&&e.remove(),["inputInst","$color"].forEach(function(r){return t[r]=null}),this},n.prototype.__handleChange=function(t,e){this.model.upValue(t,{partial:e})},n.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var e=this,r=e.ppfx,o=e.model,s=e.em,u=e.el,c=new dv({target:s,model:o,ppfx:r,onChange:this.__handleChange}),f=c.render();u.querySelector(".".concat(r,"fields")).appendChild(f.el),this.input=(t=f.inputEl)===null||t===void 0?void 0:t.get(0),this.inputInst=f}},n}(po);const pT=dT;var hT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ru=function(){return ru=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ru.apply(this,arguments)},eh=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},vT=function(a){hT(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return ru(ru({},qe.getDefaults()),{options:[],full:0})},n.prototype.getOptions=function(){var t=this.attributes,e=t.options,r=t.list;return(e&&e.length?e:r)||[]},n.prototype.getOption=function(t){var e=this,r=(0,Pt.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(o){return e.getOptionId(o)===r})[0]||null},n.prototype.setOptions=function(t){return t===void 0&&(t=[]),this.set("options",t),this},n.prototype.addOption=function(t){if(t){var e=this.getOptions();this.setOptions(eh(eh([],e,!0),[t],!1))}return this},n.prototype.getOptionId=function(t){return(0,Pt.isDef)(t.id)?t.id:t.value},n.prototype.getOptionLabel=function(t,e){var r;e===void 0&&(e={});var o=e.locale,s=o===void 0?!0:o,u=((0,k.isString)(t)?this.getOption(t):t)||{},c=this.getOptionId(u),f=u.label||u.name||c,h=e.property||this.getId();return s&&((r=this.em)===null||r===void 0?void 0:r.t("styleManager.options.".concat(h,".").concat(c)))||f},n.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];qe.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.__onOptionChange)},n.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},n}(qe);const tf=vT;var gT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yT=function(a){gT(n,a);function n(t){var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.updateOptions),e}return n.prototype.templateInput=function(){var t=this,e=t.pfx,r=t.ppfx;return`
      <div class="`.concat(r,"field ").concat(r,`select">
        <span id="`).concat(e,`input-holder"></span>
        <div class="`).concat(r,`sel-arrow">
          <div class="`).concat(r,`d-s-arrow"></div>
        </div>
      </div>
    `)},n.prototype.updateOptions=function(){delete this.input,this.onRender()},n.prototype.onRender=function(){var t=this.pfx,e=this.model,r=e.getOptions();if(!this.input){var o=[];r.forEach(function(u){var c=e.getOptionId(u),f=e.getOptionLabel(c),h=u.style?u.style.replace(/"/g,"&quot;"):"",g=h?'style="'.concat(h,'"'):"",y=c.replace(/"/g,"&quot;");o.push('<option value="'.concat(y,'" ').concat(g,">").concat(f,"</option>"))});var s=this.el.querySelector("#".concat(t,"input-holder"));s.innerHTML="<select>".concat(o.join(""),"</select>"),this.input=s.firstChild}},n.prototype.__setValueInput=function(t){var e=this.model,r=this.getInputEl(),o=e.getOptions()[0],s=o?e.getOptionId(o):"";r&&(r.value=t||s)},n}(ho);const Uv=yT;var mT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nu=function(){return nu=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},nu.apply(this,arguments)},_T=function(a){mT(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return nu(nu({},tf.getDefaults()),{full:1})},n}(tf);const wT=_T;var bT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),CT=function(a){bT(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){var t=this.ppfx;return'<div class="'.concat(t,"field ").concat(t,'field-radio"></div>')},n.prototype.onRender=function(){var t=this,e=t.pfx,r=t.ppfx,o=this.model,s="".concat(r,"radio-item-label"),u=o.getName(),c=o.getOptions(),f="".concat(e,"radio ").concat(e,"radio-").concat(u),h=o.cid;if(!this.input){var g=[];c.forEach(function(_){var b=_.className?"".concat(_.className," ").concat(e,"icon ").concat(s):"",x=o.getOptionId(_),T="".concat(u,"-").concat(x,"-").concat(h),I=b?"":o.getOptionLabel(x),z=_.title?'title="'.concat(_.title,'"'):"",F=o.getValue()===x?"checked":"";g.push(`
          <div class="`.concat(r,`radio-item">
            <input type="radio" class="`).concat(f,'" id="').concat(T,'" name="').concat(u,"-").concat(h,'" value="').concat(x,'" ').concat(F,`/>
            <label class="`).concat(b||s,'" ').concat(z,' for="').concat(T,'">').concat(I,`</label>
          </div>
        `))});var y=this.el.querySelector(".".concat(r,"field"));y.innerHTML='<div class="'.concat(r,'radio-items">').concat(g.join(""),"</div>"),this.input=y.firstChild}},n.prototype.__setValueInput=function(t){var e,r=this.model,o=t||r.getDefaultValue(),s=(e=this.getInputEl())===null||e===void 0?void 0:e.querySelector('[value="'.concat(o,'"]'));s&&(s.checked=!0)},n}(Uv);const xT=CT;var ST=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),li=function(){return li=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},li.apply(this,arguments)},OT=function(a){ST(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return li(li({},qe.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},n.prototype.getUnits=function(){return this.get("units")||[]},n.prototype.getUnit=function(){return this.get("unit")},n.prototype.getMin=function(){return this.get("min")},n.prototype.getMax=function(){return this.get("max")},n.prototype.getStep=function(){return this.get("step")},n.prototype.upUnit=function(t,e){return e===void 0&&(e={}),this._up({unit:t},e)},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),qe.callParentInit(qe,this,t,e);var r=this.get("unit"),o=this.getUnits();this.input=(0,Pt.hasWin)()?new hv({model:this}):void 0,o.length&&!r&&this.set("unit",o[0],{silent:!0}),qe.callInit(this,t,e)},n.prototype.__getClearProps=function(){return li(li({},qe.prototype.__getClearProps()),{unit:""})},n.prototype.parseValue=function(t,e){e===void 0&&(e={});var r=qe.prototype.parseValue.apply(this,arguments),o=this.input.validateInputValue(r.value,li({deepCheck:1},e)),s=o.value,u=o.unit;return r.value=s,r.unit=u,r},n.prototype.getFullValue=function(){var t=this.get("value"),e=this.get("unit"),r=(0,k.isUndefined)(t)?"":"".concat(t),o=!(0,k.isUndefined)(e)&&r?e:"",s="".concat(r).concat(o);return qe.prototype.getFullValue.apply(this,[s])},n}(qe);const ou=OT;var TT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),iu=function(){return iu=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},iu.apply(this,arguments)},PT=function(a){TT(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return iu(iu({},ou.getDefaults()),{showInput:1})},n}(ou);const ET=PT;var AT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),au=function(){return au=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},au.apply(this,arguments)},kT=function(a){AT(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return au(au({},po.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},n.prototype.templateInput=function(t){var e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`field-range">
        <input type="range" min="`).concat(t.get("min"),'" max="').concat(t.get("max"),'" step="').concat(t.get("step"),`"/>
      </div>
    `)},n.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},n.prototype.inputValueChanged=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value)},n.prototype.inputValueChangedSoft=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},n.prototype.setValue=function(t){var e=this.model,r=e.parseValue(t);this.getSliderEl().value=t===""?e.getDefaultValue():parseFloat(r.value),po.prototype.setValue.apply(this,arguments)},n.prototype.onRender=function(){po.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},n.prototype.clearCached=function(){po.prototype.clearCached.apply(this,arguments),delete this.slider},n}(po);const MT=kT;var DT=Nt.pM.extend(Ov),LT=DT.extend({extendViewApi:1,init:function(){var a=this,n=a.opts,t=a.em,e=n.module||(t==null?void 0:t.get("StyleManager"));e&&(e.__listenAdd(this,e.events.propertyAdd),e.__listenRemove(this,e.events.propertyRemove))},types:[{id:"stack",model:U1,view:iT,isType:function(a){if(a&&a.type=="stack")return a}},{id:"composite",model:Bi,view:Ga,isType:function(a){if(a&&a.type=="composite")return a}},{id:"file",model:qe,view:lT,isType:function(a){if(a&&a.type=="file")return a}},{id:"color",model:qe,view:pT,isType:function(a){if(a&&a.type=="color")return a}},{id:"select",model:tf,view:Uv,isType:function(a){if(a&&a.type=="select")return a}},{id:"radio",model:wT,view:xT,isType:function(a){if(a&&a.type=="radio")return a}},{id:"slider",model:ET,view:MT,isType:function(a){if(a&&a.type=="slider")return a}},{id:"integer",model:ou,view:po,isType:function(a){if(a&&a.type=="integer")return a}},{id:"number",model:ou,view:po,isType:function(a){if(a&&a.type=="number")return a}},{id:"base",model:qe,view:ho,isType:function(a){return a.type="base",a}}]});const mf=LT;var jT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),su=function(){return su=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},su.apply(this,arguments)},VT=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},IT=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},NT=function(a){jT(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t)||this,o=e.em;r.em=o;var s=t||{},u=r.buildProperties(s.buildProps),c=r.get("name")||"",f=[];!r.get("id")&&r.set("id",c.replace(/ /g,"_").toLowerCase()),u?f=r.extendProperties(u):f=r.get("properties").map(function(g){return(0,k.isString)(g)?r.buildProperties(g)[0]:g}).filter(Boolean),f=f.map(function(g){return r.checkExtend(g)});var h=new mf(f,{em:o});return h.sector=r,r.set("properties",h),r}return n.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),n.prototype.getId=function(){return this.get("id")},n.prototype.getName=function(){var t,e=this.getId();return((t=this.em)===null||t===void 0?void 0:t.t("styleManager.sectors.".concat(e)))||this.get("name")},n.prototype.setName=function(t){return this.set("name",t)},n.prototype.isOpen=function(){return!!this.get("open")},n.prototype.setOpen=function(t){return this.set("open",t)},n.prototype.isVisible=function(){return!!this.get("visible")},n.prototype.getProperties=function(t){t===void 0&&(t={});var e=this.properties,r=e.models?IT([],e.models,!0):e;return r.filter(function(o){var s=!0;if(t.withValue&&(s=o.hasValue({noParent:!0})),t.withParentValue){var u=o.hasValue({noParent:!0});s=!u&&o.hasValue()}return s})},n.prototype.getProperty=function(t){return this.getProperties().filter(function(e){return e.get("id")===t})[0]||void 0},n.prototype.addProperty=function(t,e){return this.properties.add(this.checkExtend(t),e)},n.prototype.extendProperties=function(t,e,r){r===void 0&&(r=!1);for(var o=t.length,s=e||this.get("properties"),u=this.get("extendBuilded"),c=[],f=0,h=s.length;f<h;f++){for(var g=s[f],y=0,_=0;_<o;_++){var b=t[_];if(g.property==b.property||g.id==b.property){var x=g.properties;x&&x.length&&(g.properties=this.extendProperties(b.properties||[],x,1)),t[_]=u?(0,k.extend)(b,g):g,c[_]=t[_],y=1;continue}}y||(t.push(g),c.push(g))}return r?c.filter(function(T){return T}):t},n.prototype.checkExtend=function(t){var e=((0,k.isString)(t)?{extend:t}:t)||{},r=e.extend,o=VT(e,["extend"]);return r?su(su({},this.buildProperties([r])[0]||{}),o):t},n.prototype.buildProperties=function(t){var e,r=t||[];if(!r.length)return[];var o=(e=this.em)===null||e===void 0?void 0:e.Styles.builtIn;return o==null?void 0:o.build(r)},n}(Nt.Kx);const Wv=NT;var RT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lu=function(){return lu=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},lu.apply(this,arguments)},FT=function(a){RT(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t,e){e===void 0&&(e={});var r=e.module,o=e.em;this.em=o,this.module=r,this.listenTo(this,"reset",this.onReset)},n.prototype.model=function(t,e){e===void 0&&(e={});var r=e.collection.em;return new Wv(t,lu(lu({},e),{em:r}))},n.prototype.onReset=function(t,e){e===void 0&&(e={});var r=e.previousModels||[];r.forEach(function(o){return o.get("properties").reset()})},n}(Nt.pM);const HT=FT;var Bo=function(){return Bo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Bo.apply(this,arguments)},BT=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},oi=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},xr=function(a){return a.map(function(n){return{id:n}})},UT=function(){function a(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var n=", sans-serif",t=["flex-start","flex-end","center"],e=oi(oi([],t,!0),["baseline","stretch"],!1);this.optsBgSize=xr(["auto","cover","contain"]),this.optsBgAttach=xr(["scroll","fixed","local"]),this.optsBgRepeat=xr(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=xr(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=xr(["visible","hidden","scroll","auto"]),this.optsDir=xr(["row","row-reverse","column","column-reverse"]),this.opstDisplay=xr(["block","inline","inline-block","flex","none"]),this.optsTransitFn=xr(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=xr(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=xr(["none","left","right"]),this.optsPos=xr(["static","relative","absolute","fixed"]),this.optsTextAlign=xr(["left","center","right","justify"]),this.optsFlexAlign=xr(e),this.optsJustCont=xr(oi(oi([],t,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=xr(oi(oi([],t,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=xr(oi(["auto"],e,!0)),this.optsTransitProp=xr(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=xr(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=xr(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+n,"Arial Black, Gadget"+n,"Brush Script MT"+n,"Comic Sans MS, cursive"+n,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+n,"Impact, Charcoal"+n,"Lucida Sans Unicode, Lucida Grande"+n,"Tahoma, Geneva"+n,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+n,"Verdana, Geneva"+n].map(function(r){return{id:r,label:r.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return a.prototype.__sub=function(n){var t=this;return function(){return n.map(function(e){if((0,k.isString)(e))return t.get(e);var r=e.extend,o=BT(e,["extend"]);return Bo(Bo({},t.get(r)),o)})}},a.prototype.init=function(){var n=this,t=this,e=t.fixedValues,r=t.requireFlex,o=t.typeNumber;this.props={};var s=[["text-shadow-h",{type:o,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:e},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:r},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:o,default:"0",requiresParent:r}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:r},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:r},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(u,c){var f=c.values,h=f["box-shadow-h"],g=f["box-shadow-v"],y=f["box-shadow-blur"],_=f["box-shadow-spread"];return"".concat(h," ").concat(g," ").concat(y," ").concat(_)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(u,c){var f=c.values,h=f["text-shadow-h"],g=f["text-shadow-v"],y=f["text-shadow-blur"];return"".concat(h," ").concat(g," ").concat(y)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(u,c){var f=c.values,h=f["background-repeat-sub"]||"",g=f["background-position-sub"]||"",y=f["background-attachment-sub"]||"",_=f["background-size-sub"]||"";return[h,g,y,_].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(u,c){var f=c.property,h=c.name,g=u[h]||"",y=f.getLayerSeparator();return g?g.split(y).map(function(_){var b=f.__parseFn(_),x=b.name,T=b.value;return{"transform-type":x,"transform-value":T}}):[]},toStyle:function(u,c){var f,h=c.name;return f={},f[h]="".concat(u["transform-type"],"(").concat(u["transform-value"],")"),f},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(u){var c=u.property,f=u.to;if(f.value){var h=c.getOption(),g=Bo({},h.propValue||{}),y=c.getParent().getProperty("transform-value"),_=y.getUnit();(!_||(g==null?void 0:g.units.indexOf(_))<0)&&(g.unit=(g==null?void 0:g.units[0])||""),y.up(g)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return s.forEach(function(u){var c=u[0],f=u[1],h=u[2];n.add(c,f||{},{from:h})}),this},a.prototype.add=function(n,t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=e.from||"",o=this.props[r||n]||{},s=Bo(Bo(Bo({},o),{property:n}),t);return s.properties&&(0,k.isFunction)(s.properties)&&(s.properties=s.properties()),this.props[n]=s,s},a.prototype.get=function(n){return this.props[n]},a.prototype.build=function(n){var t=this,e=[],r=(0,k.isString)(n)?[n]:n;return r.forEach(function(o){e.push(t.get(o)||{property:o})}),e},a}();const WT=UT;var zT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),KT=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},GT=function(a){zT(n,a);function n(t){var e=a.call(this,t)||this,r=t.config||{},o=e.model,s=r.em;return e.config=r,e.em=s,e.pfx=r.stylePrefix||"",e.listenTo(o,"destroy remove",e.remove),e.listenTo(o,"change:open",e.updateOpen),e.listenTo(o,"change:visible",e.updateVisibility),e}return n.prototype.template=function(t){var e,r=t.pfx,o=t.label,s=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,u=(s==null?void 0:s.caret)||"",c="".concat(r,"sector-");return cn(rh||(rh=KT([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),c,c,u,c,o)},n.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},n.prototype.updateOpen=function(){var t=this,e=t.$el,r=t.model,o=t.pfx,s=r.isOpen();e[s?"addClass":"removeClass"]("".concat(o,"open")),this.getPropertiesEl().style.display=s?"":"none"},n.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},n.prototype.getPropertiesEl=function(){var t=this,e=t.$el,r=t.pfx;return e.find(".".concat(r,"properties")).get(0)},n.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get("open"))},n.prototype.renderProperties=function(){var t=this,e=t.model,r=t.config,o=e.get("properties");if(o){var s=new yf({collection:o,config:r});this.$el.append(s.render().el)}},n.prototype.render=function(){var t=this,e=t.pfx,r=t.model,o=t.$el,s=r.getId(),u=r.getName();return o.html(this.template({pfx:e,label:u})),this.renderProperties(),o.attr("class","".concat(e,"sector ").concat(e,"sector__").concat(s," no-select")),this.updateOpen(),this},n}(Nt.Ss);const $T=GT;var rh,qT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),YT=function(a){qT(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this,r=t.module,o=t.config,s=e.collection;return e.pfx=(o==null?void 0:o.stylePrefix)||"",e.ppfx=(o==null?void 0:o.pStylePrefix)||"",e.config=o,e.module=r,e.listenTo(s,"add",e.addTo),e.listenTo(s,"reset",e.render),e}return n.prototype.remove=function(){var t=this;return Nt.Ss.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(e){return t[e]={}}),this},n.prototype.addTo=function(t,e,r){r===void 0&&(r={}),this.addToCollection(t,null,r)},n.prototype.addToCollection=function(t,e,r){r===void 0&&(r={});var o=this,s=o.config,u=o.el,c=e||u,f=new $T({model:t,config:s}).render().el;return(0,Wt.Sc)(c,f,r.at),f},n.prototype.render=function(){var t=this,e=this,r=e.$el,o=e.pfx,s=e.ppfx;r.empty();var u=document.createDocumentFragment();return this.collection.each(function(c){return t.addToCollection(c,u)}),r.append(u),r.addClass("".concat(o,"sectors ").concat(s,"one-bg ").concat(s,"two-color")),this},n}(Nt.Ss);const XT=YT;var ZT=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Uo=function(){return Uo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Uo.apply(this,arguments)},nh=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},zv="style",ps="".concat(zv,":"),_f="".concat(ps,"sector"),JT="".concat(_f,":add"),QT="".concat(_f,":remove"),tP="".concat(_f,":update"),wf="".concat(ps,"property"),eP="".concat(wf,":add"),rP="".concat(wf,":remove"),nP="".concat(wf,":update"),Kv="".concat(ps,"layer:select"),ef="".concat(ps,"target"),oP="".concat(ps,"custom"),oh=function(a){return a||a===0},iP={all:zv,sectorAdd:JT,sectorRemove:QT,sectorUpdate:tP,propertyAdd:eP,propertyRemove:rP,propertyUpdate:nP,layerSelect:Kv,target:ef,custom:oP},aP=function(a){ZT(n,a);function n(t){var e=a.call(this,t,"StyleManager",new HT([],{em:t}),iP,D1())||this;e.Sector=Wv,e.storageKey="",(0,k.bindAll)(e,"__clearStateTarget");var r=e.config,o=r.pStylePrefix;o&&(r.stylePrefix=o+r.stylePrefix),e.builtIn=new WT,e.properties=new mf([],{em:t,module:e}),e.sectors=e.all;var s=new Nt.Kx({targets:[]});e.model=s;var u=Sr.I.update,c="component:toggled ".concat(u,":classes change:state change:device frame:resized selector:type");e.upAll=(0,k.debounce)(function(){return e.__upSel()},0),s.listenTo(t,c,e.upAll),s.listenTo(t,"component:toggled",e.__clearStateTarget);var f=(0,k.debounce)(function(){e.__upProps(),e.__trgCustom()},0);s.listenTo(t,"styleable:change undo redo",f);var h=(0,k.debounce)(function(){return e.__trgCustom()},0);return s.listenTo(t,"".concat(Kv," ").concat(ef),h),s.on("change:lastTarget",function(){return t.trigger(ef,e.getSelected())}),e}return n.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},n.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},n.prototype.__trgEv=function(t){for(var e,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];(e=this.em).trigger.apply(e,nh([t],r,!1))},n.prototype.__clearStateTarget=function(){var t=this,e=this.em,r=this.__getStateTarget();r&&(e==null||e.skip(function(){e.Css.remove(r),t.model.set({stateTarget:null})}))},n.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},n.prototype.postRender=function(){this.__appendTo()},n.prototype.addSector=function(t,e,r){r===void 0&&(r={});var o=this.getSector(t);return o||(e.id=t,o=this.sectors.add(e,r)),o},n.prototype.getSector=function(t,e){e===void 0&&(e={});var r=this.sectors.where({id:t})[0];return!r&&e.warn&&this._logNoSector(t),r||null},n.prototype.getSectors=function(t){t===void 0&&(t={});var e=this.sectors,r=e&&e.models?t.array?nh([],e.models,!0):e:[];return t.visible?r.filter(function(o){return o.isVisible()}):r},n.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},n.prototype.addProperty=function(t,e,r){r===void 0&&(r={});var o=this.getSector(t,{warn:!0}),s;return o&&(s=o.addProperty(e,r)),s},n.prototype.getProperty=function(t,e){var r=this.getSector(t,{warn:!0}),o;return r&&(o=r.properties.filter(function(s){return s.get("property")===e||s.get("id")===e})[0]),o},n.prototype.getProperties=function(t){var e,r=this.getSector(t,{warn:!0});return r&&(e=r.properties),e},n.prototype.removeProperty=function(t,e){var r=this.getProperties(t);return r?r.remove(this.getProperty(t,e)):null},n.prototype.select=function(t,e){var r=this;e===void 0&&(e={});var o=this.em,s=(0,k.isArray)(t)?t:[t],u=e.stylable,c=o.Css,f=[];s.filter(Boolean).forEach(function(x){var T=x;if((0,k.isString)(x)){var I=c.getRule(x)||c.setRule(x);!(0,k.isUndefined)(u)&&I.set({stylable:u}),T=I}f.push(T)});var h=e.component||f.filter(function(x){return(0,Pt.isComponent)(x)}).reverse()[0];f=f.map(function(x){return r.getModelToStyle(x)});var g=o.getState(),y=f.slice().reverse()[0],_=this.getParentRules(y,{state:g,component:h}),b=this.__getStateTarget();return o.skip(function(){var x;if(g&&(!((x=y==null?void 0:y.getState)===null||x===void 0)&&x.call(y))){var T=y.getStyle();b?b.setStyle(T):b=c.getAll().add({selectors:"gjs-selected",style:T,shallow:!0,important:!0})}else b&&(c.remove(b),b=void 0)}),this.model.set({targets:f,lastTarget:y,lastTargetParents:_,stateTarget:b,component:h}),this.__upProps(e),f},n.prototype.getSelected=function(){return this.model.get("lastTarget")},n.prototype.getSelectedAll=function(){return this.model.get("targets")},n.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},n.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},n.prototype.addStyleTargets=function(t,e){this.getSelectedAll().map(function(s){return s.addStyle(t,e)});var r=this.getSelected();r&&this.__emitCmpStyleUpdate(t);var o=this.__getStateTarget();r&&(o==null||o.setStyle(r.getStyle(),e))},n.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},n.prototype.getBuiltInAll=function(){return this.builtIn.props},n.prototype.addBuiltIn=function(t,e){return this.builtIn.add(t,e)},n.prototype.getModelToStyle=function(t,e){e===void 0&&(e={});var r=this.em,o=e.skipAdd;if(r&&(t!=null&&t.toHTML)){var s=r.getConfig(),u=r.UndoManager,c=r.Css,f=r.Selectors,h=f?f.getConfig():{},g=s.devicePreviewMode?"":r.get("state"),y=t.get("classes"),_=y.getStyleable(),b=_.length,x=!h.componentFirst||e.useClasses,T={noCount:1},I={state:g,addOpts:T};u.skip(function(){var z;if(b&&x){var F=r.getCurrentMedia();z=c.get(_,g,F),!z&&!o&&(z=c.add(_,g,F,{},T))}else if(s.avoidInlineStyle){var W=t.getId();z=c.getIdRule(W,I),!z&&!o&&(z=c.setIdRule(W,{},I)),t.is("wrapper")&&z.set("wrapper",1,T)}z&&(t=z)})}return t},n.prototype.getParentRules=function(t,e){var r=e===void 0?{}:e,o=r.state,s=r.component,u=this.em,c=[];if(u&&t){var f=s,h=u.Css,g=u.CodeManager.getGenerator("css"),y=t.toHTML?t:t.getComponent(),_={array:!0},b=[],x=[],T=[],I=[],z=[],F=function(ut){return ut.length?h.getRules().filter(function(q){var nt=q.getSelectors().map(function(H){return H.getFullName()});return nt.length===0?!1:nt.every(function(H){return ut.indexOf(H)>=0})}):[]},W=function(ut){return ut?h.getRules().filter(function(q){return q.selectorsToString()===ut}):[]};if(y)b=h.getRules("#".concat(y.getId())),x=W(y.get("tagName")),I=f?F(f.getSelectors().getFullName(_)):[],z=I.concat(x).concat(b);else{b=f?h.getRules("#".concat(f.getId())):[],x=W((f==null?void 0:f.get("tagName"))||"");var ct=(f==null?void 0:f.getSelectors().getFullName(_))||[],_t=ct.filter(function(ut){return t.getSelectors().getFullName(_).findIndex(function(q){return q===ut})===-1});T=F(_t.concat(t.getSelectors().getFullName(_))),z=x.concat(b).concat(T)}var xt=z.filter(function(ut){return(0,k.isUndefined)(o)?1:ut.get("state")===o}).sort(g.sortRules).reverse();c=xt.slice(xt.indexOf(t)+1)}return c},n.prototype.addType=function(t,e){this.properties.addType(t,e)},n.prototype.getType=function(t){return this.properties.getType(t)},n.prototype.getTypes=function(){return this.properties.getTypes()},n.prototype.createType=function(t,e){var r=e===void 0?{}:e,o=r.model,s=o===void 0?{}:o,u=r.view,c=u===void 0?{}:u,f=this.config,h=this.getType(t);if(h)return new h.view(Uo({model:new h.model(s),config:f},c))},n.prototype.render=function(){var t=this,e=t.config,r=t.em,o=t.SectView,s=o&&o.el;return this.SectView=new XT({el:s,em:r,config:e,module:this,collection:this.sectors}),this.SectView.render().el},n.prototype._logNoSector=function(t){var e=this.em;e&&e.logWarning("'".concat(t,"' sector not found"))},n.prototype.__emitCmpStyleUpdate=function(t,e){e===void 0&&(e={});var r=this.em;if(!t.__p){var o=this.getSelectedAll(),s=e.components||r.getSelectedAll(),u=Array.isArray(s)?s:[s],c=Uo({},t);delete c.__p,u.forEach(function(f){return!o.includes(f)&&f.__onStyleChange(c)})}},n.prototype.__upProps=function(t){var e=this;t===void 0&&(t={});var r=this.getSelected();if(r){var o=this.sectors,s=this.model.get("component"),u=this.getSelectedParents(),c=r.getStyle(),f=u.map(function(h){return{target:h,style:h.getStyle()}});o.map(function(h){h.getProperties().map(function(g){e.__upProp(g,c,f,t)})}),o.forEach(function(h){var g=h.getProperties();g.forEach(function(_){var b=_.__checkVisibility({target:r,component:s,sectors:o});_.set("visible",b)});var y=g.some(function(_){return _.isVisible()});h.set("visible",y)})}},n.prototype.__upProp=function(t,e,r,o){var s=this,u=t.getName(),c=e[u],f=oh(c),h=t.getType()==="stack",g=t.getType()==="composite",y=Uo(Uo({},o),{__up:!0}),_=!g&&!h,b=t,x=t,T=h?b.__getLayersFromStyle(e):[],I=g?x.__getPropsFromStyle(e):{},z=f?c:null,F=null;if(h&&T===null||g&&I===null){var W=h?"__getLayersFromStyle":"__getPropsFromStyle",ct=r.filter(function(nt){return b[W](nt.style)!==null})[0];if(ct){z=ct.style[u],F=ct.target;var _t=b[W](ct.style);h?T=_t:I=_t}}else if(!f){z=null;var ct=r.filter(function(H){return oh(H.style[u])})[0];ct&&(z=ct.style[u],F=ct.target)}if(t.__setParentTarget(F),_&&t.__getFullValue()!==z&&t.upValue(z,y),h&&b.__setLayers(T||[],{isEmptyValue:b.isEmptyValueStyle(e)}),g){var xt=x.getProperties();if(x.isDetached()){var ut=x.__getPropsFromStyle(e,{byName:!0})||{},q=r.map(function(nt){return Uo(Uo({},nt),{style:x.__getPropsFromStyle(nt.style,{byName:!0})||{}})});xt.map(function(nt){return s.__upProp(nt,ut,q,o)})}else x.__setProperties(I||{},y),x.getProperties().map(function(nt){return nt.__setParentTarget(F)})}},n.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach(function(e){e.reset(),e.stopListening()}),(t=this.SectView)===null||t===void 0||t.remove(),this.model.stopListening(),this.upAll.cancel()},n}(yo);const sP=aP;var lP=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),uu=function(){return uu=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},uu.apply(this,arguments)},uP=function(a){lP(n,a);function n(t,e){e===void 0&&(e={});var r,o=a.call(this,t,e)||this;return o.mutable=(r=t.mutable)!==null&&r!==void 0?r:!0,o.on("change",o.handleChange),o}return Object.defineProperty(n.prototype,"cl",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataSource",{get:function(){return this.cl.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"em",{get:function(){return this.dataSource.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"index",{get:function(){return this.cl.indexOf(this)},enumerable:!1,configurable:!0}),n.prototype.handleChange=function(){var t=this,e=this.changedAttributes();(0,k.keys)(e).forEach(function(r){return t.triggerChange(r)})},n.prototype.getPath=function(t,e){e===void 0&&(e={});var r=this,o=r.dataSource,s=r.id,u=r.index,c=o.id,f=t?".".concat(t):"";return"".concat(c,".").concat(e.useIndex?u:s).concat(f)},n.prototype.getPaths=function(t){return[this.getPath(t),this.getPath(t,{useIndex:!0})]},n.prototype.triggerChange=function(t){var e=this,r=e.dataSource,o=e.em,s={dataSource:r,dataRecord:this},u=this.getPaths(t);u.forEach(function(c){return o.trigger("".concat(oa.path,":").concat(c),uu(uu({},s),{path:c}))})},n.prototype.set=function(t,e,r){var o=this,s,u;if(!this.isNew()&&this.attributes.mutable===!1)throw new Error("Cannot modify immutable record");var c=(u=(s=this.dataSource)===null||s===void 0?void 0:s.transformers)===null||u===void 0?void 0:u.onRecordSetValue,f=function(T,I,z){z===void 0&&(z={});var F=z!=null&&z.avoidTransformers||!c?I:c({id:o.id,key:T,value:I});a.prototype.set.call(o,T,F,z),a.prototype.set.call(o,{__p:z.partial?!0:void 0},z)};if(typeof t=="object"&&t!==null)for(var h=t,g=0,y=Object.entries(h);g<y.length;g++){var _=y[g],b=_[0],x=_[1];f(b,x,e)}else f(t,e,r);return this},n}(Nt.Kx);const cP=uP;var fP=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gv=function(a){fP(n,a);function n(t,e){var r=a.call(this,t,e)||this;return r.dataSource=e.dataSource,r}return n}(Nt.pM);const ih=Gv;Gv.prototype.model=cP;var dP=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pP=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},hP=function(a){dP(n,a);function n(t,e){var r=a.call(this,t,e)||this,o=t.records,s=t.transformers;return r.transformers=s||{},o instanceof ih||r.set({records:new ih(o,{dataSource:r})}),r.listenTo(r.records,"add",r.onAdd),r.listenTo(r.records,Nt.e2,r.handleChanges),r}return n.prototype.defaults=function(){return{records:[],transformers:{}}},Object.defineProperty(n.prototype,"records",{get:function(){return this.attributes.records},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"em",{get:function(){return this.collection.em},enumerable:!1,configurable:!0}),n.prototype.onAdd=function(t){t.triggerChange()},n.prototype.addRecord=function(t,e){return this.records.add(t,e)},n.prototype.getRecord=function(t){var e=this.records.get(t);return e},n.prototype.getRecords=function(){var t=this;return pP([],this.records.models,!0).map(function(e){return t.getRecord(e.id)})},n.prototype.removeRecord=function(t,e){var r=this.getRecord(t);if((r==null?void 0:r.mutable)===!1&&!(e!=null&&e.dangerously))throw new Error("Cannot remove immutable record");return this.records.remove(t,e)},n.prototype.setRecords=function(t){var e=this;this.records.reset([],{silent:!0}),t.forEach(function(r){e.records.add(r)})},n.prototype.handleChanges=function(t,e,r){this.em.changesUp(r||e)},n}(Nt.Kx);const vP=hP;var gP=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cu=function(){return cu=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},cu.apply(this,arguments)},yP=function(a){gP(n,a);function n(t,e){var r=a.call(this,t,e)||this;return r.em=e,r.model=function(o,s){return s===void 0&&(s={}),new vP(o,cu(cu({},s),{em:e}))},r}return n}(Nt.pM);const mP=yP;var _P=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wP=function(a){_P(n,a);function n(t){var e=a.call(this,t,"DataSources",new mP([],t),oa)||this;return e.storageKey="dataSources",e.events=oa,Object.assign(e,ul.Events),e}return n.prototype.destroy=function(){},n.prototype.add=function(t,e){e===void 0&&(e={});var r=this.all;return t.id=t.id||this._createId(),r.add(t,e)},n.prototype.get=function(t){return this.all.get(t)},n.prototype.getValue=function(t,e){return(0,Pt.get)(this.getContext(),t,e)},n.prototype.getContext=function(){return this.all.reduce(function(t,e){return t[e.id]=e.records.reduce(function(r,o,s){var u=o;return r[u.id||s]=u.attributes,r},{}),t},{})},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.fromPath=function(t){var e=[],r=(0,Pt.stringToPath)(t||""),o=r[0],s=r[1],u=r.slice(2),c=this.get(o),f=c==null?void 0:c.records.get(s);return c&&e.push(c),f&&(e.push(f),u.length&&e.push(u.join("."))),e},n.prototype.store=function(){var t,e=[];return this.all.forEach(function(r){var o=r.get("skipFromStorage");o||e.push({id:r.id,name:r.get("name"),records:r.records.toJSON(),skipFromStorage:o})}),t={},t[this.storageKey]=e,t},n.prototype.load=function(t){return this.loadProjectData(t)},n.prototype.postLoad=function(){var t=this,e=t.em,r=t.all;e.listenTo(r,Nt.e2,function(o,s,u){return e.changesUp(u||s)})},n}(yo);const $v=wP;var bP=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rr=function(){return Rr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Rr.apply(this,arguments)},Oc=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{f(e.next(h))}catch(g){s(g)}}function c(h){try{f(e.throw(h))}catch(g){s(g)}}function f(h){h.done?o(h.value):r(h.value).then(u,c)}f((e=e.apply(a,n||[])).next())})},Tc=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(e=1,r&&(o=f[0]&2?r.return:f[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,f[1])).done)return o;switch(r=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=n.call(a,t)}catch(h){f=[6,h],r=0}finally{e=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},CP=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},xP=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))};by().$=Pr.default;var SP=[WS,uS,aO,m1,OC,Gy,aC,sP,Yb,yO,c1,BO,k1,QC,Sx,j0,hx,Mb,$v],OP=[$x,vb,rS,Qw,$v];Cy({$:Pr.default});var ah={debug:console.log,info:console.info,warning:console.warn,error:console.error},TP=function(a){bP(n,a);function n(t){t===void 0&&(t={});var e=a.call(this)||this;e.Model=Nt.Kx,e.Collection=Nt.pM,e.__skip=!1,e.defaultRunning=!1,e.destroyed=!1,e._config=t;var r=e.config;e.set("Config",t),e.set("modules",[]),e.set("toLoad",[]),e.set("storables",[]),e.set("selected",new Oy),e.set("dmode",r.dragMode);var o=r.el,s=r.log,u=s===!0?(0,k.keys)(ah):(0,k.isArray)(s)?s:[];return(0,k.bindAll)(e,"initBaseColorPicker"),o&&r.fromElement&&(r.components=o.innerHTML),e.attrsOrig=o?(0,k.toArray)(o.attributes).reduce(function(c,f){return c[f.nodeName]=f.nodeValue,c},{}):"",r.components&&!r.pageManager&&(r.pageManager={pages:[{component:r.components}]}),SP.forEach(function(c){return e.loadModule(c)}),OP.forEach(function(c){return e.loadStorableModule(c)}),e.on("change:componentHovered",e.componentHovered,e),e.on("change:changesCount",e.updateChanges,e),e.on("change:readyLoad change:readyCanvas",e._checkReady,e),u.forEach(function(c){return e.listenLog(c)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(c){var f=c.from,h=c.to;e.listenTo(e,f,function(){for(var g=[],y=0;y<arguments.length;y++)g[y]=arguments[y];e.trigger.apply(e,xP([h],g,!1)),e.logWarning("The event '".concat(f,"' is deprecated, replace it with '").concat(h,"'"))})}),e}return n.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(n.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"DataSources",{get:function(){return this.get("DataSources")},enumerable:!1,configurable:!0}),n.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},n.prototype.getContainer=function(){return this.config.el},n.prototype.listenLog=function(t){this.listenTo(this,"log:".concat(t),ah[t])},Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"version",{get:function(){var t;return((t=this.config.grapesjs)===null||t===void 0?void 0:t.version)||""},enumerable:!1,configurable:!0}),n.prototype.getConfig=function(t){var e=this.config;return(0,k.isUndefined)(t)?e:e[t]},n.prototype.loadOnStart=function(){var t=this,e=this.config,r=e.projectData,o=e.headless,s=this.Storage;this.toLoad.reverse().forEach(function(f){return f.onLoad()});var u=function(){t.modules.forEach(function(f){return f.postLoad&&f.postLoad(t)}),t.set("readyLoad",1)};o?(r&&this.loadData(r),u()):this._storageTimeout=setTimeout(function(){return Oc(t,void 0,void 0,function(){var f;return Tc(this,function(h){switch(h.label){case 0:return r?(this.loadData(r),[3,5]):[3,1];case 1:if(!(s!=null&&s.canAutoload()))return[3,5];h.label=2;case 2:return h.trys.push([2,4,,5]),[4,this.load()];case 3:return h.sent(),[3,5];case 4:return f=h.sent(),this.logError(f),[3,5];case 5:return u(),[2]}})})});var c=new n({noticeOnUnload:!1,storageManager:!1,undoManager:!1});c.set({isShallow:!0}),c.Pages.onLoad(),c.Canvas.postLoad(),this.set("shallow",c)},n.prototype.updateChanges=function(t,e,r){var o=this,s=this.Storage,u=this.getDirtyCount();r.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return o.trigger("update")})),this.config.noticeOnUnload&&(window.onbeforeunload=u?function(){return!0}:null),s.isAutosave()&&u>=s.getStepsBeforeSave()&&this.store().catch(function(c){return o.logError(c)})},n.prototype.loadModule=function(t){var e=new t(this);return this.set(e.name,e),e.onLoad&&this.toLoad.push(e),this.modules.push(e),e},n.prototype.loadStorableModule=function(t){var e=this.loadModule(t);return this.storables.push(e),e},n.prototype.init=function(t,e){e===void 0&&(e={}),this.destroyed&&(this.initialize(e),this.destroyed=!1),this.set("Editor",t)},n.prototype.getEditor=function(){return this.get("Editor")},n.prototype.handleUpdates=function(t,e,r){var o=this;r===void 0&&(r={}),!(this.__skip||r.temporary||r.noCount||r.avoidStore||r.partial||!this.get("ready"))&&(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var s=o.getDirtyCount()||0;r.unset;var u=CP(r,["unset"]);o.set("changesCount",s+1,u)},0))},n.prototype.changesUp=function(t){this.handleUpdates(0,0,t)},n.prototype.componentHovered=function(t,e,r){var o=this.previous("componentHovered");o&&this.trigger("component:unhovered",o,r),e&&this.trigger("component:hovered",e,r)},n.prototype.getSelected=function(){return this.selected.lastComponent()},n.prototype.getSelectedAll=function(){return this.selected.allComponents()},n.prototype.setSelected=function(t,e){var r=this;e===void 0&&(e={});var o=e.event,s=o&&(o.ctrlKey||o.metaKey),u=(o||{}).shiftKey,c=((0,k.isArray)(t)?t:[t]).map(function(y){var _,b;return((b=(_=y==null?void 0:y.delegate)===null||_===void 0?void 0:_.select)===null||b===void 0?void 0:b.call(_,y))||y}).filter(Boolean),f=this.getSelectedAll(),h=this.getConfig().multipleSelection,g=(0,k.isArray)(t);(g||!t)&&this.removeSelected(f.filter(function(y){return!(0,k.contains)(c,y)})),c.forEach(function(y){if(y&&(r.trigger(Sr.I.selectBefore,y,e),!y.get("selectable")||e.abort))if(e.useValid){for(var _=y.parent();_&&!_.get("selectable");)_=_.parent();y=_}else return;if(s&&h)return r.toggleSelected(y);if(u&&h){r.clearSelection(r.Canvas.getWindow());var b=y.collection,x=y.index(),T,I;if(r.getSelectedAll().forEach(function(z){var F=z.collection,W=z.index();F===b&&(W<x?T=(0,k.isUndefined)(T)?W:Math.max(T,W):W>x&&(I=(0,k.isUndefined)(I)?W:Math.min(I,W)))}),!(0,k.isUndefined)(T))for(;T!==x;)r.addSelected(b.at(T)),T++;if(!(0,k.isUndefined)(I))for(;I!==x;)r.addSelected(b.at(I)),I--;return r.addSelected(y)}!g&&r.removeSelected(f.filter(function(z){return z!==y})),r.addSelected(y,e)})},n.prototype.addSelected=function(t,e){var r=this;e===void 0&&(e={});var o=(0,k.isArray)(t)?t:[t];o.forEach(function(s){var u=r.selected;if(!(!s||!s.get("selectable")||s.parents().some(function(f){return u.hasComponent(f)}))){e.forceChange&&r.removeSelected(s,e);var c=u.allComponents().filter(function(f){return(0,k.contains)(f.parents(),s)});c.forEach(function(f){return r.removeSelected(f,e)}),u.addComponent(s,e),r.trigger(Sr.I.select,s,e),r.Canvas.addSpot({type:Ln.F.Select,component:s})}})},n.prototype.removeSelected=function(t,e){var r=this;e===void 0&&(e={}),this.selected.removeComponent(t,e);var o=(0,k.isArray)(t)?t:[t];o.forEach(function(s){return r.Canvas.removeSpots({type:Ln.F.Select,component:s})})},n.prototype.toggleSelected=function(t,e){var r=this;e===void 0&&(e={});var o=(0,k.isArray)(t)?t:[t];o.forEach(function(s){r.selected.hasComponent(s)?r.removeSelected(s,e):r.addSelected(s,e)})},n.prototype.setHovered=function(t,e){var r=this;e===void 0&&(e={});var o=function(c,f){var h=r,g=h.config,y=h.Canvas,_=r.getHovered(),b=r.getSelectedAll(),x=Ln.F.Hover,T=Ln.F.Spacing;r.set("componentHovered",c||null,f),_&&(y.removeSpots({type:x,component:_}),y.removeSpots({type:T,component:_})),c&&(y.addSpot({type:x,component:c}),(!b.includes(c)||g.showOffsetsSelected)&&y.addSpot({type:T,component:c}))};if(!t)return o();var s="component:hover";if(e.forceChange&&o(),this.trigger("".concat(s,":before"),t,e),!t.get("hoverable"))if(e.useValid&&!e.abort){for(var u=t.parent();u&&!u.get("hoverable");)u=u.parent();t=u}else return;e.abort||(o(t,e),this.trigger(s,t,e))},n.prototype.getHovered=function(){return this.get("componentHovered")},n.prototype.setComponents=function(t,e){return e===void 0&&(e={}),this.Components.setComponents(t,e)},n.prototype.getComponents=function(){var t=this.Components,e=this.CodeManager;if(!(!t||!e)){var r=t.getComponents();return e.getCode(r,"json")}},n.prototype.setStyle=function(t,e){e===void 0&&(e={});var r=this.Css;return r.clear(e),r.getAll().add(t,e),this},n.prototype.addStyle=function(t,e){e===void 0&&(e={});var r=this.getStyle().add(t,e);return(0,k.isArray)(r)?r:[r]},n.prototype.getStyle=function(){return this.Css.getAll()},n.prototype.setState=function(t){return this.set("state",t),this},n.prototype.getState=function(){return this.get("state")||""},n.prototype.getHtml=function(t){t===void 0&&(t={});var e=this.config,r=e.optsHtml,o=e.jsInHtml?this.getJs(t):"",s=t.component||this.Components.getComponent(),u=s?this.CodeManager.getCode(s,"html",Rr(Rr({},r),t)):"";return u+=o?"<script>".concat(o,"<\/script>"):"",u},n.prototype.getCss=function(t){t===void 0&&(t={});var e=this.config,r=e.optsCss,o=t.avoidProtected,s=(0,k.isUndefined)(t.keepUnusedStyles)?e.keepUnusedStyles:t.keepUnusedStyles,u=this.Css,c=t.component||this.Components.getComponent(),f=o?"":e.protectedCss,h=c&&this.CodeManager.getCode(c,"css",Rr(Rr({cssc:u,keepUnusedStyles:s},r),t));return c?t.json?h:f+h:""},n.prototype.getJs=function(t){t===void 0&&(t={});var e=t.component||this.Components.getWrapper();return e?this.CodeManager.getCode(e,"js").trim():""},n.prototype.store=function(t){return Oc(this,void 0,void 0,function(){var e;return Tc(this,function(r){switch(r.label){case 0:return e=this.storeData(),[4,this.Storage.store(e,t)];case 1:return r.sent(),this.clearDirtyCount(),[2,e]}})})},n.prototype.load=function(t){return Oc(this,arguments,void 0,function(e,r){var o;return r===void 0&&(r={}),Tc(this,function(s){switch(s.label){case 0:return[4,this.Storage.load(e)];case 1:return o=s.sent(),this.loadData(o),[4,(0,Pt.wait)()];case 2:return s.sent(),r.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,o]}})})},n.prototype.storeData=function(){var t={},e=this.getEditing();return e&&e.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(r){t=Rr(Rr({},t),r.store(1))}),JSON.parse(JSON.stringify(t))},n.prototype.loadData=function(t){return t===void 0&&(t={}),(0,Pt.isEmptyObj)(t)||(this.storables.forEach(function(e){return e.clear()}),this.storables.forEach(function(e){return e.load(t)})),t},n.prototype.getDeviceModel=function(){var t=this.get("device");return this.Devices.get(t)},n.prototype.runDefault=function(t){t===void 0&&(t={});var e=this.get("Commands").get(this.config.defaultCommand);!e||this.defaultRunning||(e.stop(this,this,t),e.run(this,this,t),this.defaultRunning=!0)},n.prototype.stopDefault=function(t){t===void 0&&(t={});var e=this.get("Commands");if(e){var r=e.get(this.config.defaultCommand);!r||!this.defaultRunning||(r.stop(this,this,t),this.defaultRunning=!1)}},n.prototype.refreshCanvas=function(t){t===void 0&&(t={}),this.Canvas.refresh({spots:t.tools})},n.prototype.clearSelection=function(t){var e,r=t||window;(e=r.getSelection())===null||e===void 0||e.removeAllRanges()},n.prototype.getCurrentMedia=function(){var t=this.config,e=this.getDeviceModel(),r=t.mediaCondition,o=t.devicePreviewMode,s=e&&e.get("widthMedia");return e&&s&&!o?"(".concat(r,": ").concat(s,")"):""},n.prototype.getWrapper=function(){return this.Components.getWrapper()},n.prototype.setCurrentFrame=function(t){return this.set("currentFrame",t)},n.prototype.getCurrentFrame=function(){return this.get("currentFrame")},n.prototype.getCurrentFrameModel=function(){var t;return(t=this.getCurrentFrame()||{})===null||t===void 0?void 0:t.model},n.prototype.getIcon=function(t){var e=this.config.icons||{};return e[t]||""},n.prototype.getDirtyCount=function(){return this.get("changesCount")},n.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},n.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},n.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},n.prototype.setDragMode=function(t){return this.set("dmode",t)},n.prototype.getDragMode=function(t){var e=(t==null?void 0:t.getDragMode())||this.get("dmode");return e||""},n.prototype.t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.get("I18n");return r==null?void 0:r.t.apply(r,t)},n.prototype.inAbsoluteMode=function(t){return this.getDragMode(t)==="absolute"},n.prototype.destroyAll=function(){var t=this,e=this,r=e.config,o=e.view;this.trigger("destroy");var s=this.getEditor(),u=(r.grapesjs||{}).editors,c=u===void 0?[]:u,f=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),f==null||f.destroyAll(),this.stopListening(),this.stopDefault(),(this.modules||[]).slice().reverse().forEach(function(h){return h.destroy()}),o!=null&&o.remove&&o.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(h){return t[h]={}}),c.splice(c.indexOf(s),1),(0,Pt.hasWin)()&&(0,Pr.default)(r.el).empty().attr(this.attrsOrig),this.trigger("destroyed")},n.prototype.getEditing=function(){var t=this.get("editing");return t&&t.model||void 0},n.prototype.setEditing=function(t){return this.set("editing",t),this},n.prototype.isEditing=function(){return!!this.get("editing")},n.prototype.log=function(t,e){e===void 0&&(e={});var r=e.ns,o=e.level,s=o===void 0?"debug":o;if(this.trigger("log",t,e),s&&this.trigger("log:".concat(s),t,e),r){var u="log-".concat(r);this.trigger(u,t,e),s&&this.trigger("".concat(u,":").concat(s),t,e)}},n.prototype.logInfo=function(t,e){this.log(t,Rr(Rr({},e),{level:"info"}))},n.prototype.logWarning=function(t,e){this.log(t,Rr(Rr({},e),{level:"warning"}))},n.prototype.logError=function(t,e){this.log(t,Rr(Rr({},e),{level:"error"}))},n.prototype.initBaseColorPicker=function(t,e){e===void 0&&(e={});var r=this.config,o=r.colorPicker,s=o===void 0?{}:o,u=r.el,c=r.stylePrefix;return(0,Pr.default)(t).spectrum(Rr(Rr({containerClassName:"".concat(c,"one-bg ").concat(c,"two-color"),appendTo:u||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"⨯"},e),s))},n.prototype.skip=function(t){this.__skip=!0;var e=this.UndoManager;e?e.skip(t):t(),this.__skip=!1},n.prototype.data=function(t,e,r){var o="_gjs-data";if(t[o]||(t[o]={}),(0,k.isUndefined)(r))return t[o][e];t[o][e]=r},n}(Nt.Kx);const PP=TP;function EP(){return window.location.hostname}var AP=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kP=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{f(e.next(h))}catch(g){s(g)}}function c(h){try{f(e.throw(h))}catch(g){s(g)}}function f(h){h.done?o(h.value):r(h.value).then(u,c)}f((e=e.apply(a,n||[])).next())})},MP=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(e=1,r&&(o=f[0]&2?r.return:f[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,f[1])).done)return o;switch(r=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=n.call(a,t)}catch(h){f=[6,h],r=0}finally{e=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},DP=function(a){AP(n,a);function n(t){var e=a.call(this,{model:t})||this,r=t.Panels,o=t.UndoManager;return t.view=e,t.once("change:ready",function(){r.active(),r.disableButtons(),o.clear(),t.getConfig().telemetry&&e.sendTelemetryData().catch(function(){}),setTimeout(function(){t.trigger("load",t.Editor),t.clearDirtyCount()})}),e}return n.prototype.render=function(){var t=this,e=this,r=e.$el,o=e.model,s=o.Panels,u=o.Canvas,c=o.config,f=o.modules,h=c.stylePrefix,g=["".concat(h,"editor")];!c.customUI&&g.push("".concat(h,"one-bg ").concat(h,"two-color"));var y=(0,Pr.default)(c.el||"body ".concat(c.container));c.cssIcons&&(0,Pt.appendStyles)(c.cssIcons,{unique:!0,prepand:!0}),r.empty(),c.width&&y.css("width",c.width),c.height&&y.css("height",c.height),r.append(u.render()),r.append(s.render());var _=o.shallow,b=_.Canvas.render();return b.style.display="none",r.append(b),r.attr("class",g.join(" ")),y.addClass("".concat(h,"editor-cont")).empty().append(r),f.forEach(function(x){var T;return(T=x.postRender)===null||T===void 0?void 0:T.call(x,t)}),this},n.prototype.sendTelemetryData=function(){return kP(this,void 0,void 0,function(){var t,e,r,o,s,u,c,f;return MP(this,function(h){switch(h.label){case 0:return t=EP(),t==="localhost"||t.includes("localhost")?[2]:(e="gjs_telemetry_sent_",r=this.model.version,o="".concat(e).concat(r),sessionStorage.getItem(o)?[2]:(s="https://app.grapesjs.com",[4,fetch("".concat(s,"/api/gjs/telemetry/collect"),{method:"POST",body:JSON.stringify({domain:t,version:r})})]));case 1:return u=h.sent(),u.ok?[3,3]:(c=Error.bind,f="Failed to send telemetry data ".concat,[4,u.text()]);case 2:throw new(c.apply(Error,[void 0,f.apply("Failed to send telemetry data ",[h.sent()])]));case 3:return sessionStorage.setItem(o,"true"),Object.keys(sessionStorage).forEach(function(g){g.startsWith(e)&&g!==o&&sessionStorage.removeItem(g)}),this.trigger("telemetry:sent"),[2]}})})},n}(Nt.Ss);const LP=DP;var is=function(){return is=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},is.apply(this,arguments)},sh=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{f(e.next(h))}catch(g){s(g)}}function c(h){try{f(e.throw(h))}catch(g){s(g)}}function f(h){h.done?o(h.value):r(h.value).then(u,c)}f((e=e.apply(a,n||[])).next())})},lh=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,f[0]&&(t=0)),t;)try{if(e=1,r&&(o=f[0]&2?r.return:f[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,f[1])).done)return o;switch(r=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=n.call(a,t)}catch(h){f=[6,h],r=0}finally{e=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},jP=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},VP=function(){function a(n,t){n===void 0&&(n={}),t===void 0&&(t={});var e;this.html=cn;var r=wy();this.config=is(is(is({},r),n),{pStylePrefix:(e=n.stylePrefix)!==null&&e!==void 0?e:r.stylePrefix}),this.em=new PP(this.config),this.$=t.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(a.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DataSources",{get:function(){return this.em.DataSources},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(n){return this.em.getConfig(n)},a.prototype.getHtml=function(n){return this.em.getHtml(n)},a.prototype.getCss=function(n){return this.em.getCss(n)},a.prototype.getJs=function(n){return this.em.getJs(n)},a.prototype.getComponents=function(){return this.Components.getComponents()},a.prototype.getWrapper=function(){return this.Components.getWrapper()},a.prototype.setComponents=function(n,t){return t===void 0&&(t={}),this.em.setComponents(n,t),this},a.prototype.addComponents=function(n,t){return this.getWrapper().append(n,t)},a.prototype.getStyle=function(){return this.em.Css.getAll()},a.prototype.setStyle=function(n,t){return t===void 0&&(t={}),this.em.setStyle(n,t),this},a.prototype.addStyle=function(n,t){return t===void 0&&(t={}),this.em.addStyle(n,t)},a.prototype.getSelected=function(){return this.em.getSelected()},a.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},a.prototype.getSelectedToStyle=function(){var n=this.em.getSelected();if(n)return this.StyleManager.getModelToStyle(n)},a.prototype.select=function(n,t){return this.em.setSelected(n,t),this},a.prototype.selectAdd=function(n){return this.em.addSelected(n),this},a.prototype.selectRemove=function(n){return this.em.removeSelected(n),this},a.prototype.selectToggle=function(n){return this.em.toggleSelected(n),this},a.prototype.getEditing=function(){return this.em.getEditing()},a.prototype.setDevice=function(n){return this.em.set("device",n),this},a.prototype.getDevice=function(){return this.em.get("device")},a.prototype.runCommand=function(n,t){return t===void 0&&(t={}),this.Commands.run(n,t)},a.prototype.stopCommand=function(n,t){return t===void 0&&(t={}),this.Commands.stop(n,t)},a.prototype.store=function(n){return sh(this,void 0,void 0,function(){return lh(this,function(t){switch(t.label){case 0:return[4,this.em.store(n)];case 1:return[2,t.sent()]}})})},a.prototype.load=function(n){return sh(this,arguments,void 0,function(t,e){return e===void 0&&(e={}),lh(this,function(r){switch(r.label){case 0:return[4,this.em.load(t,e)];case 1:return[2,r.sent()]}})})},a.prototype.getProjectData=function(){return this.em.storeData()},a.prototype.loadProjectData=function(n){return this.em.loadData(n)},a.prototype.storeData=function(){return this.em.storeData()},a.prototype.loadData=function(n){return this.em.loadData(n)},a.prototype.getContainer=function(){return this.config.el},a.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},a.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},a.prototype.refresh=function(n){this.em.refreshCanvas(n)},a.prototype.setCustomRte=function(n){this.RichTextEditor.customRte=n},a.prototype.setCustomParserCss=function(n){return this.Parser.getConfig().parserCss=n,this},a.prototype.setDragMode=function(n){return this.em.setDragMode(n),this},a.prototype.log=function(n,t){return t===void 0&&(t={}),this.em.log(n,t),this},a.prototype.t=function(){for(var n,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(n=this.em).t.apply(n,t)},a.prototype.on=function(n,t){return this.em.on(n,t),this},a.prototype.once=function(n,t){return this.em.once(n,t),this},a.prototype.off=function(n,t){return this.em.off(n,t),this},a.prototype.trigger=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return this.em.trigger.apply(this.em,jP([n],t,!0)),this},a.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},a.prototype.getEl=function(){var n;return(n=this.editorView)===null||n===void 0?void 0:n.el},a.prototype.getModel=function(){return this.em},a.prototype.render=function(){var n;return(n=this.editorView)===null||n===void 0||n.remove(),this.editorView=new LP(this.em),this.editorView.render().el},a.prototype.onReady=function(n){this.em.get("ready")?n(this):this.em.on("load",n)},a}();const IP=VP;var NP=function(a,n){var t=n.get(a);if(!t){var e=(0,Pt.getGlobal)()[a];t=(e==null?void 0:e.default)||e}return t},qv=function(a,n){return(0,k.isString)(a)?NP(a,n):(a==null?void 0:a.default)||a},Yv=function(a,n){a.getModel().logWarning("Plugin ".concat(n," not found"),{context:"plugins",plugin:n})},RP=function(){function a(){this.plugins={}}return a.prototype.add=function(n,t){var e=this.get(n);return e||(this.plugins[n]=t,t)},a.prototype.get=function(n){return this.plugins[n]},a.prototype.getAll=function(){return this.plugins},a}();const FP=RP,HP=function(){var a=function(){for(var t,e=window.navigator.userAgent,r=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],o=0;o<r.length;o++){var s=r[o];if(t=s[1].exec(e),t)break}return!!t};if((0,Pt.hasWin)()&&a()){var n=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(t){return t||(t=""),n.apply(document.implementation,[t])}}};var fu=function(){return fu=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},fu.apply(this,arguments)};HP();var rf=new FP,uh=[],Xv=function(a,n){var t=qv(a,rf);return function(e){t?t(e,n||{}):Yv(e,a)}},Zv={$:Pr.default,editors:uh,plugins:rf,usePlugin:Xv,version:"0.22.3",init:function(a){a===void 0&&(a={});var n=a.headless,t=a.container;if(!t&&!n)throw new Error("'container' is required");var e=fu(fu({autorender:!0,plugins:[],pluginsOpts:{}},a),{grapesjs:this,el:n?void 0:(0,k.isElement)(t)?t:document.querySelector(t)}),r=new IP(e,{$:Pr.default}),o=r.getModel();return e.plugins.forEach(function(s){var u=qv(s,rf),c=e.pluginsOpts[s]||{};u?u(r,c):Yv(r,s)}),o.loadOnStart(),e.autorender&&!n&&r.render(),uh.push(r),r}};const BP=Zv;var UP=fh.Ay,Jv={exports:{}};/*! grapesjs-blocks-basic - 1.0.2 */(function(a,n){(function(t,e){a.exports=e()})(typeof globalThis<"u"?globalThis:typeof window<"u"?window:gy,()=>(()=>{var t={d:(u,c)=>{for(var f in c)t.o(c,f)&&!t.o(u,f)&&Object.defineProperty(u,f,{enumerable:!0,get:c[f]})},o:(u,c)=>Object.prototype.hasOwnProperty.call(u,c),r:u=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>s});var r=function(){return r=Object.assign||function(u){for(var c,f=1,h=arguments.length;f<h;f++)for(var g in c=arguments[f])Object.prototype.hasOwnProperty.call(c,g)&&(u[g]=c[g]);return u},r.apply(this,arguments)},o=function(){return o=Object.assign||function(u){for(var c,f=1,h=arguments.length;f<h;f++)for(var g in c=arguments[f])Object.prototype.hasOwnProperty.call(c,g)&&(u[g]=c[g]);return u},o.apply(this,arguments)};const s=function(u,c){c===void 0&&(c={}),function(f,h){var g=f.BlockManager,y=h.category,_=h.blocks,b=h.stylePrefix,x=h.flexGrid,T=h.rowHeight,I=h.addBasicStyle,z="".concat(b,"row"),F="".concat(b,"cell"),W=x?`
    .`.concat(z,` {
      display: flex;
      justify-content: flex-start;
      align-items: stretch;
      flex-wrap: nowrap;
      padding: 10px;
    }
    @media (max-width: 768px) {
      .`).concat(z,` {
        flex-wrap: wrap;
      }
    }`):`
    .`.concat(z,` {
      display: table;
      padding: 10px;
      width: 100%;
    }
    @media (max-width: 768px) {
      .`).concat(b,"cell, .").concat(b,"cell30, .").concat(b,`cell70 {
        width: 100%;
        display: block;
      }
    }`),ct=x?`
    .`.concat(F,` {
      min-height: `).concat(T,`px;
      flex-grow: 1;
      flex-basis: 100%;
    }`):`
    .`.concat(F,` {
      width: 8%;
      display: table-cell;
      height: `).concat(T,`px;
    }`),_t=`
  .`.concat(b,`cell30 {
    width: 30%;
  }`),xt=`
  .`.concat(b,`cell70 {
    width: 70%;
  }`),ut=1,q={tl:0,tc:0,tr:0,cl:0,cr:0,bl:0,br:0,minDim:ut},nt=r(r({},q),{cr:1,bc:0,currentUnit:1,minDim:ut,step:.2});x&&(nt.keyWidth="flex-basis");var H={class:z,"data-gjs-droppable":".".concat(F),"data-gjs-resizable":q,"data-gjs-name":"Row"},V={class:F,"data-gjs-draggable":".".concat(z),"data-gjs-resizable":nt,"data-gjs-name":"Cell"};x&&(V["data-gjs-unstylable"]=["width"],V["data-gjs-stylable-require"]=["flex-basis"]);var U=[".".concat(z),".".concat(F)];f.on("selector:add",function(Mt){return U.indexOf(Mt.getFullName())>=0&&Mt.set("private",1)});var B=function(Mt){var qt=[];for(var ft in Mt){var At=Mt[ft];At=At instanceof Array||At instanceof Object?JSON.stringify(At):At,qt.push("".concat(ft,"=").concat("'".concat(At,"'")))}return qt.length?" ".concat(qt.join(" ")):""},tt=function(Mt){return _.indexOf(Mt)>=0},A=B(H),yt=B(V),gt={category:y,select:!0};tt("column1")&&g.add("column1",r(r({},gt),{label:h.labelColumn1,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M2 20h20V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h20a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1Z"/>
      </svg>`,content:"<div ".concat(A,`>
        <div `).concat(yt,`></div>
      </div>
      `).concat(I?`<style>
          `.concat(W,`
          `).concat(ct,`
        </style>`):"")})),tt("column2")&&g.add("column2",r(r({},gt),{label:h.labelColumn2,media:`<svg viewBox="0 0 23 24">
        <path fill="currentColor" d="M2 20h8V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1ZM13 20h8V4h-8v16Zm-1 0V4a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1Z"/>
      </svg>`,content:"<div ".concat(A,`>
        <div `).concat(yt,`></div>
        <div `).concat(yt,`></div>
      </div>
      `).concat(I?`<style>
          `.concat(W,`
          `).concat(ct,`
        </style>`):"")})),tt("column3")&&g.add("column3",r(r({},gt),{label:h.labelColumn3,media:`<svg viewBox="0 0 23 24">
        <path fill="currentColor" d="M2 20h4V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1ZM17 20h4V4h-4v16Zm-1 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1ZM9.5 20h4V4h-4v16Zm-1 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1Z"/>
      </svg>`,content:"<div ".concat(A,`>
        <div `).concat(yt,`></div>
        <div `).concat(yt,`></div>
        <div `).concat(yt,`></div>
      </div>
      `).concat(I?`<style>
          `.concat(W,`
          `).concat(ct,`
        </style>`):"")})),tt("column3-7")&&g.add("column3-7",r(r({},gt),{label:h.labelColumn37,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M2 20h5V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1ZM10 20h12V4H10v16Zm-1 0V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1Z"/>
      </svg>`,content:"<div ".concat(A,`>
        <div `).concat(yt," style='").concat(x?"flex-basis":"width",`: 30%;'></div>
        <div `).concat(yt," style='").concat(x?"flex-basis":"width",`: 70%;'></div>
      </div>
      `).concat(I?`<style>
          `.concat(W,`
          `).concat(ct,`
          `).concat(_t,`
          `).concat(xt,`
        </style>`):"")})),tt("text")&&g.add("text",r(r({},gt),{activate:!0,label:h.labelText,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M18.5,4L19.66,8.35L18.7,8.61C18.25,7.74 17.79,6.87 17.26,6.43C16.73,6 16.11,6 15.5,6H13V16.5C13,17 13,17.5 13.33,17.75C13.67,18 14.33,18 15,18V19H9V18C9.67,18 10.33,18 10.67,17.75C11,17.5 11,17 11,16.5V6H8.5C7.89,6 7.27,6 6.74,6.43C6.21,6.87 5.75,7.74 5.3,8.61L4.34,8.35L5.5,4H18.5Z" />
      </svg>`,content:{type:"text",content:"Insert your text here",style:{padding:"10px"}}})),tt("link")&&g.add("link",r(r({},gt),{label:h.labelLink,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
      </svg>`,content:{type:"link",content:"Link",style:{color:"#d983a6"}}})),tt("image")&&g.add("image",r(r({},gt),{activate:!0,label:h.labelImage,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M21,3H3C2,3 1,4 1,5V19A2,2 0 0,0 3,21H21C22,21 23,20 23,19V5C23,4 22,3 21,3M5,17L8.5,12.5L11,15.5L14.5,11L19,17H5Z" />
      </svg>`,content:{style:{color:"black"},type:"image"}})),tt("video")&&g.add("video",r(r({},gt),{label:h.labelVideo,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z" />
      </svg>`,content:{type:"video",src:"img/video2.webm",style:{height:"350px",width:"615px"}}})),tt("map")&&g.add("map",r(r({},gt),{label:h.labelMap,media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M20.5,3L20.34,3.03L15,5.1L9,3L3.36,4.9C3.15,4.97 3,5.15 3,5.38V20.5A0.5,0.5 0 0,0 3.5,21L3.66,20.97L9,18.9L15,21L20.64,19.1C20.85,19.03 21,18.85 21,18.62V3.5A0.5,0.5 0 0,0 20.5,3M10,5.47L14,6.87V18.53L10,17.13V5.47M5,6.46L8,5.45V17.15L5,18.31V6.46M19,17.54L16,18.55V6.86L19,5.7V17.54Z" />
      </svg>`,content:{type:"map",style:{height:"350px"}}}))}(u,o({blocks:["column1","column2","column3","column3-7","text","link","image","video","map"],flexGrid:!1,stylePrefix:"gjs-",addBasicStyle:!0,category:"Basic",labelColumn1:"1 Column",labelColumn2:"2 Columns",labelColumn3:"3 Columns",labelColumn37:"2 Columns 3/7",labelText:"Text",labelLink:"Link",labelImage:"Image",labelVideo:"Video",labelMap:"Map",rowHeight:75},c))};return e})())})(Jv);var WP=Jv.exports;const ch=yy(WP),zP=`<header class="antialiased">
    <nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800">
        <div class="flex flex-wrap justify-between items-center">
            <div class="flex justify-start items-center">
             Icon here
              </div>
               <div class="flex justify-start items-center">
           Custom header content
              </div>
            <div class="flex items-center lg:order-2">
               Content here
            </div>
        </div>
    </nav>
  </header>`,KP=`<footer class="text-gray-600 body-font">
  <div class="container px-5 py-8 mx-auto flex items-center sm:flex-row flex-col">
    <a class="flex title-font font-medium items-center md:justify-start justify-center text-gray-900">

      <span class="ml-3 text-xl">Footer placeholder content</span>
    </a>
    <p class="text-sm text-gray-500 sm:ml-4 sm:pl-4 sm:border-l-2 sm:border-gray-200 sm:py-2 sm:mt-0 mt-4">insert footer code here
    </p>
    <span class="inline-flex sm:ml-auto sm:mt-0 mt-4 justify-center sm:justify-start">
      <a class="text-gray-500">
        <svg fill="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-5 h-5" viewBox="0 0 24 24">
          <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"></path>
        </svg>
      </a>
      <a class="ml-3 text-gray-500">
        <svg fill="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-5 h-5" viewBox="0 0 24 24">
          <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"></path>
        </svg>
      </a>
      <a class="ml-3 text-gray-500">
        <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-5 h-5" viewBox="0 0 24 24">
          <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
          <path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37zm1.5-4.87h.01"></path>
        </svg>
      </a>
      <a class="ml-3 text-gray-500">
        <svg fill="currentColor" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="0" class="w-5 h-5" viewBox="0 0 24 24">
          <path stroke="none" d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z"></path>
          <circle cx="4" cy="4" r="2" stroke="none"></circle>
        </svg>
      </a>
    </span>
  </div>
</footer>`,GP=`<section class="text-gray-600 body-font">
  <div class="container px-5 py-24 mx-auto">
    <div class="flex flex-wrap -m-4">
      <div class="xl:w-1/4 md:w-1/2 p-4">
        <div class="bg-gray-100 p-6 rounded-lg">
          <img class="h-40 rounded w-full object-cover object-center mb-6" src="https://dummyimage.com/720x400" alt="content">
          <h3 class="tracking-widest text-indigo-500 text-xs font-medium title-font">SUBTITLE</h3>
          <h2 class="text-lg text-gray-900 font-medium title-font mb-4">Chichen Itza</h2>
          <p class="leading-relaxed text-base">Fingerstache flexitarian street art 8-bit waistcoat. Distillery hexagon disrupt edison bulbche.</p>
        </div>
      </div>
      <div class="xl:w-1/4 md:w-1/2 p-4">
        <div class="bg-gray-100 p-6 rounded-lg">
          <img class="h-40 rounded w-full object-cover object-center mb-6" src="https://dummyimage.com/721x401" alt="content">
          <h3 class="tracking-widest text-indigo-500 text-xs font-medium title-font">SUBTITLE</h3>
          <h2 class="text-lg text-gray-900 font-medium title-font mb-4">Colosseum Roma</h2>
          <p class="leading-relaxed text-base">Fingerstache flexitarian street art 8-bit waistcoat. Distillery hexagon disrupt edison bulbche.</p>
        </div>
      </div>
      <div class="xl:w-1/4 md:w-1/2 p-4">
        <div class="bg-gray-100 p-6 rounded-lg">
          <img class="h-40 rounded w-full object-cover object-center mb-6" src="https://dummyimage.com/722x402" alt="content">
          <h3 class="tracking-widest text-indigo-500 text-xs font-medium title-font">SUBTITLE</h3>
          <h2 class="text-lg text-gray-900 font-medium title-font mb-4">Great Pyramid of Giza</h2>
          <p class="leading-relaxed text-base">Fingerstache flexitarian street art 8-bit waistcoat. Distillery hexagon disrupt edison bulbche.</p>
        </div>
      </div>
      <div class="xl:w-1/4 md:w-1/2 p-4">
        <div class="bg-gray-100 p-6 rounded-lg">
          <img class="h-40 rounded w-full object-cover object-center mb-6" src="https://dummyimage.com/723x403" alt="content">
          <h3 class="tracking-widest text-indigo-500 text-xs font-medium title-font">SUBTITLE</h3>
          <h2 class="text-lg text-gray-900 font-medium title-font mb-4">San Francisco</h2>
          <p class="leading-relaxed text-base">Fingerstache flexitarian street art 8-bit waistcoat. Distillery hexagon disrupt edison bulbche.</p>
        </div>
      </div>
    </div>
  </div>
</section>`;var nf=`${baseurl}/admin/pagepage/${page_pages[0]}`;console.log(nf);const $P=document.querySelector('meta[name="csrf-token"]').getAttribute("content");editor=UP.init({container:"#gjs",fromElement:!0,height:"85vh",canvas:{styles:[tailwindcsspath]},plugins:[ch],storageManager:{type:"remote",autosave:!0,autoload:!0,stepsBeforeSave:1,options:{remote:{urlLoad:nf+"/data",urlStore:nf+"/update",headers:{"X-CSRF-TOKEN":$P,"Content-Type":"application/json"},fetchOptions:a=>a.method==="POST"?{method:"PATCH"}:{},onStore:a=>({id:page_pages[0],data:a}),onLoad:a=>a.data}}},pluginsOpts:{[ch]:{flexGrid:!0}}});editor.BlockManager.add("gpt-enabled-text",{label:"GPT enabled div",category:"GPT enabled Blocks",attributes:{class:"fas fa-robot"},media:`<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-robot" viewBox="0 0 16 16">
  <path d="M6 12.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5M3 8.062C3 6.76 4.235 5.765 5.53 5.886a26.6 26.6 0 0 0 4.94 0C11.765 5.765 13 6.76 13 8.062v1.157a.93.93 0 0 1-.765.935c-.845.147-2.34.346-4.235.346s-3.39-.2-4.235-.346A.93.93 0 0 1 3 9.219zm4.542-.827a.25.25 0 0 0-.217.068l-.92.9a25 25 0 0 1-1.871-.183.25.25 0 0 0-.068.495c.55.076 1.232.149 2.02.193a.25.25 0 0 0 .189-.071l.754-.736.847 1.71a.25.25 0 0 0 .404.062l.932-.97a25 25 0 0 0 1.922-.188.25.25 0 0 0-.068-.495c-.538.074-1.207.145-1.98.189a.25.25 0 0 0-.166.076l-.754.785-.842-1.7a.25.25 0 0 0-.182-.135"/>
  <path d="M8.5 1.866a1 1 0 1 0-1 0V3h-2A4.5 4.5 0 0 0 1 7.5V8a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1v1a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-1a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1v-.5A4.5 4.5 0 0 0 10.5 3h-2zM14 7.5V13a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7.5A3.5 3.5 0 0 1 5.5 4h5A3.5 3.5 0 0 1 14 7.5"/>
</svg>`,content:{type:"gpt-enabled-text",content:'<div class="gpt-enabled-text">This is a block with custom data attributes.</div>'},style:`
      .gpt-enabled-text {
        padding: 20px;
        background-color: #f4f4f4;
        border: 1px solid #ddd;
        text-align: center;
      }
    `});editor.DomComponents.addType("gpt-enabled-text",{model:{defaults:{tagName:"div",classes:["gpt-enabled-text"],droppable:!0,traits:[{type:"text",label:"Prompt for this field",name:"data-prompt-attr",changeProp:1},{type:"text",label:"Default content",name:"data-default-attr",changeProp:1}]},init(){this.on("change:data-prompt-attr",this.handleAttrChange),this.on("change:data-default-attr",this.handleAttrChange)},handleAttrChange(){console.log("Custom attribute updated:",this.getAttributes()["data-prompt-attr"]),console.log("Custom attribute updated:",this.getAttributes()["data-default-attr"])}},view:{onRender(){console.log("Custom block rendered with attributes:",this.model.getAttributes())}}});editor.BlockManager.add("gpt-enabled-header",{label:"GPT enabled header",category:"GPT enabled Blocks",attributes:{class:""},media:`<svg
   fill="currentColor"
   class="bi bi-layout-sidebar"
   viewBox="0 0 16 16"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <path
     d="m 13,0 a 2,2 0 0 1 2,2 v 12 a 2,2 0 0 1 -2,2 H 3 A 2,2 0 0 1 1,14 V 2 A 2,2 0 0 1 3,0 Z m 1,5 H 2 v 9 a 1,1 0 0 0 1,1 h 10 a 1,1 0 0 0 1,-1 z M 14,4 V 2 A 1,1 0 0 0 13,1 H 3 A 1,1 0 0 0 2,2 v 2 z"
     id="path10" />
</svg>`,content:{type:"gpt-enabled-header",content:zP}});editor.DomComponents.addType("gpt-enabled-header",{model:{defaults:{tagName:"gpt-enabled-header",classes:["gpt-enabled-header"],droppable:!0,traits:[{type:"text",label:"Prompt for this field",name:"data-prompt-attr",changeProp:1},{type:"text",label:"Default content",name:"data-default-attr",changeProp:1}]},init(){this.on("change:data-prompt-attr",this.handleAttrChange),this.on("change:data-default-attr",this.handleAttrChange)},handleAttrChange(){console.log("Custom attribute updated:",this.getAttributes()["data-prompt-attr"]),console.log("Custom attribute updated:",this.getAttributes()["data-default-attr"])}},view:{onRender(){console.log("Custom block rendered with attributes:",this.model.getAttributes())}}});editor.BlockManager.add("gpt-enabled-footer",{label:"GPT enabled footer",category:"GPT enabled Blocks",attributes:{class:""},media:`<svg
   fill="currentColor"
   class="bi bi-layout-sidebar"
   viewBox="0 0 16 16"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">

  <path
     d="M 3,16 A 2,2 0 0 1 1,14 V 2 A 2,2 0 0 1 3,0 h 10 a 2,2 0 0 1 2,2 v 12 a 2,2 0 0 1 -2,2 z M 2,11 H 14 V 2 A 1,1 0 0 0 13,1 H 3 A 1,1 0 0 0 2,2 Z m 0,1 v 2 a 1,1 0 0 0 1,1 h 10 a 1,1 0 0 0 1,-1 v -2 z"
     id="path10" />
</svg>
`,content:{type:"gpt-enabled-footer",content:KP}});editor.DomComponents.addType("gpt-enabled-footer",{model:{defaults:{tagName:"gpt-enabled-footer",classes:["gpt-enabled-footer"],droppable:!0,traits:[{type:"text",label:"Prompt for this field",name:"data-prompt-attr",changeProp:1},{type:"text",label:"Default content",name:"data-default-attr",changeProp:1}]},init(){this.on("change:data-prompt-attr",this.handleAttrChange),this.on("change:data-default-attr",this.handleAttrChange)},handleAttrChange(){console.log("Custom attribute updated:",this.getAttributes()["data-prompt-attr"]),console.log("Custom attribute updated:",this.getAttributes()["data-default-attr"])}},view:{onRender(){console.log("Custom block rendered with attributes:",this.model.getAttributes())}}});editor.BlockManager.add("gpt-enabled-keypoints_section",{label:"GPT enabled grid",category:"GPT enabled Blocks",attributes:{class:""},media:`<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-grid-3x2-gap" viewBox="0 0 16 16">
  <path d="M4 4v2H2V4zm1 7V9a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1m0-5V4a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1m5 5V9a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1m0-5V4a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1M9 4v2H7V4zm5 0h-2v2h2zM4 9v2H2V9zm5 0v2H7V9zm5 0v2h-2V9zm-3-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1zm1 4a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1z"/>
</svg>`,content:{type:"gpt-enabled-keypoints_section",content:GP}});editor.DomComponents.addType("gpt-enabled-keypoints_section",{model:{defaults:{tagName:"gpt-enabled-keypoints_section",classes:["gpt-enabled-keypoints_section"],droppable:!0}},view:{onRender(){console.log("Custom block rendered with attributes:",this.model.getAttributes())}}});editor.on("load",()=>{editor.Panels.getButton("views","open-blocks").set("active",1)});editor.on("storage:start",a=>{console.log("Storage start"),console.log(a)});editor.on("storage:end:store",()=>{console.log("Storage store request ended")});editor.on("storage:error:store",a=>{console.log("Error on store"),console.log(a)});editor.Panels.addButton("options",[{id:"undo",className:"fa fa-undo",command:"core:undo"},{id:"redo",className:"fa fa-repeat",command:"core:redo"}]);
